


<!DOCTYPE html>
<html class="no-js">
  
<!-- Mirrored from www.twilio.com/docs/tutorials/walkthrough/automated-survey/ruby/sinatra by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:09:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
	<!-- Optimizely -->
	<script src="https://cdn.optimizely.com/js/6082066.js"></script>

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width">
    
<meta name="description" content="Using Twilio you can build automated surveys that call your customer at the point of service to get immediate feedback. Companies like Survey Monkey are using automated surveys to create better customer experiences. &quot;No one else can offer a poll at 6:00pm and get results by 6:30pm,&quot; says Chuck Groom, head of engineering at Survey Monkey&#39;s Seattle office. &quot;And what takes the best vendors 3 to 5 days we can accomplish in just two hours.&quot;
Follow along with this simple tutorial to see the code necessary to implement automated surveys that integrate directly with your CRM and customer database.">

    

    <title>
      Automated Survey - Ruby / Sinatra Tutorial - Twilio
    </title>

    <link rel="canonical" href="https://www.twilio.com/docs/tutorials/walkthrough/automated-survey/ruby/sinatra" />

    
    <link rel="shortcut icon" href="https://www.twilio.com/docs/static/img/favicons/favicon.db41f19ea294.ico"/>
    <link rel="apple-touch-icon" href="https://www.twilio.com/docs/static/img/favicons/favicon_57.98200b6899e6.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="https://www.twilio.com/docs/static/img/favicons/favicon_72.86ae17486256.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="https://www.twilio.com/docs/static/img/favicons/favicon_114.ee1859950ad4.png"/>

    
    <link rel="stylesheet" type="text/css" href="http://cloud.typography.com/6230892/752864/css/fonts.css">
    <link rel="stylesheet" href="https://www.twilio.com/docs/static/css/font-awesome.min.295235b28b6e.css" />
    <link rel="stylesheet" href="https://www.twilio.com/docs/static/css/twilio-icons.45de73e993f2.css" />
    <link rel="stylesheet" href="https://www.twilio.com/docs/static/css/font-mfizz.818f36cb00cc.css" />

    
    
    
    
    <meta property="og:url" content="https://www.twilio.com?utm_source=docs&utm_medium=social&utm_campaign=guides_tags">

    
    
    
    

    
    

    

    
      <link rel="stylesheet" href="https://www.twilio.com/docs/static/css/docs.min.05ed18599e08.css" />
    

    
    
<link rel="stylesheet" href="https://www.twilio.com/docs/static/legacy/walkthrough.css" />


    
    <script>
  var twilio = twilio || {};
  twilio.realm = "prod";
  twilio.SWIFTYPE_ENGINE_KEY = "T68bXEBf7NaKzyRpvbnG";
</script>


<script>
  twilio.account = twilio.account || {};
  

  twilio.user = twilio.user || {};
  
  

</script>


    <script>
  
  window.userBetaFeatures = ["enable-video-rooms", "marketplace"];
</script>

  </head>

  <body class="
    
      tutorials
    
    
    
  ">

    

	
	<!-- Google Tag Manager -->
	<noscript><iframe src="http://www.googletagmanager.com/ns.html?id=GTM-MWRD6S"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window, document, 'script', 'dataLayer', 'GTM-MWRD6S');</script>
	<!-- End Google Tag Manager -->
	



    
    <div role="drawer" class="nav__drawer">
  <div role="drawer__wrapper" class="nav__drawer-wrapper">
    <div role="drawer__nav" class="nav__drawer-nav"><span class="nav__drawer-auth"><a href="https://www.twilio.com/login" class="nav__drawer-auth-link">Log In</a><a href="https://www.twilio.com/try-twilio" class="nav__drawer-auth-link">Sign Up</a></span><a href="#close" role="drawer__close" class="nav__drawer-close">Close</a></div>
    <div class="nav__drawer-menu">
      <div class="nav__drawer-container">
        <div class="nav__drawer-grid">
          <div class="nav__drawer-section">
            <div role="drawer__header" class="nav__drawer-header">Products</div>
            <div role="drawer__dropdown" class="nav__drawer-dropdown">
              <div class="nav__drawer-column">
                <ul>
                  <li><a href="https://www.twilio.com/voice-video" class="nav__drawer-link nav__drawer-link--category">Voice &amp; Video</a></li>
                  <li><a href="https://www.twilio.com/voice" class="nav__drawer-link">Programmable Voice</a></li>
                  <li><a href="https://www.twilio.com/video" class="nav__drawer-link">Programmable Video</a></li>
                  <li><a href="https://www.twilio.com/sip-trunking" class="nav__drawer-link">Elastic SIP Trunking</a></li>
                  <li><a href="https://www.twilio.com/taskrouter" class="nav__drawer-link">TaskRouter</a></li>
                  <li><a href="https://www.twilio.com/stun-turn" class="nav__drawer-link">Network Traversal</a></li>
                </ul>
                <ul>
                  <li><a href="https://www.twilio.com/messaging" class="nav__drawer-link nav__drawer-link--category">Messaging</a></li>
                  <li><a href="https://www.twilio.com/sms" class="nav__drawer-link">Programmable SMS</a></li>
                  <li><a href="https://www.twilio.com/chat" class="nav__drawer-link">Programmable Chat</a></li>
                  <li><a href="https://www.twilio.com/notify" class="nav__drawer-link">Notify</a></li>
                </ul>
              </div>
              <div class="nav__drawer-column">
                <ul>
                  <li>
                    <div class="nav__drawer-link nav__drawer-link--category">Authentication</div>
                  </li>
                  <li><a href="https://www.twilio.com/authy" class="nav__drawer-link">Authy</a></li>
                </ul>
                <ul>
                  <li>
                    <div class="nav__drawer-link nav__drawer-link--category">Connectivity</div>
                  </li>
                  <li><a href="https://www.twilio.com/lookup" class="nav__drawer-link">Lookup</a></li>
                  <li><a href="https://www.twilio.com/phone-numbers" class="nav__drawer-link">Phone Numbers</a></li>
                  <li><a href="https://www.twilio.com/wireless" class="nav__drawer-link">Programmable Wireless</a></li>
                  <li><a href="https://www.twilio.com/sync" class="nav__drawer-link">Sync</a></li>
                </ul>
                <ul>
                  <li>
                    <div class="nav__drawer-link nav__drawer-link--category">Marketplace</div>
                  </li>
                  <li><a href="https://www.twilio.com/marketplace/add-ons" class="nav__drawer-link">Add-ons</a></li>
                </ul>
                <ul>
                  <li>
                    <div class="nav__drawer-link nav__drawer-link--category">Platform</div>
                  </li>
                  <li><a href="https://www.twilio.com/enterprise" class="nav__drawer-link">Enterprise Plan</a></li>
                  <li><a href="https://www.twilio.com/interconnect" class="nav__drawer-link">Interconnect</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="nav__drawer-section">
            <div role="drawer__header" class="nav__drawer-header">Use Cases</div>
            <div role="drawer__dropdown" class="nav__drawer-dropdown">
              <ul>
                <li><a href="https://www.twilio.com/use-cases/access-security" class="nav__drawer-link nav__drawer-link--category">Access Security</a></li>
                <li><a href="https://www.twilio.com/use-cases/call-and-text-marketing" class="nav__drawer-link nav__drawer-link--category">Call &amp; Text Marketing</a></li>
                <li><a href="https://www.twilio.com/use-cases/collaboration" class="nav__drawer-link nav__drawer-link--category">Collaboration</a></li>
                <li><a href="https://www.twilio.com/use-cases/commerce-communications" class="nav__drawer-link nav__drawer-link--category">Commerce Communications</a></li>
                <li><a href="https://www.twilio.com/use-cases/contact-center" class="nav__drawer-link nav__drawer-link--category">Contact Center</a></li>
              </ul>
              <hr>
            </div>
            <div>
              <div class="nav__drawer-column">
                <ul>
                  <li><a href="https://customers.twilio.com/" class="nav__drawer-link nav__drawer-link--small">Customer Stories</a></li>
                  <li><a href="https://www.twilio.com/showcase" class="nav__drawer-link nav__drawer-link--small">Partner Showcase</a></li>
                  <li><a href="https://www.twilio.com/what-is-cloud-communications?" class="nav__drawer-link nav__drawer-link--small">Why Twilio?</a></li>
                  <li><a href="https://www.twilio.com/support-plans" class="nav__drawer-link nav__drawer-link--small">Support Plans</a></li>
                  <li><a href="http://status.twilio.com/" class="nav__drawer-link nav__drawer-link--small">Status</a></li>
                </ul>
              </div>
              <div class="nav__drawer-column">
                <ul>
                  <li><a href="https://www.twilio.com/docs" class="nav__drawer-link nav__drawer-link--small">API &amp; Docs</a></li>
                  <li><a href="https://www.twilio.com/blog" class="nav__drawer-link nav__drawer-link--small">Blog</a></li>
                  <li><a href="https://www.twilio.com/help" class="nav__drawer-link nav__drawer-link--small">Help</a></li>
                  <li><a href="https://www.twilio.com/company/jobs" class="nav__drawer-link nav__drawer-link--small">Jobs at Twilio</a></li>
                </ul>
              </div>
            </div>
            <div class="nav__sales"><a href="https://www.twilio.com/help/sales" class="nav__sales-button">Talk to Sales</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div role="nav" class="nav nav--subnav nav--inverted nav--transparent " data-subnav-length="40">
  <div role="nav__menu" class="nav__header">
    <div class="nav__title"><a href="https://www.twilio.com/" class="nav__logo">Twilio</a></div>
    <nav class="nav__menu">
      <ul class="nav__menu-items">
        <li class="nav__menu-item"></li>
        
        <li class="nav__menu-item">
          <a href="https://www.twilio.com/login" class="nav__menu-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="10.2" height="13.5" viewBox="0 0 10.2 13.5">
              <circle fill="none" stroke="#F22F46" stroke-miterlimit="10" cx="5.1" cy="3" r="2.5"></circle>
              <path fill="none" stroke="#F22F46" stroke-miterlimit="10" d="M.5 13.5c0-2.5 2.1-4.6 4.6-4.6s4.6 2.1 4.6 4.6"></path>
            </svg>
            Log In
          </a>
        </li>
        <li class="nav__menu-item">
          <a href="https://www.twilio.com/try-twilio" class="nav__menu-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 13 13">
              <path d="M0 6.5h13M6.5 0v13" fill="none" stroke="#F22F46" stroke-miterlimit="10"></path>
            </svg>
            Sign Up
          </a>
        </li>
        
        <li class="nav__menu-item"><a href="#menu" role="nav__activate" class="nav__menu-link nav__menu-activate"><span></span>Menu &amp; Products</a></li>
      </ul>
    </nav>
    <nav role="subnav" class="nav__subnav">
      <header class="nav__subnav-header">
        <a href="https://www.twilio.com/docs" class="nav__subnav-header-link">Docs</a>
        
          <a href="https://www.twilio.com/docs/tutorials" role="subnav__dropdown" 
            class="nav__subnav-link nav__subnav-current">Tutorials</a>
        
      </header>
      <ul role="subnav__items" class="nav__subnav-items">
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/quickstart" class="nav__subnav-link">Quickstart</a>
        </li>
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/guides" class="nav__subnav-link">Guides</a>
        </li>
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/tutorials" class="nav__subnav-link">Tutorials</a>
        </li>
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/api" class="nav__subnav-link">API Reference</a>
        </li>
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/libraries" class="nav__subnav-link">SDKs</a>
        </li>
      </ul>
    </nav>
  </div>
</div>



    
    

<div class="docs__pagenav">
  <div class="uk-container uk-container-center">
    <div class="uk-grid">

      <div class="uk-width-3-4 uk-hidden-small">
        <div class="breadcrumbs">
          <a href="https://www.twilio.com/docs/tutorials">Tutorials</a> &gt;
          <span>
            Automated Survey (Ruby |
            Sinatra)
          </span>
          <span class="get-the-code">
            <a target="_blank" title="Download Source Code" data-metric="download_source" 
               href="https://github.com/TwilioDevEd/automated-survey-sinatra/archive/master.zip">
              <i class="fa fa-download"></i>
            </a>
            <a target="_blank" title="Visit at GitHub" data-metric="view_source" 
               href="https://github.com/TwilioDevEd/automated-survey-sinatra/tree/master">
              <i class="fa fa-github"></i>
            </a>
          </span>
        </div>
      </div>

      <div class="uk-width-1-1 uk-width-medium-1-4">
        <div class="search">
          <form action="https://www.twilio.com/docs/search" method="GET">
            <div class="wrapper">
              <input id="search-box" name="q" type="text" value="">
            </div>
            <button type="submit">
              <i class="fa fa-fw fa-search"></i>
            </button>
          </form>
        </div>
      </div>

    </div>
  </div>
</div>



    <div class="docs-container">
      <div class="uk-container">
        
        
<div class="viewsaurus-container">
	<div id="viewsaurus" data-title="Automated Surveys in Sinatra">
  <div class="saurus-panes">
    <div class="saurus-prose">
      <div class="saurus-prose-header">
        <div class="title-outer"><span class="step-title">Automated Surveys in Sinatra</span></div>
      </div>
      <div class="saurus-nav-buttons">
        <div class="saurus-nav-button nav-overview">
          <div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div>
          <div class="nav-divider"></div>
        </div>
        <div class="saurus-nav-button nav-previous">
          <div class="saurus-nav-button-inner"><a href="#"> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div>
          <div class="nav-divider"></div>
        </div>
        <div class="saurus-nav-button nav-next clickable">
          <div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div>
        </div>
        <div class="saurus-next-title"><span class="next-title-inner"></span></div>
      </div>
      <div class="saurus-progress-bar"></div>
      <div class="saurus-start">
        <p>Learn to implement automated surveys in your Sinatra web app with Twilio.</p><a href="#0">Start Tutorial</a>
      </div>
      <div class="saurus-content">
<div data-title="Introduction" class="chapter">
  <div data-file="app.rb" class="step"><h2 id="about-this-application">About This Application</h2>
<p>This <a href="http://www.sinatrarb.com/">Sinatra</a> web application performs automated
surveys using Twilio&#39;s voice/sms API and TwiML. Survey takers will interact
with the application through the phone, allowing it to persist the answers
which you can consult later using a survey results page.</p>
<p>For the sake of simplicity this application takes questions and answers
for a single survey. They are loaded when it starts the first time.</p>
<p>Let&#39;s get started!</p>
<hr>
<p><strong>See Also</strong></p>
<ul>
<li><a href="http://www.twilio.com/docs/quickstart/ruby">Twilio Ruby Helper Library</a></li>
<li><a href="http://www.twilio.com/docs/quickstart/ruby/twiml">TwiML: Ruby Quickstart Tutorial</a></li>
<li><a href="http://www.twilio.com/docs/api/twiml">TwiML: Twilio Markup Language</a></li>
<li><a href="http://www.sinatrarb.com/intro.html">Getting started with Sinatra</a></li>
<li><a href="http://datamapper.org/">DataMapper ORM</a></li>
<li><a href="http://www.sinatrarb.com/contrib/config_file.html#label-Modular+Application">Sinatra configuration files</a></li>
</ul>

  </div>
  <div data-title="Preparing Survey" data-file="helpers/datamapper_helper.rb" data-highlight="18-29" class="step"><h2 id="preparing-surveys">Preparing Surveys</h2>
<p>In order to perform automated surveys we first need to have
questions to ask. If the application is configured properly, then a survey
(found on the app&#39;s repository) will be loaded automatically into
the database for your convenience.</p>
<p>You can modify the questions from the survey by cleaning the database,
editing the <a href="http://github.com/TwilioDevEd/automated-survey-sinatra/blob/master/config/questions.yml"><code>config/questions.yml</code></a>
file and then re-running the app.</p>
<p>Now we are going implement the interaction of the caller with the
application, so that users are able to take our survey.</p>

  </div>
  <div data-title="Respond to Twilio's Voice Request" data-file="lib/twiml_generator.rb" data-highlight="2-10" class="step"><h2 id="respond-to-twilio-s-voice-request">Respond to Twilio&#39;s Voice Request</h2>
<p>Whenever one of <a href="http://www.twilio.com/user/account/phone-numbers/incoming">your Twilio phone numbers</a>
receives a call, Twilio will make an HTTP request to the voice request
URL configured under it with the HTTP method specified (either GET
or POST).</p>
<p>For this application, Twilio should be configured to make a GET requests to
the application&#39;s <code>/surveys/voice</code> endpoint. The controller then delegates the
TwiML generation to an abstraction called <code>TwimlGenerator</code>. You&#39;ll find more
details about how to handle this voice request
<a href="http://github.com/TwilioDevEd/automated-survey-sinatra/blob/552af634e29886365f9cd5340efd663ef6b553a3/app.rb#L33-L40">here</a></p>
<p>The <code>TwimlGenerator</code> abstraction will look for our only survey. It will then state
its name and welcome the user using TwiML&#39;s
<a href="https://www.twilio.com/docs/api/twiml/say"><code>Say</code></a> verb. The call will be then redirected
to the first question using the <a href="https://www.twilio.com/docs/api/twiml/redirect"><code>Redirect</code></a>.
verb.</p>
<p>On this next step we&#39;ll handle the request made after the redirect.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="https://www.twilio.com/platform/webhooks">Twilio Webhooks</a></li>
<li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">HTTP Methods</a></li>
<li><a href="https://www.twilio.com/docs/api/twiml/redirect">TwiMLTM Voice: Redirect</a></li>
<li><a href="https://www.twilio.com/docs/api/twiml/your_response">TwiML Voice: Your Response</a></li>
<li><a href="https://www.twilio.com/docs/api/twiml/say">TwiML Voice: Say</a></li>
<li><a href="https://www.twilio.com/docs/api/twiml/redirect">TwiML Voice: Redirect</a></li>
</ul>

  </div>
  <div data-title="Ask the Caller a Question" data-file="lib/twiml_generator.rb" data-highlight="12-24" class="step"><h2 id="ask-the-caller-a-question">Ask the Caller a Question</h2>
<p>In the previous step we redirected our client&#39;s call to another endpoint
that, <a href="http://github.com/TwilioDevEd/automated-survey-sinatra/blob/552af634e29886365f9cd5340efd663ef6b553a3/app.rb#L84-L90">handles the request</a>
and returns further instructions to deliver a question. The first question is
returned using TwiML.</p>
<p>First we will deliver the question and then the
instructions to answer it. These depend on the
type of question we ask. In both cases the app uses the
<a href="https://www.twilio.com/docs/api/twiml/say"><code>Say</code></a> verb.</p>
<p>Finally the app records the caller&#39;s answer to the question.
If the question is of <code>voice</code> kind then we use the
<a href="https://www.twilio.com/docs/api/twiml/record"><code>Record</code></a>
verb. However, if we expect dialpad input, we use the
<a href="https://www.twilio.com/docs/api/twiml/gather"><code>Gather</code></a>
verb. Both verbs take an <code>action</code> attribute and a <code>method</code>
attribute. Twilio will use both attributes to make a
request that we can use to store the caller&#39;s answer to the question.</p>
<p>Since we want to create a new resource in our server, the HTTP
method will be <code>POST</code> for both <code>Gather</code> and <code>Record</code> and
<code>action</code> URL will be like <code>/questions/:question_id/answers</code>.</p>

  </div>
  <div data-title="Persist a Question's Answer" data-file="app.rb" data-highlight="93-111" class="step"><h2 id="persist-a-question-s-answer">Persist a Question&#39;s Answer</h2>
<p>Now, Twilio has made a POST request to the
<code>/questions/:question_id/answers</code> URL.  The request includes
everything we need to record the caller&#39;s answer to our
question. Aside from the <code>question_id</code> parameter, Twilio
includes a <a href="https://www.twilio.com/docs/api/twiml/twilio_request">wealth of
information</a>
with every request. For this sample application we will store
the <code>RecordingUrl</code> or <code>Digits</code> parameter for voice and
<code>yes-no/numeric</code> answers accordingly. The app also
saves the <code>CallSid</code> so we can uniquely identify the <code>origin</code> of the call.</p>
<p>As most surveys include more than a single question, the app should
<a href="http://github.com/TwilioDevEd/automated-survey-sinatra/blob/552af634e29886365f9cd5340efd663ef6b553a3/lib/twiml_generator.rb#L12-L24">redirect the user to the next question</a>
using the <a href="https://www.twilio.com/docs/api/twiml/redirect">Redirect</a> verb
again.</p>
<p>If there are no more questions available in the survey,
<a href="http://github.com/TwilioDevEd/automated-survey-sinatra/blob/552af634e29886365f9cd5340efd663ef6b553a3/lib/twiml_generator.rb#L26-L31">the user will be notified</a> that the surveys has finalized using the
<a href="https://www.twilio.com/docs/api/twiml/say"><code>Say</code></a> verb and dropping the call
using the <a href="https://www.twilio.com/docs/api/twiml/hangup"><code>Hangup</code></a> verb.</p>
<p>Next lets see how to handle SMS driven surveys.</p>

  </div>
  <div data-title="Identifying Survey's SMS Threads" data-file="app.rb" class="step"><h2 id="identifying-survey-s-sms-threads">Identifying Survey&#39;s SMS Threads</h2>
<p>We just saw how to handle surveys over voice calls, it&#39;s time to introduce
how to do it with SMS.</p>
<p>While taking a survey during a phone call, you don&#39;t have trouble to identify
every answer&#39;s <code>origin</code> because the app uses the <code>CallSid</code> parameter for that purpose.
If you try to replicate that behaviour using SMSs, you&#39;d use <code>SmsSid</code>, which is the counterpart
of <code>CallSid</code>. What happens is that you end up having a different <code>origin</code> for every answer,
because every message has a unique <code>SmsSid</code>.</p>
<p>In order to keep track of the conversation required to complete the survey questions,
we&#39;ll use <a href="http://www.twilio.com/help/faq/twilio-basics/how-do-twilio-cookies-work">Twilio cookies</a>.
Then we could add a unique identifier to the conversation, which will be
received in every Twilio SMS request with the same <code>to/from</code> phone numbers.
This allows us to save every answer&#39;s <code>origin</code> properly. The same approach
will be used to deliver the next <code>question_id</code> in the subsequent requests.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="http://www.twilio.com/blog/2014/07/the-definitive-guide-to-sms-conversation-tracking.html">Tracking SMS conversations with Twilio Cookies</a></li>
</ul>

  </div>
  <div data-title="Respond to Twilio's SMS Request" data-file="app.rb" data-highlight="42-66, 119-131" class="step"><h2 id="respond-to-twilio-s-sms-request">Respond to Twilio&#39;s SMS Request</h2>
<p>Once we receive an SMS in our Twilio phone number, Twilio will make an HTTP
GET request to the application&#39;s SMS endpoint <code>/surveys/sms</code>.</p>
<p>If there is no record of a previous SMS conversation, which indicates this is
the first SMS, we add cookies indicating the conversation identifier: <code>origin</code>
and the next question: <code>question_id</code>. Then using the <code>TwimlGenerator</code> <code>generate_for_sms_question</code>
method, the application delivers TwiML instructions to send the first question
to the survey taker.</p>
<p>If the SMS comes with the <code>origin</code> and <code>question_id</code> cookies, it means that the SMS is
part of a conversation, therefore it contains an answer to the referred question.</p>
<p>The application then processes the body content, uses it to persists a new answer
and finally delivers TwiML instructions to send the next question to the
survey taker.</p>

  </div>
  <div data-title="Delivering Questions using the SMS Channel" data-file="lib/twiml_generator.rb" data-highlight="33-43" class="step"><h2 id="delivering-questions-using-sms-channel">Delivering Questions using SMS Channel</h2>
<p>Here the application creates the TwiML necessary for responding to every incoming
SMS from survey taker.
For this purpose we&#39;ll use the <a href="https://www.twilio.com/docs/api/twiml/sms/message"><code>Message</code></a>
verb every single time.</p>
<p>If the method receives a <code>nil</code> value for the <code>question</code> argument, it means
the survey has ended and it will respond with a grateful farewell message.</p>
<p>If it&#39;s the <code>first_time</code> the hash argument is true, then it means it&#39;s the first
message of the conversation. It will include a welcome message and the text of
the first question.</p>
<p>For the rest of the cases it will just respond with the text of the current question.</p>

  </div>
  <div data-file="app.rb" data-highlight="68-81" class="step"><h2 id="display-the-survey-results">Display the survey results</h2>
<p>For this endpoint we simply query the database using
<a href="http://datamapper.org/docs/find.html">data_mapper finder methods</a>
and then display the information within an ERB template. We
display a panel for every question on the survey, and
inside every panel we list the responses from different calls.</p>
<p>You can access this page in the application&#39;s root route <code>/surveys/results</code>.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="http://www.stuartellis.eu/articles/erb/">ERB templates</a></li>
</ul>

  </div>
  <div class="step"><h2 id="where-to-next-">Where to next?</h2>
<p>That&#39;s it!</p>
<p>We have just implemented automated surveys using Ruby and Sinatra.
You should be able to take the survey and see the results under the root route of
the application.</p>
<p>If you&#39;re a Ruby developer working with Twilio, you might also enjoy these
tutorials:</p>
<p><a href="http://www.twilio.com/docs/tutorials/walkthrough/browser-calls/ruby/rails"><strong>Browser-Calls</strong></a></p>
<p>Learn how to use Twilio Client to make browser-to-phone and browser-to-browser calls with ease.</p>
<p><a href="http://www.twilio.com/docs/tutorials/walkthrough/eta-notifications/ruby/rails"><strong>ETA-Notifications</strong></a></p>
<p>Learn how to implement ETA Notifications using Ruby on Rails and Twilio.</p>
<p>Thanks for checking out this tutorial! If you have any feedback
to share with us, we&#39;d love to hear it.
<a href="http://www.twilio.com/help/contact">Contact support</a> to let us know what you think.</p>

  </div>
</div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="app.rb" data-mode="ruby">cmVxdWlyZSAnc2luYXRyYS9iYXNlJwpyZXF1aXJlICdzaW5hdHJhL2NvbmZpZ19maWxlJwpyZXF1aXJlICdzaW5hdHJhL2Nvb2tpZXMnCnJlcXVpcmUgJ3RpbHQvZXJiJwpyZXF1aXJlICdkaWdlc3QnCnJlcXVpcmVfcmVsYXRpdmUgJy4vaGVscGVycy9kYXRhbWFwcGVyX2hlbHBlcicKcmVxdWlyZV9yZWxhdGl2ZSAnLi9oZWxwZXJzL3JlcXVlc3RfaGVscGVyJwpyZXF1aXJlX3JlbGF0aXZlICcuL2xpYi90d2ltbF9nZW5lcmF0b3InCgpFTlZbJ1JBQ0tfRU5WJ10gfHw9ICdkZXZlbG9wbWVudCcKCnJlcXVpcmUgJ2J1bmRsZXInCkJ1bmRsZXIucmVxdWlyZSA6ZGVmYXVsdCwgRU5WWydSQUNLX0VOViddLnRvX3N5bQoKbW9kdWxlIEF1dG9tYXRlZFN1cnZleQogIGNsYXNzIEFwcCA8IFNpbmF0cmE6OkJhc2UKICAgIHNldCA6c2hvd19leGNlcHRpb25zLCBmYWxzZQogICAgc2V0IDpyYWlzZV9lcnJvcnMsIGZhbHNlCiAgICBzZXQgOnJvb3QsIEZpbGUuZGlybmFtZShfX0ZJTEVfXykKCiAgICByZWdpc3RlciBTaW5hdHJhOjpDb25maWdGaWxlCiAgICBjb25maWdfZmlsZSAnY29uZmlnL2FwcC55bWwnCgogICAgRGF0YU1hcHBlckhlbHBlci5zZXR1cChzZXR0aW5ncy5kYXRhYmFzZV91cmwpCiAgICBEYXRhTWFwcGVySGVscGVyLnNlZWRfaWZfZW1wdHkKCiAgICAjIGhvbWUKICAgIGdldCAnLycgZG8KICAgICAgZXJiIDppbmRleAogICAgZW5kCgogICAgIyBzdXJ2ZXlzCiAgICBnZXQgJy9zdXJ2ZXlzL3ZvaWNlJyBkbwogICAgICBzdXJ2ZXkgPSBTdXJ2ZXkuZmlyc3QKICAgICAgdHdpbWwgPSBUd2ltbEdlbmVyYXRvcgogICAgICAgICAgICAgIC5nZW5lcmF0ZV9mb3JfaW5jb21pbmdfY2FsbChzdXJ2ZXksIFJlcXVlc3RIZWxwZXIuYmFzZV91cmwocmVxdWVzdCkpCgogICAgICBjb250ZW50X3R5cGUgJ3RleHQveG1sJwogICAgICB0d2ltbAogICAgZW5kCgogICAgZ2V0ICcvc3VydmV5cy9zbXMnIGRvCiAgICAgIHR3aW1sID0gJycKICAgICAgb3JpZ2luID0gcmVxdWVzdC5jb29raWVzWydvcmlnaW4nXQogICAgICBxdWVzdGlvbl9pZCA9IHJlcXVlc3QuY29va2llc1sncXVlc3Rpb25faWQnXQogICAgICBpZiBmaXJzdF91c2VyX3Ntcz8KICAgICAgICBxdWVzdGlvbiA9IFF1ZXN0aW9uLmdldCgxKQogICAgICAgIGFkZF9xdWVzdGlvbl9pZF90b19jb29raWUocmVzcG9uc2UsIHF1ZXN0aW9uLmlkKQogICAgICAgIGFkZF9vcmlnaW5faWRfdG9fY29va2llKHBhcmFtc1s6U21zU2lkXSkKICAgICAgICB0d2ltbCA9IFR3aW1sR2VuZXJhdG9yLmdlbmVyYXRlX2Zvcl9zbXNfcXVlc3Rpb24ocXVlc3Rpb24sIGZpcnN0X3RpbWU6IHRydWUpCiAgICAgIGVsc2UKICAgICAgICBBbnN3ZXIuY3JlYXRlKAogICAgICAgICAgdXNlcl9pbnB1dDogcGFyYW1zWzpCb2R5XSwKICAgICAgICAgIG9yaWdpbjogb3JpZ2luLAogICAgICAgICAgZnJvbTogcGFyYW1zWzpGcm9tXSwKICAgICAgICAgIHF1ZXN0aW9uX2lkOiBxdWVzdGlvbl9pZC50b19pCiAgICAgICAgKQogICAgICAgIHF1ZXN0aW9uID0gUXVlc3Rpb24uZmluZF9uZXh0KHF1ZXN0aW9uX2lkLnRvX2kpCiAgICAgICAgbmV3X3F1ZXN0aW9uX2lkID0gcXVlc3Rpb24ubmlsPyA/IG5pbCA6IHF1ZXN0aW9uLmlkCiAgICAgICAgYWRkX3F1ZXN0aW9uX2lkX3RvX2Nvb2tpZShyZXNwb25zZSwgbmV3X3F1ZXN0aW9uX2lkKQogICAgICAgIHR3aW1sID0gVHdpbWxHZW5lcmF0b3IuZ2VuZXJhdGVfZm9yX3Ntc19xdWVzdGlvbihxdWVzdGlvbiwgZmlyc3RfdGltZTogZmFsc2UpCiAgICAgIGVuZAoKICAgICAgY29udGVudF90eXBlICd0ZXh0L3htbCcKICAgICAgdHdpbWwKICAgIGVuZAoKICAgIGdldCAnL3N1cnZleXMvcmVzdWx0cycgZG8KICAgICAgc3VydmV5ID0gU3VydmV5LmZpcnN0CiAgICAgIGNhbGxzID0gQW5zd2VyCiAgICAgICAgICAgICAgLmFsbChmaWVsZHM6IFs6aWQsIDpvcmlnaW5dLCB1bmlxdWU6IHRydWUsIG9yZGVyOiBuaWwpCiAgICAgICAgICAgICAgLm1hcCgmOm9yaWdpbikKICAgICAgICAgICAgICAudW5pcQoKICAgICAgYW5zd2Vyc19wZXJfY2FsbCA9IHt9CiAgICAgIGNhbGxzLmVhY2ggZG8gfG9yaWdpbnwKICAgICAgICBhbnN3ZXJzX3Blcl9jYWxsW29yaWdpbl0gPSBBbnN3ZXIuYWxsKG9yaWdpbjogb3JpZ2luKQogICAgICBlbmQKCiAgICAgIGVyYiA6cmVzdWx0cywgbG9jYWxzOiB7IGFuc3dlcnNfcGVyX2NhbGw6IGFuc3dlcnNfcGVyX2NhbGwsIHN1cnZleTogc3VydmV5IH0KICAgIGVuZAoKICAgICMgcXVlc3Rpb25zCiAgICBnZXQgJy9xdWVzdGlvbnMvOnF1ZXN0aW9uX2lkJyBkbwogICAgICBxdWVzdGlvbiA9IFF1ZXN0aW9uLmdldChwYXJhbXNbOnF1ZXN0aW9uX2lkXSkKICAgICAgdHdpbWwgPSBUd2ltbEdlbmVyYXRvci5nZW5lcmF0ZV9mb3Jfdm9pY2VfcXVlc3Rpb24ocXVlc3Rpb24pCgogICAgICBjb250ZW50X3R5cGUgJ3RleHQveG1sJwogICAgICB0d2ltbAogICAgZW5kCgogICAgIyBhbnN3ZXJzCiAgICBwb3N0ICcvcXVlc3Rpb25zLzpxdWVzdGlvbl9pZC9hbnN3ZXJzJyBkbwogICAgICBBbnN3ZXIuY3JlYXRlKAogICAgICAgIHJlY29yZGluZ191cmw6IHBhcmFtc1s6UmVjb3JkaW5nVXJsXSwKICAgICAgICB1c2VyX2lucHV0OiBwYXJhbXNbOkRpZ2l0c10sCiAgICAgICAgb3JpZ2luOiBwYXJhbXNbOkNhbGxTaWRdLAogICAgICAgIGZyb206IHBhcmFtc1s6RnJvbV0sCiAgICAgICAgcXVlc3Rpb25faWQ6IHBhcmFtc1s6cXVlc3Rpb25faWRdLnRvX2kKICAgICAgKQoKICAgICAgbmV4dF9xdWVzdGlvbiA9IFF1ZXN0aW9uLmZpbmRfbmV4dChwYXJhbXNbOnF1ZXN0aW9uX2lkXS50b19pKQogICAgICBpZiBuZXh0X3F1ZXN0aW9uLm5pbD8KICAgICAgICB0d2ltbCA9IFR3aW1sR2VuZXJhdG9yLmdlbmVyYXRlX2Zvcl9leGl0CiAgICAgIGVsc2UKICAgICAgICB0d2ltbCA9IFR3aW1sR2VuZXJhdG9yLmdlbmVyYXRlX2Zvcl92b2ljZV9xdWVzdGlvbihuZXh0X3F1ZXN0aW9uKQogICAgICBlbmQKCiAgICAgIGNvbnRlbnRfdHlwZSAndGV4dC94bWwnCiAgICAgIHR3aW1sCiAgICBlbmQKCiAgICBlcnJvciBkbwogICAgICAnQW4gYXBwbGljYXRpb24gZXJyb3IgaGFzIG9jdXJyZWQnCiAgICBlbmQKCiAgICBwcml2YXRlCgogICAgZGVmIGZpcnN0X3VzZXJfc21zPwogICAgICByZXF1ZXN0LmNvb2tpZXNbJ29yaWdpbiddLnRvX3MuZW1wdHk/IHx8CiAgICAgICAgcmVxdWVzdC5jb29raWVzWydxdWVzdGlvbl9pZCddLnRvX3MuZW1wdHk/CiAgICBlbmQKCiAgICBkZWYgYWRkX3F1ZXN0aW9uX2lkX3RvX2Nvb2tpZShyZXNwb25zZSwgcXVlc3Rpb25faWQpCiAgICAgIHJlc3BvbnNlLnNldF9jb29raWUgJ3F1ZXN0aW9uX2lkJywgdmFsdWU6IHF1ZXN0aW9uX2lkCiAgICBlbmQKCiAgICBkZWYgYWRkX29yaWdpbl9pZF90b19jb29raWUoc21zX3NpZCkKICAgICAgb3JpZ2luID0gRGlnZXN0OjpTSEExLmhleGRpZ2VzdChzbXNfc2lkKQogICAgICByZXNwb25zZS5zZXRfY29va2llICdvcmlnaW4nLCB2YWx1ZTogb3JpZ2luCiAgICBlbmQKICBlbmQKZW5kCg==</textarea>
<textarea class="saurus-file" data-file="helpers/datamapper_helper.rb" data-mode="ruby">cmVxdWlyZSAnZGF0YV9tYXBwZXInCgpyZXF1aXJlX3JlbGF0aXZlICcuLi9tb2RlbHMvc3VydmV5JwpyZXF1aXJlX3JlbGF0aXZlICcuLi9tb2RlbHMvcXVlc3Rpb24nCnJlcXVpcmVfcmVsYXRpdmUgJy4uL21vZGVscy9hbnN3ZXInCgptb2R1bGUgRGF0YU1hcHBlckhlbHBlcgogIGRlZiBzZWxmLnNldHVwKGRhdGFiYXNlX3VybCkKICAgIERhdGFNYXBwZXIuc2V0dXAoOmRlZmF1bHQsIGRhdGFiYXNlX3VybCkKICAgIERhdGFNYXBwZXIuZmluYWxpemUKCiAgICAjIHRoaXMgc2VjdGlvbiBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgdGhlIHRhYmxlcwogICAgU3VydmV5LmF1dG9fdXBncmFkZSEKICAgIFF1ZXN0aW9uLmF1dG9fdXBncmFkZSEKICAgIEFuc3dlci5hdXRvX3VwZ3JhZGUhCiAgZW5kCgogIGRlZiBzZWxmLnNlZWRfaWZfZW1wdHkKICAgIGlmIFN1cnZleS5hbGwuY291bnQgPT0gMAogICAgICBzdXJ2ZXkgPSBTdXJ2ZXkuY3JlYXRlKHRpdGxlOiAnRGVmYXVsdCcpCgogICAgICBxdWVzdGlvbnMgPSBZQU1MLmxvYWRfZmlsZSgnY29uZmlnL3F1ZXN0aW9ucy55bWwnKQogICAgICBxdWVzdGlvbnMuZWFjaCBkbyB8cXwKICAgICAgICBzdXJ2ZXkucXVlc3Rpb25zLmNyZWF0ZShib2R5OiBxWydib2R5J10sIHF1ZXN0aW9uX3R5cGU6IHFbJ3F1ZXN0aW9uX3R5cGUnXSkKICAgICAgZW5kCgogICAgICBzdXJ2ZXkucXVlc3Rpb25zLnNhdmUKICAgIGVuZAogIGVuZAplbmQK</textarea>
<textarea class="saurus-file" data-file="lib/twiml_generator.rb" data-mode="ruby">bW9kdWxlIFR3aW1sR2VuZXJhdG9yCiAgZGVmIHNlbGYuZ2VuZXJhdGVfZm9yX2luY29taW5nX2NhbGwoc3VydmV5LCBiYXNlX3VybCkKICAgIHdlbGNvbWVfbWVzc2FnZSA9ICJUaGFuayB5b3UgZm9yIHRha2luZyB0aGUgI3tzdXJ2ZXkudGl0bGV9IHN1cnZleSIKICAgIHJlZGlyZWN0X3VybCA9ICIje2Jhc2VfdXJsfS9xdWVzdGlvbnMvMSIKCiAgICBUd2lsaW86OlR3aU1MOjpSZXNwb25zZS5uZXcgZG8gfHJ8CiAgICAgIHIuU2F5IHdlbGNvbWVfbWVzc2FnZQogICAgICByLlJlZGlyZWN0IHJlZGlyZWN0X3VybCwgbWV0aG9kOiAnZ2V0JwogICAgZW5kLnRvX3htbAogIGVuZAoKICBkZWYgc2VsZi5nZW5lcmF0ZV9mb3Jfdm9pY2VfcXVlc3Rpb24ocXVlc3Rpb24pCiAgICBhY3Rpb25fdXJsID0gIi9xdWVzdGlvbnMvI3txdWVzdGlvbi5pZH0vYW5zd2VycyIKCiAgICBUd2lsaW86OlR3aU1MOjpSZXNwb25zZS5uZXcgZG8gfHJ8CiAgICAgIHIuU2F5IHF1ZXN0aW9uLmJvZHkKICAgICAgci5TYXkgUXVlc3Rpb25NZXNzYWdlcy5tZXNzYWdlX2ZvcihxdWVzdGlvbi5xdWVzdGlvbl90eXBlKQogICAgICBpZiBxdWVzdGlvbi52b2ljZT8KICAgICAgICByLlJlY29yZCBhY3Rpb246IGFjdGlvbl91cmwsIG1ldGhvZDogJ3Bvc3QnCiAgICAgIGVsc2UKICAgICAgICByLkdhdGhlciBhY3Rpb246IGFjdGlvbl91cmwsIG1ldGhvZDogJ3Bvc3QnCiAgICAgIGVuZAogICAgZW5kLnRvX3htbAogIGVuZAoKICBkZWYgc2VsZi5nZW5lcmF0ZV9mb3JfZXhpdAogICAgVHdpbGlvOjpUd2lNTDo6UmVzcG9uc2UubmV3IGRvIHxyfAogICAgICByLlNheSAnVGhhbmtzIGZvciB5b3VyIHRpbWUuIEdvb2QgYnllJwogICAgICByLkhhbmd1cAogICAgZW5kLnRvX3htbAogIGVuZAoKICBkZWYgc2VsZi5nZW5lcmF0ZV9mb3Jfc21zX3F1ZXN0aW9uKHF1ZXN0aW9uLCBoYXNoID0ge30pCiAgICBpZiBxdWVzdGlvbi5uaWw/CiAgICAgIHJldHVybiByZXNwb25kX3NtcygnVGhhbmsgeW91IGZvciB0YWtpbmcgdGhpcyBzdXJ2ZXkuIEdvb2RieWUhJykKICAgIGVuZAoKICAgIG1zZyA9ICcnCiAgICBtc2cgPDwgJ1RoYW5rIHlvdSBmb3IgdGFraW5nIG91ciBzdXJ2ZXkhJyBpZiBoYXNoWzpmaXJzdF90aW1lXQogICAgbXNnIDw8IHF1ZXN0aW9uLmJvZHkKICAgIG1zZyA8PCBRdWVzdGlvbk1lc3NhZ2VzLm1lc3NhZ2VfZm9yKDp5ZXNub19zbXMpIGlmIHF1ZXN0aW9uLnllc19ubz8KICAgIHJlc3BvbmRfc21zKG1zZykKICBlbmQKCiAgZGVmIHNlbGYucmVzcG9uZF9zbXMobWVzc2FnZSkKICAgIFR3aWxpbzo6VHdpTUw6OlJlc3BvbnNlLm5ldyBkbyB8cnwKICAgICAgci5NZXNzYWdlIG1lc3NhZ2UKICAgIGVuZC50b194bWwKICBlbmQKCiAgcHJpdmF0ZV9jbGFzc19tZXRob2QgOnJlc3BvbmRfc21zCgogIG1vZHVsZSBRdWVzdGlvbk1lc3NhZ2VzCiAgICBkZWYgc2VsZi5tZXNzYWdlX2Zvcih0eXBlKQogICAgICB7CiAgICAgICAgeWVzbm86ICdQbGVhc2UgcHJlc3MgdGhlIDEgZm9yIHllcyBhbmQgdGhlIDAgZm9yIG5vIGFuZCB0aGVuIGhpdCB0aGUgcG91bmQgc2lnbicsCiAgICAgICAgdm9pY2U6ICdQbGVhc2UgcmVjb3JkIHlvdXIgYW5zd2VyIGFmdGVyIHRoZSBiZWVwIGFuZCB0aGVuIGhpdCB0aGUgcG91bmQgc2lnbicsCiAgICAgICAgbnVtZXJpYzogJ1BsZWFzZSBwcmVzcyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDkgYW5kIHRoZW4gaGl0IHRoZSBwb3VuZCBzaWduJywKICAgICAgICB5ZXNub19zbXM6ICIgVHlwZSAnMScgb3IgJzAnLiIKICAgICAgfS5mZXRjaCh0eXBlKQogICAgZW5kCiAgZW5kCmVuZAo=</textarea>
</div>
</div>
      <div class="saurus-overview">
        <ul></ul>
      </div>
    </div>
    <div class="saurus-code">
      <div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div>
      <div class="saurus-editor"></div>
    </div>
    <div class="saurus-explorer">
      <div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/automated-survey-sinatra" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a>
    </div>
  </div>
</div>
</div>

      </div>
    </div>

    
    


<div class="footer" data-swiftype-index="false">
  <div class="uk-container uk-container-center">
    <div class="footer__statement">We can’t wait to see what you build.</div>
    <div class="uk-grid">
      <div class="uk-width-1-1 uk-width-small-1-3 uk-width-medium-1-5">
        <section class="footer__section">
          <header class="footer__header">Products</header>
          <ul class="footer__list">
            <li class="footer__list-item">
              <a href="https://www.twilio.com/voice-video" class="footer__link">Voice &amp; Video</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/messaging" class="footer__link">Messaging</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/authy" class="footer__link">Authentication</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/wireless" class="footer__link">Connected Devices</a>
            </li>
          </ul>
        </section>
      </div>
      <div class="uk-width-1-1 uk-width-small-1-3 uk-width-medium-1-5">
        <section class="footer__section">
          <header class="footer__header">Use Cases</header>
          <ul class="footer__list">
            <li class="footer__list-item">
              <a href="https://www.twilio.com/use-cases/access-security" class="footer__link">Access Security</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/use-cases/contextual-call-center" class="footer__link">Contextual Call Center</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/use-cases/marketplace-communications" class="footer__link">Marketplace Communications</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/use-cases/mobile-messaging" class="footer__link">Mobile Messaging</a>
            </li>
          </ul>
        </section>
      </div>
      <div class="uk-width-1-1 uk-width-small-1-3 uk-width-medium-1-5">
        <section class="footer__section">
          <header class="footer__header">About</header>
          <ul class="footer__list">
            <li class="footer__list-item">
              <a href="https://www.twilio.com/what-is-cloud-communications?" class="footer__link">What is Twilio?</a>
            </li>
            <li class="footer__list-item">
              <a href="https://customers.twilio.com/" class="footer__link">Customers</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/help" class="footer__link">Get Help</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/help/sales" class="footer__link">Talk to Sales</a>
            </li>
          </ul>
        </section>
      </div>
      <div class="uk-width-1-1 uk-width-medium-2-5">
        <section class="footer__section">
  <header class="footer__header">Hits From The Blog</header>
  <ul class="footer__list footer__list">
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/building-an-ivr-with-no-code-by-using-taskrouter-as-a-state-machine.html" class="footer__link">Building an IVR with no code by using TaskRouter as a state machine</a>
    </li>
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/logrole-gives-you-permissions-based-granular-searching-for-twilio-logs.html" class="footer__link">Logrole Gives You Permissions Based, Granular Searching For Twilio Logs</a>
    </li>
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/build-callbacks-with-stamplay-twilio-and-unbounce.html" class="footer__link">Build Callbacks With Stamplay, Twilio and Unbounce</a>
    </li>
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/build-a-basic-call-center-in-just-a-few-minutes-with-twilio.html" class="footer__link">Build a Basic Call Center in Just a Few Minutes with Twilio</a>
    </li>
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/redact-delete-sms-messages-node-js.html" class="footer__link">Redact or Delete SMS Messages as They Arrive with Node.js</a>
    </li>
    
  </ul>

</section>
      </div>
    </div>
    <footer class="footer__footer">
      <div class="footer__logo" title="Twilio">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30">
          <path d="M15 0C6.7 0 0 6.7 0 15s6.7 15 15 15 15-6.7 15-15S23.3 0 15 0zm0 26C8.9 26 4 21.1 4 15S8.9 4 15 4s11 4.9 11 11-4.9 11-11 11z"/>
          <circle cx="18.7" cy="11.3" r="3.1"/>
          <circle cx="18.7" cy="18.7" r="3.1"/>
          <circle cx="11.3" cy="18.7" r="3.1"/>
          <circle cx="11.3" cy="11.3" r="3.1"/>
        </svg>
      </div>
      <ul class="legal__list">
        <li class="legal__list-item">
          <a href="https://www.twilio.com/company" class="legal__link">About Twilio</a>
        </li>
        <li class="legal__list-item">
          <a href="https://www.twilio.com/legal" class="legal__link">Legal</a>
        </li>
        <li class="legal__list-item">Copyright &copy; 2016 Twilio, Inc. 
          <br class="uk-visible-small">All Rights Reserved.
        </li>
      </ul>
    </footer>
  </div>
</div>


    
    <script src="https://www.twilio.com/docs/static/js/vendor.min.16abf41c42de.js"></script>
    

  

  <!-- Mixpanel -->
  <script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
  typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,
    e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);
    mixpanel.init("f71c19735fa6ecc5225ff563285e1794");
    </script>
  

  
    <!-- Heap -->
    <script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o);for(var r=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=r(p[c])};
    heap.load('1541905715');
    </script>
  

  
    <!-- GA -->
    <script type="text/javascript">
    try {
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-2900316-1']);
      _gaq.push(['_setSiteSpeedSampleRate', 50]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    } catch(err) {}

    var _kmq = _kmq || [];
    </script>
  

  
    <!-- Eloqua -->
    <script type="text/javascript">
    var _elqQ = _elqQ || [];
    _elqQ.push(['elqSetSiteId', '815114181']);
    _elqQ.push(['elqTrackPageView']);
    _elqQ.push(['elqUseFirstPartyCookie', 'www.twilio.com']);

    (function () {
      function async_load() {
        var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
        s.src = 'http://img03.en25.com/i/elqCfg.min.js';
        var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
      }
      if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
      else if (window.attachEvent) window.attachEvent('onload', async_load);
    })();
    </script>
  

  
    <!-- Transifex -->
    <script type="text/javascript">
    window.liveSettings = {
      api_key: '4c06c1c5a6b341e591d969476fe2675f'
    };
    </script>
    <script type="text/javascript" src="http://cdn.transifex.com/live.js"></script>
    <style>
    .txlive-langselector { display: none; }
    </style>
  

  



    
      <script src="https://www.twilio.com/docs/static/js/docs.min.0c5bb1abb16f.js"></script>
    

    
    
<script type="text/javascript" src="https://www.twilio.com/docs/static/js-lib/ace/ace.js"></script>
<script type="text/javascript" src="https://www.twilio.com/docs/static/js-lib/ace/theme-monokai.js"></script>

<script type="text/javascript" src="https://www.twilio.com/docs/static/js/walkthrough.min.js"></script>





    

  </body>

<!-- Mirrored from www.twilio.com/docs/tutorials/walkthrough/automated-survey/ruby/sinatra by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:09:54 GMT -->
</html>
