


<!DOCTYPE html>
<html class="no-js">
  
<!-- Mirrored from www.twilio.com/docs/guides/voice/how-to-gather-user-input-via-keypad-in-node-js by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:10:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
	<!-- Optimizely -->
	<script src="https://cdn.optimizely.com/js/6082066.js"></script>

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width">
    
    
    <meta name="description" content="Learn how to gather user input during a Twilio Voice phone call through the phone&#39;s keypad (using DTMF tones) in your Node.js application.">
    
    
    

    <title>
      How to Gather User Input via Keypad (DTMF Tones) in Node.js - Twilio
    </title>

    <link rel="canonical" href="https://www.twilio.com/docs/guides/voice/how-to-gather-user-input-via-keypad-in-node-js" />

    
    <link rel="shortcut icon" href="https://www.twilio.com/docs/static/img/favicons/favicon.db41f19ea294.ico"/>
    <link rel="apple-touch-icon" href="https://www.twilio.com/docs/static/img/favicons/favicon_57.98200b6899e6.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="https://www.twilio.com/docs/static/img/favicons/favicon_72.86ae17486256.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="https://www.twilio.com/docs/static/img/favicons/favicon_114.ee1859950ad4.png"/>

    
    <link rel="stylesheet" type="text/css" href="http://cloud.typography.com/6230892/752864/css/fonts.css">
    <link rel="stylesheet" href="https://www.twilio.com/docs/static/css/font-awesome.min.295235b28b6e.css" />
    <link rel="stylesheet" href="https://www.twilio.com/docs/static/css/twilio-icons.45de73e993f2.css" />
    <link rel="stylesheet" href="https://www.twilio.com/docs/static/css/font-mfizz.818f36cb00cc.css" />

    
    
    <meta property="og:title" content="How to Gather User Input via Keypad (DTMF Tones) in Node.js">
    
    
    <meta property="og:description" content="Learn how to gather user input during a Twilio Voice phone call through the phone&#39;s keypad (using DTMF tones) in your Node.js application.">
    
    
    
    <meta property="og:image" content="https://www.twilio.comhttps://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/social-voice-nodejs.2e16d0ba.fill-1200x630-c100.png">
    
    <meta property="og:url" content="https://www.twilio.com/docs/guides/voice/how-to-gather-user-input-via-keypad-in-node-js?utm_source=docs&utm_medium=social&utm_campaign=guides_tags">

    
    
    <meta name="twitter:title" content="How to Gather User Input via Keypad (DTMF Tones) in Node.js">
    
    
    <meta name="twitter:description" content="Learn how to gather user input during a Twilio Voice phone call through the phone&#39;s keypad (using DTMF tones) in your Node.js application.">
    
    
    
    <meta name="twitter:image" content="https://www.twilio.comhttps://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/social-voice-nodejs.2e16d0ba.fill-1120x600-c100.png">
    <meta name="twitter:card" content="summary_large_image">
    

    
    

    

    
      <link rel="stylesheet" href="https://www.twilio.com/docs/static/css/docs.min.05ed18599e08.css" />
    

    
    

    
    <script>
  var twilio = twilio || {};
  twilio.realm = "prod";
  twilio.SWIFTYPE_ENGINE_KEY = "T68bXEBf7NaKzyRpvbnG";
</script>


<script>
  twilio.account = twilio.account || {};
  

  twilio.user = twilio.user || {};
  
  

</script>


    <script>
  
  window.userBetaFeatures = ["marketplace", "enable-video-rooms"];
</script>

  </head>

  <body class="
    
      guides
    
    
    
  ">

    

	
	<!-- Google Tag Manager -->
	<noscript><iframe src="http://www.googletagmanager.com/ns.html?id=GTM-MWRD6S"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window, document, 'script', 'dataLayer', 'GTM-MWRD6S');</script>
	<!-- End Google Tag Manager -->
	



    
    <div role="drawer" class="nav__drawer">
  <div role="drawer__wrapper" class="nav__drawer-wrapper">
    <div role="drawer__nav" class="nav__drawer-nav"><span class="nav__drawer-auth"><a href="https://www.twilio.com/login" class="nav__drawer-auth-link">Log In</a><a href="https://www.twilio.com/try-twilio" class="nav__drawer-auth-link">Sign Up</a></span><a href="#close" role="drawer__close" class="nav__drawer-close">Close</a></div>
    <div class="nav__drawer-menu">
      <div class="nav__drawer-container">
        <div class="nav__drawer-grid">
          <div class="nav__drawer-section">
            <div role="drawer__header" class="nav__drawer-header">Products</div>
            <div role="drawer__dropdown" class="nav__drawer-dropdown">
              <div class="nav__drawer-column">
                <ul>
                  <li><a href="https://www.twilio.com/voice-video" class="nav__drawer-link nav__drawer-link--category">Voice &amp; Video</a></li>
                  <li><a href="https://www.twilio.com/voice" class="nav__drawer-link">Programmable Voice</a></li>
                  <li><a href="https://www.twilio.com/video" class="nav__drawer-link">Programmable Video</a></li>
                  <li><a href="https://www.twilio.com/sip-trunking" class="nav__drawer-link">Elastic SIP Trunking</a></li>
                  <li><a href="https://www.twilio.com/taskrouter" class="nav__drawer-link">TaskRouter</a></li>
                  <li><a href="https://www.twilio.com/stun-turn" class="nav__drawer-link">Network Traversal</a></li>
                </ul>
                <ul>
                  <li><a href="https://www.twilio.com/messaging" class="nav__drawer-link nav__drawer-link--category">Messaging</a></li>
                  <li><a href="https://www.twilio.com/sms" class="nav__drawer-link">Programmable SMS</a></li>
                  <li><a href="https://www.twilio.com/chat" class="nav__drawer-link">Programmable Chat</a></li>
                  <li><a href="https://www.twilio.com/notify" class="nav__drawer-link">Notify</a></li>
                </ul>
              </div>
              <div class="nav__drawer-column">
                <ul>
                  <li>
                    <div class="nav__drawer-link nav__drawer-link--category">Authentication</div>
                  </li>
                  <li><a href="https://www.twilio.com/authy" class="nav__drawer-link">Authy</a></li>
                </ul>
                <ul>
                  <li>
                    <div class="nav__drawer-link nav__drawer-link--category">Connectivity</div>
                  </li>
                  <li><a href="https://www.twilio.com/lookup" class="nav__drawer-link">Lookup</a></li>
                  <li><a href="https://www.twilio.com/phone-numbers" class="nav__drawer-link">Phone Numbers</a></li>
                  <li><a href="https://www.twilio.com/wireless" class="nav__drawer-link">Programmable Wireless</a></li>
                  <li><a href="https://www.twilio.com/sync" class="nav__drawer-link">Sync</a></li>
                </ul>
                <ul>
                  <li>
                    <div class="nav__drawer-link nav__drawer-link--category">Marketplace</div>
                  </li>
                  <li><a href="https://www.twilio.com/marketplace/add-ons" class="nav__drawer-link">Add-ons</a></li>
                </ul>
                <ul>
                  <li>
                    <div class="nav__drawer-link nav__drawer-link--category">Platform</div>
                  </li>
                  <li><a href="https://www.twilio.com/enterprise" class="nav__drawer-link">Enterprise Plan</a></li>
                  <li><a href="https://www.twilio.com/interconnect" class="nav__drawer-link">Interconnect</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="nav__drawer-section">
            <div role="drawer__header" class="nav__drawer-header">Use Cases</div>
            <div role="drawer__dropdown" class="nav__drawer-dropdown">
              <ul>
                <li><a href="https://www.twilio.com/use-cases/access-security" class="nav__drawer-link nav__drawer-link--category">Access Security</a></li>
                <li><a href="https://www.twilio.com/use-cases/call-and-text-marketing" class="nav__drawer-link nav__drawer-link--category">Call &amp; Text Marketing</a></li>
                <li><a href="https://www.twilio.com/use-cases/collaboration" class="nav__drawer-link nav__drawer-link--category">Collaboration</a></li>
                <li><a href="https://www.twilio.com/use-cases/commerce-communications" class="nav__drawer-link nav__drawer-link--category">Commerce Communications</a></li>
                <li><a href="https://www.twilio.com/use-cases/contact-center" class="nav__drawer-link nav__drawer-link--category">Contact Center</a></li>
              </ul>
              <hr>
            </div>
            <div>
              <div class="nav__drawer-column">
                <ul>
                  <li><a href="https://customers.twilio.com/" class="nav__drawer-link nav__drawer-link--small">Customer Stories</a></li>
                  <li><a href="https://www.twilio.com/showcase" class="nav__drawer-link nav__drawer-link--small">Partner Showcase</a></li>
                  <li><a href="https://www.twilio.com/what-is-cloud-communications?" class="nav__drawer-link nav__drawer-link--small">Why Twilio?</a></li>
                  <li><a href="https://www.twilio.com/support-plans" class="nav__drawer-link nav__drawer-link--small">Support Plans</a></li>
                  <li><a href="http://status.twilio.com/" class="nav__drawer-link nav__drawer-link--small">Status</a></li>
                </ul>
              </div>
              <div class="nav__drawer-column">
                <ul>
                  <li><a href="https://www.twilio.com/docs" class="nav__drawer-link nav__drawer-link--small">API &amp; Docs</a></li>
                  <li><a href="https://www.twilio.com/blog" class="nav__drawer-link nav__drawer-link--small">Blog</a></li>
                  <li><a href="https://www.twilio.com/help" class="nav__drawer-link nav__drawer-link--small">Help</a></li>
                  <li><a href="https://www.twilio.com/company/jobs" class="nav__drawer-link nav__drawer-link--small">Jobs at Twilio</a></li>
                </ul>
              </div>
            </div>
            <div class="nav__sales"><a href="https://www.twilio.com/help/sales" class="nav__sales-button">Talk to Sales</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div role="nav" class="nav nav--subnav nav--inverted nav--transparent " data-subnav-length="40">
  <div role="nav__menu" class="nav__header">
    <div class="nav__title"><a href="https://www.twilio.com/" class="nav__logo">Twilio</a></div>
    <nav class="nav__menu">
      <ul class="nav__menu-items">
        <li class="nav__menu-item"></li>
        
        <li class="nav__menu-item">
          <a href="https://www.twilio.com/login" class="nav__menu-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="10.2" height="13.5" viewBox="0 0 10.2 13.5">
              <circle fill="none" stroke="#F22F46" stroke-miterlimit="10" cx="5.1" cy="3" r="2.5"></circle>
              <path fill="none" stroke="#F22F46" stroke-miterlimit="10" d="M.5 13.5c0-2.5 2.1-4.6 4.6-4.6s4.6 2.1 4.6 4.6"></path>
            </svg>
            Log In
          </a>
        </li>
        <li class="nav__menu-item">
          <a href="https://www.twilio.com/try-twilio" class="nav__menu-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 13 13">
              <path d="M0 6.5h13M6.5 0v13" fill="none" stroke="#F22F46" stroke-miterlimit="10"></path>
            </svg>
            Sign Up
          </a>
        </li>
        
        <li class="nav__menu-item"><a href="#menu" role="nav__activate" class="nav__menu-link nav__menu-activate"><span></span>Menu &amp; Products</a></li>
      </ul>
    </nav>
    <nav role="subnav" class="nav__subnav">
      <header class="nav__subnav-header">
        <a href="https://www.twilio.com/docs" class="nav__subnav-header-link">Docs</a>
        
          <a href="https://www.twilio.com/docs/guides" role="subnav__dropdown" 
            class="nav__subnav-link nav__subnav-current">Guides</a>
        
      </header>
      <ul role="subnav__items" class="nav__subnav-items">
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/quickstart" class="nav__subnav-link">Quickstart</a>
        </li>
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/guides" class="nav__subnav-link">Guides</a>
        </li>
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/tutorials" class="nav__subnav-link">Tutorials</a>
        </li>
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/api" class="nav__subnav-link">API Reference</a>
        </li>
        <li role="subnav__item" class="nav__subnav-item ">
          <a href="https://www.twilio.com/docs/libraries" class="nav__subnav-link">SDKs</a>
        </li>
      </ul>
    </nav>
  </div>
</div>



    
    
      

<div class="docs__pagenav">
  <div class="uk-container uk-container-center">
    <div class="uk-grid">
      <div class="uk-width-3-4 uk-hidden-small">
      
      
        <div class="breadcrumbs">
          
            
          
            
          
            
              <a href="https://www.twilio.com/docs/guides">Guides</a> &gt;
            
          
            
              <a href="https://www.twilio.com/docs/guides/voice">Programmable Voice Guides</a> &gt;
            
          
          <span>Gather User Input via Keypad (DTMF Tones) in Node.js</span>
        </div>
      
      </div>

      
      <div class="uk-width-1-1 uk-width-medium-1-4">
  <div class="search">
    <form action="https://www.twilio.com/docs/search" method="GET">
      <div class="wrapper">
        <input id="search-box" name="q" type="text" value=""/>
      </div>
      <button type="submit">
        <i class="fa fa-fw fa-search"></i>
      </button>
    </form>
  </div>
</div>

    </div>
  </div>
</div>

    

    <div class="docs-container">
      <div class="uk-container">
        
        
  <div class="coderail-container">

    <div class="sidenav-column">
      <div class="theme-switcher uk-hidden-small">
  <div class="theme-wrapper">
    <a data-theme="light" class="selected">
      <i class="fa fa-fw fa-sun-o"></i>
    </a>
    <a data-theme="dark" >
      <i class="fa fa-fw fa-moon-o"></i>
    </a>
  </div>
</div>
      
        <div class="sidenav" data-uk-sticky="{boundary: true}">
          

<ul id="doc_menu" class="sidenav__section" data-swiftype-index="false">

  <!-- Page entries -->
  
    <li id="dynamic-menu">
      <ul>
        
          
          



  <li 
    >
      <a href="https://www.twilio.com/docs/guides/voice">
          Programmable Voice Guides
      </a>
  </li>



        
          
            
<li class="menu-title expanded" role="menu-title" id="doc-navigation-parent">
  Gather User Input via Keypad (DTMF Tones) in Node.js
</li>
<ul class="menu-accordion expanded" role="menu-accordion" id="doc-navigation"></ul>

          
          


        
          
          


<li class="menu-title" role="menu-title">
    <span class="heading">Related Guides</span>
</li>

<ul class="menu-accordion" role="menu-accordion">
  
    <li >
      <a href="https://www.twilio.com/docs/guides/voice/how-to-modify-calls-in-progress-in-node-js">
        Modify Calls In Progress With Node.js
      </a>
    </li>
  
    <li >
      <a href="https://www.twilio.com/docs/guides/voice/how-to-retrieve-call-logs-in-node-js">
        Retrieve Call Logs with Node.js
      </a>
    </li>
  
    <li >
      <a href="https://www.twilio.com/docs/guides/voice/how-to-make-outbound-phone-calls-node-js">
        Make Outbound Phone Calls with Node.js
      </a>
    </li>
  
    <li >
      <a href="https://www.twilio.com/docs/guides/voice/how-to-respond-to-incoming-phone-calls-in-node-js">
        Respond to Incoming Phone Calls in Node.js
      </a>
    </li>
  
    <li >
      <a href="https://www.twilio.com/docs/guides/voice/how-to-create-conference-calls-in-node-js">
        Create Conference Calls in Node.js
      </a>
    </li>
  
    <li >
      <a href="https://www.twilio.com/docs/guides/voice/how-to-record-phone-calls-in-node-js">
        Record Phone Calls in Node.js
      </a>
    </li>
  
</ul>
        
        
      </ul>
    </li>
  
</ul>

        </div>
      
    </div>

    <div class="primary-column 
        ">
      <div class="docs-prose">
        
  
    
    <h1 class="page-title ">
      Gather User Input via Keypad (DTMF Tones) in Node.js
    </h1>
    
      
<div class="authors">
  <div class="authors-body">
    <div class="author">
      <img src="https://www.gravatar.com/avatar/4786cf28e0f5886c4b006f7487333845?d=mm&amp;s=50" title="Kevin Whinnery" alt="Kevin Whinnery" />
      Kevin Whinnery
    </div>
  </div>
  <div class="authors-footer"></div>
</div>


    
  
  
    <div class="block-rich_text ">
      
        

<div class="rich-text"><p>In this guide, we'll show you how to gather user input during a phone call through the phone's keypad (using <a href="https://en.wikipedia.org/wiki/Dual-tone_multi-frequency_signaling">DTMF</a> tones) in your Node.js application. By applying this technique, you can create interactive voice response (<a href="https://en.wikipedia.org/wiki/Interactive_voice_response">IVR</a>) systems and other phone based interfaces for your users. The code snippets in this guide are written using modern JavaScript language features in Node.js version 6 or higher, and make use of the following node modules:</p><p></p><ul><li><a href="https://expressjs.com/">Express</a></li><li><a href="https://github.com/expressjs/body-parser">body-parser</a></li><li><a href="https://www.twilio.com/docs/libraries/node">Twilio Node.js SDK</a></li></ul><p></p><p>Let's get started!</p><h2 id="set-up-your-nodejs-express-application-to-receive-incoming-phone-calls"><a class="toclink" href="#set-up-your-nodejs-express-application-to-receive-incoming-phone-calls">Set up your Node.js Express application to receive incoming phone calls</a></h2><p>This guide assumes you have already set up your web application to receive incoming phone calls. If you still need to complete this step, <a href="https://www.twilio.com/docs/guides/voice/how-to-respond-to-incoming-phone-calls-in-node-js">check out this guide</a>. It should walk you through the process of buying a Twilio number and configuring your app to receive incoming calls.</p><p></p></div>

      
    </div>
  
    <div class="block-content_snippet ">
      
        <div class="block-rich_text">

<div class="rich-text"><h2 id="collect-user-input-with-the-gather-twiml-verb"><a class="toclink" href="#collect-user-input-with-the-gather-twiml-verb">Collect user input with the &lt;Gather&gt; TwiML verb</a></h2><p>The <a href="https://www.twilio.com/docs/api/twiml/gather">&lt;Gather&gt; TwiML verb</a> allows us to collect input from the user during a phone call. Gathering user input through the keypad is a core mechanism of Interactive Voice Response (IVR) systems where users can press "1" to connect to one menu of options and press "2" to reach another. These prompts can be accompanied by voice prompts to the caller, using the TwiML <a href="https://www.twilio.com/docs/api/twiml/say">&lt;Say&gt;</a> and <a href="https://www.twilio.com/docs/api/twiml/play">&lt;Play&gt;</a> verbs. In this example, we will prompt the user to enter a number to connect to a certain department within our little IVR system.</p></div>
</div>
      
    </div>
  
    <div class="block-code_sample ">
      
        

<div class="md-code-sample" id="code-use-gather-to-collect-user-input-via-the-keypad-dtmf-tones" 
  data-title="Use &lt;Gather&gt; to collect user input via the keypad (DTMF tones)" data-pref="server">

  <div class="inline-mode">
    <div class="code-snippets">
      <div class="sample-tabs">
      <a class="title" href="#code-use-gather-to-collect-user-input-via-the-keypad-dtmf-tones">Use &lt;Gather&gt; to collect user input via the keypad (DTMF tones)</a>
        <ul style="visibility:hidden" >
          
            <li class="sample-tab active" 
              data-ext="js">Node.js</li>
          
        </ul>
      </div>

      
        
          <div class="sample-version-tabs" data-ext="js">
            
            <span>SDK Version:</span>
            
            <ul>
              
                <li class="sample-version-tab" data-version="2.x"
                  
                  
                  >2.x</li>
              
                <li class="sample-version-tab" data-version="3.x"
                  
                  
                  >3.x</li>
              
            </ul>
          </div>
        
      
          
      
        <pre data-ext="js" data-version="2.x" class="codehilite"><code><span class="code-line"><span class="c1">// This example uses JavaScript language features present in Node.js 6+</span>
</span><span class="code-line"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilio</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;twilio&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">urlencoded</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;body-parser&#39;</span><span class="p">).</span><span class="nx">urlencoded</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Parse incoming POST params with Express middleware</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="nx">extended</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}));</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a route that will handle Twilio webhook requests, sent as an </span>
</span><span class="code-line"><span class="c1">// HTTP POST to /voice in our application</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kd">let</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Use the &lt;Gather&gt; verb to collect user input </span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span> <span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an HTTP server and listen for requests on port 3000</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</span></code></pre>
      
        <pre data-ext="js" data-version="3.x" class="codehilite"><code><span class="code-line"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilio</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;twilio&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">urlencoded</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;body-parser&#39;</span><span class="p">).</span><span class="nx">urlencoded</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Parse incoming POST params with Express middleware</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">urlencoded</span><span class="p">({</span><span class="nx">extended</span><span class="o">:</span> <span class="kc">false</span><span class="p">}));</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a route that will handle Twilio webhook requests, sent as an</span>
</span><span class="code-line"><span class="c1">// HTTP POST to /voice in our application</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kr">const</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Use the &lt;Gather&gt; verb to collect user input</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span><span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an HTTP server and listen for requests on port 3000</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Twilio Client app HTTP server running at http://127.0.0.1:3000&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</span></code></pre>
      
    </div>

    
  </div>

  <div class="button-mode">
    <h5 class="title">
      <i class="fa fa-fw fa-code"></i>
      Use &lt;Gather&gt; to collect user input via the keypad (DTMF tones)
    </h5>
    
      <p>This example returns TwiML containing a &lt;Say&gt; tag nested within a &lt;Gather&gt; tag. The user will be prompted to choose sales or support.</p>
    
    <div class="active-tail"></div>
  </div>
</div>



      
    </div>
  
    <div class="block-content_snippet ">
      
        <div class="block-rich_text">

<div class="rich-text"><p>If the user doesn't enter any input after a configurable timeout, Twilio will continue processing the TwiML in the document to determine what should happen next in the call. When the end of the document is reached, Twilio will hang up the call. In the above example, we use the <a href="https://www.twilio.com/docs/api/twiml/redirect">&lt;Redirect&gt;</a> verb to have Twilio request the same URL again, repeating the prompt for the user</p><p>If a user were to enter input with the example above, the user would hear the same prompt over and over again regardless of what button you pressed. By default, if the user does enter input in the &lt;Gather&gt;, Twilio will send another <a href="https://www.twilio.com/docs/api/twiml/twilio_request">HTTP request to the current webhook URL with a POST parameter containing the Digits</a> entered by the user. In the sample above, we weren't handling this input at all. Let's update that logic to also process user input if it is present.</p></div>
</div>
      
    </div>
  
    <div class="block-code_sample ">
      
        

<div class="md-code-sample" id="code-branch-your-call-logic-based-on-the-digits-sent-by-the-user" 
  data-title="Branch your call logic based on the digits sent by the user" data-pref="server">

  <div class="inline-mode">
    <div class="code-snippets">
      <div class="sample-tabs">
      <a class="title" href="#code-branch-your-call-logic-based-on-the-digits-sent-by-the-user">Branch your call logic based on the digits sent by the user</a>
        <ul style="visibility:hidden" >
          
            <li class="sample-tab active" 
              data-ext="js">Node.js</li>
          
        </ul>
      </div>

      
        
          <div class="sample-version-tabs" data-ext="js">
            
            <span>SDK Version:</span>
            
            <ul>
              
                <li class="sample-version-tab" data-version="2.x"
                  
                  
                  >2.x</li>
              
                <li class="sample-version-tab" data-version="3.x"
                  
                  
                  >3.x</li>
              
            </ul>
          </div>
        
      
          
      
        <pre data-ext="js" data-version="2.x" class="codehilite"><code><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kd">let</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// helper function to set up a &lt;Gather&gt;</span>
</span><span class="code-line">  <span class="kd">function</span> <span class="nx">gather</span><span class="p">()</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span> <span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">      <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">    <span class="p">});</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user entered digits, process their request</span>
</span><span class="code-line">  <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">    <span class="k">switch</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You selected sales. Good for you!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You need support. We will help!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">default</span><span class="o">:</span> 
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;Sorry, I don\&#39;t understand that choice.&#39;</span><span class="p">).</span><span class="nx">pause</span><span class="p">();</span>
</span><span class="code-line">        <span class="nx">gather</span><span class="p">();</span>
</span><span class="code-line">        <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// If no input was sent, use the &lt;Gather&gt; verb to collect user input </span>
</span><span class="code-line">    <span class="nx">gather</span><span class="p">();</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span></code></pre>
      
        <pre data-ext="js" data-version="3.x" class="codehilite"><code><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kr">const</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="cm">/** helper function to set up a &lt;Gather&gt; */</span>
</span><span class="code-line">  <span class="kd">function</span> <span class="nx">gather</span><span class="p">()</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span><span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">      <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">    <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user entered digits, process their request</span>
</span><span class="code-line">  <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">    <span class="k">switch</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You selected sales. Good for you!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You need support. We will help!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">default</span><span class="o">:</span>
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;Sorry, I don\&#39;t understand that choice.&#39;</span><span class="p">).</span><span class="nx">pause</span><span class="p">();</span>
</span><span class="code-line">        <span class="nx">gather</span><span class="p">();</span>
</span><span class="code-line">        <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// If no input was sent, use the &lt;Gather&gt; verb to collect user input</span>
</span><span class="code-line">    <span class="nx">gather</span><span class="p">();</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span></code></pre>
      
    </div>

    
  </div>

  <div class="button-mode">
    <h5 class="title">
      <i class="fa fa-fw fa-code"></i>
      Branch your call logic based on the digits sent by the user
    </h5>
    
      <p>By default, &lt;Gather&gt; will &quot;loop&quot; on the current TwiML URL, requesting the same URL every time input is entered.</p>
    
    <div class="active-tail"></div>
  </div>
</div>



      
    </div>
  
    <div class="block-content_snippet ">
      
        <div class="block-rich_text">

<div class="rich-text"><h2 id="specify-an-action-to-take-after-user-input-is-collected"><a class="toclink" href="#specify-an-action-to-take-after-user-input-is-collected">Specify an action to take after user input is collected</a></h2><p>You may want to have an entirely different endpoint in your application handle the processing of user input. This is possible using the "action" attribute of the &lt;Gather&gt; verb. Let's update our example to add a second endpoint that will be responsible for handling user input.</p></div>
</div>
      
    </div>
  
    <div class="block-code_sample ">
      
        

<div class="md-code-sample" id="code-add-another-route-to-handle-the-input-from-the-user" 
  data-title="Add another route to handle the input from the user" data-pref="server">

  <div class="inline-mode">
    <div class="code-snippets">
      <div class="sample-tabs">
      <a class="title" href="#code-add-another-route-to-handle-the-input-from-the-user">Add another route to handle the input from the user</a>
        <ul style="visibility:hidden" >
          
            <li class="sample-tab active" 
              data-ext="js">Node.js</li>
          
        </ul>
      </div>

      
        
          <div class="sample-version-tabs" data-ext="js">
            
            <span>SDK Version:</span>
            
            <ul>
              
                <li class="sample-version-tab" data-version="2.x"
                  
                  
                  >2.x</li>
              
                <li class="sample-version-tab" data-version="3.x"
                  
                  
                  >3.x</li>
              
            </ul>
          </div>
        
      
          
      
        <pre data-ext="js" data-version="2.x" class="codehilite"><code><span class="code-line"><span class="c1">// Create a route that will handle Twilio webhook requests, sent as an </span>
</span><span class="code-line"><span class="c1">// HTTP POST to /voice in our application</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kd">let</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span> 
</span><span class="code-line">    <span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class="code-line">    <span class="nx">action</span><span class="o">:</span> <span class="s1">&#39;/gather&#39;</span>
</span><span class="code-line">  <span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a route that will handle &lt;Gather&gt; input</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/gather&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kd">let</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user entered digits, process their request</span>
</span><span class="code-line">  <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">    <span class="k">switch</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You selected sales. Good for you!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You need support. We will help!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">default</span><span class="o">:</span> 
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;Sorry, I don\&#39;t understand that choice.&#39;</span><span class="p">).</span><span class="nx">pause</span><span class="p">();</span>
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">        <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// If no input was sent, redirect to the /voice route</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span></code></pre>
      
        <pre data-ext="js" data-version="3.x" class="codehilite"><code><span class="code-line"><span class="c1">// Create a route that will handle Twilio webhook requests, sent as an</span>
</span><span class="code-line"><span class="c1">// HTTP POST to /voice in our application</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kr">const</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class="code-line">    <span class="nx">action</span><span class="o">:</span> <span class="s1">&#39;/gather&#39;</span><span class="p">,</span>
</span><span class="code-line">  <span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a route that will handle &lt;Gather&gt; input</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/gather&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kr">const</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user entered digits, process their request</span>
</span><span class="code-line">  <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">    <span class="k">switch</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You selected sales. Good for you!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You need support. We will help!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">default</span><span class="o">:</span>
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;Sorry, I don\&#39;t understand that choice.&#39;</span><span class="p">).</span><span class="nx">pause</span><span class="p">();</span>
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">        <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// If no input was sent, redirect to the /voice route</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span></code></pre>
      
    </div>

    
  </div>

  <div class="button-mode">
    <h5 class="title">
      <i class="fa fa-fw fa-code"></i>
      Add another route to handle the input from the user
    </h5>
    
      <p>This technique creates a separate route to handle user input.</p>
    
    <div class="active-tail"></div>
  </div>
</div>



      
    </div>
  
    <div class="block-content_snippet ">
      
        <div class="block-rich_text">

<div class="rich-text"><p>The action attribute takes a relative URL which would point to another route your server is capable of handling. Now, instead of conditional logic in a single route, we use actions and redirects to handle our call logic with separate code paths.</p></div>
</div>
      
    </div>
  
    <div class="block-rich_text ">
      
        

<div class="rich-text"><h2 id="where-to-next"><a class="toclink" href="#where-to-next">Where to next?</a></h2><p>If you're building call center type applications in Node.js, you might enjoy stepping through full sample applications written in Node.js.</p><p></p><ul><li><a href="https://www.twilio.com/docs/tutorials/walkthrough/ivr-phone-tree/node/express">IVR: Phone Tree in Node.js</a></li><li><a href="https://www.twilio.com/docs/tutorials/walkthrough/ivr-screening/node/express">IVR: Screening and Recording in Node.js</a></li></ul><p></p></div>

      
    </div>
  

    
      
<div class="contributors">
  <div class="contributors-body">
  
    <div class="contributor">
      
        <label>Contributors:</label>
      
      <img src="https://www.gravatar.com/avatar/4786cf28e0f5886c4b006f7487333845?d=mm&amp;s=50" title="Kevin Whinnery" alt="Kevin Whinnery" />
    </div>
  
    <div class="contributor">
      
      <img src="https://www.gravatar.com/avatar/7ff74e11de7b63c4ec66966b9cb75f63?d=mm&amp;s=50" title="Andrew Baker" alt="Andrew Baker" />
    </div>
  
    <div class="contributor">
      
      <img src="https://www.gravatar.com/avatar/6ed438a57f60fe82f88d521af08a47cc?d=mm&amp;s=50" title="Ricky Robinett" alt="Ricky Robinett" />
    </div>
  
    <div class="contributor">
      
      <img src="https://www.gravatar.com/avatar/407fa5f5cddffcdc88cb06df18bfb8fc?d=mm&amp;s=50" title="Rob Spectre" alt="Rob Spectre" />
    </div>
  
    <div class="contributor">
      
      <img src="https://www.gravatar.com/avatar/560630d6945c6a8777533e7ea3b4e69b?d=mm&amp;s=50" title="David Prothero" alt="David Prothero" />
    </div>
  
  </div>
  <div class="contributors-footer"></div>
</div>


    

        
          
<div id="disqus_thread"></div>


<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

// Unique identifiers
PAGE_URL = "https://www.twilio.com/docs/guides/voice/how-to-gather-user-input-via-keypad-in-node-js";

var disqus_config = function () {
  this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'http://twiliodocumentation.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


        
      </div>
    </div>

    <div class="code-column">
      
  <div id="coderail" class="code-rail" data-uk-sticky="{boundary: true}">

  <div class="rail-placeholder"></div>

  <div class="rail-header uk-hidden">

    <div class="rail-header-wrapper">

      <div class="rail-navigation">
        <div class="inner">
          <a href="#previous" class="inactive" data-previous>
            <i class="fa fa-fw fa-arrow-left left"></i>
          </a>
        </div>
        <div class="inner">
          <span>
            <span class="current-index">1</span>
            <span>/</span>
            <span class="snippet-total">1</span>
          </span>
        </div>
        <div class="inner">
          <a href="#next" data-next>
            <i class="fa fa-fw fa-arrow-right"></i>
          </a>
        </div>
      </div>

      <div class="rail-title">
        <div class="title-content inner">
          <span>Loading Code Samples...</span>
          <i class="fa fa-fw fa-chevron-down"></i>
        </div>
      </div>

    </div>

  </div>

  <div class="rail-toolbar uk-hidden">

    <div class="rail-current-language">
      <div class="inner">
        <span>Language</span>
        <i class="fa fa-fw fa-chevron-down"></i>
      </div>
    </div>

    <div class="toolbar">
      <a href="#code" class="uk-hidden tab" data-code>Code</a>
      <a href="#output" class="uk-hidden inactive" data-output>Output</a>

      <span class="separator"></span>

      <a id="download" class="uk-hidden">
        <i class="fa fa-fw fa-download"></i>
        <span>Download Project</span>
      </a>

      <a id="github" class="uk-hidden" target="_blank">
        <i class="fa fa-fw fa-github-square"></i>
        <span>View on GitHub</span>
      </a>

      <a id="defrosty" class="fr-on" href="#defrosty">
        <i class="fa fa-fw fa-eye"></i>
        <span class="wider-tooltip">Toggle Highlighted Lines</span>
      </a>

      <a id="clippy" href="#copy">
        <i class="fa fa-fw fa-copy"></i>
        <span>Copy to Clipboard</span>
      </a>

      <a id="linkcode" href="#linkcode">
        <i class="fa fa-fw fa-link"></i>
        <span>Link to this Code</span>
      </a>

      <a href="#expand" data-expand>
        <i class="fa fa-fw fa-arrows-alt"></i>
        <span>Full Screen</span>
      </a>
      <a href="#collapse" class="uk-hidden" data-collapse>
        <i class="fa fa-fw fa-compress"></i>
        <span>Normal Size</span>
      </a>
    </div>
  </div>

  <div class="rail-samples">
    <ul>
      
        <li>
          <a href="#code-use-gather-to-collect-user-input-via-the-keypad-dtmf-tones">
            Use &lt;Gather&gt; to collect user input via the keypad (DTMF tones)
          </a>
        </li>
      
        <li>
          <a href="#code-branch-your-call-logic-based-on-the-digits-sent-by-the-user">
            Branch your call logic based on the digits sent by the user
          </a>
        </li>
      
        <li>
          <a href="#code-add-another-route-to-handle-the-input-from-the-user">
            Add another route to handle the input from the user
          </a>
        </li>
      
    </ul>
  </div>

  <div class="rail-languages"></div>

  <div class="rail-content">
    <div class="rail-content-inner">
      
        
        <div data-sample-title="Use &lt;Gather&gt; to collect user input via the keypad (DTMF tones)"
            data-sample="code-use-gather-to-collect-user-input-via-the-keypad-dtmf-tones" 
            data-pref="server"
            data-download-url=""
            data-github-url="https://github.com/TwilioDevEd/api-snippets/blob/master/guides/voice/gather-dtmf-tones-guide/gather-example-step-0/{{ filename }}"
            class="code-sample">

          <div class="sample-language-data" style="display:none;">
            <select>
              
                <option value="js">Node.js</option>
              
            </select>
          </div>

          
            
              <div class="sample-version-tabs" 
                data-ext="js">
                <div class="sample-version-tabs-inner">
                  
                  <span>SDK Version:</span>
                  
                  <ul>
                    
                      <li class="sample-version-tab" data-version="2.x"
                        
                        
                        >2.x</li>
                    
                      <li class="sample-version-tab" data-version="3.x"
                        
                        
                        >3.x</li>
                    
                  </ul>
                </div>
              </div>
            
          

          

          <div class="snippet-container">
            
              <pre data-ext="js" 
                data-version="2.x"
                data-filename="https://www.twilio.com/docs/guides/voice/example.2.x.js"
                class="codehilite"><code><span class="code-line"><span class="c1">// This example uses JavaScript language features present in Node.js 6+</span>
</span><span class="code-line"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilio</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;twilio&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">urlencoded</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;body-parser&#39;</span><span class="p">).</span><span class="nx">urlencoded</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Parse incoming POST params with Express middleware</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="nx">extended</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}));</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a route that will handle Twilio webhook requests, sent as an </span>
</span><span class="code-line"><span class="c1">// HTTP POST to /voice in our application</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kd">let</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Use the &lt;Gather&gt; verb to collect user input </span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span> <span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an HTTP server and listen for requests on port 3000</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</span></code></pre>
            
              <pre data-ext="js" 
                data-version="3.x"
                data-filename="https://www.twilio.com/docs/guides/voice/example.3.x.js"
                class="codehilite"><code><span class="code-line"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">twilio</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;twilio&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="kr">const</span> <span class="nx">urlencoded</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;body-parser&#39;</span><span class="p">).</span><span class="nx">urlencoded</span><span class="p">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Parse incoming POST params with Express middleware</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">urlencoded</span><span class="p">({</span><span class="nx">extended</span><span class="o">:</span> <span class="kc">false</span><span class="p">}));</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a route that will handle Twilio webhook requests, sent as an</span>
</span><span class="code-line"><span class="c1">// HTTP POST to /voice in our application</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kr">const</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Use the &lt;Gather&gt; verb to collect user input</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span><span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create an HTTP server and listen for requests on port 3000</span>
</span><span class="code-line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Twilio Client app HTTP server running at http://127.0.0.1:3000&#39;</span><span class="p">);</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</span></code></pre>
            
          </div>

          <div class="output-snippet-container">
            
          </div>

        </div>
        
      
        
        <div data-sample-title="Branch your call logic based on the digits sent by the user"
            data-sample="code-branch-your-call-logic-based-on-the-digits-sent-by-the-user" 
            data-pref="server"
            data-download-url=""
            data-github-url="https://github.com/TwilioDevEd/api-snippets/blob/master/guides/voice/gather-dtmf-tones-guide/gather-example-step-1/{{ filename }}"
            class="code-sample">

          <div class="sample-language-data" style="display:none;">
            <select>
              
                <option value="js">Node.js</option>
              
            </select>
          </div>

          
            
              <div class="sample-version-tabs" 
                data-ext="js">
                <div class="sample-version-tabs-inner">
                  
                  <span>SDK Version:</span>
                  
                  <ul>
                    
                      <li class="sample-version-tab" data-version="2.x"
                        
                        
                        >2.x</li>
                    
                      <li class="sample-version-tab" data-version="3.x"
                        
                        
                        >3.x</li>
                    
                  </ul>
                </div>
              </div>
            
          

          

          <div class="snippet-container">
            
              <pre data-ext="js" 
                data-version="2.x"
                data-filename="https://www.twilio.com/docs/guides/voice/example.2.x.js"
                class="codehilite"><code><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kd">let</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// helper function to set up a &lt;Gather&gt;</span>
</span><span class="code-line">  <span class="kd">function</span> <span class="nx">gather</span><span class="p">()</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span> <span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">      <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">    <span class="p">});</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user entered digits, process their request</span>
</span><span class="code-line">  <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">    <span class="k">switch</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You selected sales. Good for you!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You need support. We will help!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">default</span><span class="o">:</span> 
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;Sorry, I don\&#39;t understand that choice.&#39;</span><span class="p">).</span><span class="nx">pause</span><span class="p">();</span>
</span><span class="code-line">        <span class="nx">gather</span><span class="p">();</span>
</span><span class="code-line">        <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// If no input was sent, use the &lt;Gather&gt; verb to collect user input </span>
</span><span class="code-line">    <span class="nx">gather</span><span class="p">();</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span></code></pre>
            
              <pre data-ext="js" 
                data-version="3.x"
                data-filename="https://www.twilio.com/docs/guides/voice/example.3.x.js"
                class="codehilite"><code><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kr">const</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="cm">/** helper function to set up a &lt;Gather&gt; */</span>
</span><span class="code-line">  <span class="kd">function</span> <span class="nx">gather</span><span class="p">()</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span><span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">      <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">    <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user entered digits, process their request</span>
</span><span class="code-line">  <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">    <span class="k">switch</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You selected sales. Good for you!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You need support. We will help!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">default</span><span class="o">:</span>
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;Sorry, I don\&#39;t understand that choice.&#39;</span><span class="p">).</span><span class="nx">pause</span><span class="p">();</span>
</span><span class="code-line">        <span class="nx">gather</span><span class="p">();</span>
</span><span class="code-line">        <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// If no input was sent, use the &lt;Gather&gt; verb to collect user input</span>
</span><span class="code-line">    <span class="nx">gather</span><span class="p">();</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span></code></pre>
            
          </div>

          <div class="output-snippet-container">
            
          </div>

        </div>
        
      
        
        <div data-sample-title="Add another route to handle the input from the user"
            data-sample="code-add-another-route-to-handle-the-input-from-the-user" 
            data-pref="server"
            data-download-url=""
            data-github-url="https://github.com/TwilioDevEd/api-snippets/blob/master/guides/voice/gather-dtmf-tones-guide/gather-example-step-2/{{ filename }}"
            class="code-sample">

          <div class="sample-language-data" style="display:none;">
            <select>
              
                <option value="js">Node.js</option>
              
            </select>
          </div>

          
            
              <div class="sample-version-tabs" 
                data-ext="js">
                <div class="sample-version-tabs-inner">
                  
                  <span>SDK Version:</span>
                  
                  <ul>
                    
                      <li class="sample-version-tab" data-version="2.x"
                        
                        
                        >2.x</li>
                    
                      <li class="sample-version-tab" data-version="3.x"
                        
                        
                        >3.x</li>
                    
                  </ul>
                </div>
              </div>
            
          

          

          <div class="snippet-container">
            
              <pre data-ext="js" 
                data-version="2.x"
                data-filename="https://www.twilio.com/docs/guides/voice/example.2.x.js"
                class="codehilite"><code><span class="code-line"><span class="c1">// Create a route that will handle Twilio webhook requests, sent as an </span>
</span><span class="code-line"><span class="c1">// HTTP POST to /voice in our application</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kd">let</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span> 
</span><span class="code-line">    <span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class="code-line">    <span class="nx">action</span><span class="o">:</span> <span class="s1">&#39;/gather&#39;</span>
</span><span class="code-line">  <span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a route that will handle &lt;Gather&gt; input</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/gather&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kd">let</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user entered digits, process their request</span>
</span><span class="code-line">  <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">    <span class="k">switch</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You selected sales. Good for you!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You need support. We will help!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">default</span><span class="o">:</span> 
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;Sorry, I don\&#39;t understand that choice.&#39;</span><span class="p">).</span><span class="nx">pause</span><span class="p">();</span>
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">        <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// If no input was sent, redirect to the /voice route</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span></code></pre>
            
              <pre data-ext="js" 
                data-version="3.x"
                data-filename="https://www.twilio.com/docs/guides/voice/example.3.x.js"
                class="codehilite"><code><span class="code-line"><span class="c1">// Create a route that will handle Twilio webhook requests, sent as an</span>
</span><span class="code-line"><span class="c1">// HTTP POST to /voice in our application</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kr">const</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">gather</span><span class="p">({</span>
</span><span class="code-line">    <span class="nx">numDigits</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class="code-line">    <span class="nx">action</span><span class="o">:</span> <span class="s1">&#39;/gather&#39;</span><span class="p">,</span>
</span><span class="code-line">  <span class="p">},</span> <span class="p">(</span><span class="nx">gatherNode</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">    <span class="nx">gatherNode</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;For sales, press 1. For support, press 2.&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user doesn&#39;t enter input, loop</span>
</span><span class="code-line">  <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span><span class="code-line">
</span><span class="code-line"><span class="c1">// Create a route that will handle &lt;Gather&gt; input</span>
</span><span class="code-line"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/gather&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="code-line">  <span class="c1">// Use the Twilio Node.js SDK to build an XML response</span>
</span><span class="code-line">  <span class="kr">const</span> <span class="nx">twiml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">twilio</span><span class="p">.</span><span class="nx">TwimlResponse</span><span class="p">();</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// If the user entered digits, process their request</span>
</span><span class="code-line">  <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">    <span class="k">switch</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">Digits</span><span class="p">)</span> <span class="p">{</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You selected sales. Good for you!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">case</span> <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;You need support. We will help!&#39;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">      <span class="k">default</span><span class="o">:</span>
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;Sorry, I don\&#39;t understand that choice.&#39;</span><span class="p">).</span><span class="nx">pause</span><span class="p">();</span>
</span><span class="code-line">        <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">        <span class="k">break</span><span class="p">;</span>
</span><span class="code-line">    <span class="p">}</span>
</span><span class="code-line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="code-line">    <span class="c1">// If no input was sent, redirect to the /voice route</span>
</span><span class="code-line">    <span class="nx">twiml</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;/voice&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="p">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="c1">// Render the response as XML in reply to the webhook request</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
</span><span class="code-line">  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">twiml</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="code-line"><span class="p">});</span>
</span></code></pre>
            
          </div>

          <div class="output-snippet-container">
            
          </div>

        </div>
        
      
    </div>
  </div>
</div>


    </div>

  </div>

      </div>
    </div>

    
    


<div class="footer" data-swiftype-index="false">
  <div class="uk-container uk-container-center">
    <div class="footer__statement">We can’t wait to see what you build.</div>
    <div class="uk-grid">
      <div class="uk-width-1-1 uk-width-small-1-3 uk-width-medium-1-5">
        <section class="footer__section">
          <header class="footer__header">Products</header>
          <ul class="footer__list">
            <li class="footer__list-item">
              <a href="https://www.twilio.com/voice-video" class="footer__link">Voice &amp; Video</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/messaging" class="footer__link">Messaging</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/authy" class="footer__link">Authentication</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/wireless" class="footer__link">Connected Devices</a>
            </li>
          </ul>
        </section>
      </div>
      <div class="uk-width-1-1 uk-width-small-1-3 uk-width-medium-1-5">
        <section class="footer__section">
          <header class="footer__header">Use Cases</header>
          <ul class="footer__list">
            <li class="footer__list-item">
              <a href="https://www.twilio.com/use-cases/access-security" class="footer__link">Access Security</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/use-cases/contextual-call-center" class="footer__link">Contextual Call Center</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/use-cases/marketplace-communications" class="footer__link">Marketplace Communications</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/use-cases/mobile-messaging" class="footer__link">Mobile Messaging</a>
            </li>
          </ul>
        </section>
      </div>
      <div class="uk-width-1-1 uk-width-small-1-3 uk-width-medium-1-5">
        <section class="footer__section">
          <header class="footer__header">About</header>
          <ul class="footer__list">
            <li class="footer__list-item">
              <a href="https://www.twilio.com/what-is-cloud-communications?" class="footer__link">What is Twilio?</a>
            </li>
            <li class="footer__list-item">
              <a href="https://customers.twilio.com/" class="footer__link">Customers</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/help" class="footer__link">Get Help</a>
            </li>
            <li class="footer__list-item">
              <a href="https://www.twilio.com/help/sales" class="footer__link">Talk to Sales</a>
            </li>
          </ul>
        </section>
      </div>
      <div class="uk-width-1-1 uk-width-medium-2-5">
        <section class="footer__section">
  <header class="footer__header">Hits From The Blog</header>
  <ul class="footer__list footer__list">
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/building-an-ivr-with-no-code-by-using-taskrouter-as-a-state-machine.html" class="footer__link">Building an IVR with no code by using TaskRouter as a state machine</a>
    </li>
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/logrole-gives-you-permissions-based-granular-searching-for-twilio-logs.html" class="footer__link">Logrole Gives You Permissions Based, Granular Searching For Twilio Logs</a>
    </li>
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/build-callbacks-with-stamplay-twilio-and-unbounce.html" class="footer__link">Build Callbacks With Stamplay, Twilio and Unbounce</a>
    </li>
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/build-a-basic-call-center-in-just-a-few-minutes-with-twilio.html" class="footer__link">Build a Basic Call Center in Just a Few Minutes with Twilio</a>
    </li>
    
    <li class="footer__list-item">
      <a href="https://www.twilio.com/blog/2017/01/redact-delete-sms-messages-node-js.html" class="footer__link">Redact or Delete SMS Messages as They Arrive with Node.js</a>
    </li>
    
  </ul>

</section>
      </div>
    </div>
    <footer class="footer__footer">
      <div class="footer__logo" title="Twilio">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30">
          <path d="M15 0C6.7 0 0 6.7 0 15s6.7 15 15 15 15-6.7 15-15S23.3 0 15 0zm0 26C8.9 26 4 21.1 4 15S8.9 4 15 4s11 4.9 11 11-4.9 11-11 11z"/>
          <circle cx="18.7" cy="11.3" r="3.1"/>
          <circle cx="18.7" cy="18.7" r="3.1"/>
          <circle cx="11.3" cy="18.7" r="3.1"/>
          <circle cx="11.3" cy="11.3" r="3.1"/>
        </svg>
      </div>
      <ul class="legal__list">
        <li class="legal__list-item">
          <a href="https://www.twilio.com/company" class="legal__link">About Twilio</a>
        </li>
        <li class="legal__list-item">
          <a href="https://www.twilio.com/legal" class="legal__link">Legal</a>
        </li>
        <li class="legal__list-item">Copyright &copy; 2016 Twilio, Inc. 
          <br class="uk-visible-small">All Rights Reserved.
        </li>
      </ul>
    </footer>
  </div>
</div>


    
    <script src="https://www.twilio.com/docs/static/js/vendor.min.16abf41c42de.js"></script>
    

  

  <!-- Mixpanel -->
  <script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
  typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,
    e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);
    mixpanel.init("f71c19735fa6ecc5225ff563285e1794");
    </script>
  

  
    <!-- Heap -->
    <script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o);for(var r=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=r(p[c])};
    heap.load('1541905715');
    </script>
  

  
    <!-- GA -->
    <script type="text/javascript">
    try {
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-2900316-1']);
      _gaq.push(['_setSiteSpeedSampleRate', 50]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    } catch(err) {}

    var _kmq = _kmq || [];
    </script>
  

  
    <!-- Eloqua -->
    <script type="text/javascript">
    var _elqQ = _elqQ || [];
    _elqQ.push(['elqSetSiteId', '815114181']);
    _elqQ.push(['elqTrackPageView']);
    _elqQ.push(['elqUseFirstPartyCookie', 'www.twilio.com']);

    (function () {
      function async_load() {
        var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
        s.src = 'http://img03.en25.com/i/elqCfg.min.js';
        var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
      }
      if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
      else if (window.attachEvent) window.attachEvent('onload', async_load);
    })();
    </script>
  

  
    <!-- Transifex -->
    <script type="text/javascript">
    window.liveSettings = {
      api_key: '4c06c1c5a6b341e591d969476fe2675f'
    };
    </script>
    <script type="text/javascript" src="http://cdn.transifex.com/live.js"></script>
    <style>
    .txlive-langselector { display: none; }
    </style>
  

  



    
      <script src="https://www.twilio.com/docs/static/js/docs.min.0c5bb1abb16f.js"></script>
    

    
    



    

  </body>

<!-- Mirrored from www.twilio.com/docs/guides/voice/how-to-gather-user-input-via-keypad-in-node-js by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:10:05 GMT -->
</html>
