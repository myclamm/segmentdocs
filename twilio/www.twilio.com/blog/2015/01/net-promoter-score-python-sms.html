<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:09:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<script type="text/javascript">
(function() {
    var projectId = 3524915770;
    var protocol = ('https:' == document.location.protocol ?
    'https://' : 'http://');
    var scriptTag = document.createElement('script');
    scriptTag.type = 'text/javascript';
    scriptTag.async = true;
    scriptTag.src = protocol + 'cdn.optimizely.com/js/' +
    projectId + '.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(scriptTag, s);
})();
function optimizelyTimeout() {
    window.optimizely = window.optimizely|| [];
    if (!window.optimizely.data) {
    window.optimizely.push("timeout");
    }
}
setTimeout(optimizelyTimeout, 1000);
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.twilio.com/blog/xmlrpc.php">
<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '815114181']);
_elqQ.push(['elqTrackPageView']);
_elqQ.push(['elqUseFirstPartyCookie', 'www.twilio.com']);
(function () {
  function async_load()
  {
    var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
    s.src = 'http://img03.en25.com/i/elqCfg.min.js';
    var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
  }
  if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
  else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>
<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','http://connect.facebook.net/en_US/fbevents.js');

fbq('init', '467131150158811');
fbq('track', "PageView");</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=467131150158811&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

<style>
@media screen and (max-width: 600px) {
  #signal-header { display: none; }
}
</style>

<link type="text/css" media="all" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_b676eaf05dfe5a400015616b53497651.css" rel="stylesheet" /><link type="text/css" media="screen" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_97ca666341cd9b69002e26c8f2ca5299.css" rel="stylesheet" /><title>Calculating Net Promoter Score with Python and SMS &#8211; Twilio Cloud Communications Blog</title>

<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.13 - http://yoast.com/wordpress/seo/ -->
<meta name="description" content="Calculating Net Promoter Score"/>
<link rel="canonical" href="https://www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html" />
<!-- / Yoast WordPress SEO plugin. -->

<link rel='dns-prefetch' href='https://www.twilio.com/blog//s0.wp.com' />
<link rel='dns-prefetch' href='https://www.twilio.com/blog//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Feed" href="https://www.twilio.com/blog/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Comments Feed" href="https://www.twilio.com/blog/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Calculating Net Promoter Score with Python and SMS Comments Feed" href="https://www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/twilioinc.wpengine.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.2"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>











<!-- This site uses the Google Analytics by Yoast plugin v5.4.7 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','http://www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-2900316-1', 'auto');
	__gaTracker('set', 'forceSSL', true);
	 window.optimizely = window.optimizely || [];
 window.optimizely.push("activateUniversalAnalytics");
	__gaTracker('set', 'dimension4', 'Matt Makai');
	__gaTracker('set', 'dimension5', 'post');
	__gaTracker('set', 'dimension6', 'all-things-code');
	__gaTracker('set', 'dimension7', 'Flask,NPS,Python,SMS,twilio,Twilio NPS,Twilio SMS Python');
	__gaTracker('set', 'dimension8', '2015-01-30T08:59:34+00:00');
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by Yoast -->


<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.4.3","is_admin":"0","ajaxurl":"https:\/\/twilioinc.wpengine.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>

<script type='text/javascript'>
/* <![CDATA[ */
var swiftypeParams = {"engineKey":"UpGyyJZzgUMXHM65YENj"};
/* ]]> */
</script>

<link rel='https://api.w.org/' href='https://www.twilio.com/blog/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.twilio.com/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.twilio.com/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://www.twilio.com/blog/?p=14544' />
<link rel="alternate" type="application/json+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2015%2F01%2Fnet-promoter-score-python-sms.html" />
<link rel="alternate" type="text/xml+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2015%2F01%2Fnet-promoter-score-python-sms.html&amp;format=xml" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-32x32.png" sizes="32x32" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-270x270.png" />
</head>

<body class="single single-post postid-14544 single-format-standard group-blog">
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.twilio.com/blog//www.googletagmanager.com/ns.html?id=GTM-W4RVXH"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W4RVXH');</script>
<!-- End Google Tag Manager -->

<div id="fb-root"></div>
<script>(function(d, s, id) {
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) return;
		js = d.createElement(s); js.id = id;
		js.src = "http://connect.facebook.net/en_US/sdk.js#xfbml=1&appId=414254592083321&version=v2.0";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
window.fbAsyncInit = function() {
  FB.Event.subscribe('edge.create', function(targetUrl) {
    __gaTracker('send', 'social', 'facebook', 'like', targetUrl);
  });
};
window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));

function trackTwitter(intent_event) {
  if (intent_event) {
    var opt_pagePath;
    if (intent_event.target && intent_event.target.nodeName == 'IFRAME') {
          opt_target = extractParamFromUri(intent_event.target.src, 'url');
    }
    __gaTracker('send', 'social', 'twitter', 'tweet', opt_pagePath);
  }
}

function extractParamFromUri(uri, paramName) {
  if (!uri) {
    return;
  }
  var regex = new RegExp('[\\?&#]' + paramName + '=([^&#]*)');
  var params = regex.exec(uri);
  if (params != null) {
    return unescape(params[1]);
  }
  return;
}

//Wrap event bindings - Wait for async js to load
twttr.ready(function (twttr) {
  //event bindings
  twttr.events.bind('tweet', trackTwitter);
});
</script>
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o);for(var r=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=r(p[c])};
  heap.load("1541905715");
</script>
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<nav class="navbar navbar-default" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle hidden-xs" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="https://www.twilio.com/blog/">
					<img src="https://s3.amazonaws.com/ahoy-assets.twilio.com/global/images/wordmark.svg" width="200"> <span class="logo-blog">blog</span>
				</a>
			</div>

			<div class="hidden-xs"><ul id="menu-site-navigation" class="nav navbar-nav pull-right"><li id="menu-item-12202" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12202"><a href="http://www.twilio.com/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/', 'Home');" title="Home">Home</a></li>
<li id="menu-item-12205" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12205"><a href="http://www.twilio.com/blog" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog', 'Blog');" title="Blog">Blog</a></li>
<li id="menu-item-12204" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12204"><a href="https://www.twilio.com/docs/howto" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/howto', 'Tutorials');" title="Tutorials">Tutorials</a></li>
<li id="menu-item-12206" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12206"><a href="https://www.twilio.com/docs/api" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/api', 'Docs');" title="Docs">Docs</a></li>
<li id="menu-item-12207" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12207"><a href="http://www.twilio.com/help" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/help', 'Help');" title="Help">Help</a></li>
<li id="menu-item-12208" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12208"><a href="https://www.twilio.com/login" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/login', 'Login');" title="Login">Login</a></li>
<li id="menu-item-12209" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12209"><a href="https://www.twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/try-twilio', 'Signup');" title="Signup">Signup</a></li>
</ul></div>		</div>
	</nav>

	<div id="content" class="site-content container">
		<div class="row">

	<div id="primary" class="content-area col-md-9">
		<main id="main" class="site-main" role="main">

		
			
<article id="post-14544" class="row post-14544 post type-post status-publish format-standard has-post-thumbnail hentry category-all-things-code tag-flask tag-nps tag-python tag-sms tag-twilio tag-twilio-nps tag-twilio-sms-python">
	<header class="entry-header col-md-12">
		<h2 class="entry-title">Calculating Net Promoter Score with Python and SMS</h2>
						<div class="entry-image col-md-12">
        <img width="640" height="265" src="https://www.twilio.com/blog/wp-content/uploads/2015/01/potential-nps-banner-1024x424.png" class="img-responsive wp-post-image" alt="potential-nps-banner" srcset="https://www.twilio.com/blog/wp-content/uploads/2015/01/potential-nps-banner-1024x424.png 1024w, https://www.twilio.com/blog/wp-content/uploads/2015/01/potential-nps-banner-300x124.png 300w, https://www.twilio.com/blog/wp-content/uploads/2015/01/potential-nps-banner-640x265.png 640w, https://www.twilio.com/blog/wp-content/uploads/2015/01/potential-nps-banner.png 1280w" sizes="(max-width: 640px) 100vw, 640px" />			</div>
      <div class="clear"></div>
			
		<footer class="entry-footer">
			<div class="entry-meta">
					<div class="row">
	<div class="col-md-6">
	<span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/mmakai">Matt Makai</a></span></span> on <span class="posted-on"><a href="https://www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html" rel="bookmark"><time class="entry-date published" datetime="2015-01-30T08:59:34+00:00">January 30, 2015</time><time class="updated" datetime="2016-07-25T10:10:13+00:00">July 25, 2016</time></a></span>	</div>
	<div class="col-md-6">
		<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html" data-text="Calculating Net Promoter Score with Python and SMS ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
	</div>
	</div>
			</div><!-- .entry-meta -->
		</footer><!-- .entry-footer -->
	</header><!-- .entry-header -->

	<div class="entry-content col-md-12">
		<div class="row">
			<div class="col-md-12">
				<p dir="ltr">On the Twilio Developer Evangelism team we&#8217;re constantly seeking quantitative feedback to improve how we work. In 2014, I began collecting feedback via <a href="https://www.twilio.com/sms" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/sms', 'SMS');">SMS</a> to calculate <a href="http://en.wikipedia.org/wiki/Net_Promoter" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Net_Promoter', 'Net Promoter Score');">Net Promoter Score</a> on my conference talks as one quantitative measure for how talks were received. For example, at the end of my <a href="http://youtu.be/aMtiCX38w20?t=25m15s" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://youtu.be/aMtiCX38w20?t=25m15s', 'DjangoCon 2014 talk');">DjangoCon 2014 talk</a> you can see in the video how I asked the audience to text in a score based on how likely they were to recommend that talk to a friend or colleague.</p>
<p dir="ltr">In this blog post, we&#8217;ll walk through how you can also obtain quantitative data on your events by requesting scores from the audience via SMS and calculating Net Promoter Score with a Python script.</p>
<h2 dir="ltr">What is Net Promoter Score?</h2>
<p dir="ltr">Before we get started with the code, let’s clarify what Net Promoter Score is and why it’s useful as a measurement tool. Net Promoter Score (NPS) is <a href="http://www.netpromoter.com/why-net-promoter/know/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.netpromoter.com/why-net-promoter/know/', 'a quantitative metric used to gauge loyalty');">a quantitative metric used to gauge loyalty</a>. NPS is often used by companies to determine customers’ loyalty to the firm. In our case, we want to use NPS to quantitatively measure an audience’s reaction to a talk or event. I’ve personally found NPS useful for my talks in determining if a talk is close to my expectations or needs to be entirely reworked.</p>
<p dir="ltr">There is a specific phrase required to accurately collect NPS. In our case for scoring a technical talk, this phrase is “<em>How likely is it that you would recommend this talk to a friend or colleague?</em>”. Scores are then collected from the responders on a 0-10 scale. A response of 0 is the low end and means “<em>not likely at all</em>” while a response of 10 is the high end, which means “<em>very likely</em>”.</p>
<p dir="ltr">The responders’ scores are categorized into promoters, detractors and passives. We can calculate NPS by subtracting the percentage of detractors, as measured by those who respond with a score of 0 to 6, from the percentage of promoters who score the talk either a 9 or 10.</p>
<p dir="ltr">Let’s work through an example where we have 30 responders. Five people score the talk from 0-6, 15 score the talk a 7 or an 8, and 10 score the talk either a 9 or a 10. With these scores we have 5 detractors, 15 passives and 10 promoters. The final NPS result is determined by calculating</p>
<p dir="ltr"><strong>(10 promoters / 30 responses) &#8211; (5 detractors / 30 responses)</strong></p>
<p dir="ltr"><strong>.333 &#8211; .166 = .167</strong></p>
<p dir="ltr">The .167 is then multiplied by 100 to convert it into the -100 to +100 range for a +16.7 NPS result.</p>
<p dir="ltr">Now that we know how to calculate the score, how do we interpret the results? A negative NPS score means the talk needs work, a positive NPS score is considered good and anything around or above the +50 NPS range is excellent. Scores above +50 NPS are rare, especially with software developers who tend to be more critical than other audiences. If you’re in positive territory you’re doing good work.</p>
<p dir="ltr">Now that we understand NPS and and how it’s calculated, let’s get into the details of how to collect NPS scores from incoming text messages.</p>
<h2 dir="ltr">What We’ll Need</h2>
<p dir="ltr">We&#8217;ll need four items for calculating NPS via SMS:</p>
<ul>
<li>A <a href="https://www.twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/try-twilio', 'Twilio account');">Twilio account</a> and one active <a href="https://www.twilio.com/user/account/phone-numbers/incoming" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/user/account/phone-numbers/incoming', 'Twilio phone number');">Twilio phone number</a></li>
<li>A <a href="http://flask.pocoo.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://flask.pocoo.org/', 'Flask');">Flask</a> application that generates a response with the <a href="https://www.twilio.com/docs/libraries/python" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/docs/libraries/python', 'Twilio Python helper library');">Twilio Python helper library</a></li>
<li><a href="https://ngrok.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://ngrok.com/', 'Ngrok');">Ngrok</a> for a secure tunnel to our running Flask application server</li>
<li><a href="https://www.python.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.python.org/', 'Python');">Python</a> to run the response calculation script that we&#8217;ll create in this post and is also <a href="https://github.com/makaimc/sms-net-promoter-score" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/makaimc/sms-net-promoter-score', 'available on GitHub');">available on GitHub</a></li>
</ul>
<p dir="ltr">Ensure you have an <a href="https://www.twilio.com/help/faq/billing-pricing/how-do-i-upgrade-to-a-paid-account" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/help/faq/billing-pricing/how-do-i-upgrade-to-a-paid-account', 'upgraded Twilio account');">upgraded Twilio account</a> to be ready to begin the next section of this post.</p>
<h2 dir="ltr">Setting Up Our Phone Number and Flask App</h2>
<p dir="ltr">Head to the Twilio <a href="https://www.twilio.com/user/account/phone-numbers/incoming" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/user/account/phone-numbers/incoming', 'numbers page');">numbers page</a> and click the &#8220;Buy a number&#8221; button if you don’t already have a phone number available.</p>
<p dir="ltr"><img alt="" src="https://lh3.googleusercontent.com/z95fDMpvFg-N4YDmHyXdTuxIYv5y3BezmhAFXXrp2wYP2F0DbRMLum0Nhvmyrj4kN5cv3KILyZA7xMpY8ydvI56cHdNCvVFWP8Tkx3xq_LBJwm5K1bfzJlv2AEHolo3g4A" width="624px;" height="159px;" /></p>
<p dir="ltr">When you click on the &#8220;Buy a number&#8221; button you&#8217;ll see the numbers search screen. I recommend buying a number with the area code of the location you&#8217;ll be giving a talk or running an event in. In my case, I&#8217;m located in Washington, D.C. so I searched for the D.C. area code 202.</p>
<p dir="ltr"><img alt="" src="https://lh4.googleusercontent.com/rBmortm2ZcT1F7IDESFfShqAB5U95mnI8giR0r2IrJyiUZIoE0EfphAPSxTCOL6PD45WTvuvTHL_S4fAL81yJlxNk-p97Vpsvk4PQulZHUdSc-0oITXn3s0YUpsGPyOBAA" width="624px;" height="239px;" /></p>
<p dir="ltr">Buy one of the numbers and when it&#8217;s confirmed you&#8217;ll see the following success modal.</p>
<p dir="ltr"><img alt="" src="https://lh3.googleusercontent.com/xAerrAEYfM2DSUAqohQXI46kLO5F6OnE4tuO4uZBwT-jZB7DaNltc9bKg7M0GVhfdTYCG_2EM-wHbKOn5FtRnftkpc7pwJ86CRqw37blLWjN5lqL-5DI2RHmMszkxU1HWg" width="624px;" height="277px;" /></p>
<p dir="ltr">Before we can configure the number on the next screen though, we need to set up an endpoint with a Flask application to tell Twilio how to respond to incoming messages.</p>
<p dir="ltr">There’s a few ways to set up and deploy the Flask application to handle incoming SMS responses from Twilio. The first way is to deploy our GitHub repository to Heroku. You can even push this handy deploy button below to get it set up for you:</p>
<p dir="ltr"><a href="https://heroku.com/deploy?template=https://github.com/makaimc/sms-net-promoter-score" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://heroku.com/deploy?template=https://github.com/makaimc/sms-net-promoter-score', '');"><img src="https://www.herokucdn.com/deploy/button.png" alt="Deploy this app to Heroku"></a></p>
<p dir="ltr">Another way to handle the Flask application is to write the code or clone the repository then deploy it locally. We can then use a localhost tunnel to respond to inbound Twilio SMS messages. If you want to work through this approach and understand the code, read on. If you used the Heroku deploy button step down to the numbers screen below.</p>
<p dir="ltr">A best practice when working with Python is to isolate each project’s application dependencies from the other projects using <a href="https://virtualenv.pypa.io/en/latest/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://virtualenv.pypa.io/en/latest/', 'virtualenv');">virtualenv</a>. Virtualenv installation depends on your operating system, so here are guides for <a href="http://www.tylerbutler.com/2012/05/how-to-install-python-pip-and-virtualenv-on-windows-with-powershell/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.tylerbutler.com/2012/05/how-to-install-python-pip-and-virtualenv-on-windows-with-powershell/', 'Windows');">Windows</a>, <a href="http://jamie.curle.io/blog/installing-pip-virtualenv-and-virtualenvwrapper-on-os-x/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://jamie.curle.io/blog/installing-pip-virtualenv-and-virtualenvwrapper-on-os-x/', 'Mac OS X');">Mac OS X</a> and <a href="http://roundhere.net/journal/virtualenv-ubuntu-12-10/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://roundhere.net/journal/virtualenv-ubuntu-12-10/', 'Ubuntu Linux');">Ubuntu Linux</a> users.</p>
<p dir="ltr">Create a new <a href="https://virtualenv.pypa.io/en/latest/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://virtualenv.pypa.io/en/latest/', 'virtualenv');">virtualenv</a> to separate your Python dependencies from other apps you’re working on.</p>
<p dir="ltr">
			<span id="crayon-58794d72e4470848935818" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-e">virtualenv </span><span class="crayon-i">nps</span></span></span></p>
<p dir="ltr">Be sure to activate the virtualenv before we install the dependencies.</p>
<p dir="ltr">
			<span id="crayon-58794d72e4483262968732" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-e">source </span><span class="crayon-i">nps</span><span class="crayon-o">/</span><span class="crayon-i">bin</span><span class="crayon-o">/</span><span class="crayon-i">activate</span></span></span></p>
<p dir="ltr">The dependencies we need for this project are the Twilio helper library and Flask. To install this dependency run the following <a href="https://pip.pypa.io/en/latest/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://pip.pypa.io/en/latest/', 'pip');">pip</a> command on the command line. If you need to install <code>pip</code>, here are a few more specific installation guides for <a href="http://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows', 'Windows');">Windows</a>, <a href="http://docs.python-guide.org/en/latest/starting/install/osx/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://docs.python-guide.org/en/latest/starting/install/osx/', 'Mac OS X');">Mac OS X</a> and <a href="https://pip.pypa.io/en/latest/installing.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://pip.pypa.io/en/latest/installing.html', 'Linux');">Linux</a>.</p>
<p dir="ltr">
			<span id="crayon-58794d72e448e231375870" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-e">pip </span><span class="crayon-e">install </span><span class="crayon-e">twilio </span><span class="crayon-i">flask</span></span></span></p>
<p dir="ltr">Now your environment is ready to execute Python code that relies on Flask and the Twilio helper library, so let’s write the code to make it work.</p>
<p dir="ltr">Create a new file named 
			<span id="crayon-58794d72e4499195243593" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-i">py</span></span></span> for our Flask application and add the following contents.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e44a3243017799" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 13px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">app.py</span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 13px !important; line-height: 24px !important;">
import os
import twilio.twiml as twiml
from flask import Flask, Response

app = Flask(__name__)

# enter your desired SMS response message below
RESPONSE_MESSAGE = "Thank you for your feedback!"

@app.route('/')
def main():
    return "Web application up and running!"


@app.route('/message', methods=['POST'])
def twilio_response():
    response = twiml.Response()
    response.message(RESPONSE_MESSAGE)
    return Response(response.toxml(), mimetype="text/xml")


if __name__ == '__main__':
    # first attempt to get the PORT environment variable because it will be 
    # exposed if we're deploying on Heroku, otherwise default to port 5000
    port = int(os.environ.get("PORT", 5000))
    if port == 5000:
        app.debug = True
    app.run(host='0.0.0.0', port=port)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-2">2</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-4">4</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-6">6</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-8">8</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-10">10</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-12">12</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-14">14</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-16">16</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-18">18</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-20">20</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-22">22</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-24">24</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-26">26</div><div class="crayon-num" data-line="crayon-58794d72e44a3243017799-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44a3243017799-28">28</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e44a3243017799-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">os</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-sy">.</span><span class="crayon-e">twiml </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-e">twiml</span></div><div class="crayon-line" id="crayon-58794d72e44a3243017799-3"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">flask </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-i">Flask</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Response</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-4">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e44a3243017799-5"><span class="crayon-v">app</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Flask</span><span class="crayon-sy">(</span><span class="crayon-i">__name__</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-6">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e44a3243017799-7"><span class="crayon-c"># enter your desired SMS response message below</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-8"><span class="crayon-v">RESPONSE_MESSAGE</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Thank you for your feedback!"</span></div><div class="crayon-line" id="crayon-58794d72e44a3243017799-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-10"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e44a3243017799-11"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">"Web application up and running!"</span></div><div class="crayon-line" id="crayon-58794d72e44a3243017799-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-14">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e44a3243017799-15"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-16"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">twilio_response</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e44a3243017799-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">Response</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">message</span><span class="crayon-sy">(</span><span class="crayon-i">RESPONSE_MESSAGE</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e44a3243017799-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">Response</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">toxml</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mimetype</span><span class="crayon-o">=</span><span class="crayon-s">"text/xml"</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-20">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e44a3243017799-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-22"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'__main__'</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e44a3243017799-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># first attempt to get the PORT environment variable because it will be </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># exposed if we're deploying on Heroku, otherwise default to port 5000</span></div><div class="crayon-line" id="crayon-58794d72e44a3243017799-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">port</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-k ">os</span><span class="crayon-sy">.</span><span class="crayon-v">environ</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">"PORT"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5000</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">port</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">5000</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e44a3243017799-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-v">debug</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">True</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44a3243017799-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-v">host</span><span class="crayon-o">=</span><span class="crayon-s">'0.0.0.0'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">port</span><span class="crayon-o">=</span><span class="crayon-i">port</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0107 seconds] -->
<p></p>
<p dir="ltr">The above code creates a Flask web application and allows us to run it from the command line. Within the 
			<span id="crayon-58794d72e44ae407162538" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">twilio_response</span></span></span> function, we use the <a href="https://www.twilio.com/docs/quickstart/python" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/docs/quickstart/python', 'Twilio Python helper library');">Twilio Python helper library</a> to construct a response message that responds to an HTTP POST request with the message of your choice. I often include my contact information in there along with a link to the presentation if available.</p>
<p dir="ltr">Save the file and we can run the Flask application using the following command.</p>
<p dir="ltr">
			<span id="crayon-58794d72e44b8793280782" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-e">python </span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-i">py</span></span></span></p>
<p dir="ltr">The Flask server should display the following message if it starts up successfully through the above command.</p>
<p dir="ltr">
			<span id="crayon-58794d72e44c2329472684" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">Running </span><span class="crayon-e">on </span><span class="crayon-i">http</span><span class="crayon-o">:</span><span class="crayon-c">//127.0.0.1:5000/</span></span></span></p>
<p dir="ltr">To access the Flask application that’s running on your computer from other computers you&#8217;ll need to create a localhost tunnel using a tool such as N<a href="https://ngrok.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://ngrok.com/', 'grok');">grok</a>.</p>
<p dir="ltr">The reason why a localhost tunnel is necessary is that your development machine is likely behind a router that won’t allow direct inbound connections to your Flask application. We can get around this localhost issue with a localhost tunnel service, one of which is Ngrok. Sign up for Ngrok, <a href="https://ngrok.com/download" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://ngrok.com/download', 'download the Ngrok tunnel application and install it on your development machine.');">download the Ngrok tunnel application and install it on your development machine.</a></p>
<p dir="ltr">Fire up Ngrok on port 5000 where our Flask application is running with the following command. See <a href="https://www.twilio.com/blog/2014/03/configure-windows-for-local-webhook-testing-using-ngrok.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/blog/2014/03/configure-windows-for-local-webhook-testing-using-ngrok.html', 'this configuring Ngrok post');">this configuring Ngrok post</a> if you’re running Windows. On Linux and Mac OS X Ngrok can be run with the following command when you&#8217;re in the directory that Ngrok is located in.</p>
<p dir="ltr">
			<span id="crayon-58794d72e44cc501735300" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-sy">.</span><span class="crayon-o">/</span><span class="crayon-i">ngrok</span><span class="crayon-h"> </span><span class="crayon-cn">5000</span></span></span></p>
<p dir="ltr">Ngrok will load up a screen like the one in the following screenshot. Take note of the unique https:// forwarding URL as we&#8217;ll need that again in a minute to configure our Twilio number’s incoming message handling URL.</p>
<p dir="ltr"><img alt="" src="https://lh5.googleusercontent.com/x9a2tbOr4giK9NazlqPasLo45fJ7I6kPEZerA9PoaAp5NnKgvJCms79CFXdyXLPoKsCENfar7FPUkLBJwrf2gHszPQyLM0-gycz-W4aS2giqHQib6saNZt7ofg_zrnw4Yw" width="624px;" height="169px;" /></p>
<p dir="ltr">The Flask application running on port 5000 can now be accessed through the forwarding URL set up by Ngrok.</p>
<p dir="ltr">We’re now ready to set up the Twilio number. Head back to the Twilio web page and press the &#8220;Setup number&#8221; button for the number you purchased. A configuration page with default values for voice and messaging will come up and look like the following screen.</p>
<p dir="ltr"><img alt="" src="https://lh6.googleusercontent.com/u0QRyooGntFysIHausLELaHD763wdJoLPdkQvfxUUcJIN6NvPGRe4AnUlbfAS3IgPXSbx7XPZg8lb3LkLss8jMSibRjmompEQhFX3k94f3DdSYPe3Xi98twS2gKCviJEAQ" width="624px;" height="371px;" /></p>
<p dir="ltr">The messaging text box, highlighted with a dotted green rectangle in the picture above, tells Twilio where to send an HTTP POST with the details of any inbound SMS sent to this number. If you used the Deploy to Heroku button, copy the URL for the application plus the /message endpoint. For example, if Heroku generated the app name of serene-beyond-5838 for your deployment, you would fill in the following URL into the Messaging Request URL text box.</p>
<p dir="ltr">
			<span id="crayon-58794d72e44d8266847160" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">https</span><span class="crayon-o">:</span><span class="crayon-c">//serene-beyond-5838.herokuapp.com/message</span></span></span></p>
<p dir="ltr">If instead you used Ngrok, copy the Ngrok forwarding URL and paste it into that text box. Press the Save button and your setup should look similar to the following screen.</p>
<p dir="ltr"><img alt="" src="https://lh3.googleusercontent.com/i9bDKA_mARPdXK3lV5RpJWN8k1NM1GUJAzTi7gc585WBUpH82dEP-6DcIjP7s6GLSGx5Fix-OlcBTlpNXqU4innd-u6AJHyFHUQMnq4JdeU6f5uTMGWB_1Hsb3qxH1g-vA" width="624px;" height="396px;" /></p>
<p dir="ltr">With our Flask application serving the response through Ngrok or Heroku and the messages webhook for our number set up, now anyone who sends a text message to the number will see the following response.</p>
<p dir="ltr"><img alt="" src="https://lh5.googleusercontent.com/6dyQHs0hfw4ROuMbmfumI2aGPnP0ykWQggQjZS-v__axgJNulDH5IaA-71XQM2EuoQFp6ToRMIt8u88T2s19Ffm6MalEMUxt-kZ3inITjkVHzhYsmKaK64wFGbFRHQAcFA" width="624px;" height="316px;" /></p>
<p dir="ltr">We&#8217;re set up to respond to inbound feedback text messages so let&#8217;s see how this would work with an audience.</p>
<h2 dir="ltr">Gathering Feedback Scores</h2>
<p dir="ltr">Now we can gather responses from the audience, but we need to set the context for people so they know the feedback scale. I recommend putting up a slide in your presentation with the phone number that looks something like the following.</p>
<p dir="ltr"><img alt="" src="https://lh3.googleusercontent.com/7AsKjnCIfIDvB0mrhj31WZ3OvQIcZ0fYh_E-v4_PCNsxq8BJctUKnqw7jTzakEyBD0nUVIxJ6-vZ4m-ZWNdU05_562G0gnNi6u7fsyIj7_dgJrX06O_ljCCDpCWliUl37Q" width="624px;" height="421px;" /></p>
<p dir="ltr">At the end of the talk or event, put up a slide like the one above and ask the audience to text their score to the number on the screen. Make sure to read the text and phone number while asking the audience for their honest score. Let folks know in your request that you&#8217;re looking for quantitative metrics to help improve the talk for future audiences.</p>
<p dir="ltr">Once the audience&#8217;s responses are captured and the talk is over we can shift our focus to analyzing the input.</p>
<h2 dir="ltr">Calculating Net Promoter Score</h2>
<p dir="ltr">With our SMS responses and a bit of Python we can calculate NPS through the Twilio API and a <a href="https://github.com/makaimc/sms-net-promoter-score" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/makaimc/sms-net-promoter-score', 'Python script');">Python script</a>. Create a new file named nps.py to hold the Net Promoter Score code. The retrieval, parsing, filtering and displaying of the NPS results will be handled with four functions in this Python file.</p>
<p dir="ltr">At the top of the script we have our imports. These libraries are used for parsing arguments, extracting scores with regular expressions and handling dates and times. The last import is for the <a href="https://www.twilio.com/docs/python/install" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/docs/python/install', 'Twilio Python helper library');">Twilio Python helper library</a>.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e44e4489874714" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 13px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">nps.py</span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 13px !important; line-height: 24px !important;">
import argparse
import re
import time
from datetime import datetime
from twilio.rest import TwilioRestClient</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e44e4489874714-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44e4489874714-2">2</div><div class="crayon-num" data-line="crayon-58794d72e44e4489874714-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e44e4489874714-4">4</div><div class="crayon-num" data-line="crayon-58794d72e44e4489874714-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e44e4489874714-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44e4489874714-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">re</span></div><div class="crayon-line" id="crayon-58794d72e44e4489874714-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e44e4489874714-4"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-k ">datetime</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">datetime</span></div><div class="crayon-line" id="crayon-58794d72e44e4489874714-5"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-sy">.</span><span class="crayon-e">rest </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-i">TwilioRestClient</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0021 seconds] -->
<p></p>
<p dir="ltr">Next up are two variables which set up our Twilio credentials. We can set the account SID and authentication token here by replacing them in this Python file or set the <a href="http://en.wikipedia.org/wiki/Environment_variable" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Environment_variable', 'environment variables');">environment variables</a> 
			<span id="crayon-58794d72e44ee700439400" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">TWILIO_ACCOUNT_SID</span></span></span> and 
			<span id="crayon-58794d72e44f8986226573" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">TWILIO_AUTH_TOKEN</span></span></span> with values found at the top of <a href="https://www.twilio.com/user/account/voice-messaging" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/user/account/voice-messaging', 'your Twilio account dashboard');">your Twilio account dashboard</a>.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e4502933180118" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 13px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">nps.py</span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 13px !important; line-height: 24px !important;">
# input Twilio credentials if not set in environment variables
ACCOUNT = "ACXXXXXXXXXXXXXXXXX"
TOKEN = "YYYYYYYYYYYYYYYYYY"</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e4502933180118-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4502933180118-2">2</div><div class="crayon-num" data-line="crayon-58794d72e4502933180118-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e4502933180118-1"><span class="crayon-c"># input Twilio credentials if not set in environment variables</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4502933180118-2"><span class="crayon-v">ACCOUNT</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"ACXXXXXXXXXXXXXXXXX"</span></div><div class="crayon-line" id="crayon-58794d72e4502933180118-3"><span class="crayon-k ">TOKEN</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"YYYYYYYYYYYYYYYYYY"</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p dir="ltr">If you set the environment variables then the above variables can be left alone. Otherwise grab the account SID and auth token from the <a href="https://www.twilio.com/user/account/voice-messaging" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/user/account/voice-messaging', 'Twilio dashboard');">Twilio dashboard</a> and replace the strings in your code with your credentials.</p>
<p dir="ltr">Next up in the script is the 
			<span id="crayon-58794d72e450c159891373" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">get_messages</span></span></span> function which handles retrieval of messages from Twilio via an HTTP call performed by the Twilio Python helper library.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e4516936961242" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 13px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">nps.py</span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 13px !important; line-height: 24px !important;">
def get_messages(number, event_date):
    """Uses the Twilio Python helper library to iterate through all
    messages sent to a single phone number.

    Args:
      number -- which number to search for messages
      event_date -- string with date in YYYY-MM-DD format
    Returns:
      dict -- inbound phone number as key and array of responses as values
    """
    msgs = {}
    for message in client.messages.iter(to=number, date_sent=event_date):
        if message.from_ in msgs.keys():
            msgs[message.from_].append(message.body)
        else:
            msgs[message.from_] = [message.body]
    return msgs</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e4516936961242-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4516936961242-2">2</div><div class="crayon-num" data-line="crayon-58794d72e4516936961242-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4516936961242-4">4</div><div class="crayon-num" data-line="crayon-58794d72e4516936961242-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4516936961242-6">6</div><div class="crayon-num" data-line="crayon-58794d72e4516936961242-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4516936961242-8">8</div><div class="crayon-num" data-line="crayon-58794d72e4516936961242-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4516936961242-10">10</div><div class="crayon-num" data-line="crayon-58794d72e4516936961242-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4516936961242-12">12</div><div class="crayon-num" data-line="crayon-58794d72e4516936961242-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4516936961242-14">14</div><div class="crayon-num" data-line="crayon-58794d72e4516936961242-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4516936961242-16">16</div><div class="crayon-num" data-line="crayon-58794d72e4516936961242-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e4516936961242-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">get_messages</span><span class="crayon-sy">(</span><span class="crayon-i">number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">event_date</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4516936961242-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"""Uses the Twilio Python helper library to iterate through all</span></div><div class="crayon-line" id="crayon-58794d72e4516936961242-3"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;messages sent to a single phone number.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4516936961242-4">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e4516936961242-5"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;Args:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4516936961242-6"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number -- which number to search for messages</span></div><div class="crayon-line" id="crayon-58794d72e4516936961242-7"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event_date -- string with date in YYYY-MM-DD format</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4516936961242-8"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;Returns:</span></div><div class="crayon-line" id="crayon-58794d72e4516936961242-9"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict -- inbound phone number as key and array of responses as values</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4516936961242-10"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;"""</span></div><div class="crayon-line" id="crayon-58794d72e4516936961242-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">msgs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4516936961242-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">message </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-v">messages</span><span class="crayon-sy">.</span><span class="crayon-k ">iter</span><span class="crayon-sy">(</span><span class="crayon-v">to</span><span class="crayon-o">=</span><span class="crayon-i">number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">date_sent</span><span class="crayon-o">=</span><span class="crayon-i">event_date</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e4516936961242-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-e">from_ </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">msgs</span><span class="crayon-sy">.</span><span class="crayon-e">keys</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4516936961242-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">msgs</span><span class="crayon-sy">[</span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-i">from_</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-i">body</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e4516936961242-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4516936961242-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">msgs</span><span class="crayon-sy">[</span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-i">from_</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-i">body</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-58794d72e4516936961242-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-i">msgs</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0060 seconds] -->
<p></p>
<p dir="ltr">In 
			<span id="crayon-58794d72e4521690447677" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">get_messages</span></span></span> we iterate through the messages sent to the phone number on a specific date. We store all messages associated with a phone number in an array. We&#8217;ll use the array to try and parse out a score from at least one of those messages. In most cases there will only be a single message from a phone number but occasionally people will text in several times with a score. When we filter the scores later we&#8217;ll only keep a single score per number so the results are not skewed by a single person texting in many scores from the same number.</p>
<p dir="ltr">The 
			<span id="crayon-58794d72e452b067665246" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">filter_scores</span></span></span> function shown below loops through each message in the array and parses a score out from a message. As soon as we find a score we break from the array so that we do not count more than one score per phone number.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e4535091911337" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 13px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">nps.py</span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 13px !important; line-height: 24px !important;">
def filter_scores(msgs):
    """Converts a dict with phone numbers as keys and inbound messages
       as arrays for values into an array with just scores from 0-10,
       including any scores with decimal places.

       Args:
         msgs -- dict with phone numbers as keys and a list of
                  inbound messages as the values
       Returns:
         list -- scores as floats from 0-10
    """
    scores = []
    for msg_array in msgs.values():
        for message in msg_array:
            score = re.match("\d+(\.\d{1,2})?", message)
            if score:
                scores.append(round(float(score.group())))
                # break to prevent counting duplicate scores from same number
                break
    return scores</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e4535091911337-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-2">2</div><div class="crayon-num" data-line="crayon-58794d72e4535091911337-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-4">4</div><div class="crayon-num" data-line="crayon-58794d72e4535091911337-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-6">6</div><div class="crayon-num" data-line="crayon-58794d72e4535091911337-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-8">8</div><div class="crayon-num" data-line="crayon-58794d72e4535091911337-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-10">10</div><div class="crayon-num" data-line="crayon-58794d72e4535091911337-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-12">12</div><div class="crayon-num" data-line="crayon-58794d72e4535091911337-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-14">14</div><div class="crayon-num" data-line="crayon-58794d72e4535091911337-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-16">16</div><div class="crayon-num" data-line="crayon-58794d72e4535091911337-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-18">18</div><div class="crayon-num" data-line="crayon-58794d72e4535091911337-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4535091911337-20">20</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e4535091911337-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">filter_scores</span><span class="crayon-sy">(</span><span class="crayon-i">msgs</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"""Converts a dict with phone numbers as keys and inbound messages</span></div><div class="crayon-line" id="crayon-58794d72e4535091911337-3"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; as arrays for values into an array with just scores from 0-10,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-4"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; including any scores with decimal places.</span></div><div class="crayon-line" id="crayon-58794d72e4535091911337-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-6"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Args:</span></div><div class="crayon-line" id="crayon-58794d72e4535091911337-7"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; msgs -- dict with phone numbers as keys and a list of</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-8"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inbound messages as the values</span></div><div class="crayon-line" id="crayon-58794d72e4535091911337-9"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returns:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-10"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; list -- scores as floats from 0-10</span></div><div class="crayon-line" id="crayon-58794d72e4535091911337-11"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;"""</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">scores</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-58794d72e4535091911337-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">msg_array </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">msgs</span><span class="crayon-sy">.</span><span class="crayon-e">values</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">message </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">msg_array</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e4535091911337-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">score</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">match</span><span class="crayon-sy">(</span><span class="crayon-s">"\d+(\.\d{1,2})?"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">message</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-i">score</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e4535091911337-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">scores</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-k ">round</span><span class="crayon-sy">(</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-v">score</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># break to prevent counting duplicate scores from same number</span></div><div class="crayon-line" id="crayon-58794d72e4535091911337-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4535091911337-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-i">scores</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0054 seconds] -->
<p></p>
<p dir="ltr">Inbound messages are not always clean numbers between 0 and 10, therefore we use a regular expression to extract out a whole number or one with a decimal place from the beginning of the message.</p>
<p dir="ltr">Next we need a to calculate the NPS and output the scores. In this script there are two functions, one named 
			<span id="crayon-58794d72e4540817056793" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">output_scores</span></span></span> and another named 
			<span id="crayon-58794d72e4549394661446" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">calculate_nps</span></span></span>. The main function calls 
			<span id="crayon-58794d72e4553129185417" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">output_scores</span></span></span> to print a few strings to the command line with the number of responses received, calculated NPS and the breakdown of responses per score.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e455d431056671" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 13px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">nps.py</span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 13px !important; line-height: 24px !important;">
def output_scores(scores):
    """Takes in a list of integers from 0-10 and outputs results about
       Net Promoter Score.

       Args:
         scores -- list of floats representing scores
    """
    nps = calculate_nps(scores)
    print("{0} responses received".format(len(scores)))
    print("Net Promoter Score: {0:.1f}".format(nps))
    for i in range(0, 11):
        print("{0} responses with a score of {1}".format(scores.count(i), i))</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e455d431056671-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e455d431056671-2">2</div><div class="crayon-num" data-line="crayon-58794d72e455d431056671-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e455d431056671-4">4</div><div class="crayon-num" data-line="crayon-58794d72e455d431056671-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e455d431056671-6">6</div><div class="crayon-num" data-line="crayon-58794d72e455d431056671-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e455d431056671-8">8</div><div class="crayon-num" data-line="crayon-58794d72e455d431056671-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e455d431056671-10">10</div><div class="crayon-num" data-line="crayon-58794d72e455d431056671-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e455d431056671-12">12</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e455d431056671-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">output_scores</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e455d431056671-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"""Takes in a list of integers from 0-10 and outputs results about</span></div><div class="crayon-line" id="crayon-58794d72e455d431056671-3"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Net Promoter Score.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e455d431056671-4">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e455d431056671-5"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Args:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e455d431056671-6"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scores -- list of floats representing scores</span></div><div class="crayon-line" id="crayon-58794d72e455d431056671-7"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;"""</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e455d431056671-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">nps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">calculate_nps</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e455d431056671-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"{0} responses received"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e455d431056671-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Net Promoter Score: {0:.1f}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-i">nps</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e455d431056671-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">range</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">11</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e455d431056671-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"{0} responses with a score of {1}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">scores</span><span class="crayon-sy">.</span><span class="crayon-e">count</span><span class="crayon-sy">(</span><span class="crayon-i">i</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0049 seconds] -->
<p></p>
<p dir="ltr">The 
			<span id="crayon-58794d72e4567773600387" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">calculate_nps</span></span></span> function handles the NPS calculation by counting the promoter responses (9s and 10s) and the detractors (0s through 6s). Then the proportion of detractors is subtracted from the proportion of promoters. The return value is multiplied by 100 because NPS is in the range from 0 to 100.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e4571359720994" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 13px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">nps.py</span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 13px !important; line-height: 24px !important;">
def calculate_nps(scores):
    """Takes in a list of floats and returns the Net Promoter Score based
       on those scores.

       Args:
         scores -- list of floats representing scores
       Returns:
         float -- Net Promoter Score from -100.0 to +100.0
    """
    detractors, promoters = 0, 0
    for s in scores:
        if s &lt;= 6:
            detractors += 1
        if s &gt;= 9:
            promoters += 1
    # below we calculate the Net Promoter Score with this formula
    nps = (float(promoters) / len(scores) - \
           float(detractors) / len(scores)) * 100
    return nps</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e4571359720994-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4571359720994-2">2</div><div class="crayon-num" data-line="crayon-58794d72e4571359720994-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4571359720994-4">4</div><div class="crayon-num" data-line="crayon-58794d72e4571359720994-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4571359720994-6">6</div><div class="crayon-num" data-line="crayon-58794d72e4571359720994-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4571359720994-8">8</div><div class="crayon-num" data-line="crayon-58794d72e4571359720994-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4571359720994-10">10</div><div class="crayon-num" data-line="crayon-58794d72e4571359720994-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4571359720994-12">12</div><div class="crayon-num" data-line="crayon-58794d72e4571359720994-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4571359720994-14">14</div><div class="crayon-num" data-line="crayon-58794d72e4571359720994-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4571359720994-16">16</div><div class="crayon-num" data-line="crayon-58794d72e4571359720994-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e4571359720994-18">18</div><div class="crayon-num" data-line="crayon-58794d72e4571359720994-19">19</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e4571359720994-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">calculate_nps</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4571359720994-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"""Takes in a list of floats and returns the Net Promoter Score based</span></div><div class="crayon-line" id="crayon-58794d72e4571359720994-3"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on those scores.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4571359720994-4">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e4571359720994-5"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Args:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4571359720994-6"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scores -- list of floats representing scores</span></div><div class="crayon-line" id="crayon-58794d72e4571359720994-7"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returns:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4571359720994-8"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float -- Net Promoter Score from -100.0 to +100.0</span></div><div class="crayon-line" id="crayon-58794d72e4571359720994-9"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;"""</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4571359720994-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">detractors</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">promoters</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-58794d72e4571359720994-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">scores</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4571359720994-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-o">&lt;=</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e4571359720994-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">detractors</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4571359720994-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">9</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e4571359720994-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">promoters</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4571359720994-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># below we calculate the Net Promoter Score with this formula</span></div><div class="crayon-line" id="crayon-58794d72e4571359720994-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">nps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-i">promoters</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e4571359720994-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-i">detractors</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">100</span></div><div class="crayon-line" id="crayon-58794d72e4571359720994-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-i">nps</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0068 seconds] -->
<p></p>
<p dir="ltr">Finally, let’s take a look at the main function that is invoked when the script is run from the command line.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e457b182015759" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 13px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">nps.py</span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 13px !important; line-height: 24px !important;">
if __name__ == '__main__':
    description = "Process a Twilio phone number and event date."
    parser = argparse.ArgumentParser(description=description)
    parser.add_argument('phone_number', type=str,
                        help='Twilio phone number that people send ' + \
                             'scores to, for example, +12025551234')
    parser.add_argument('--date', dest='event_date', type=str,
                        default=datetime.today().strftime("%Y-%m-%d"),
                        help='Date of the event to filter messages on. ' + \
                             'YYYY-MM-DD format. (default: today)')
    args = parser.parse_args()
    try:
        client = TwilioRestClient()
    except:
        client = TwilioRestClient(ACCOUNT, TOKEN)
    msgs = get_messages(args.phone_number, args.event_date)
    scores = filter_scores(msgs)
    if len(scores) &gt; 0:
        output_scores(scores)
    else:
        print("No scores found for an event on {0}.".format(args.event_date))</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e457b182015759-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-2">2</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-4">4</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-6">6</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-8">8</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-10">10</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-12">12</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-14">14</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-16">16</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-18">18</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e457b182015759-20">20</div><div class="crayon-num" data-line="crayon-58794d72e457b182015759-21">21</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e457b182015759-1"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'__main__'</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">description</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Process a Twilio phone number and event date."</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">parser</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span><span class="crayon-sy">.</span><span class="crayon-e">ArgumentParser</span><span class="crayon-sy">(</span><span class="crayon-v">description</span><span class="crayon-o">=</span><span class="crayon-i">description</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">parser</span><span class="crayon-sy">.</span><span class="crayon-e">add_argument</span><span class="crayon-sy">(</span><span class="crayon-s">'phone_number'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">type</span><span class="crayon-o">=</span><span class="crayon-k ">str</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">help</span><span class="crayon-o">=</span><span class="crayon-s">'Twilio phone number that people send '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-s">'scores to, for example, +12025551234'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">parser</span><span class="crayon-sy">.</span><span class="crayon-e">add_argument</span><span class="crayon-sy">(</span><span class="crayon-s">'--date'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dest</span><span class="crayon-o">=</span><span class="crayon-s">'event_date'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">type</span><span class="crayon-o">=</span><span class="crayon-k ">str</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">default</span><span class="crayon-o">=</span><span class="crayon-k ">datetime</span><span class="crayon-sy">.</span><span class="crayon-e">today</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">strftime</span><span class="crayon-sy">(</span><span class="crayon-s">"%Y-%m-%d"</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">help</span><span class="crayon-o">=</span><span class="crayon-s">'Date of the event to filter messages on. '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-s">'YYYY-MM-DD format. (default: today)'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">args</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">parser</span><span class="crayon-sy">.</span><span class="crayon-e">parse_args</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">TwilioRestClient</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">except</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">TwilioRestClient</span><span class="crayon-sy">(</span><span class="crayon-i">ACCOUNT</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">TOKEN</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">msgs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">get_messages</span><span class="crayon-sy">(</span><span class="crayon-v">args</span><span class="crayon-sy">.</span><span class="crayon-i">phone_number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">args</span><span class="crayon-sy">.</span><span class="crayon-i">event_date</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">scores</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">filter_scores</span><span class="crayon-sy">(</span><span class="crayon-i">msgs</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">output_scores</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e457b182015759-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e457b182015759-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"No scores found for an event on {0}."</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">args</span><span class="crayon-sy">.</span><span class="crayon-i">event_date</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0116 seconds] -->
<p></p>
<p dir="ltr">In the above code we parse command line arguments for the phone number to search for the response SMS messages. A second optional argument specifies the date of the event and uses today’s date if no argument is passed in. We then instantiate the Twilio Python helper library with account credentials in the script or from environment variables.</p>
<p dir="ltr">Once we have the command line arguments and an instantiated helper library we invoke the 
			<span id="crayon-58794d72e4586612472569" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">get_messages</span></span></span> function which issues an HTTP call to Twilio to pull down the messages for a specific date. The Python dictionary of messages returned is then filtered for unique numbers and numeric responses by the 
			<span id="crayon-58794d72e4590003730476" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">filter_scores</span></span></span> function. If there is at least one score extracted from filtering the scores we display the NPS scores by calling the 
			<span id="crayon-58794d72e459a186299336" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">output_scores</span></span></span> function.</p>
<p dir="ltr">That is all the code from the script. Here’s the entire script again, this time put together in a single code block.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e45a4066337087" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 13px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">nps.py</span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 13px !important; line-height: 24px !important;">
import argparse
import re
import time
from datetime import datetime
from twilio.rest import TwilioRestClient


# input Twilio credentials if not set in environment variables
ACCOUNT = "ACXXXXXXXXXXXXXXXXX"
TOKEN = "YYYYYYYYYYYYYYYYYY"


def get_messages(number, event_date):
    """Uses the Twilio Python helper library to iterate through all
    messages sent to a single phone number.

    Args:
      number -- which number to search for messages
      event_date -- string with date in YYYY-MM-DD format
    Returns:
      dict -- inbound phone number as key and array of responses as values
    """
    msgs = {}
    for message in client.messages.iter(to=number, date_sent=event_date):
        if message.from_ in msgs.keys():
            msgs[message.from_].append(message.body)
        else:
            msgs[message.from_] = [message.body]
    return msgs


def filter_scores(msgs):
    """Converts a dict with phone numbers as keys and inbound messages
       as arrays for values into an array with just scores from 0-10,
       including any scores with decimal places.

       Args:
         msgs -- dict with phone numbers as keys and a list of
                  inbound messages as the values
       Returns:
         list -- scores as floats from 0-10
    """
    scores = []
    for msg_array in msgs.values():
        for message in msg_array:
            score = re.match("\d+(\.\d{1,2})?", message)
            if score:
                scores.append(round(float(score.group())))
                # break to prevent counting duplicate scores from same number
                break
    return scores


def output_scores(scores):
    """Takes in a list of integers from 0-10 and outputs results about
       Net Promoter Score.

       Args:
         scores -- list of floats representing scores
    """
    nps = calculate_nps(scores)
    print("{0} responses received".format(len(scores)))
    print("Net Promoter Score: {0:.1f}".format(nps))
    for i in range(0, 11):
        print("{0} responses with a score of {1}".format(scores.count(i), i))


def calculate_nps(scores):
    """Takes in a list of floats and returns the Net Promoter Score based
       on those scores.

       Args:
         scores -- list of floats representing scores
       Returns:
         float -- Net Promoter Score from -100.0 to +100.0
    """
    detractors, promoters = 0, 0
    for s in scores:
        if s &lt;= 6:
            detractors += 1
        if s &gt;= 9:
            promoters += 1
    # below we calculate the Net Promoter Score with this formula
    nps = (float(promoters) / len(scores) - \
           float(detractors) / len(scores)) * 100
    return nps


if __name__ == '__main__':
    description = "Process a Twilio phone number and event date."
    parser = argparse.ArgumentParser(description=description)
    parser.add_argument('phone_number', type=str,
                        help='Twilio phone number that people send ' + \
                             'scores to, for example, +12025551234')
    parser.add_argument('--date', dest='event_date', type=str,
                        default=datetime.today().strftime("%Y-%m-%d"),
                        help='Date of the event to filter messages on. ' + \
                             'YYYY-MM-DD format. (default: today)')
    args = parser.parse_args()
    try:
        client = TwilioRestClient()
    except:
        client = TwilioRestClient(ACCOUNT, TOKEN)
    msgs = get_messages(args.phone_number, args.event_date)
    scores = filter_scores(msgs)
    if len(scores) &gt; 0:
        output_scores(scores)
    else:
        print("No scores found for an event on {0}.".format(args.event_date))</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-2">2</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-4">4</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-6">6</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-8">8</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-10">10</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-12">12</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-14">14</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-16">16</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-18">18</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-20">20</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-22">22</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-24">24</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-26">26</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-28">28</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-30">30</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-32">32</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-34">34</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-36">36</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-38">38</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-40">40</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-42">42</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-44">44</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-46">46</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-48">48</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-50">50</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-52">52</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-54">54</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-56">56</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-58">58</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-60">60</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-62">62</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-64">64</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-66">66</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-68">68</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-70">70</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-72">72</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-74">74</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-76">76</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-78">78</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-80">80</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-82">82</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-84">84</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-86">86</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-88">88</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-90">90</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-92">92</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-94">94</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-96">96</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-98">98</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-100">100</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-102">102</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-104">104</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-106">106</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45a4066337087-108">108</div><div class="crayon-num" data-line="crayon-58794d72e45a4066337087-109">109</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e45a4066337087-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">re</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-4"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-k ">datetime</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">datetime</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-5"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-sy">.</span><span class="crayon-e">rest </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-i">TwilioRestClient</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-6">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e45a4066337087-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-8"><span class="crayon-c"># input Twilio credentials if not set in environment variables</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-9"><span class="crayon-v">ACCOUNT</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"ACXXXXXXXXXXXXXXXXX"</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-10"><span class="crayon-k ">TOKEN</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"YYYYYYYYYYYYYYYYYY"</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-12">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e45a4066337087-13"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">get_messages</span><span class="crayon-sy">(</span><span class="crayon-i">number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">event_date</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"""Uses the Twilio Python helper library to iterate through all</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-15"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;messages sent to a single phone number.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-16">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e45a4066337087-17"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;Args:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-18"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number -- which number to search for messages</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-19"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event_date -- string with date in YYYY-MM-DD format</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-20"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;Returns:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-21"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict -- inbound phone number as key and array of responses as values</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-22"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;"""</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">msgs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">message </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-v">messages</span><span class="crayon-sy">.</span><span class="crayon-k ">iter</span><span class="crayon-sy">(</span><span class="crayon-v">to</span><span class="crayon-o">=</span><span class="crayon-i">number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">date_sent</span><span class="crayon-o">=</span><span class="crayon-i">event_date</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-e">from_ </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">msgs</span><span class="crayon-sy">.</span><span class="crayon-e">keys</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">msgs</span><span class="crayon-sy">[</span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-i">from_</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-i">body</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">msgs</span><span class="crayon-sy">[</span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-i">from_</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-i">body</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">msgs</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-30">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e45a4066337087-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-32"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">filter_scores</span><span class="crayon-sy">(</span><span class="crayon-i">msgs</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"""Converts a dict with phone numbers as keys and inbound messages</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-34"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; as arrays for values into an array with just scores from 0-10,</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-35"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; including any scores with decimal places.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-36">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e45a4066337087-37"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Args:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-38"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; msgs -- dict with phone numbers as keys and a list of</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-39"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inbound messages as the values</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-40"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returns:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-41"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; list -- scores as floats from 0-10</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-42"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;"""</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">scores</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">msg_array </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">msgs</span><span class="crayon-sy">.</span><span class="crayon-e">values</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">message </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">msg_array</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">score</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">match</span><span class="crayon-sy">(</span><span class="crayon-s">"\d+(\.\d{1,2})?"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">message</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-i">score</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">scores</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-k ">round</span><span class="crayon-sy">(</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-v">score</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># break to prevent counting duplicate scores from same number</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">scores</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-52">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e45a4066337087-53">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-54"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">output_scores</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"""Takes in a list of integers from 0-10 and outputs results about</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-56"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Net Promoter Score.</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-57">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-58"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Args:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-59"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scores -- list of floats representing scores</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-60"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;"""</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">nps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">calculate_nps</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"{0} responses received"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Net Promoter Score: {0:.1f}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-i">nps</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">range</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">11</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"{0} responses with a score of {1}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">scores</span><span class="crayon-sy">.</span><span class="crayon-e">count</span><span class="crayon-sy">(</span><span class="crayon-i">i</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-66">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e45a4066337087-67">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-68"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">calculate_nps</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"""Takes in a list of floats and returns the Net Promoter Score based</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-70"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on those scores.</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-71">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-72"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Args:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-73"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scores -- list of floats representing scores</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-74"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returns:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-75"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float -- Net Promoter Score from -100.0 to +100.0</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-76"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;"""</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">detractors</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">promoters</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">scores</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-o">&lt;=</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">detractors</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">9</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">promoters</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># below we calculate the Net Promoter Score with this formula</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">nps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-i">promoters</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-i">detractors</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">100</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">nps</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-87">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-88">&nbsp;</div><div class="crayon-line" id="crayon-58794d72e45a4066337087-89"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'__main__'</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">description</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Process a Twilio phone number and event date."</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">parser</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span><span class="crayon-sy">.</span><span class="crayon-e">ArgumentParser</span><span class="crayon-sy">(</span><span class="crayon-v">description</span><span class="crayon-o">=</span><span class="crayon-i">description</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">parser</span><span class="crayon-sy">.</span><span class="crayon-e">add_argument</span><span class="crayon-sy">(</span><span class="crayon-s">'phone_number'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">type</span><span class="crayon-o">=</span><span class="crayon-k ">str</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">help</span><span class="crayon-o">=</span><span class="crayon-s">'Twilio phone number that people send '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-s">'scores to, for example, +12025551234'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">parser</span><span class="crayon-sy">.</span><span class="crayon-e">add_argument</span><span class="crayon-sy">(</span><span class="crayon-s">'--date'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dest</span><span class="crayon-o">=</span><span class="crayon-s">'event_date'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">type</span><span class="crayon-o">=</span><span class="crayon-k ">str</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">default</span><span class="crayon-o">=</span><span class="crayon-k ">datetime</span><span class="crayon-sy">.</span><span class="crayon-e">today</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">strftime</span><span class="crayon-sy">(</span><span class="crayon-s">"%Y-%m-%d"</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">help</span><span class="crayon-o">=</span><span class="crayon-s">'Date of the event to filter messages on. '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-s">'YYYY-MM-DD format. (default: today)'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">args</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">parser</span><span class="crayon-sy">.</span><span class="crayon-e">parse_args</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">TwilioRestClient</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">except</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">TwilioRestClient</span><span class="crayon-sy">(</span><span class="crayon-i">ACCOUNT</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">TOKEN</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">msgs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">get_messages</span><span class="crayon-sy">(</span><span class="crayon-v">args</span><span class="crayon-sy">.</span><span class="crayon-i">phone_number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">args</span><span class="crayon-sy">.</span><span class="crayon-i">event_date</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">scores</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">filter_scores</span><span class="crayon-sy">(</span><span class="crayon-i">msgs</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">output_scores</span><span class="crayon-sy">(</span><span class="crayon-i">scores</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45a4066337087-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794d72e45a4066337087-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"No scores found for an event on {0}."</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">args</span><span class="crayon-sy">.</span><span class="crayon-i">event_date</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0354 seconds] -->
<p></p>
<p dir="ltr">Let&#8217;s give it a try now. Run it with the following command but replace the phone number below with your own response phone number.</p>
<p dir="ltr">
			<span id="crayon-58794d72e45b2222737558" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">nps</span><span class="crayon-sy">.</span><span class="crayon-i">py</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-cn">12027336150</span></span></span></p>
<p dir="ltr">When we run the above command with our response number we&#8217;ll see output like the following assuming we had responses from the current date.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e45bc607515988" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">output for nps.py</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
71 responses received
Net Promoter Score: 49.3
0 responses with the score of 0
1 responses with the score of 1
2 responses with the score of 2
0 responses with the score of 3
0 responses with the score of 4
2 responses with the score of 5
1 responses with the score of 6
10 responses with the score of 7
14 responses with the score of 8
9 responses with the score of 9
32 responses with the score of 10</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e45bc607515988-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45bc607515988-2">2</div><div class="crayon-num" data-line="crayon-58794d72e45bc607515988-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45bc607515988-4">4</div><div class="crayon-num" data-line="crayon-58794d72e45bc607515988-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45bc607515988-6">6</div><div class="crayon-num" data-line="crayon-58794d72e45bc607515988-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45bc607515988-8">8</div><div class="crayon-num" data-line="crayon-58794d72e45bc607515988-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45bc607515988-10">10</div><div class="crayon-num" data-line="crayon-58794d72e45bc607515988-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45bc607515988-12">12</div><div class="crayon-num" data-line="crayon-58794d72e45bc607515988-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e45bc607515988-1"><span class="crayon-cn">71</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">received</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45bc607515988-2"><span class="crayon-e">Net </span><span class="crayon-e">Promoter </span><span class="crayon-i">Score</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">49.3</span></div><div class="crayon-line" id="crayon-58794d72e45bc607515988-3"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45bc607515988-4"><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-58794d72e45bc607515988-5"><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45bc607515988-6"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></div><div class="crayon-line" id="crayon-58794d72e45bc607515988-7"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">4</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45bc607515988-8"><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">5</span></div><div class="crayon-line" id="crayon-58794d72e45bc607515988-9"><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">6</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45bc607515988-10"><span class="crayon-cn">10</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">7</span></div><div class="crayon-line" id="crayon-58794d72e45bc607515988-11"><span class="crayon-cn">14</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">8</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45bc607515988-12"><span class="crayon-cn">9</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">9</span></div><div class="crayon-line" id="crayon-58794d72e45bc607515988-13"><span class="crayon-cn">32</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">with </span><span class="crayon-e">the </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">10</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0067 seconds] -->
<p></p>
<p dir="ltr">If instead we want to look at a past event we can use the 
			<span id="crayon-58794d72e45c6305065447" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-o">--</span><span class="crayon-i">date</span></span></span> argument with a date in the YYYY-MM-DD format. For example,</p>
<p dir="ltr">
			<span id="crayon-58794d72e45d0708649038" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-e">python </span><span class="crayon-v">nps</span><span class="crayon-sy">.</span><span class="crayon-i">py</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-cn">12027336150</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">date</span><span class="crayon-h"> </span><span class="crayon-cn">2015</span><span class="crayon-o">-</span><span class="crayon-cn">01</span><span class="crayon-o">-</span><span class="crayon-cn">15</span></span></span></p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794d72e45da145076600" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">output for nps.py with --date argument</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
96 responses received
Net Promoter Score: 55.2
0 responses with a score of 0
0 responses with a score of 1
0 responses with a score of 2
1 responses with a score of 3
0 responses with a score of 4
0 responses with a score of 5
1 responses with a score of 6
9 responses with a score of 7
30 responses with a score of 8
24 responses with a score of 9
31 responses with a score of 10</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794d72e45da145076600-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45da145076600-2">2</div><div class="crayon-num" data-line="crayon-58794d72e45da145076600-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45da145076600-4">4</div><div class="crayon-num" data-line="crayon-58794d72e45da145076600-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45da145076600-6">6</div><div class="crayon-num" data-line="crayon-58794d72e45da145076600-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45da145076600-8">8</div><div class="crayon-num" data-line="crayon-58794d72e45da145076600-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45da145076600-10">10</div><div class="crayon-num" data-line="crayon-58794d72e45da145076600-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794d72e45da145076600-12">12</div><div class="crayon-num" data-line="crayon-58794d72e45da145076600-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794d72e45da145076600-1"><span class="crayon-cn">96</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-e">received</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45da145076600-2"><span class="crayon-e">Net </span><span class="crayon-e">Promoter </span><span class="crayon-i">Score</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">55.2</span></div><div class="crayon-line" id="crayon-58794d72e45da145076600-3"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45da145076600-4"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-58794d72e45da145076600-5"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45da145076600-6"><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></div><div class="crayon-line" id="crayon-58794d72e45da145076600-7"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">4</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45da145076600-8"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">5</span></div><div class="crayon-line" id="crayon-58794d72e45da145076600-9"><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">6</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45da145076600-10"><span class="crayon-cn">9</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">7</span></div><div class="crayon-line" id="crayon-58794d72e45da145076600-11"><span class="crayon-cn">30</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">8</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794d72e45da145076600-12"><span class="crayon-cn">24</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">9</span></div><div class="crayon-line" id="crayon-58794d72e45da145076600-13"><span class="crayon-cn">31</span><span class="crayon-h"> </span><span class="crayon-e">responses </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">score </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">10</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0081 seconds] -->
<p></p>
<p dir="ltr">With this output we have the final Net Promoter Score and a simple count for each score from 0-10. The breakdown by score helps to give a sanity check that the output is correct and that you have a good number of responses from the audience. For example, in talks I give with about 100 people I generally obtain 70-80 responses from unique phone numbers.</p>
<h2 dir="ltr">Quantitative Feedback on Technical Talks</h2>
<p dir="ltr">If you&#8217;re looking to obtain quantitative feedback on your technical talks NPS is a good way to gain that insight. As a software developer I find that after a talk it greatly helps to have some numeric way to assess whether the event was worth the audience&#8217;s time or not. Then I can improve the talk based on qualitative feedback I gain from talking to people from the audience afterwards.</p>
<p dir="ltr">It would be great to hear how you&#8217;re using this SMS feedback technique in your own talks or if you use a different metric. Contact me and let me know via one of the following channels:</p>
<ul>
<li>makai@twilio.com</li>
<li><a href="https://github.com/makaimc" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/makaimc', 'makaimc');">makaimc</a> on GitHub</li>
<li><a href="https://twitter.com/mattmakai" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://twitter.com/mattmakai', '@mattmakai');">@mattmakai</a> on Twitter</li>
</ul>
			</div>
					</div>
	</div><!-- .entry-content -->

	<footer class="entry-footer col-md-12">
		<div class="entry-meta">
					<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html" data-text="Calculating Net Promoter Score with Python and SMS ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
<span class="author-avatar"><img alt='' src='https://secure.gravatar.com/avatar/3d5349571810cf24cd2c2fe905607464?s=20&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/3d5349571810cf24cd2c2fe905607464?s=40&amp;d=mm&amp;r=g 2x' class='avatar avatar-20 photo' height='20' width='20' /></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/mmakai">Matt Makai</a></span></span> <span class="author-meta author-email"><a href="mailto:mmakai@twilio.com">mmakai@twilio.com</a></span>		</div>
	</footer><!-- .entry-footer -->

   <div class="build-more"><h3>Build More With Python</h3>        <a href="https://www.twilio.com/docs/tutorials/walkthrough/server-notifications/python/django" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/docs/tutorials/walkthrough/server-notifications/python/django', '');">
          <h5>SMS and MMS Notifications with Python</h5>
        </a>
              <a href="https://www.twilio.com/blog/2015/02/arduino-powered-photobooth-arduino-yun-a-webcam-and-dropbox.html" rel="bookmark" title="Permanent Link to Build a Photobooth with an Arduino Yun, a Webcam and Dropbox" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/arduino-powered-photobooth-arduino-yun-a-webcam-and-dropbox.html', '');">
          <h5>Build a Photobooth with an Arduino Yun, a Webcam and Dropbox<h4>
        </a>
                <a href="https://www.twilio.com/blog/2015/02/multi-channel-support-desk-taskrouter.html" rel="bookmark" title="Permanent Link to Building A Multi Channel Support Desk with TaskRouter" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/multi-channel-support-desk-taskrouter.html', '');">
          <h5>Building A Multi Channel Support Desk with TaskRouter<h4>
        </a>
                <a href="https://www.twilio.com/blog/2015/02/send-sms-and-mms-from-your-arduino-yun.html" rel="bookmark" title="Permanent Link to How to Send SMS And MMS From Your Arduino Yun" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/send-sms-and-mms-from-your-arduino-yun.html', '');">
          <h5>How to Send SMS And MMS From Your Arduino Yun<h4>
        </a>
        </div>
</article><!-- #post-## -->

			
<div id="disqus_thread">
                    <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-3353">
        <div id="dsq-comment-header-3353" class="dsq-comment-header">
            <cite id="dsq-cite-3353">
https://www.callpug.com/                <span id="dsq-author-user-3353">Call Pug</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3353" class="dsq-comment-body">
            <div id="dsq-comment-message-3353" class="dsq-comment-message"><p>What a thoughtful post. Thanks Matt, We are totally going to use this to create metrics for interactions. This type of analysis adds tons of value to helping to identify real relationships.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-3358">
        <div id="dsq-comment-header-3358" class="dsq-comment-header">
            <cite id="dsq-cite-3358">
http://www.mattmakai.com/                <span id="dsq-author-user-3358">Matt Makai</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3358" class="dsq-comment-body">
            <div id="dsq-comment-message-3358" class="dsq-comment-message"><p>Thank you! I began using this SMS feedback collection approach at my technical talks about six months ago. It&#8217;s really helped me put some numbers behind whether a talk needs to be completely revised or just iterated on. Let me know how it goes with your events &amp; interactions.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-3" id="dsq-comment-3363">
        <div id="dsq-comment-header-3363" class="dsq-comment-header">
            <cite id="dsq-cite-3363">
https://www.callpug.com/                <span id="dsq-author-user-3363">Call Pug</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3363" class="dsq-comment-body">
            <div id="dsq-comment-message-3363" class="dsq-comment-message"><p>Will post our blog post here. As soon as we have data!</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-3700">
        <div id="dsq-comment-header-3700" class="dsq-comment-header">
            <cite id="dsq-cite-3700">
http://www.learningtitanium.com                <span id="dsq-author-user-3700">Sharry</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3700" class="dsq-comment-body">
            <div id="dsq-comment-message-3700" class="dsq-comment-message"><p>Thanks.  Great to see this in Javascript/Express</p>
</div>
        </div>

    </li><!-- #comment-## -->
            </ul>


        </div>

    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'https://www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html';
    var disqus_identifier = 'https://www.twilio.com/blog/2015/01/14544 http://twilioinc.wpengine.com/?p=14544';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'twilioblog';
    var disqus_title = "Calculating Net Promoter Score with Python and SMS";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html?cf_action=sync_comments&amp;post_id=14544';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "https:\/\/www.twilio.com\/blog\/2015\/01\/net-promoter-score-python-sms.html\/trackback"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		
		</main><!-- #main -->
	</div><!-- #primary -->


<div id="secondary" class="widget-area col-md-3 hide-xs" role="complementary">
	<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://www.twilio.com/blog/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside><aside id="text-2" class="widget widget_text">			<div class="textwidget"><p>Power modern communications. Build the next generation of voice and SMS applications.</p>

 <a href="http://twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://twilio.com/try-twilio', 'Start Building For Free');" class="btn">Start Building For Free</a></div>
		</aside><style scoped type="text/css">.utcw-8ngloje {word-wrap:break-word}.utcw-8ngloje span,.utcw-8ngloje a{border-style:solid;border-width:1px}.utcw-8ngloje span:hover,.utcw-8ngloje a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-2" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Stack</h1><div class="utcw-8ngloje tagcloud"><a class="tag-link-22 utcw-tag utcw-tag-net" href="https://www.twilio.com/blog/tag/net" style="font-size:16px" title="40 topics">.NET</a> <a class="tag-link-98 utcw-tag utcw-tag-arduino" href="https://www.twilio.com/blog/tag/arduino" style="font-size:16px" title="21 topics">Arduino</a> <a class="tag-link-598 utcw-tag utcw-tag-java" href="https://www.twilio.com/blog/tag/java" style="font-size:16px" title="14 topics">Java</a> <a class="tag-link-600 utcw-tag utcw-tag-javascript" href="https://www.twilio.com/blog/tag/javascript" style="font-size:16px" title="86 topics">JavaScript</a> <a class="tag-link-847 utcw-tag utcw-tag-php" href="https://www.twilio.com/blog/tag/php" style="font-size:16px" title="57 topics">PHP</a> <a class="tag-link-891 utcw-tag utcw-tag-python" href="https://www.twilio.com/blog/tag/python" style="font-size:16px" title="72 topics">Python</a> <a class="tag-link-969 utcw-tag utcw-tag-ruby" href="https://www.twilio.com/blog/tag/ruby" style="font-size:16px" title="69 topics">Ruby</a> <a class="tag-link-2856 utcw-tag utcw-tag-swift" href="https://www.twilio.com/blog/tag/swift" style="font-size:16px" title="22 topics">Swift</a></div></aside><style scoped type="text/css">.utcw-5dkhj5o {word-wrap:break-word}.utcw-5dkhj5o span,.utcw-5dkhj5o a{border-style:solid;border-width:1px}.utcw-5dkhj5o span:hover,.utcw-5dkhj5o a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-3" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Product</h1><div class="utcw-5dkhj5o tagcloud"><a class="tag-link-2043 utcw-tag utcw-tag-mms" href="https://www.twilio.com/blog/tag/mms" style="font-size:16px" title="50 topics">MMS</a> <a class="tag-link-3513 utcw-tag utcw-tag-programmable-chat" href="https://www.twilio.com/blog/tag/programmable-chat" style="font-size:16px" title="9 topics">Programmable Chat</a> <a class="tag-link-1537 utcw-tag utcw-tag-sip" href="https://www.twilio.com/blog/tag/sip" style="font-size:16px" title="15 topics">SIP</a> <a class="tag-link-1031 utcw-tag utcw-tag-sms" href="https://www.twilio.com/blog/tag/sms" style="font-size:16px" title="372 topics">SMS</a> <a class="tag-link-2871 utcw-tag utcw-tag-taskrouter" href="https://www.twilio.com/blog/tag/taskrouter" style="font-size:16px" title="8 topics">Task Router</a> <a class="tag-link-1199 utcw-tag utcw-tag-twilio-client" href="https://www.twilio.com/blog/tag/twilio-client" style="font-size:16px" title="32 topics">Twilio Client</a> <a class="tag-link-3032 utcw-tag utcw-tag-twilio-video" href="https://www.twilio.com/blog/tag/twilio-video" style="font-size:16px" title="9 topics">Twilio Video</a> <a class="tag-link-1277 utcw-tag utcw-tag-voice" href="https://www.twilio.com/blog/tag/voice" style="font-size:16px" title="172 topics">Voice</a></div></aside><aside id="text-5" class="widget widget_text">			<div class="textwidget"><a href="http://www.twilio.com/docs/tutorials" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/docs/tutorials', '');"><img src="https://www.twilio.com/blog/wp-content/uploads/2016/07/tutorials.png" style="width: 255px" /></a></div>
		</aside><aside id="categories-3" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-13"><a href="https://www.twilio.com/blog/all-things-code" >Code, Tutorials and Hacks</a>
</li>
	<li class="cat-item cat-item-5"><a href="https://www.twilio.com/blog/customer-highlights" >Customer Highlights</a>
</li>
	<li class="cat-item cat-item-7"><a href="https://www.twilio.com/blog/developers-drawing-the-owl" >Developers Drawing The Owl</a>
</li>
	<li class="cat-item cat-item-3"><a href="https://www.twilio.com/blog/news" >News</a>
</li>
	<li class="cat-item cat-item-4"><a href="https://www.twilio.com/blog/stories-from-the-road" >Stories From The Road</a>
</li>
	<li class="cat-item cat-item-8"><a href="https://www.twilio.com/blog/inside-twilio" >The Owl’s Nest: Inside Twilio</a>
</li>
		</ul>
</aside><aside id="text-4" class="widget widget_text">			<div class="textwidget"><div class="tagcloud "><a href="http://www.twilio.com/blog/feed" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog/feed', 'RSS Feed');">RSS Feed</a></div></div>
		</aside></div><!-- #secondary -->

		</div><!-- .row -->
	</div><!-- #content.container -->

<div class="" id="footer">
	<div class="container">
		<header>
			<div class="banner"></div>
			<div class="border"></div>
			<div class="stitching"></div>
		</header>
    <div class="row sitemap">
      <div class="row">
        <div class="col-md-2 col-md-offset-1">
          <h4><a href="http://www.twilio.com/company">Company</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/company">About Twilio</a></li>
            <li><a href="http://www.twilio.com/company/nine-values">Our Nine Values</a></li>
            <li><a href="http://www.twilio.com/company/leadership-principles">Our Leadership Principles</a></li>
            <li><a href="http://www.twilio.com/company/management">The Team</a></li>
            <li><a href="http://www.twilio.com/press">Press &amp; Media</a></li>
            <li><a href="http://www.twilio.org/">Twilio.org</a></li>
            <li><a href="http://www.twilio.com/company/jobs">Careers</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4><a href="http://www.twilio.com/products">Products</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/voice">Voice</a></li>
            <li><a href="http://www.twilio.com/video">Video</a></li>
            <li><a href="http://www.twilio.com/sms">SMS (Text Messaging)</a></li>
            <li><a href="http://www.twilio.com/mms">MMS (Picture Messaging)</a></li>
            <li><a href="http://www.twilio.com/sms/toll-free">Toll-Free SMS</a></li>
            <li><a href="http://www.twilio.com/sip-trunking">SIP Trunking</a></li>
            <li><a href="http://www.twilio.com/client/mobile">Client Mobile</a></li>
            <li><a href="http://www.twilio.com/webrtc">Client WebRTC</a></li>
            <li><a href="http://www.twilio.com/stun-turn">Network Traversal Service</a></li>
            <li><a href="http://www.twilio.com/taskrouter">TaskRouter</a></li>
            <li><a href="http://www.twilio.com/sms/phone-numbers">Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/sms/shortcodes">Short Codes</a></li>
            <li><a href="http://www.twilio.com/support-plans">Support Plans</a></li>
            <li><a href="http://www.twilio.com/platform">Platform</a></li>
            <li><a href="http://www.twilio.com/lookup">Lookup</a></li>
            <li><a href="http://www.twilio.com/monitor">Monitor</a></li>
            <li><a href="http://www.twilio.com/copilot">Messaging Copilot</a></li>
            <li><a href="http://www.twilio.com/voice/conference">Global Conference</a></li>
            <li><a href="http://www.twilio.com/authy">Authy</a></li>
          </ul>
      </div>
      <div class="col-md-2">
        <h4><a href="http://www.twilio.com/pricing">Pricing</a></h4>
        <ul>
          <li><a href="http://www.twilio.com/voice/pricing">Voice Pricing</a></li>
          <li><a href="http://www.twilio.com/sms/pricing">Messaging Pricing</a></li>
          <li><a href="http://www.twilio.com/sip-trunking/pricing">SIP Trunking Pricing</a></li>
          <li><a href="http://www.twilio.com/client/pricing">Client Pricing</a></li>
          <li><a href="http://www.twilio.com/stun-turn/pricing">Network Traversal Pricing</a></li>
          <li><a href="http://www.twilio.com/taskrouter/pricing">TaskRouter</a></li>
          <li><a href="http://www.twilio.com/lookup#pricing">Lookup</a></li>
          <li><a href="http://www.twilio.com/international">International Coverage</a></li>
        </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/use-cases">Use Cases</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/customers">Customer Stories</a></li>
            <li><a href="http://www.twilio.com/showcase">Showcase</a></li>
            <li><a href="http://www.twilio.com/use-cases/two-factor-authentication">Two-Factor Authentication</a></li>
            <li><a href="http://www.twilio.com/use-cases/appointment-reminders">Appointment Reminders</a></li>
            <li><a href="http://www.twilio.com/use-cases/dispatch-notifications">Dispatch Notifications</a></li>
            <li><a href="http://www.twilio.com/use-cases/eta-alerts">ETA Alerts</a></li>
            <li><a href="http://www.twilio.com/use-cases/automated-surveys">Automated Surveys</a></li>
            <li><a href="http://www.twilio.com/use-cases/masked-phone-numbers">Masked Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/use-cases/visual-estimates">Visual Estimates</a></li>
            <li><a href="http://www.twilio.com/doers">Developer Network</a></li>
            <li><a href="http://www.twilio.com/webinars">Webinars</a></li>
            <li><a href="http://www.twilio.com/white-papers">White Papers</a></li>
          </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/api">Api &amp; Docs</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/docs/api">API Documentation</a></li>
            <li><a href="http://www.twilio.com/docs/quickstart">Quickstarts</a></li>
            <li><a href="http://www.twilio.com/docs/howto">How Tos</a></li>
            <li><a href="http://www.twilio.com/docs/libraries">Helper Libraries</a></li>
            <li><a href="http://www.twilio.com/docs/security">Security</a></li>
          </ul>
      </div>
    </div>
		<div class="row clear">
			<footer><span>&copy; 2017 Twilio. All rights reserved. <aside>|</aside><a href="http://www.twilio.com/legal/tos">Terms of Service</a><aside>|</aside><a href="http://www.twilio.com/legal/privacy">Privacy Policy</a></span>
			</footer>
		</div>
	</div>
</div>


</div><!-- #page -->

<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201702'></script>







<script type="text/javascript" defer src="https://www.twilio.com/blog/wp-content/cache/autoptimize/js/autoptimize_30cf8936a215677503cd64ef48677239.js"></script></body>

<!-- Mirrored from www.twilio.com/blog/2015/01/net-promoter-score-python-sms.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:09:59 GMT -->
</html>
