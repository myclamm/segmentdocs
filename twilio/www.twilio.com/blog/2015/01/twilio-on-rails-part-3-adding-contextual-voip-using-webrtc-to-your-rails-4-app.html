<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:09:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<script type="text/javascript">
(function() {
    var projectId = 3524915770;
    var protocol = ('https:' == document.location.protocol ?
    'https://' : 'http://');
    var scriptTag = document.createElement('script');
    scriptTag.type = 'text/javascript';
    scriptTag.async = true;
    scriptTag.src = protocol + 'cdn.optimizely.com/js/' +
    projectId + '.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(scriptTag, s);
})();
function optimizelyTimeout() {
    window.optimizely = window.optimizely|| [];
    if (!window.optimizely.data) {
    window.optimizely.push("timeout");
    }
}
setTimeout(optimizelyTimeout, 1000);
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.twilio.com/blog/xmlrpc.php">
<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '815114181']);
_elqQ.push(['elqTrackPageView']);
_elqQ.push(['elqUseFirstPartyCookie', 'www.twilio.com']);
(function () {
  function async_load()
  {
    var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
    s.src = 'http://img03.en25.com/i/elqCfg.min.js';
    var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
  }
  if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
  else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>
<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','http://connect.facebook.net/en_US/fbevents.js');

fbq('init', '467131150158811');
fbq('track', "PageView");</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=467131150158811&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

<style>
@media screen and (max-width: 600px) {
  #signal-header { display: none; }
}
</style>

<link type="text/css" media="all" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_7a2cc50131d932d32297f43c61de37cd.css" rel="stylesheet" /><link type="text/css" media="screen" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_97ca666341cd9b69002e26c8f2ca5299.css" rel="stylesheet" /><title>Twilio on Rails Part 3 &#8211; Adding Contextual VOIP Using WebRTC to Your Rails 4 App &#8211; Twilio Cloud Communications Blog</title>

<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.13 - http://yoast.com/wordpress/seo/ -->
<meta name="description" content="In this post we are going create a contextual VOIP experience for your users by learning how to create a TwiML app and integrate the Twilio Client JS SDK."/>
<link rel="canonical" href="https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html" />
<!-- / Yoast WordPress SEO plugin. -->

<link rel='dns-prefetch' href='https://www.twilio.com/blog//s0.wp.com' />
<link rel='dns-prefetch' href='https://www.twilio.com/blog//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Feed" href="https://www.twilio.com/blog/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Comments Feed" href="https://www.twilio.com/blog/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Twilio on Rails Part 3 &#8211; Adding Contextual VOIP Using WebRTC to Your Rails 4 App Comments Feed" href="https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/twilioinc.wpengine.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.2"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>










<!-- This site uses the Google Analytics by Yoast plugin v5.4.7 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','http://www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-2900316-1', 'auto');
	__gaTracker('set', 'forceSSL', true);
	 window.optimizely = window.optimizely || [];
 window.optimizely.push("activateUniversalAnalytics");
	__gaTracker('set', 'dimension4', 'Carter Rabasa');
	__gaTracker('set', 'dimension5', 'post');
	__gaTracker('set', 'dimension6', 'all-things-code');
	__gaTracker('set', 'dimension7', 'client,JavaScript,json web token,rails,Ruby,Twilio Client,TwilioClient,voip,WebRTC');
	__gaTracker('set', 'dimension8', '2015-01-22T12:06:29+00:00');
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by Yoast -->


<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.4.3","is_admin":"0","ajaxurl":"https:\/\/twilioinc.wpengine.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>

<script type='text/javascript'>
/* <![CDATA[ */
var swiftypeParams = {"engineKey":"UpGyyJZzgUMXHM65YENj"};
/* ]]> */
</script>

<link rel='https://api.w.org/' href='https://www.twilio.com/blog/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.twilio.com/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.twilio.com/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://www.twilio.com/blog/?p=14518' />
<link rel="alternate" type="application/json+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2015%2F01%2Ftwilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html" />
<link rel="alternate" type="text/xml+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2015%2F01%2Ftwilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html&amp;format=xml" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-32x32.png" sizes="32x32" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-270x270.png" />
</head>

<body class="single single-post postid-14518 single-format-standard group-blog">
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.twilio.com/blog//www.googletagmanager.com/ns.html?id=GTM-W4RVXH"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W4RVXH');</script>
<!-- End Google Tag Manager -->

<div id="fb-root"></div>
<script>(function(d, s, id) {
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) return;
		js = d.createElement(s); js.id = id;
		js.src = "http://connect.facebook.net/en_US/sdk.js#xfbml=1&appId=414254592083321&version=v2.0";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
window.fbAsyncInit = function() {
  FB.Event.subscribe('edge.create', function(targetUrl) {
    __gaTracker('send', 'social', 'facebook', 'like', targetUrl);
  });
};
window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));

function trackTwitter(intent_event) {
  if (intent_event) {
    var opt_pagePath;
    if (intent_event.target && intent_event.target.nodeName == 'IFRAME') {
          opt_target = extractParamFromUri(intent_event.target.src, 'url');
    }
    __gaTracker('send', 'social', 'twitter', 'tweet', opt_pagePath);
  }
}

function extractParamFromUri(uri, paramName) {
  if (!uri) {
    return;
  }
  var regex = new RegExp('[\\?&#]' + paramName + '=([^&#]*)');
  var params = regex.exec(uri);
  if (params != null) {
    return unescape(params[1]);
  }
  return;
}

//Wrap event bindings - Wait for async js to load
twttr.ready(function (twttr) {
  //event bindings
  twttr.events.bind('tweet', trackTwitter);
});
</script>
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o);for(var r=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=r(p[c])};
  heap.load("1541905715");
</script>
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<nav class="navbar navbar-default" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle hidden-xs" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="https://www.twilio.com/blog/">
					<img src="https://s3.amazonaws.com/ahoy-assets.twilio.com/global/images/wordmark.svg" width="200"> <span class="logo-blog">blog</span>
				</a>
			</div>

			<div class="hidden-xs"><ul id="menu-site-navigation" class="nav navbar-nav pull-right"><li id="menu-item-12202" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12202"><a href="http://www.twilio.com/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/', 'Home');" title="Home">Home</a></li>
<li id="menu-item-12205" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12205"><a href="http://www.twilio.com/blog" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog', 'Blog');" title="Blog">Blog</a></li>
<li id="menu-item-12204" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12204"><a href="https://www.twilio.com/docs/howto" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/howto', 'Tutorials');" title="Tutorials">Tutorials</a></li>
<li id="menu-item-12206" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12206"><a href="https://www.twilio.com/docs/api" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/api', 'Docs');" title="Docs">Docs</a></li>
<li id="menu-item-12207" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12207"><a href="http://www.twilio.com/help" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/help', 'Help');" title="Help">Help</a></li>
<li id="menu-item-12208" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12208"><a href="https://www.twilio.com/login" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/login', 'Login');" title="Login">Login</a></li>
<li id="menu-item-12209" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12209"><a href="https://www.twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/try-twilio', 'Signup');" title="Signup">Signup</a></li>
</ul></div>		</div>
	</nav>

	<div id="content" class="site-content container">
		<div class="row">

	<div id="primary" class="content-area col-md-9">
		<main id="main" class="site-main" role="main">

		
			
<article id="post-14518" class="row post-14518 post type-post status-publish format-standard has-post-thumbnail hentry category-all-things-code tag-client tag-javascript tag-json-web-token tag-rails tag-ruby tag-twilio-client tag-twilioclient tag-voip tag-webrtc">
	<header class="entry-header col-md-12">
		<h2 class="entry-title">Twilio on Rails Part 3 &#8211; Adding Contextual VOIP Using WebRTC to Your Rails 4 App</h2>
						<div class="entry-image col-md-12">
        <img width="640" height="265" src="https://www.twilio.com/blog/wp-content/uploads/2015/01/twilio_on_rails2.png" class="img-responsive wp-post-image" alt="twilio_on_rails2" srcset="https://www.twilio.com/blog/wp-content/uploads/2015/01/twilio_on_rails2.png 640w, https://www.twilio.com/blog/wp-content/uploads/2015/01/twilio_on_rails2-300x124.png 300w" sizes="(max-width: 640px) 100vw, 640px" />			</div>
      <div class="clear"></div>
			
		<footer class="entry-footer">
			<div class="entry-meta">
					<div class="row">
	<div class="col-md-6">
	<span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/carter">Carter Rabasa</a></span></span> on <span class="posted-on"><a href="https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html" rel="bookmark"><time class="entry-date published" datetime="2015-01-22T12:06:29+00:00">January 22, 2015</time><time class="updated" datetime="2015-09-24T18:36:08+00:00">September 24, 2015</time></a></span>	</div>
	<div class="col-md-6">
		<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html" data-text="Twilio on Rails Part 3 &#8211; Adding Contextual VOIP Using WebRTC to Your Rails 4 App ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
	</div>
	</div>
			</div><!-- .entry-meta -->
		</footer><!-- .entry-footer -->
	</header><!-- .entry-header -->

	<div class="entry-content col-md-12">
		<div class="row">
			<div class="col-md-12">
				<p dir="ltr">Welcome to the final part of our series on integrating Twilio with your Rails 4 app. In <a href="https://www.twilio.com/blog/2014/02/twilio-on-rails-integrating-twilio-with-your-rails-4-app.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/blog/2014/02/twilio-on-rails-integrating-twilio-with-your-rails-4-app.html', 'Part 1');">Part 1</a> we walked through signing-up for a free Twilio developer account, getting a phone number and processing an inbound phone call. In <a href="https://www.twilio.com/blog/2014/10/twilio-on-rails-part-2-rails-4-app-sending-sms-mms.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/blog/2014/10/twilio-on-rails-part-2-rails-4-app-sending-sms-mms.html', 'Part 2');">Part 2</a> we secured the webhooks, used Twilio’s REST API to send outbound SMS and MMS and processed delivery receipt notifications. In this post we are going create a contextual VOIP experience for your users by learning how to:</p>
<ul>
<li>Create a TwiML app</li>
<li>Integrate the Twilio Client JS SDK</li>
<li>Generate a Capability Token</li>
<li>Connect the VOIP call</li>
</ul>
<h3>Contextual VOIP</h3>
<p>In our previous blog posts we used Twilio to make phone calls and deliver text messages. These capabilities are quite powerful but they are often siloed away from the context of the application that the user is interacting with. With <a href="https://www.twilio.com/webrtc" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/webrtc', 'Twilio Client WebRTC');">Twilio Client WebRTC</a> you can embed a VOIP experience directly into your Rails 4 web application. This way the user has all of the context of your application in front of her as she’s engaged in a voice conversation.</p>
<p><img class="alignnone size-full wp-image-14520" alt="client_mockup" src="https://www.twilio.com/blog/wp-content/uploads/2015/01/client_mockup.jpg" width="553" height="348" srcset="https://www.twilio.com/blog/wp-content/uploads/2015/01/client_mockup.jpg 553w, https://www.twilio.com/blog/wp-content/uploads/2015/01/client_mockup-300x188.jpg 300w" sizes="(max-width: 553px) 100vw, 553px" /></p>
<p dir="ltr">For the purpose of this blog post, we’re going to build a simple web page that a customer service agent could use to contact a customer who has requested a call back. The customer service agent will initiate the call on the web page and the customer will receive the call on their mobile phone. Be warned, the page we&#8217;re going to build won&#8217;t look nearly as beautifully designed as the image above but you&#8217;ll learn everything you need from a coding perspective to build a page like that in the real world.</p>
<p dir="ltr">If you haven’t worked through Part 1 and Part 2 of this tutorial series, go ahead and clone <a href="https://github.com/crtr0/twilio-rails-4/tree/part2" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/crtr0/twilio-rails-4/tree/part2', 'this Github repo');">this Github repo</a> so that your code base is up to speed. Run the following commands and you’ll be ready to go!</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db8099ee475058709" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
git clone https://github.com/crtr0/twilio-rails-4.git
git checkout part2
bundle install</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db8099ee475058709-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db8099ee475058709-2">2</div><div class="crayon-num" data-line="crayon-58794db8099ee475058709-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db8099ee475058709-1"><span class="crayon-e">git </span><span class="crayon-r">clone</span><span class="crayon-h"> </span><span class="crayon-i">https</span><span class="crayon-o">:</span><span class="crayon-c">//github.com/crtr0/twilio-rails-4.git</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db8099ee475058709-2"><span class="crayon-e">git </span><span class="crayon-e">checkout </span><span class="crayon-e">part2</span></div><div class="crayon-line" id="crayon-58794db8099ee475058709-3"><span class="crayon-e">bundle </span><span class="crayon-i">install</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0022 seconds] -->
<p></p>
<h3>Create the TwiML App</h3>
<p>To get started building a VOIP experience using Twilio Client, we need to learn about TwiML apps. Log-in to your Twilio account and click on “Dev Tools”.</p>
<p><img class="alignnone size-full wp-image-14522" alt="Twilio_User_-_Account_Apps" src="https://www.twilio.com/blog/wp-content/uploads/2015/01/Twilio_User_-_Account_Apps1.jpg" width="640" height="159" srcset="https://www.twilio.com/blog/wp-content/uploads/2015/01/Twilio_User_-_Account_Apps1.jpg 640w, https://www.twilio.com/blog/wp-content/uploads/2015/01/Twilio_User_-_Account_Apps1-300x74.jpg 300w" sizes="(max-width: 640px) 100vw, 640px" /></p>
<p>You’ll see a list of handy tools that you can use when you’re building or debugging your app. Click on “TwiML Apps” and then click on “Create TwiML App”.</p>
<p><img class="alignnone size-full wp-image-14523" alt="Twilio_User_-_Account_Apps_Add" src="https://www.twilio.com/blog/wp-content/uploads/2015/01/Twilio_User_-_Account_Apps_Add.jpg" width="640" height="394" srcset="https://www.twilio.com/blog/wp-content/uploads/2015/01/Twilio_User_-_Account_Apps_Add.jpg 640w, https://www.twilio.com/blog/wp-content/uploads/2015/01/Twilio_User_-_Account_Apps_Add-300x184.jpg 300w" sizes="(max-width: 640px) 100vw, 640px" /></p>
<p>You might notice that this configuration form looks quite similar to the form you fill-out to configure a phone number. In place of a phone number there is a field called “Friendly Name”, which you can think of this as the name of your app. When your app needs to initiate an outbound VOIP call, the Voice Request URL will point to a route in your Rails 4 app that will generate TwiML and tell Twilio what to do regarding that call. Go ahead and fill-in the Friendly Name and click Save. You’ll be taken back to a list of your TwiML apps and the one you’ve created will be at the top. Click on that link for the new app.</p>
<p><img class="alignnone size-full wp-image-14524" alt="twiml_app_sid" src="https://www.twilio.com/blog/wp-content/uploads/2015/01/twiml_app_sid.jpg" width="640" height="219" srcset="https://www.twilio.com/blog/wp-content/uploads/2015/01/twiml_app_sid.jpg 640w, https://www.twilio.com/blog/wp-content/uploads/2015/01/twiml_app_sid-300x102.jpg 300w" sizes="(max-width: 640px) 100vw, 640px" /></p>
<p dir="ltr">Your TwiML app has a unique identifier called a Sid. Copy the value for that Sid and open up the file 
			<span id="crayon-58794db809a03207373145" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">config</span><span class="crayon-o">/</span><span class="crayon-v">secrets</span><span class="crayon-sy">.</span><span class="crayon-i">yml</span></span></span>  in your text editor. Add the following highlighted lines.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809a1a955099075" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">secrets.yml</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
development:
 secret_key_base: 'XXX'
 twilio_account_sid: &lt;%= ENV["TWILIO_ACCOUNT_SID"] %&gt;
 twilio_auth_token:  &lt;%= ENV["TWILIO_AUTH_TOKEN"] %&gt;
 twilio_twiml_app_sid: &lt;%= ENV["TWILIO_TWIML_APP_SID"] %&gt;

test:

production:
 secret_key_base: 'XXX'
 twilio_account_sid: &lt;%= ENV["TWILIO_ACCOUNT_SID"] %&gt;
 twilio_auth_token:  &lt;%= ENV["TWILIO_AUTH_TOKEN"] %&gt;
 twilio_twiml_app_sid: &lt;%= ENV["TWILIO_TWIML_APP_SID"] %&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809a1a955099075-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a1a955099075-2">2</div><div class="crayon-num" data-line="crayon-58794db809a1a955099075-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a1a955099075-4">4</div><div class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="crayon-58794db809a1a955099075-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a1a955099075-6">6</div><div class="crayon-num" data-line="crayon-58794db809a1a955099075-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a1a955099075-8">8</div><div class="crayon-num" data-line="crayon-58794db809a1a955099075-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a1a955099075-10">10</div><div class="crayon-num" data-line="crayon-58794db809a1a955099075-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a1a955099075-12">12</div><div class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="crayon-58794db809a1a955099075-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809a1a955099075-1"><span class="crayon-i">development</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a1a955099075-2"> <span class="crayon-i">secret_key_base</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'XXX'</span></div><div class="crayon-line" id="crayon-58794db809a1a955099075-3"> <span class="crayon-i">twilio_account_sid</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">ENV</span><span class="crayon-sy">[</span><span class="crayon-s">"TWILIO_ACCOUNT_SID"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a1a955099075-4"> <span class="crayon-i">twilio_auth_token</span><span class="crayon-o">:</span><span class="crayon-h"> </span> <span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">ENV</span><span class="crayon-sy">[</span><span class="crayon-s">"TWILIO_AUTH_TOKEN"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span></div><div class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-58794db809a1a955099075-5"> <span class="crayon-i">twilio_twiml_app_sid</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">ENV</span><span class="crayon-sy">[</span><span class="crayon-s">"TWILIO_TWIML_APP_SID"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a1a955099075-6">&nbsp;</div><div class="crayon-line" id="crayon-58794db809a1a955099075-7"><span class="crayon-i">test</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a1a955099075-8">&nbsp;</div><div class="crayon-line" id="crayon-58794db809a1a955099075-9"><span class="crayon-i">production</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a1a955099075-10"> <span class="crayon-i">secret_key_base</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'XXX'</span></div><div class="crayon-line" id="crayon-58794db809a1a955099075-11"> <span class="crayon-i">twilio_account_sid</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">ENV</span><span class="crayon-sy">[</span><span class="crayon-s">"TWILIO_ACCOUNT_SID"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a1a955099075-12"> <span class="crayon-i">twilio_auth_token</span><span class="crayon-o">:</span><span class="crayon-h"> </span> <span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">ENV</span><span class="crayon-sy">[</span><span class="crayon-s">"TWILIO_AUTH_TOKEN"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span></div><div class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-58794db809a1a955099075-13"> <span class="crayon-i">twilio_twiml_app_sid</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">ENV</span><span class="crayon-sy">[</span><span class="crayon-s">"TWILIO_TWIML_APP_SID"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0065 seconds] -->
<p>In your terminal, create a new environment variable to store this value:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809a44867217667" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
export TWILIO_TWIML_APP_SID=&lt;replace with your TwiML app Sid&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809a44867217667-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809a44867217667-1"><span class="crayon-e">export </span><span class="crayon-v">TWILIO_TWIML_APP_SID</span><span class="crayon-o">=</span><span class="crayon-o">&lt;</span><span class="crayon-e">replace </span><span class="crayon-e">with </span><span class="crayon-e">your </span><span class="crayon-e">TwiML </span><span class="crayon-e">app </span><span class="crayon-i">Sid</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<h3>Build an Agent View</h3>
<p>Now that the TwiML app has been created, let’s turn our attention to creating a view for the customer service agent who is using the web application. Create a new file called 
			<span id="crayon-58794db809a60680382987" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">app</span><span class="crayon-o">/</span><span class="crayon-i">controllers</span><span class="crayon-o">/</span><span class="crayon-v">customer_service_controller</span><span class="crayon-sy">.</span><span class="crayon-i">rb</span></span></span> :</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809a6c345482763" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">customer_service_controller.rb</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
require 'ostruct'

class CustomerServiceController &lt; ApplicationController

 def agent
   # Hard code a default customer to display. In production, this
   # would come from a database.
   @customer = OpenStruct.new(
     'id' =&gt; '123',
     'first_name' =&gt; 'Jane',
     'last_name' =&gt; 'Doe',
     'city' =&gt; 'Seattle',
     'state' =&gt; 'WA'
   )
 end

end</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809a6c345482763-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a6c345482763-2">2</div><div class="crayon-num" data-line="crayon-58794db809a6c345482763-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a6c345482763-4">4</div><div class="crayon-num" data-line="crayon-58794db809a6c345482763-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a6c345482763-6">6</div><div class="crayon-num" data-line="crayon-58794db809a6c345482763-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a6c345482763-8">8</div><div class="crayon-num" data-line="crayon-58794db809a6c345482763-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a6c345482763-10">10</div><div class="crayon-num" data-line="crayon-58794db809a6c345482763-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a6c345482763-12">12</div><div class="crayon-num" data-line="crayon-58794db809a6c345482763-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a6c345482763-14">14</div><div class="crayon-num" data-line="crayon-58794db809a6c345482763-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a6c345482763-16">16</div><div class="crayon-num" data-line="crayon-58794db809a6c345482763-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809a6c345482763-1"><span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'ostruct'</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a6c345482763-2">&nbsp;</div><div class="crayon-line" id="crayon-58794db809a6c345482763-3"><span class="crayon-r">class</span><span class="crayon-h"> </span><span class="crayon-i">CustomerServiceController</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-i">ApplicationController</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a6c345482763-4">&nbsp;</div><div class="crayon-line" id="crayon-58794db809a6c345482763-5"> <span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-i">agent</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a6c345482763-6">   <span class="crayon-c"># Hard code a default customer to display. In production, this</span></div><div class="crayon-line" id="crayon-58794db809a6c345482763-7">   <span class="crayon-c"># would come from a database.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a6c345482763-8">   <span class="crayon-v">@customer</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">OpenStruct</span><span class="crayon-sy">.</span><span class="crayon-e">new</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-58794db809a6c345482763-9">     <span class="crayon-s">'id'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'123'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a6c345482763-10">     <span class="crayon-s">'first_name'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'Jane'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794db809a6c345482763-11">     <span class="crayon-s">'last_name'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'Doe'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a6c345482763-12">     <span class="crayon-s">'city'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'Seattle'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794db809a6c345482763-13">     <span class="crayon-s">'state'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'WA'</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a6c345482763-14">   <span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794db809a6c345482763-15"> <span class="crayon-st">end</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a6c345482763-16">&nbsp;</div><div class="crayon-line" id="crayon-58794db809a6c345482763-17"><span class="crayon-st">end</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0042 seconds] -->
<p>This controller defines a single action called agent. At the moment the action simply initializes a hard-coded customer object. In a real application this information would be fetched from a database or queue of customers that require a call back.</p>
<p>Next create a new directory: 
			<span id="crayon-58794db809a76892987853" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">app</span><span class="crayon-o">/</span><span class="crayon-i">views</span><span class="crayon-o">/</span><span class="crayon-i">customer_service</span></span></span> . In this directory, create a file called 
			<span id="crayon-58794db809a81222194720" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-v">agent</span><span class="crayon-sy">.</span><span class="crayon-v">html</span><span class="crayon-sy">.</span><span class="crayon-i">erb</span></span></span> :</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809a8a777308348" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">agent.html.erb</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;h1&gt;Agent Dashboard&lt;/h1&gt;
&lt;p&gt;Status: Customer has requested a callback.&lt;/p&gt;
&lt;table&gt;
 &lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;td&gt;&lt;%= @customer.first_name %&gt; &lt;%= @customer.last_name %&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;Location&lt;/th&gt;&lt;td&gt;&lt;%= @customer.city %&gt;, &lt;%= @customer.state %&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;button onClick="call()"&gt;Make Call&lt;/button&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809a8a777308348-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a8a777308348-2">2</div><div class="crayon-num" data-line="crayon-58794db809a8a777308348-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a8a777308348-4">4</div><div class="crayon-num" data-line="crayon-58794db809a8a777308348-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809a8a777308348-6">6</div><div class="crayon-num" data-line="crayon-58794db809a8a777308348-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809a8a777308348-1"><span class="crayon-r ">&lt;h1&gt;</span><span class="crayon-i ">Agent Dashboard</span><span class="crayon-r ">&lt;/h1&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a8a777308348-2"><span class="crayon-r ">&lt;p&gt;</span><span class="crayon-i ">Status: Customer has requested a callback.</span><span class="crayon-r ">&lt;/p&gt;</span></div><div class="crayon-line" id="crayon-58794db809a8a777308348-3"><span class="crayon-r ">&lt;table&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a8a777308348-4"><span class="crayon-i "> </span><span class="crayon-r ">&lt;tr&gt;</span><span class="crayon-r ">&lt;th&gt;</span><span class="crayon-i ">Name</span><span class="crayon-r ">&lt;/th&gt;</span><span class="crayon-r ">&lt;td&gt;</span><span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">@customer</span><span class="crayon-sy">.</span><span class="crayon-i">first_name</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span><span class="crayon-h"> </span><span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">@customer</span><span class="crayon-sy">.</span><span class="crayon-i">last_name</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span><span class="crayon-r ">&lt;/td&gt;</span><span class="crayon-r ">&lt;/tr&gt;</span></div><div class="crayon-line" id="crayon-58794db809a8a777308348-5"><span class="crayon-i "> </span><span class="crayon-r ">&lt;tr&gt;</span><span class="crayon-r ">&lt;th&gt;</span><span class="crayon-i ">Location</span><span class="crayon-r ">&lt;/th&gt;</span><span class="crayon-r ">&lt;td&gt;</span><span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">@customer</span><span class="crayon-sy">.</span><span class="crayon-i">city</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-v">@customer</span><span class="crayon-sy">.</span><span class="crayon-i">state</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span><span class="crayon-r ">&lt;/td&gt;</span><span class="crayon-r ">&lt;/tr&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809a8a777308348-6"><span class="crayon-r ">&lt;/table&gt;</span></div><div class="crayon-line" id="crayon-58794db809a8a777308348-7"><span class="crayon-r ">&lt;button </span><span class="crayon-e ">onClick</span><span class="crayon-o">=</span><span class="crayon-s ">"call()"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">Make Call</span><span class="crayon-r ">&lt;/button&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0051 seconds] -->
<p></p>
<p dir="ltr">In 
			<span id="crayon-58794db809a95092766512" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">config</span><span class="crayon-o">/</span><span class="crayon-v">routes</span><span class="crayon-sy">.</span><span class="crayon-i">rb</span></span></span> , add the following line:</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809a9f724174138" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">routes.rb</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
get 'customer_service/agent' =&gt; 'customer_service#agent'</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809a9f724174138-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809a9f724174138-1"><span class="crayon-i">get</span><span class="crayon-h"> </span><span class="crayon-s">'customer_service/agent'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'customer_service#agent'</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p>Start your Rails server and navigate to 
			<span id="crayon-58794db809aa8264890566" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">http</span><span class="crayon-o">:</span><span class="crayon-c">//localhost:3000/customer_service/agent</span></span></span>  to verify that the web page looks like this:</p>
<p><img class="alignnone size-full wp-image-14525" alt="Twilio___Rails_4" src="https://www.twilio.com/blog/wp-content/uploads/2015/01/Twilio___Rails_4.jpg" width="371" height="185" srcset="https://www.twilio.com/blog/wp-content/uploads/2015/01/Twilio___Rails_4.jpg 371w, https://www.twilio.com/blog/wp-content/uploads/2015/01/Twilio___Rails_4-300x149.jpg 300w" sizes="(max-width: 371px) 100vw, 371px" /></p>
<p>This is the view for our agent and it helpfully displays information (context) about the customer that she is about to call.</p>
<p dir="ltr">If you see the page above, you’re well on your way. If you don’t, make sure to check out the output on the command line from the rails server command. It may have some useful information for debugging the problem. Now let’s get that “Make Call” button to work.</p>
<h3 dir="ltr">Integrate the Twilio Client JS SDK</h3>
<p>The first step when getting started with the Twilio Client JS SDK is to include a JS file. Open 
			<span id="crayon-58794db809ab3756749681" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">app</span><span class="crayon-o">/</span><span class="crayon-i">views</span><span class="crayon-o">/</span><span class="crayon-i">customer_service</span><span class="crayon-o">/</span><span class="crayon-v">agent</span><span class="crayon-sy">.</span><span class="crayon-v">html</span><span class="crayon-sy">.</span><span class="crayon-i">erb</span></span></span>  and add the following line to the bottom:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809ac8052689326" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">agent.html.erb</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;script type="text/javascript" src="https://www.twilio.com/blog//static.twilio.com/libs/twiliojs/1.2/twilio.min.js"&gt;&lt;/script&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809ac8052689326-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809ac8052689326-8"><span class="crayon-ta">&lt;script </span><span class="crayon-e ">type</span><span class="crayon-o">=</span><span class="crayon-s">"text/javascript"</span><span class="crayon-h"> </span><span class="crayon-e ">src</span><span class="crayon-o">=</span><span class="crayon-s">"//static.twilio.com/libs/twiliojs/1.2/twilio.min.js"</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;/script&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0052 seconds] -->
<p>There are two steps to getting an outbound call initiated:</p>
<ol>
<li>Initializing the SDK</li>
<li>Connecting the outbound call</li>
</ol>
<p>To initialize the SDK, call Twilo.Device.setup. Add a &lt;script&gt; block at the bottom of the view file to do this.</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809ad3969894901" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">agent.html.erb</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;script&gt;
// works on IE9 and above
document.addEventListener("DOMContentLoaded", function(event) {
  Twilio.Device.setup("&lt;%= @token %&gt;");
});
&lt;/script&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809ad3969894901-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809ad3969894901-10">10</div><div class="crayon-num" data-line="crayon-58794db809ad3969894901-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809ad3969894901-12">12</div><div class="crayon-num" data-line="crayon-58794db809ad3969894901-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809ad3969894901-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809ad3969894901-9"><span class="crayon-ta">&lt;script&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809ad3969894901-10"><span class="crayon-c">// works on IE9 and above</span></div><div class="crayon-line" id="crayon-58794db809ad3969894901-11"><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">"DOMContentLoaded"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">event</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809ad3969894901-12"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Twilio</span><span class="crayon-sy">.</span><span class="crayon-v">Device</span><span class="crayon-sy">.</span><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-s">"&lt;%= @token %&gt;"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794db809ad3969894901-13"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809ad3969894901-14"><span class="crayon-ta">&lt;/script&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0024 seconds] -->
<p>The 
			<span id="crayon-58794db809add457535029" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">setup</span></span></span>  method requires a 
			<span id="crayon-58794db809ae7701705297" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">token</span></span></span>  parameter to be passed-in, we’ll return to that in a minute. To connect the outbound call you call 
			<span id="crayon-58794db809af0601349338" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-v">Twilio</span><span class="crayon-sy">.</span><span class="crayon-v">Device</span><span class="crayon-sy">.</span><span class="crayon-i">connect</span></span></span> . Define a function called 
			<span id="crayon-58794db809afa957174398" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">call</span></span></span>  that does this:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809b04156390322" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;script&gt;
// works on IE9 and above
document.addEventListener("DOMContentLoaded", function(event) {
  Twilio.Device.setup("&lt;%= @token %&gt;");
});

function call() {
  Twilio.Device.connect({id: 123});
}
&lt;/script&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809b04156390322-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b04156390322-10">10</div><div class="crayon-num" data-line="crayon-58794db809b04156390322-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b04156390322-12">12</div><div class="crayon-num" data-line="crayon-58794db809b04156390322-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b04156390322-14">14</div><div class="crayon-num crayon-marked-num crayon-top" data-line="crayon-58794db809b04156390322-15">15</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-58794db809b04156390322-16">16</div><div class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-58794db809b04156390322-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b04156390322-18">18</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809b04156390322-9"><span class="crayon-ta">&lt;script&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b04156390322-10"><span class="crayon-c">// works on IE9 and above</span></div><div class="crayon-line" id="crayon-58794db809b04156390322-11"><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">"DOMContentLoaded"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">event</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b04156390322-12"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Twilio</span><span class="crayon-sy">.</span><span class="crayon-v">Device</span><span class="crayon-sy">.</span><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-s">"&lt;%= @token %&gt;"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794db809b04156390322-13"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b04156390322-14">&nbsp;</div><div class="crayon-line crayon-marked-line crayon-top" id="crayon-58794db809b04156390322-15"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">call</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-58794db809b04156390322-16"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Twilio</span><span class="crayon-sy">.</span><span class="crayon-v">Device</span><span class="crayon-sy">.</span><span class="crayon-e">connect</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-v">id:</span><span class="crayon-h"> </span><span class="crayon-cn">123</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-bottom" id="crayon-58794db809b04156390322-17"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b04156390322-18"><span class="crayon-ta">&lt;/script&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0036 seconds] -->
<p></p>
<p dir="ltr">Ok, we are now done integrating the Twilio Client JS SDK. Let’s discuss this mysterious token.</p>
<h3 dir="ltr">Generate a Capability Token</h3>
<p>In <a href="https://www.twilio.com/blog/2014/10/twilio-on-rails-part-2-rails-4-app-sending-sms-mms.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/blog/2014/10/twilio-on-rails-part-2-rails-4-app-sending-sms-mms.html', 'part 2');">part 2</a> of this tutorial you learned how to use the Twilio REST API to send outbound SMS and MMS messages. This code required the use of your security credentials (Account SID and Auth Token) but the code was server-side, so you didn’t have to worry about your users sniffing your authentication credentials.</p>
<p>Making a phone call from a browser is a bit different. You want a web page to be able to connect to Twilio and initiate (or perhaps receive) a phone call. But it’s clear that embedding your authentication credentials in JavaScript on the web page is unacceptable. Somehow your Rails app needs to grant the browser the capability of making a phone call without leaking any credentials.</p>
<p dir="ltr">That is where the <a href="https://www.twilio.com/docs/client/capability-tokens" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/docs/client/capability-tokens', 'Twilio Capability Token');">Twilio Capability Token</a> comes in. A capability token is  a <a href="http://jwt.io/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://jwt.io/', 'JSON Web Token');">JSON Web Token</a> that you embeds one or more capabilities that your app is granting to the browser, for a limited period of time. Creating a capability token is easy, just open up 
			<span id="crayon-58794db809b0e610033960" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">app</span><span class="crayon-o">/</span><span class="crayon-i">controllers</span><span class="crayon-o">/</span><span class="crayon-v">customer_service_controller</span><span class="crayon-sy">.</span><span class="crayon-i">rb</span></span></span>  and add the following lines to the bottom of the agent method:</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809b18649116436" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">customer_service_controller.rb</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
capability = Twilio::Util::Capability.new Rails.application.secrets.twilio_account_sid, Rails.application.secrets.twilio_auth_token
capability.allow_client_outgoing Rails.application.secrets.twilio_twiml_app_sid
@token = capability.generate()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809b18649116436-16">16</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b18649116436-17">17</div><div class="crayon-num" data-line="crayon-58794db809b18649116436-18">18</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809b18649116436-16"><span class="crayon-v">capability</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">Twilio</span><span class="crayon-o">::</span><span class="crayon-i">Util</span><span class="crayon-o">::</span><span class="crayon-v">Capability</span><span class="crayon-sy">.</span><span class="crayon-i">new</span><span class="crayon-h"> </span><span class="crayon-v">Rails</span><span class="crayon-sy">.</span><span class="crayon-v">application</span><span class="crayon-sy">.</span><span class="crayon-v">secrets</span><span class="crayon-sy">.</span><span class="crayon-i">twilio_account_sid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Rails</span><span class="crayon-sy">.</span><span class="crayon-v">application</span><span class="crayon-sy">.</span><span class="crayon-v">secrets</span><span class="crayon-sy">.</span><span class="crayon-i">twilio_auth_token</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b18649116436-17"><span class="crayon-v">capability</span><span class="crayon-sy">.</span><span class="crayon-i">allow_client_outgoing</span><span class="crayon-h"> </span><span class="crayon-v">Rails</span><span class="crayon-sy">.</span><span class="crayon-v">application</span><span class="crayon-sy">.</span><span class="crayon-v">secrets</span><span class="crayon-sy">.</span><span class="crayon-i">twilio_twiml_app_sid</span></div><div class="crayon-line" id="crayon-58794db809b18649116436-18"><span class="crayon-v">@token</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">capability</span><span class="crayon-sy">.</span><span class="crayon-e">generate</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0033 seconds] -->
<p></p>
<h3 dir="ltr">Dial the Customer</h3>
<p>Now that you’ve generated a capability token you have satisfied the requirements for setting-up the Twilio JS SDK. The user’s browser is now authorized to make phone calls. However you now must generate some TwiML that tells Twilio what to do once the VOIP connection is made between the browser and Twilio. In this scenario you want to dial the customer who requested the call back.</p>
<p>Edit 
			<span id="crayon-58794db809b23860650941" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">app</span><span class="crayon-o">/</span><span class="crayon-i">controllers</span><span class="crayon-o">/</span><span class="crayon-v">twilio_controller</span><span class="crayon-sy">.</span><span class="crayon-i">rb</span></span></span> . Create a new action called 
			<span id="crayon-58794db809b33070782302" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">connect_customer</span></span></span> :</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809b3e035857898" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">twilio_controller.rb</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
def connect_customer
   # mocking a db of customers, connect to real db in production
   customers = {
     '123' =&gt; {'phone_number' =&gt; '&lt;your phone number here&gt;'},
     '456' =&gt; {'phone_number' =&gt; '+15553333'}
   }
   # accessing mocked customers db
   customer = customers[params[:id]]
   response = Twilio::TwiML::Response.new do |r|
     r.Say 'Hello. Connecting you to the customer now.', :voice =&gt; 'alice'
     r.Dial :callerId =&gt; Rails.application.secrets.twilio_phone_number do |d|
       d.Number customer['phone_number']
     end
   end

   render_twiml response
 end</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809b3e035857898-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b3e035857898-22">22</div><div class="crayon-num" data-line="crayon-58794db809b3e035857898-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b3e035857898-24">24</div><div class="crayon-num" data-line="crayon-58794db809b3e035857898-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b3e035857898-26">26</div><div class="crayon-num" data-line="crayon-58794db809b3e035857898-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b3e035857898-28">28</div><div class="crayon-num" data-line="crayon-58794db809b3e035857898-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b3e035857898-30">30</div><div class="crayon-num" data-line="crayon-58794db809b3e035857898-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b3e035857898-32">32</div><div class="crayon-num" data-line="crayon-58794db809b3e035857898-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b3e035857898-34">34</div><div class="crayon-num" data-line="crayon-58794db809b3e035857898-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b3e035857898-36">36</div><div class="crayon-num" data-line="crayon-58794db809b3e035857898-37">37</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809b3e035857898-21"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-i">connect_customer</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b3e035857898-22">   <span class="crayon-c"># mocking a db of customers, connect to real db in production</span></div><div class="crayon-line" id="crayon-58794db809b3e035857898-23">   <span class="crayon-v">customers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b3e035857898-24">     <span class="crayon-s">'123'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">{</span><span class="crayon-s">'phone_number'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;your phone number here&gt;'</span><span class="crayon-k ">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794db809b3e035857898-25">     <span class="crayon-s">'456'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">{</span><span class="crayon-s">'phone_number'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'+15553333'</span><span class="crayon-k ">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b3e035857898-26">   <span class="crayon-k ">}</span></div><div class="crayon-line" id="crayon-58794db809b3e035857898-27">   <span class="crayon-c"># accessing mocked customers db</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b3e035857898-28">   <span class="crayon-v">customer</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">customers</span><span class="crayon-sy">[</span><span class="crayon-v">params</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-i">id</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-58794db809b3e035857898-29">   <span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">Twilio</span><span class="crayon-o">::</span><span class="crayon-i">TwiML</span><span class="crayon-o">::</span><span class="crayon-v">Response</span><span class="crayon-sy">.</span><span class="crayon-i">new</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-i">r</span><span class="crayon-o">|</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b3e035857898-30">     <span class="crayon-v">r</span><span class="crayon-sy">.</span><span class="crayon-i">Say</span><span class="crayon-h"> </span><span class="crayon-s">'Hello. Connecting you to the customer now.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">voice</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'alice'</span></div><div class="crayon-line" id="crayon-58794db809b3e035857898-31">     <span class="crayon-v">r</span><span class="crayon-sy">.</span><span class="crayon-i">Dial</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">callerId</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Rails</span><span class="crayon-sy">.</span><span class="crayon-v">application</span><span class="crayon-sy">.</span><span class="crayon-v">secrets</span><span class="crayon-sy">.</span><span class="crayon-i">twilio_phone_number</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-i">d</span><span class="crayon-o">|</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b3e035857898-32">       <span class="crayon-v">d</span><span class="crayon-sy">.</span><span class="crayon-i">Number</span><span class="crayon-h"> </span><span class="crayon-v">customer</span><span class="crayon-sy">[</span><span class="crayon-s">'phone_number'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-58794db809b3e035857898-33">     <span class="crayon-st">end</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b3e035857898-34">   <span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-58794db809b3e035857898-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b3e035857898-36">   <span class="crayon-i">render_twiml</span><span class="crayon-h"> </span><span class="crayon-i">response</span></div><div class="crayon-line" id="crayon-58794db809b3e035857898-37"> <span class="crayon-st">end</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0079 seconds] -->
<p></p>
<p dir="ltr">Please make sure to use your personal phone number in the code snippet above. It will help greatly with testing.</p>
<p>Now, there are three interesting things happening in this action:</p>
<ol>
<li>An id parameter is passed-in and we use it to do a lookup in a database of customers.</li>
<li>TwiML markup is generated that dials a particular customer’s phone number.</li>
<li>The callerId of this call references a new configuration setting</li>
</ol>
<p>To create this new configuration setting, open 
			<span id="crayon-58794db809b49851045036" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">config</span><span class="crayon-o">/</span><span class="crayon-v">secrets</span><span class="crayon-sy">.</span><span class="crayon-i">yml</span></span></span>  and add the following lines.</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809b52006066265" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">secrets.yml</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">YAML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
development:
 secret_key_base: 'XXX'
 twilio_account_sid: &lt;%= ENV["TWILIO_ACCOUNT_SID"] %&gt;
 twilio_auth_token:  &lt;%= ENV["TWILIO_AUTH_TOKEN"] %&gt;
 twilio_twiml_app_sid: &lt;%= ENV["TWILIO_TWIML_APP_SID"] %&gt;
 twilio_phone_number: &lt;%= ENV["TWILIO_PHONE_NUMBER"] %&gt;

test:

production:
 secret_key_base: 'XXX'
 twilio_account_sid: &lt;%= ENV["TWILIO_ACCOUNT_SID"] %&gt;
 twilio_auth_token:  &lt;%= ENV["TWILIO_AUTH_TOKEN"] %&gt;
 twilio_twiml_app_sid: &lt;%= ENV["TWILIO_TWIML_APP_SID"] %&gt;
 twilio_phone_number: &lt;%= ENV["TWILIO_PHONE_NUMBER"] %&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809b52006066265-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b52006066265-2">2</div><div class="crayon-num" data-line="crayon-58794db809b52006066265-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b52006066265-4">4</div><div class="crayon-num" data-line="crayon-58794db809b52006066265-5">5</div><div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-58794db809b52006066265-6">6</div><div class="crayon-num" data-line="crayon-58794db809b52006066265-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b52006066265-8">8</div><div class="crayon-num" data-line="crayon-58794db809b52006066265-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b52006066265-10">10</div><div class="crayon-num" data-line="crayon-58794db809b52006066265-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b52006066265-12">12</div><div class="crayon-num" data-line="crayon-58794db809b52006066265-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794db809b52006066265-14">14</div><div class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="crayon-58794db809b52006066265-15">15</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809b52006066265-1"><span class="crayon-s ">development</span><span class="">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b52006066265-2"> <span class="crayon-s ">secret_key_base</span><span class="">: 'XXX'</span></div><div class="crayon-line" id="crayon-58794db809b52006066265-3"> <span class="crayon-s ">twilio_account_sid</span><span class="">: </span><span class="crayon-o">&lt;</span><span class="crayon-sy">%</span>=<span class="crayon-h"> </span>ENV<span class="crayon-i ">["TWILIO_ACCOUNT_SID"]</span><span class="crayon-h"> </span><span class="crayon-sy">%</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b52006066265-4"> <span class="crayon-s ">twilio_auth_token</span><span class="">:  </span><span class="crayon-o">&lt;</span><span class="crayon-sy">%</span>=<span class="crayon-h"> </span>ENV<span class="crayon-i ">["TWILIO_AUTH_TOKEN"]</span><span class="crayon-h"> </span><span class="crayon-sy">%</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-58794db809b52006066265-5"> <span class="crayon-s ">twilio_twiml_app_sid</span><span class="">: </span><span class="crayon-o">&lt;</span><span class="crayon-sy">%</span>=<span class="crayon-h"> </span>ENV<span class="crayon-i ">["TWILIO_TWIML_APP_SID"]</span><span class="crayon-h"> </span><span class="crayon-sy">%</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-58794db809b52006066265-6"> <span class="crayon-s ">twilio_phone_number</span><span class="">: </span><span class="crayon-o">&lt;</span><span class="crayon-sy">%</span>=<span class="crayon-h"> </span>ENV<span class="crayon-i ">["TWILIO_PHONE_NUMBER"]</span><span class="crayon-h"> </span><span class="crayon-sy">%</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-58794db809b52006066265-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b52006066265-8"><span class="crayon-s ">test</span><span class="">:</span></div><div class="crayon-line" id="crayon-58794db809b52006066265-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b52006066265-10"><span class="crayon-s ">production</span><span class="">:</span></div><div class="crayon-line" id="crayon-58794db809b52006066265-11"> <span class="crayon-s ">secret_key_base</span><span class="">: 'XXX'</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b52006066265-12"> <span class="crayon-s ">twilio_account_sid</span><span class="">: </span><span class="crayon-o">&lt;</span><span class="crayon-sy">%</span>=<span class="crayon-h"> </span>ENV<span class="crayon-i ">["TWILIO_ACCOUNT_SID"]</span><span class="crayon-h"> </span><span class="crayon-sy">%</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-58794db809b52006066265-13"> <span class="crayon-s ">twilio_auth_token</span><span class="">:  </span><span class="crayon-o">&lt;</span><span class="crayon-sy">%</span>=<span class="crayon-h"> </span>ENV<span class="crayon-i ">["TWILIO_AUTH_TOKEN"]</span><span class="crayon-h"> </span><span class="crayon-sy">%</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794db809b52006066265-14"> <span class="crayon-s ">twilio_twiml_app_sid</span><span class="">: </span><span class="crayon-o">&lt;</span><span class="crayon-sy">%</span>=<span class="crayon-h"> </span>ENV<span class="crayon-i ">["TWILIO_TWIML_APP_SID"]</span><span class="crayon-h"> </span><span class="crayon-sy">%</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-58794db809b52006066265-15"> <span class="crayon-s ">twilio_phone_number</span><span class="">: </span><span class="crayon-o">&lt;</span><span class="crayon-sy">%</span>=<span class="crayon-h"> </span>ENV<span class="crayon-i ">["TWILIO_PHONE_NUMBER"]</span><span class="crayon-h"> </span><span class="crayon-sy">%</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0059 seconds] -->
<p>Create the corresponding environment variable:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809b5d172891250" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
export TWILIO_PHONE_NUMBER=&lt;replace with your Twilio number&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809b5d172891250-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809b5d172891250-1"><span class="crayon-e">export </span><span class="crayon-v">TWILIO_PHONE_NUMBER</span><span class="crayon-o">=</span><span class="crayon-o">&lt;</span><span class="crayon-e">replace </span><span class="crayon-e">with </span><span class="crayon-e">your </span><span class="crayon-e">Twilio </span><span class="crayon-i">number</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>Finally, edit 
			<span id="crayon-58794db809b67713934598" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">config</span><span class="crayon-o">/</span><span class="crayon-v">routes</span><span class="crayon-sy">.</span><span class="crayon-i">rb</span></span></span>  and add the following line:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809b71909787614" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">routes.rb</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
post 'twilio/connect_customer' =&gt; 'twilio#connect_customer'</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809b71909787614-15">15</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809b71909787614-15"><span class="crayon-i">post</span><span class="crayon-h"> </span><span class="crayon-s">'twilio/connect_customer'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'twilio#connect_customer'</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p>You can test your progress by starting your Rails server and running the following curl command on your local machine:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809b7b652563499" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
curl -X POST http://localhost:3000/twilio/connect_customer --data id=123</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809b7b652563499-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809b7b652563499-1"><span class="crayon-i">curl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">X</span><span class="crayon-h"> </span><span class="crayon-e">POST </span><span class="crayon-i">http</span><span class="crayon-o">:</span><span class="crayon-c">//localhost:3000/twilio/connect_customer --data id=123</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p>You should see the following TwiML document returned:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794db809b85127435424" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Response&gt;&lt;Say voice="alice"&gt;Hello. Connecting you to customer support now.&lt;/Say&gt;&lt;Dial callerId="your Twilio number"&gt;&lt;Number&gt;your phone number&lt;/Number&gt;&lt;/Dial&gt;&lt;/Response&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794db809b85127435424-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794db809b85127435424-1"><span class="crayon-ta">&lt;?</span><span class="crayon-e">xml </span><span class="crayon-i">version</span><span class="crayon-o">=</span><span class="crayon-s">"1.0"</span><span class="crayon-h"> </span><span class="crayon-i">encoding</span><span class="crayon-o">=</span><span class="crayon-s">"UTF-8"</span><span class="crayon-ta">?&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-i">Response</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">Say </span><span class="crayon-v">voice</span><span class="crayon-o">=</span><span class="crayon-s">"alice"</span><span class="crayon-o">&gt;</span><span class="crayon-v">Hello</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">Connecting </span><span class="crayon-e">you </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">customer </span><span class="crayon-e">support </span><span class="crayon-v">now</span><span class="crayon-sy">.</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">Say</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">Dial </span><span class="crayon-v">callerId</span><span class="crayon-o">=</span><span class="crayon-s">"your Twilio number"</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-i">Number</span><span class="crayon-o">&gt;</span><span class="crayon-e">your </span><span class="crayon-e">phone </span><span class="crayon-i">number</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">Number</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">Dial</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">Response</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0093 seconds] -->
<p></p>
<h3 dir="ltr">Connect the VOIP Call</h3>
<p>The last thing to do is to return to Twilio.com and edit your TwiML app to point the Voice Request URL to the route you’ve defined to dial the customer. Remember that Twilio needs a publicly-addressable URL, so feel free to use <a href="https://www.twilio.com/blog/2013/10/test-your-webhooks-locally-with-ngrok.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/blog/2013/10/test-your-webhooks-locally-with-ngrok.html', 'Ngrok');">Ngrok</a> as we did in the past tutorials or simply deploy your Rails 4 app to the public internet. Once you have a fully qualified URL for your route (i.e. 
			<span id="crayon-58794db809b8f177358341" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">http</span><span class="crayon-o">:</span><span class="crayon-c">//xxx.ngrok.com/twilio/connect_customer</span></span></span> ), please paste it into the Voice Request URL field and hit Save.</p>
<p><img class="alignnone size-full wp-image-14526" alt="twiml_app" src="https://www.twilio.com/blog/wp-content/uploads/2015/01/twiml_app.jpg" width="640" height="345" srcset="https://www.twilio.com/blog/wp-content/uploads/2015/01/twiml_app.jpg 640w, https://www.twilio.com/blog/wp-content/uploads/2015/01/twiml_app-300x161.jpg 300w" sizes="(max-width: 640px) 100vw, 640px" /></p>
<p>&nbsp;</p>
<p dir="ltr">Now it’s the <a href="http://giphy.com/gifs/man-iron-approves-o08fOdCShdPGw" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://giphy.com/gifs/man-iron-approves-o08fOdCShdPGw', 'moment of truth');">moment of truth</a>. Navigate to 
			<span id="crayon-58794db809b99575467208" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-pre crayon-code" style="font-size: 16px !important; line-height: 24px !important;font-size: 16px !important;"><span class="crayon-i">localhost</span><span class="crayon-o">:</span><span class="crayon-cn">3000</span><span class="crayon-o">/</span><span class="crayon-i">customer_service</span><span class="crayon-o">/</span><span class="crayon-i">agent</span></span></span>  and click the “Make Call” button. If you’re using Chrome or Firefox, you will see a browser dialog appear asking for permission to access your microphone. Please click “Allow”.</p>
<p><img class="alignnone size-full wp-image-14527" alt="chrome_mic" src="https://www.twilio.com/blog/wp-content/uploads/2015/01/chrome_mic.jpg" width="640" height="33" srcset="https://www.twilio.com/blog/wp-content/uploads/2015/01/chrome_mic.jpg 640w, https://www.twilio.com/blog/wp-content/uploads/2015/01/chrome_mic-300x15.jpg 300w" sizes="(max-width: 640px) 100vw, 640px" /></p>
<p dir="ltr">If all goes well, you’ll hear the message “Hello. Connecting you the customer now.” and then your phone will start to ring. Feel free to have a friend answer your phone and have a chat with them via your web browser.</p>
<h3 dir="ltr">BOOM! Contextual VOIP in the Browser</h3>
<p dir="ltr">In this blog post we explored how to create a contextual VOIP experience using Rails 4. In addition to some core Rails concepts like creating controllers/actions/views, we learned how to:</p>
<ul>
<li>Create a TwiML app</li>
<li>Integrate the Twilio Client JS SDK</li>
<li>Generate a Capability Token</li>
<li>Connect the VOIP call</li>
</ul>
<p dir="ltr">We also just scratched the surface of what you can do with Twilio Client. Here are some fun exercises to build on what you’ve learned:</p>
<ol>
<li>Create a new web page that lets the agent answer incoming calls</li>
<li>Create a new web page that handle a browser-to-browser call (all VOIP)</li>
<li>Use the <a href="https://www.twilio.com/blog/2014/10/media-streams-in-twilio-client-getusermedia-nt.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/blog/2014/10/media-streams-in-twilio-client-getusermedia-nt.html', 'audioConstraints parameter');">audioConstraints parameter</a> to tweak Chrome features like auto gain control</li>
</ol>
<p>All of the code for this part of the tutorial has been <a href="https://github.com/crtr0/twilio-rails-4/tree/part3" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/crtr0/twilio-rails-4/tree/part3', 'posted to Github');">posted to Github</a>. Hope you’ve enjoyed this Twilio on Rails series. Happy hacking!</p>
			</div>
					</div>
	</div><!-- .entry-content -->

	<footer class="entry-footer col-md-12">
		<div class="entry-meta">
					<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html" data-text="Twilio on Rails Part 3 &#8211; Adding Contextual VOIP Using WebRTC to Your Rails 4 App ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
<span class="author-avatar"><img alt='' src='https://secure.gravatar.com/avatar/6417ca1c133ad9c74479a0f9a3f0dc95?s=20&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/6417ca1c133ad9c74479a0f9a3f0dc95?s=40&amp;d=mm&amp;r=g 2x' class='avatar avatar-20 photo' height='20' width='20' /></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/carter">Carter Rabasa</a></span></span> <span class="author-meta author-email"><a href="mailto:carter@twilio.com">carter@twilio.com</a></span>		</div>
	</footer><!-- .entry-footer -->

   <div class="build-more"><h3>Build More With JavaScript</h3>        <a href="https://www.twilio.com/docs/tutorials/walkthrough/server-notifications/node/express" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/docs/tutorials/walkthrough/server-notifications/node/express', '');">
          <h5>SMS and MMS Notifications with Node.js</h5>
        </a>
              <a href="https://www.twilio.com/blog/2015/02/answering-health-questions-via-sms-with-ibm-watson-and-twilio.html" rel="bookmark" title="Permanent Link to Answering Health Questions via SMS with IBM Watson and Twilio" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/answering-health-questions-via-sms-with-ibm-watson-and-twilio.html', '');">
          <h5>Answering Health Questions via SMS with IBM Watson and Twilio<h4>
        </a>
                <a href="https://www.twilio.com/blog/2015/02/building-your-own-personal-assistant-with-twilio-and-google-calendar.html" rel="bookmark" title="Permanent Link to Building your own personal assistant with Twilio and Google Calendar" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/building-your-own-personal-assistant-with-twilio-and-google-calendar.html', '');">
          <h5>Building your own personal assistant with Twilio and Google Calendar<h4>
        </a>
                <a href="https://www.twilio.com/blog/2015/03/create-a-browser-based-photobooth-with-javascript-php-and-twilio.html" rel="bookmark" title="Permanent Link to Create a Browser-Based Photobooth with JavaScript, PHP and Twilio" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/03/create-a-browser-based-photobooth-with-javascript-php-and-twilio.html', '');">
          <h5>Create a Browser-Based Photobooth with JavaScript, PHP and Twilio<h4>
        </a>
        </div>
</article><!-- #post-## -->

			
<div id="disqus_thread">
                    <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-3355">
        <div id="dsq-comment-header-3355" class="dsq-comment-header">
            <cite id="dsq-cite-3355">
                <span id="dsq-author-user-3355">Clifton Lobo</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3355" class="dsq-comment-body">
            <div id="dsq-comment-message-3355" class="dsq-comment-message"><p>Another great webRTC use case!</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-3896">
        <div id="dsq-comment-header-3896" class="dsq-comment-header">
            <cite id="dsq-cite-3896">
                <span id="dsq-author-user-3896">Mike Vallano</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3896" class="dsq-comment-body">
            <div id="dsq-comment-message-3896" class="dsq-comment-message"><p>Thanks for posting this series. It helped me quickly get something up and running. Cheers!</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-3897">
        <div id="dsq-comment-header-3897" class="dsq-comment-header">
            <cite id="dsq-cite-3897">
                <span id="dsq-author-user-3897">onkelyoo</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3897" class="dsq-comment-body">
            <div id="dsq-comment-message-3897" class="dsq-comment-message"><p>Thank you. Got it working too, but when I tried to implement this to my main application I got an error loading the twilio.min.js file. I don&#8217;t know what I have done wrong. GET: <a href="http://localhost:3000/libs/twiliojs/refs/6359b40/twilio.js" onclick="__gaTracker('send', 'event', 'download', 'http://localhost:3000/libs/twiliojs/refs/6359b40/twilio.js');" rel="nofollow">http://localhost:3000/libs/twiliojs/refs/6359b40/twilio.js</a> / </p>
<p>twilio.min.js:3 GET <a href="http://localhost:3000/libs/twiliojs/refs/6359b40/twilio.js" onclick="__gaTracker('send', 'event', 'download', 'http://localhost:3000/libs/twiliojs/refs/6359b40/twilio.js');" rel="nofollow">http://localhost:3000/libs/twiliojs/refs/6359b40/twilio.js</a> 404 (Not Found)(anonymous function) @ twilio.min.js:3(anonymous function) @ twilio.min.js:4</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-3909">
        <div id="dsq-comment-header-3909" class="dsq-comment-header">
            <cite id="dsq-cite-3909">
http://twitter.com/philnash                <span id="dsq-author-user-3909">philnash</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3909" class="dsq-comment-body">
            <div id="dsq-comment-message-3909" class="dsq-comment-message"><p>It looks like your app is trying to find the Twilio JavaScript within the local app assets. Have you entered the URL like this? &#8220;//static.twilio.com/libs/twiliojs/1.2/twilio.min.js&#8221;</p>
<p>(The // at the start is important as it loads the file over the correct protocol, http or https.)</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-3" id="dsq-comment-3910">
        <div id="dsq-comment-header-3910" class="dsq-comment-header">
            <cite id="dsq-cite-3910">
                <span id="dsq-author-user-3910">onkelyoo</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3910" class="dsq-comment-body">
            <div id="dsq-comment-message-3910" class="dsq-comment-message"><p>it seems that I had some issues with the localhast url, but it is working now. Really enjoy your Tutorial and Product.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-4" id="dsq-comment-3911">
        <div id="dsq-comment-header-3911" class="dsq-comment-header">
            <cite id="dsq-cite-3911">
http://twitter.com/philnash                <span id="dsq-author-user-3911">philnash</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3911" class="dsq-comment-body">
            <div id="dsq-comment-message-3911" class="dsq-comment-message"><p>Glad it&#8217;s all working for you! I&#8217;m pleased you like Twilio, but you have to thank Carter for the tutorial, I&#8217;m just lurking in the comments!</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
            </ul>


        </div>

    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html';
    var disqus_identifier = 'https://www.twilio.com/blog/2015/01/14518 http://twilioinc.wpengine.com/?p=14518';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'twilioblog';
    var disqus_title = "Twilio on Rails Part 3 &#8211; Adding Contextual VOIP Using WebRTC to Your Rails 4 App";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html?cf_action=sync_comments&amp;post_id=14518';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "https:\/\/www.twilio.com\/blog\/2015\/01\/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html\/trackback"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		
		</main><!-- #main -->
	</div><!-- #primary -->


<div id="secondary" class="widget-area col-md-3 hide-xs" role="complementary">
	<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://www.twilio.com/blog/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside><aside id="text-2" class="widget widget_text">			<div class="textwidget"><p>Power modern communications. Build the next generation of voice and SMS applications.</p>

 <a href="http://twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://twilio.com/try-twilio', 'Start Building For Free');" class="btn">Start Building For Free</a></div>
		</aside><style scoped type="text/css">.utcw-8ngloje {word-wrap:break-word}.utcw-8ngloje span,.utcw-8ngloje a{border-style:solid;border-width:1px}.utcw-8ngloje span:hover,.utcw-8ngloje a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-2" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Stack</h1><div class="utcw-8ngloje tagcloud"><a class="tag-link-22 utcw-tag utcw-tag-net" href="https://www.twilio.com/blog/tag/net" style="font-size:16px" title="40 topics">.NET</a> <a class="tag-link-98 utcw-tag utcw-tag-arduino" href="https://www.twilio.com/blog/tag/arduino" style="font-size:16px" title="21 topics">Arduino</a> <a class="tag-link-598 utcw-tag utcw-tag-java" href="https://www.twilio.com/blog/tag/java" style="font-size:16px" title="14 topics">Java</a> <a class="tag-link-600 utcw-tag utcw-tag-javascript" href="https://www.twilio.com/blog/tag/javascript" style="font-size:16px" title="86 topics">JavaScript</a> <a class="tag-link-847 utcw-tag utcw-tag-php" href="https://www.twilio.com/blog/tag/php" style="font-size:16px" title="57 topics">PHP</a> <a class="tag-link-891 utcw-tag utcw-tag-python" href="https://www.twilio.com/blog/tag/python" style="font-size:16px" title="72 topics">Python</a> <a class="tag-link-969 utcw-tag utcw-tag-ruby" href="https://www.twilio.com/blog/tag/ruby" style="font-size:16px" title="69 topics">Ruby</a> <a class="tag-link-2856 utcw-tag utcw-tag-swift" href="https://www.twilio.com/blog/tag/swift" style="font-size:16px" title="22 topics">Swift</a></div></aside><style scoped type="text/css">.utcw-5dkhj5o {word-wrap:break-word}.utcw-5dkhj5o span,.utcw-5dkhj5o a{border-style:solid;border-width:1px}.utcw-5dkhj5o span:hover,.utcw-5dkhj5o a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-3" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Product</h1><div class="utcw-5dkhj5o tagcloud"><a class="tag-link-2043 utcw-tag utcw-tag-mms" href="https://www.twilio.com/blog/tag/mms" style="font-size:16px" title="50 topics">MMS</a> <a class="tag-link-3513 utcw-tag utcw-tag-programmable-chat" href="https://www.twilio.com/blog/tag/programmable-chat" style="font-size:16px" title="9 topics">Programmable Chat</a> <a class="tag-link-1537 utcw-tag utcw-tag-sip" href="https://www.twilio.com/blog/tag/sip" style="font-size:16px" title="15 topics">SIP</a> <a class="tag-link-1031 utcw-tag utcw-tag-sms" href="https://www.twilio.com/blog/tag/sms" style="font-size:16px" title="372 topics">SMS</a> <a class="tag-link-2871 utcw-tag utcw-tag-taskrouter" href="https://www.twilio.com/blog/tag/taskrouter" style="font-size:16px" title="8 topics">Task Router</a> <a class="tag-link-1199 utcw-tag utcw-tag-twilio-client" href="https://www.twilio.com/blog/tag/twilio-client" style="font-size:16px" title="32 topics">Twilio Client</a> <a class="tag-link-3032 utcw-tag utcw-tag-twilio-video" href="https://www.twilio.com/blog/tag/twilio-video" style="font-size:16px" title="9 topics">Twilio Video</a> <a class="tag-link-1277 utcw-tag utcw-tag-voice" href="https://www.twilio.com/blog/tag/voice" style="font-size:16px" title="172 topics">Voice</a></div></aside><aside id="text-5" class="widget widget_text">			<div class="textwidget"><a href="http://www.twilio.com/docs/tutorials" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/docs/tutorials', '');"><img src="https://www.twilio.com/blog/wp-content/uploads/2016/07/tutorials.png" style="width: 255px" /></a></div>
		</aside><aside id="categories-3" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-13"><a href="https://www.twilio.com/blog/all-things-code" >Code, Tutorials and Hacks</a>
</li>
	<li class="cat-item cat-item-5"><a href="https://www.twilio.com/blog/customer-highlights" >Customer Highlights</a>
</li>
	<li class="cat-item cat-item-7"><a href="https://www.twilio.com/blog/developers-drawing-the-owl" >Developers Drawing The Owl</a>
</li>
	<li class="cat-item cat-item-3"><a href="https://www.twilio.com/blog/news" >News</a>
</li>
	<li class="cat-item cat-item-4"><a href="https://www.twilio.com/blog/stories-from-the-road" >Stories From The Road</a>
</li>
	<li class="cat-item cat-item-8"><a href="https://www.twilio.com/blog/inside-twilio" >The Owl’s Nest: Inside Twilio</a>
</li>
		</ul>
</aside><aside id="text-4" class="widget widget_text">			<div class="textwidget"><div class="tagcloud "><a href="http://www.twilio.com/blog/feed" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog/feed', 'RSS Feed');">RSS Feed</a></div></div>
		</aside></div><!-- #secondary -->

		</div><!-- .row -->
	</div><!-- #content.container -->

<div class="" id="footer">
	<div class="container">
		<header>
			<div class="banner"></div>
			<div class="border"></div>
			<div class="stitching"></div>
		</header>
    <div class="row sitemap">
      <div class="row">
        <div class="col-md-2 col-md-offset-1">
          <h4><a href="http://www.twilio.com/company">Company</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/company">About Twilio</a></li>
            <li><a href="http://www.twilio.com/company/nine-values">Our Nine Values</a></li>
            <li><a href="http://www.twilio.com/company/leadership-principles">Our Leadership Principles</a></li>
            <li><a href="http://www.twilio.com/company/management">The Team</a></li>
            <li><a href="http://www.twilio.com/press">Press &amp; Media</a></li>
            <li><a href="http://www.twilio.org/">Twilio.org</a></li>
            <li><a href="http://www.twilio.com/company/jobs">Careers</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4><a href="http://www.twilio.com/products">Products</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/voice">Voice</a></li>
            <li><a href="http://www.twilio.com/video">Video</a></li>
            <li><a href="http://www.twilio.com/sms">SMS (Text Messaging)</a></li>
            <li><a href="http://www.twilio.com/mms">MMS (Picture Messaging)</a></li>
            <li><a href="http://www.twilio.com/sms/toll-free">Toll-Free SMS</a></li>
            <li><a href="http://www.twilio.com/sip-trunking">SIP Trunking</a></li>
            <li><a href="http://www.twilio.com/client/mobile">Client Mobile</a></li>
            <li><a href="http://www.twilio.com/webrtc">Client WebRTC</a></li>
            <li><a href="http://www.twilio.com/stun-turn">Network Traversal Service</a></li>
            <li><a href="http://www.twilio.com/taskrouter">TaskRouter</a></li>
            <li><a href="http://www.twilio.com/sms/phone-numbers">Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/sms/shortcodes">Short Codes</a></li>
            <li><a href="http://www.twilio.com/support-plans">Support Plans</a></li>
            <li><a href="http://www.twilio.com/platform">Platform</a></li>
            <li><a href="http://www.twilio.com/lookup">Lookup</a></li>
            <li><a href="http://www.twilio.com/monitor">Monitor</a></li>
            <li><a href="http://www.twilio.com/copilot">Messaging Copilot</a></li>
            <li><a href="http://www.twilio.com/voice/conference">Global Conference</a></li>
            <li><a href="http://www.twilio.com/authy">Authy</a></li>
          </ul>
      </div>
      <div class="col-md-2">
        <h4><a href="http://www.twilio.com/pricing">Pricing</a></h4>
        <ul>
          <li><a href="http://www.twilio.com/voice/pricing">Voice Pricing</a></li>
          <li><a href="http://www.twilio.com/sms/pricing">Messaging Pricing</a></li>
          <li><a href="http://www.twilio.com/sip-trunking/pricing">SIP Trunking Pricing</a></li>
          <li><a href="http://www.twilio.com/client/pricing">Client Pricing</a></li>
          <li><a href="http://www.twilio.com/stun-turn/pricing">Network Traversal Pricing</a></li>
          <li><a href="http://www.twilio.com/taskrouter/pricing">TaskRouter</a></li>
          <li><a href="http://www.twilio.com/lookup#pricing">Lookup</a></li>
          <li><a href="http://www.twilio.com/international">International Coverage</a></li>
        </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/use-cases">Use Cases</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/customers">Customer Stories</a></li>
            <li><a href="http://www.twilio.com/showcase">Showcase</a></li>
            <li><a href="http://www.twilio.com/use-cases/two-factor-authentication">Two-Factor Authentication</a></li>
            <li><a href="http://www.twilio.com/use-cases/appointment-reminders">Appointment Reminders</a></li>
            <li><a href="http://www.twilio.com/use-cases/dispatch-notifications">Dispatch Notifications</a></li>
            <li><a href="http://www.twilio.com/use-cases/eta-alerts">ETA Alerts</a></li>
            <li><a href="http://www.twilio.com/use-cases/automated-surveys">Automated Surveys</a></li>
            <li><a href="http://www.twilio.com/use-cases/masked-phone-numbers">Masked Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/use-cases/visual-estimates">Visual Estimates</a></li>
            <li><a href="http://www.twilio.com/doers">Developer Network</a></li>
            <li><a href="http://www.twilio.com/webinars">Webinars</a></li>
            <li><a href="http://www.twilio.com/white-papers">White Papers</a></li>
          </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/api">Api &amp; Docs</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/docs/api">API Documentation</a></li>
            <li><a href="http://www.twilio.com/docs/quickstart">Quickstarts</a></li>
            <li><a href="http://www.twilio.com/docs/howto">How Tos</a></li>
            <li><a href="http://www.twilio.com/docs/libraries">Helper Libraries</a></li>
            <li><a href="http://www.twilio.com/docs/security">Security</a></li>
          </ul>
      </div>
    </div>
		<div class="row clear">
			<footer><span>&copy; 2017 Twilio. All rights reserved. <aside>|</aside><a href="http://www.twilio.com/legal/tos">Terms of Service</a><aside>|</aside><a href="http://www.twilio.com/legal/privacy">Privacy Policy</a></span>
			</footer>
		</div>
	</div>
</div>


</div><!-- #page -->

<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201702'></script>







<script type="text/javascript" defer src="https://www.twilio.com/blog/wp-content/cache/autoptimize/js/autoptimize_30cf8936a215677503cd64ef48677239.js"></script></body>

<!-- Mirrored from www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:10:00 GMT -->
</html>
