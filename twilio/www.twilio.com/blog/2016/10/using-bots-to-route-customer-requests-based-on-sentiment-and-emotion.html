<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:10:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<script type="text/javascript">
(function() {
    var projectId = 3524915770;
    var protocol = ('https:' == document.location.protocol ?
    'https://' : 'http://');
    var scriptTag = document.createElement('script');
    scriptTag.type = 'text/javascript';
    scriptTag.async = true;
    scriptTag.src = protocol + 'cdn.optimizely.com/js/' +
    projectId + '.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(scriptTag, s);
})();
function optimizelyTimeout() {
    window.optimizely = window.optimizely|| [];
    if (!window.optimizely.data) {
    window.optimizely.push("timeout");
    }
}
setTimeout(optimizelyTimeout, 1000);
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.twilio.com/blog/xmlrpc.php">
<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '815114181']);
_elqQ.push(['elqTrackPageView']);
_elqQ.push(['elqUseFirstPartyCookie', 'www.twilio.com']);
(function () {
  function async_load()
  {
    var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
    s.src = 'http://img03.en25.com/i/elqCfg.min.js';
    var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
  }
  if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
  else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>
<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','http://connect.facebook.net/en_US/fbevents.js');

fbq('init', '467131150158811');
fbq('track', "PageView");</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=467131150158811&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

<style>
@media screen and (max-width: 600px) {
  #signal-header { display: none; }
}
</style>

<link type="text/css" media="all" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_7a2cc50131d932d32297f43c61de37cd.css" rel="stylesheet" /><link type="text/css" media="screen" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_97ca666341cd9b69002e26c8f2ca5299.css" rel="stylesheet" /><title>Using Bots To Route Customer Requests Based On Sentiment and Emotion &#8211; Twilio Cloud Communications Blog</title>

<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.13 - http://yoast.com/wordpress/seo/ -->
<link rel="canonical" href="https://www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html" />
<!-- / Yoast WordPress SEO plugin. -->

<link rel='dns-prefetch' href='https://www.twilio.com/blog//s0.wp.com' />
<link rel='dns-prefetch' href='https://www.twilio.com/blog//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Feed" href="https://www.twilio.com/blog/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Comments Feed" href="https://www.twilio.com/blog/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Using Bots To Route Customer Requests Based On Sentiment and Emotion Comments Feed" href="https://www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/twilioinc.wpengine.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.2"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>










<!-- This site uses the Google Analytics by Yoast plugin v5.4.7 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','http://www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-2900316-1', 'auto');
	__gaTracker('set', 'forceSSL', true);
	 window.optimizely = window.optimizely || [];
 window.optimizely.push("activateUniversalAnalytics");
	__gaTracker('set', 'dimension4', 'Al Cook');
	__gaTracker('set', 'dimension5', 'post');
	__gaTracker('set', 'dimension6', 'all-things-code');
	__gaTracker('set', 'dimension7', 'bots,facebook,Sentiment,Task Router');
	__gaTracker('set', 'dimension8', '2016-10-12T17:55:26+00:00');
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by Yoast -->


<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.4.3","is_admin":"0","ajaxurl":"https:\/\/twilioinc.wpengine.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>

<script type='text/javascript'>
/* <![CDATA[ */
var swiftypeParams = {"engineKey":"UpGyyJZzgUMXHM65YENj"};
/* ]]> */
</script>

<link rel='https://api.w.org/' href='https://www.twilio.com/blog/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.twilio.com/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.twilio.com/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://www.twilio.com/blog/?p=18980' />
<link rel="alternate" type="application/json+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2016%2F10%2Fusing-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html" />
<link rel="alternate" type="text/xml+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2016%2F10%2Fusing-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html&amp;format=xml" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-32x32.png" sizes="32x32" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-270x270.png" />
</head>

<body class="single single-post postid-18980 single-format-standard group-blog">
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.twilio.com/blog//www.googletagmanager.com/ns.html?id=GTM-W4RVXH"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W4RVXH');</script>
<!-- End Google Tag Manager -->

<div id="fb-root"></div>
<script>(function(d, s, id) {
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) return;
		js = d.createElement(s); js.id = id;
		js.src = "http://connect.facebook.net/en_US/sdk.js#xfbml=1&appId=414254592083321&version=v2.0";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
window.fbAsyncInit = function() {
  FB.Event.subscribe('edge.create', function(targetUrl) {
    __gaTracker('send', 'social', 'facebook', 'like', targetUrl);
  });
};
window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));

function trackTwitter(intent_event) {
  if (intent_event) {
    var opt_pagePath;
    if (intent_event.target && intent_event.target.nodeName == 'IFRAME') {
          opt_target = extractParamFromUri(intent_event.target.src, 'url');
    }
    __gaTracker('send', 'social', 'twitter', 'tweet', opt_pagePath);
  }
}

function extractParamFromUri(uri, paramName) {
  if (!uri) {
    return;
  }
  var regex = new RegExp('[\\?&#]' + paramName + '=([^&#]*)');
  var params = regex.exec(uri);
  if (params != null) {
    return unescape(params[1]);
  }
  return;
}

//Wrap event bindings - Wait for async js to load
twttr.ready(function (twttr) {
  //event bindings
  twttr.events.bind('tweet', trackTwitter);
});
</script>
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o);for(var r=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=r(p[c])};
  heap.load("1541905715");
</script>
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<nav class="navbar navbar-default" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle hidden-xs" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="https://www.twilio.com/blog/">
					<img src="https://s3.amazonaws.com/ahoy-assets.twilio.com/global/images/wordmark.svg" width="200"> <span class="logo-blog">blog</span>
				</a>
			</div>

			<div class="hidden-xs"><ul id="menu-site-navigation" class="nav navbar-nav pull-right"><li id="menu-item-12202" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12202"><a href="http://www.twilio.com/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/', 'Home');" title="Home">Home</a></li>
<li id="menu-item-12205" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12205"><a href="http://www.twilio.com/blog" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog', 'Blog');" title="Blog">Blog</a></li>
<li id="menu-item-12204" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12204"><a href="https://www.twilio.com/docs/howto" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/howto', 'Tutorials');" title="Tutorials">Tutorials</a></li>
<li id="menu-item-12206" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12206"><a href="https://www.twilio.com/docs/api" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/api', 'Docs');" title="Docs">Docs</a></li>
<li id="menu-item-12207" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12207"><a href="http://www.twilio.com/help" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/help', 'Help');" title="Help">Help</a></li>
<li id="menu-item-12208" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12208"><a href="https://www.twilio.com/login" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/login', 'Login');" title="Login">Login</a></li>
<li id="menu-item-12209" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12209"><a href="https://www.twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/try-twilio', 'Signup');" title="Signup">Signup</a></li>
</ul></div>		</div>
	</nav>

	<div id="content" class="site-content container">
		<div class="row">

	<div id="primary" class="content-area col-md-9">
		<main id="main" class="site-main" role="main">

		
			
<article id="post-18980" class="row post-18980 post type-post status-publish format-standard hentry category-all-things-code tag-bots tag-facebook tag-sentiment tag-taskrouter">
	<header class="entry-header col-md-12">
		<h2 class="entry-title">Using Bots To Route Customer Requests Based On Sentiment and Emotion</h2>
			
		<footer class="entry-footer">
			<div class="entry-meta">
					<div class="row">
	<div class="col-md-6">
	<span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/al-cook">Al Cook</a></span></span> on <span class="posted-on"><a href="https://www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html" rel="bookmark"><time class="entry-date published" datetime="2016-10-12T17:55:26+00:00">October 12, 2016</time><time class="updated" datetime="2016-10-12T18:01:54+00:00">October 12, 2016</time></a></span>	</div>
	<div class="col-md-6">
		<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html" data-text="Using Bots To Route Customer Requests Based On Sentiment and Emotion ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
	</div>
	</div>
			</div><!-- .entry-meta -->
		</footer><!-- .entry-footer -->
	</header><!-- .entry-header -->

	<div class="entry-content col-md-12">
		<div class="row">
			<div class="col-md-12">
				<p><span style="font-weight: 400;">2016: the year where no strategy or vision pitch was complete without mentioning bots. </span></p>
<p><span style="font-weight: 400;">You can’t watch a tech keynote, scroll through your newsfeed, or be anywhere online without reading how </span><a href="http://venturebeat.com/2016/08/02/why-chatbots-are-replacing-apps/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://venturebeat.com/2016/08/02/why-chatbots-are-replacing-apps/', 'bots are replacing apps');"><span style="font-weight: 400;">bots are replacing apps</span></a><span style="font-weight: 400;">, or </span><a href="http://www.forbes.com/sites/parmyolson/2016/05/09/could-chat-bots-replace-human-jobs-facebook/#b0327f23c822" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.forbes.com/sites/parmyolson/2016/05/09/could-chat-bots-replace-human-jobs-facebook/#b0327f23c822', 'replacing humans');"><span style="font-weight: 400;">replacing humans</span></a><span style="font-weight: 400;">.  </span></p>
<p>Assuming though for just a moment that we don’t turn our every human interaction, from wedding vows to childcare, into an AI driven chat based interaction… we have a question to answer: what is a realistic view of how companies could be using bots today? I’m particularly interested in the possibilities for using bots within a call center (But not as a replacement for humans &#8211; despite the hype we’re not a fully virtual society quite yet).</p>
<p><b>Sentiment driven routing</b></p>
<p>To explore these ideas, I built a call center prototype to look at ways to merge human and bot interaction together. I’ve been chewing on a few questions: Could you have customers chat with a bot first to better determine their intent, and even emotional state, and use that information to connect them to a better matched agent? Could you save the agent time by having the bot capture key information first and inform the agent when they take the interaction? What about handling self-service questions entirely automatically without ever passing the chat to a human agent?</p>
<p><span style="font-weight: 400;">My prototype handles inbound interactions coming in over both SMS and from Twilio’s </span><a href="https://www.twilio.com/messaging-apps" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/messaging-apps', 'new Facebook integration');"><span style="font-weight: 400;">new Facebook integration</span></a><span style="font-weight: 400;">, all routed by TaskRouter. I also used Marketplace AddOns for details about the users texting in, along with Meya.ai for the bot platform, and Firebase. The code for this is all available in </span><a href="https://github.com/calozpom/taskrouterbot" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/calozpom/taskrouterbot', 'github');"><span style="font-weight: 400;">github</span></a><span style="font-weight: 400;">, so you can follow along as we go through the architecture.</span></p>
<p>A customer messaging in ‘hey I could do with some help’ will get routed in a completely different way to someone messaging ‘You guys really suck I can’t believe you still haven’t fixed this’. And someone messaging ‘what are your opening hours?’ doesn’t need to be routed to an agent at all.</p>
<p><span style="font-weight: 400;">Customers messaging in first cause a task to be created in TaskRouter. The Task serves as the primary key for the entire lifecycle of the customer interaction. When the task is created, it sits in a queue waiting to be bot qualified, and my app server connects the messages back and forth with the bot platform. The customer first chats with a bot, which determines their intent and emotional state. </span></p>
<p><span style="font-weight: 400;">Sending messages related to unqualified tasks to the bot:</span></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794fc77709e157734687" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
client.workspace.tasks(taskSid).get(function(err, task) {
   attr = JSON.parse(task.attributes);
   if (!attr.hasOwnProperty('bot_qualified')) {
     console.log("this task is not yet bot qualified");
     console.log("posting to meya with user id " + meyaUserID_string + " and text " + request.body['Body']);
     req
       .post('https://meya.ai/webhook/receive/BCvshMlsyFf').auth(meyaAPIKey).form({
         user_id: meyaUserID_string,
         text: request.body['Body']
       })
       .on('response', function(response) {
         console.log("got response from meya " + response);
       })
   } else {
     console.log("this task is already bot qualified");
   }
 });</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794fc77709e157734687-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc77709e157734687-2">2</div><div class="crayon-num" data-line="crayon-58794fc77709e157734687-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc77709e157734687-4">4</div><div class="crayon-num" data-line="crayon-58794fc77709e157734687-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc77709e157734687-6">6</div><div class="crayon-num" data-line="crayon-58794fc77709e157734687-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc77709e157734687-8">8</div><div class="crayon-num" data-line="crayon-58794fc77709e157734687-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc77709e157734687-10">10</div><div class="crayon-num" data-line="crayon-58794fc77709e157734687-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc77709e157734687-12">12</div><div class="crayon-num" data-line="crayon-58794fc77709e157734687-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc77709e157734687-14">14</div><div class="crayon-num" data-line="crayon-58794fc77709e157734687-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc77709e157734687-16">16</div><div class="crayon-num" data-line="crayon-58794fc77709e157734687-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794fc77709e157734687-1"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-v">workspace</span><span class="crayon-sy">.</span><span class="crayon-e">tasks</span><span class="crayon-sy">(</span><span class="crayon-i">taskSid</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">err</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">task</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc77709e157734687-2">   <span class="crayon-v">attr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">JSON</span><span class="crayon-sy">.</span><span class="crayon-e">parse</span><span class="crayon-sy">(</span><span class="crayon-v">task</span><span class="crayon-sy">.</span><span class="crayon-i">attributes</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794fc77709e157734687-3">   <span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">attr</span><span class="crayon-sy">.</span><span class="crayon-e">hasOwnProperty</span><span class="crayon-sy">(</span><span class="crayon-s">'bot_qualified'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc77709e157734687-4">     <span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">"this task is not yet bot qualified"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794fc77709e157734687-5">     <span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">"posting to meya with user id "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">meyaUserID_string</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">" and text "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">body</span><span class="crayon-sy">[</span><span class="crayon-s">'Body'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc77709e157734687-6">     <span class="crayon-i">req</span></div><div class="crayon-line" id="crayon-58794fc77709e157734687-7">       <span class="crayon-sy">.</span><span class="crayon-e">post</span><span class="crayon-sy">(</span><span class="crayon-s">'https://meya.ai/webhook/receive/BCvshMlsyFf'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">auth</span><span class="crayon-sy">(</span><span class="crayon-i">meyaAPIKey</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">form</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc77709e157734687-8">         <span class="crayon-v">user_id:</span><span class="crayon-h"> </span><span class="crayon-i">meyaUserID_string</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794fc77709e157734687-9">         <span class="crayon-v">text:</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">body</span><span class="crayon-sy">[</span><span class="crayon-s">'Body'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc77709e157734687-10">       <span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794fc77709e157734687-11">       <span class="crayon-sy">.</span><span class="crayon-e">on</span><span class="crayon-sy">(</span><span class="crayon-s">'response'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">response</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc77709e157734687-12">         <span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">"got response from meya "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">response</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794fc77709e157734687-13">       <span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc77709e157734687-14">   <span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58794fc77709e157734687-15">     <span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">"this task is already bot qualified"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc77709e157734687-16">   <span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794fc77709e157734687-17"> <span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0106 seconds] -->
<p><span style="font-weight: 400;">The Meya bot platform uses an easy scripting interface to storyboard the interactions. It starts by gathering the intent of the first message, and then transitions between different states from there depending on what’s said &#8211; the sequence will flow through to the next state unless you specify a transition to a different state. </span></p>
<p>&nbsp;</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794fc7770b1425079246" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
intents:
 misunderstood: help
 hi: hi
 how_are_you: how_are_you
 help: help
 whats_up: whats_up
 who_are_you: who_are_you
states:
 how_are_you:
   component: meya.text
   properties:
     text: I'm good! Thanks for asking!
   transitions:
     next: delay
 whats_up:
   component: meya.text
   properties:
     text: Oh we're just chilling.
   transitions:
     next: delay
 who_are_you:
   component: meya.text
   properties:
     text: I'm a bot, I will gather some information first and then pass you to an
       agent who can help
   transitions:
     next: delay
 hi:
   component: meya.random_text
   properties:
     responses:
     - Hi :)
     - Hello, there!
     - Howdy!
     - Bonjour.
 delay:
   component: al_delay
 help:
   component: meya.wit
   properties:
     text: How can I help you with British Exports?
     require_match: false
     token: &lt;wit.ai token&gt;
   transitions:
     angry: angry
     happy: happy
     needs_help: needs_help
     problem: problem
     service_question: service_question
     no_match: unsure_state
 angry:
   component: intent_checker
   properties:
     text: I'm really sorry. Would you mind if we chat a bit more and I can see if
       I can help make things better?
     emotion: angry
   return: true
 happy:
   component: intent_checker
   properties:
     text: I'm glad to hear it. Let me send you a free t-shirt to show our gratitude.
       :)
     emotion: happy
   return: true
 needs_help:
   component: intent_checker
   properties:
     text: I can definitely help you out. I'm going to need to ask you a few more
       questions.
     emotion: needs_help
   return: true
 problem:
   component: intent_checker
   properties:
     text: We'll get that fixed ASAP. One moment please.
     emotion: problem
   return: true
 service_question:
   component: intent_checker
   properties:
     text: You're asking the right person. Let me ask you a couple of questions so
       I can get you the answer you want.
     emotion: service_question
   return: true
 unsure_state:
   component: intent_checker
   properties:
     text: Sorry...let me pass you on to someone who can better help with that
     emotion: unsure
   return: true</textarea></div>
			<div class="crayon-main" style=" max-height: 500px;">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-2">2</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-4">4</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-6">6</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-8">8</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-10">10</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-12">12</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-14">14</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-16">16</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-18">18</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-20">20</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-22">22</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-24">24</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-26">26</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-28">28</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-30">30</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-32">32</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-34">34</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-36">36</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-38">38</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-40">40</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-42">42</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-44">44</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-46">46</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-48">48</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-50">50</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-52">52</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-54">54</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-56">56</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-58">58</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-60">60</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-62">62</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-64">64</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-66">66</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-68">68</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-70">70</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-72">72</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-74">74</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-76">76</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-78">78</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-80">80</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-82">82</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-84">84</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-86">86</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-88">88</div><div class="crayon-num" data-line="crayon-58794fc7770b1425079246-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770b1425079246-90">90</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794fc7770b1425079246-1"><span class="crayon-i">intents</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-2"> <span class="crayon-i">misunderstood</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">help</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-3"> <span class="crayon-i">hi</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">hi</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-4"> <span class="crayon-i">how_are_you</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">how_are_you</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-5"> <span class="crayon-i">help</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">help</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-6"> <span class="crayon-i">whats_up</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">whats_up</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-7"> <span class="crayon-i">who_are_you</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">who_are_you</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-8"><span class="crayon-i">states</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-9"> <span class="crayon-i">how_are_you</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-10">   <span class="crayon-i">component</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">meya</span><span class="crayon-sy">.</span><span class="crayon-i">text</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-11">   <span class="crayon-i">properties</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-12">     <span class="crayon-i">text</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">I</span><span class="crayon-s">'m good! Thanks for asking!</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-13"><span class="crayon-s">   transitions:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-14"><span class="crayon-s">     next: delay</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-15"><span class="crayon-s"> whats_up:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-16"><span class="crayon-s">   component: meya.text</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-17"><span class="crayon-s">   properties:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-18"><span class="crayon-s">     text: Oh we'</span><span class="crayon-e">re </span><span class="crayon-e">just </span><span class="crayon-v">chilling</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-19">   <span class="crayon-i">transitions</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-20">     <span class="crayon-i">next</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">delay</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-21"> <span class="crayon-i">who_are_you</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-22">   <span class="crayon-i">component</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">meya</span><span class="crayon-sy">.</span><span class="crayon-i">text</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-23">   <span class="crayon-i">properties</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-24">     <span class="crayon-i">text</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">I</span><span class="crayon-s">'m a bot, I will gather some information first and then pass you to an</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-25"><span class="crayon-s">       agent who can help</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-26"><span class="crayon-s">   transitions:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-27"><span class="crayon-s">     next: delay</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-28"><span class="crayon-s"> hi:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-29"><span class="crayon-s">   component: meya.random_text</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-30"><span class="crayon-s">   properties:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-31"><span class="crayon-s">     responses:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-32"><span class="crayon-s">     - Hi :)</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-33"><span class="crayon-s">     - Hello, there!</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-34"><span class="crayon-s">     - Howdy!</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-35"><span class="crayon-s">     - Bonjour.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-36"><span class="crayon-s"> delay:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-37"><span class="crayon-s">   component: al_delay</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-38"><span class="crayon-s"> help:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-39"><span class="crayon-s">   component: meya.wit</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-40"><span class="crayon-s">   properties:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-41"><span class="crayon-s">     text: How can I help you with British Exports?</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-42"><span class="crayon-s">     require_match: false</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-43"><span class="crayon-s">     token: &lt;wit.ai token&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-44"><span class="crayon-s">   transitions:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-45"><span class="crayon-s">     angry: angry</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-46"><span class="crayon-s">     happy: happy</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-47"><span class="crayon-s">     needs_help: needs_help</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-48"><span class="crayon-s">     problem: problem</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-49"><span class="crayon-s">     service_question: service_question</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-50"><span class="crayon-s">     no_match: unsure_state</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-51"><span class="crayon-s"> angry:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-52"><span class="crayon-s">   component: intent_checker</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-53"><span class="crayon-s">   properties:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-54"><span class="crayon-s">     text: I'</span><span class="crayon-i">m</span><span class="crayon-h"> </span><span class="crayon-e">really </span><span class="crayon-v">sorry</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">Would </span><span class="crayon-e">you </span><span class="crayon-e">mind </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">we </span><span class="crayon-i">chat</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">bit </span><span class="crayon-e">more </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-i">I</span><span class="crayon-h"> </span><span class="crayon-e">can </span><span class="crayon-e">see </span><span class="crayon-st">if</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-55">       <span class="crayon-i">I</span><span class="crayon-h"> </span><span class="crayon-e">can </span><span class="crayon-e">help </span><span class="crayon-e">make </span><span class="crayon-e">things </span><span class="crayon-i">better</span><span class="crayon-sy">?</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-56">     <span class="crayon-i">emotion</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">angry</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-57">   <span class="crayon-st">return</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-58"> <span class="crayon-i">happy</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-59">   <span class="crayon-i">component</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">intent_checker</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-60">   <span class="crayon-i">properties</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-61">     <span class="crayon-i">text</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">I</span><span class="crayon-s">'m glad to hear it. Let me send you a free t-shirt to show our gratitude.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-62"><span class="crayon-s">       :)</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-63"><span class="crayon-s">     emotion: happy</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-64"><span class="crayon-s">   return: true</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-65"><span class="crayon-s"> needs_help:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-66"><span class="crayon-s">   component: intent_checker</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-67"><span class="crayon-s">   properties:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-68"><span class="crayon-s">     text: I can definitely help you out. I'</span><span class="crayon-i">m</span><span class="crayon-h"> </span><span class="crayon-e">going </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">need </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">ask </span><span class="crayon-i">you</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">few </span><span class="crayon-i">more</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-69">       <span class="crayon-v">questions</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-70">     <span class="crayon-i">emotion</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">needs_help</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-71">   <span class="crayon-st">return</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-72"> <span class="crayon-i">problem</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-73">   <span class="crayon-i">component</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">intent_checker</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-74">   <span class="crayon-i">properties</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-75">     <span class="crayon-i">text</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">We</span><span class="crayon-s">'ll get that fixed ASAP. One moment please.</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-76"><span class="crayon-s">     emotion: problem</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-77"><span class="crayon-s">   return: true</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-78"><span class="crayon-s"> service_question:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-79"><span class="crayon-s">   component: intent_checker</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-80"><span class="crayon-s">   properties:</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-81"><span class="crayon-s">     text: You'</span><span class="crayon-e">re </span><span class="crayon-e">asking </span><span class="crayon-e">the </span><span class="crayon-e">right </span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">Let </span><span class="crayon-e">me </span><span class="crayon-e">ask </span><span class="crayon-i">you</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">couple </span><span class="crayon-e">of </span><span class="crayon-e">questions </span><span class="crayon-i">so</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-82">       <span class="crayon-i">I</span><span class="crayon-h"> </span><span class="crayon-e">can </span><span class="crayon-e">get </span><span class="crayon-e">you </span><span class="crayon-e">the </span><span class="crayon-e">answer </span><span class="crayon-e">you </span><span class="crayon-v">want</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-83">     <span class="crayon-i">emotion</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">service_question</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-84">   <span class="crayon-st">return</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-85"> <span class="crayon-i">unsure_state</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-86">   <span class="crayon-i">component</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">intent_checker</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-87">   <span class="crayon-i">properties</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-88">     <span class="crayon-i">text</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">Sorry</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-e">let </span><span class="crayon-e">me </span><span class="crayon-e">pass </span><span class="crayon-e">you </span><span class="crayon-e">on </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">someone </span><span class="crayon-e">who </span><span class="crayon-e">can </span><span class="crayon-e">better </span><span class="crayon-e">help </span><span class="crayon-e">with </span><span class="crayon-i">that</span></div><div class="crayon-line" id="crayon-58794fc7770b1425079246-89">     <span class="crayon-i">emotion</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">unsure</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770b1425079246-90">   <span class="crayon-st">return</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0146 seconds] -->
<p><span style="font-weight: 400;">When a bot gets an answer to the question ‘how can i help’, it uses Wit to determine sentiment. Wit is really easy to train from a data set of responses what the intent of the interaction is. The more you train it, the better is is at handling different variations of what the customer might say.</span></p>
<p>&nbsp;</p>
<p><img class="alignnone wp-image-18981 size-large" src="https://www.twilio.com/blog/wp-content/uploads/2016/10/Screenshot-2016-10-07-10.50.16-1024x743.png" alt="screenshot-2016-10-07-10-50-16" width="640" height="464" srcset="https://www.twilio.com/blog/wp-content/uploads/2016/10/Screenshot-2016-10-07-10.50.16-1024x743.png 1024w, https://www.twilio.com/blog/wp-content/uploads/2016/10/Screenshot-2016-10-07-10.50.16-300x218.png 300w, https://www.twilio.com/blog/wp-content/uploads/2016/10/Screenshot-2016-10-07-10.50.16-768x557.png 768w, https://www.twilio.com/blog/wp-content/uploads/2016/10/Screenshot-2016-10-07-10.50.16-200x145.png 200w, https://www.twilio.com/blog/wp-content/uploads/2016/10/Screenshot-2016-10-07-10.50.16.png 1334w" sizes="(max-width: 640px) 100vw, 640px" /></p>
<p>Once the bot has determined the intent, we’re ready to update the task attributes in TaskRouter to say that the task has been bot qualified, and mark their intent. In this case, it assigns each task to one of the following states: angry, happy, needs_help, problem, service_question, or unsure. To do this, I used the native Twilio integration available within the bot platform Meya.ai, so that my bot logic directly calls the update task API with the new attributes.</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794fc7770bf305192204" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">The code the bot executes to update the task</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
from meya import Component
import re
import json
from twilio.rest import TwilioTaskRouterClient

class IntentChecker(Component):
   def start(self):
       account_sid = &lt;account sid&gt;
       auth_token  = &lt;auth token&gt;
       client = TwilioTaskRouterClient(account_sid, auth_token)
       # read in the response text, and default to empty if invalid or missing
       text = self.properties.get('text') or ""
       # meyaUserID=JSON.loads(self.db.user.user_id)
       meyaUserID = self.db.user.user_id.split('@@')
       taskSid=meyaUserID[2]
       task = client.tasks("WS056355824815f89c7cc46e5d8cacaf20").get(taskSid)
       task_attributes= json.loads(task.attributes)
       task_attributes['bot_qualified']='true'
       task_attributes['bot_intent']=self.properties.get('emotion')       
       print task_attributes
       attribute_string=json.dumps(task_attributes)
       task = client.tasks("WS056355824815f89c7cc46e5d8cacaf20").update(taskSid,attributes=attribute_string)
       message = self.create_message(text=text)
       return self.respond(message=message)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-2">2</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-4">4</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-6">6</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-8">8</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-10">10</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-12">12</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-14">14</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-16">16</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-18">18</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-20">20</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-22">22</div><div class="crayon-num" data-line="crayon-58794fc7770bf305192204-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770bf305192204-24">24</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794fc7770bf305192204-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">meya </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">Component</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">re</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">json</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-4"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-sy">.</span><span class="crayon-e">rest </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">TwilioTaskRouterClient</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-6"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">IntentChecker</span><span class="crayon-sy">(</span><span class="crayon-i">Component</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-7">   <span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">start</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-8">       <span class="crayon-v">account_sid</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-e">account </span><span class="crayon-i">sid</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-9">       <span class="crayon-i">auth_token</span><span class="crayon-h"> </span> <span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-e">auth </span><span class="crayon-k ">token</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-10">       <span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">TwilioTaskRouterClient</span><span class="crayon-sy">(</span><span class="crayon-i">account_sid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">auth_token</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-11">       <span class="crayon-c"># read in the response text, and default to empty if invalid or missing</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-12">       <span class="crayon-v">text</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">properties</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'text'</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-s">""</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-13">       <span class="crayon-c"># meyaUserID=JSON.loads(self.db.user.user_id)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-14">       <span class="crayon-v">meyaUserID</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-k ">user</span><span class="crayon-sy">.</span><span class="crayon-v">user_id</span><span class="crayon-sy">.</span><span class="crayon-e">split</span><span class="crayon-sy">(</span><span class="crayon-s">'@@'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-15">       <span class="crayon-v">taskSid</span><span class="crayon-o">=</span><span class="crayon-v">meyaUserID</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-16">       <span class="crayon-v">task</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-e">tasks</span><span class="crayon-sy">(</span><span class="crayon-s">"WS056355824815f89c7cc46e5d8cacaf20"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-i">taskSid</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-17">       <span class="crayon-v">task_attributes</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">json</span><span class="crayon-sy">.</span><span class="crayon-e">loads</span><span class="crayon-sy">(</span><span class="crayon-v">task</span><span class="crayon-sy">.</span><span class="crayon-i">attributes</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-18">       <span class="crayon-v">task_attributes</span><span class="crayon-sy">[</span><span class="crayon-s">'bot_qualified'</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-s">'true'</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-19">       <span class="crayon-v">task_attributes</span><span class="crayon-sy">[</span><span class="crayon-s">'bot_intent'</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">properties</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'emotion'</span><span class="crayon-sy">)</span>       </div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-20">       <span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-i">task_attributes</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-21">       <span class="crayon-v">attribute_string</span><span class="crayon-o">=</span><span class="crayon-k ">json</span><span class="crayon-sy">.</span><span class="crayon-e">dumps</span><span class="crayon-sy">(</span><span class="crayon-i">task_attributes</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-22">       <span class="crayon-v">task</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-e">tasks</span><span class="crayon-sy">(</span><span class="crayon-s">"WS056355824815f89c7cc46e5d8cacaf20"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">update</span><span class="crayon-sy">(</span><span class="crayon-i">taskSid</span><span class="crayon-sy">,</span><span class="crayon-v">attributes</span><span class="crayon-o">=</span><span class="crayon-i">attribute_string</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58794fc7770bf305192204-23">       <span class="crayon-v">message</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">create_message</span><span class="crayon-sy">(</span><span class="crayon-v">text</span><span class="crayon-o">=</span><span class="crayon-i">text</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770bf305192204-24">       <span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">respond</span><span class="crayon-sy">(</span><span class="crayon-v">message</span><span class="crayon-o">=</span><span class="crayon-i">message</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0138 seconds] -->
<p><span style="font-weight: 400;">With the task updated, TaskRouter then moves the task into the appropriate queue so the best agents can handle the query. The gif below shows a realtime visualization of a TaskRouter workspace (code for this is also in </span><a href="https://github.com/calozpom/taskrouterbot" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/calozpom/taskrouterbot', 'github');"><span style="font-weight: 400;">github</span></a><span style="font-weight: 400;">). </span></p>
<p>&nbsp;</p>
<p><img class="alignnone size-full wp-image-18977" src="https://www.twilio.com/blog/wp-content/uploads/2016/10/7OgV6Pld8gXyR34ZRKI9uQKtjWQ8Xywd6bM9LYuh83Tj0pansfKi2eF0oWTFiraxhjJG-w4JL3-7obiFN0z94-6VYBaC5YGRo5sI5QC4KNWG5GakGEQDVLgh_UTGiXsIoVdOM08-.png" alt="7OgV6Pld8gXyR34ZRKI9uQKtjWQ8Xywd6bM9LYuh83Tj0pansfKi2eF0oWTFiraxhjJG-w4JL3-7obiFN0z94-6VYBaC5YGRo5sI5QC4KNWG5GakGEQDVLgh_UTGiXsIoVdOM08-" width="640" height="495" /></p>
<p><span style="font-weight: 400;">Once a task is bot qualified, and a suitable agent becomes available based on the determined intent, TaskRouter will push a reservation request to the agent. At this stage the agent gets to see all of the conversation history so they can get up to speed immediately and continue the conversation.</span></p>
<p><span style="font-weight: 400;">One of the key benefits of using messaging for customer service is that agents can handle multiple messaging interactions simultaneously. So I used the new <a href="https://www.twilio.com/docs/api/taskrouter/multitasking" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/docs/api/taskrouter/multitasking', 'multitasking');">multitasking</a> feature of TaskRouter</span><span style="font-weight: 400;"> to be able to specify how many tasks the agent can handle concurrently. As you change capacity of the worker, they get additional task reservations:</span></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794fc7770cc453044478" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">Updating TaskRouter multitask capacity</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
app.get('/updateCapacity', function(request, response) {
 // This function uses the TaskRouter multi-tasking API to change concurrent task capacity
 var options = {
   method: 'POST',
   url: 'https://taskrouter.twilio.com/v1/Workspaces/' + workspaceSid + '/Workers/' + request.query.workerSid + '/Channels/default',
   auth: {
     username: accountSid,
     password: authToken
   },
   form: {
     Capacity: request.query.capacity
   }
 };
 console.log(options);
 req(options, function(error, response, body) {
// snip code that goes on to handle request…
});
 response.send('');
});</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770cc453044478-2">2</div><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770cc453044478-4">4</div><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770cc453044478-6">6</div><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770cc453044478-8">8</div><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770cc453044478-10">10</div><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770cc453044478-12">12</div><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770cc453044478-14">14</div><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770cc453044478-16">16</div><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770cc453044478-18">18</div><div class="crayon-num" data-line="crayon-58794fc7770cc453044478-19">19</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794fc7770cc453044478-1"><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'/updateCapacity'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">request</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">response</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770cc453044478-2"> <span class="crayon-c">// This function uses the TaskRouter multi-tasking API to change concurrent task capacity</span></div><div class="crayon-line" id="crayon-58794fc7770cc453044478-3"> <span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">options</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770cc453044478-4">   <span class="crayon-i">method</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'POST'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794fc7770cc453044478-5">   <span class="crayon-i">url</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'https://taskrouter.twilio.com/v1/Workspaces/'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">workspaceSid</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/Workers/'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">query</span><span class="crayon-sy">.</span><span class="crayon-i">workerSid</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/Channels/default'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770cc453044478-6">   <span class="crayon-i">auth</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58794fc7770cc453044478-7">     <span class="crayon-i">username</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">accountSid</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770cc453044478-8">     <span class="crayon-i">password</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">authToken</span></div><div class="crayon-line" id="crayon-58794fc7770cc453044478-9">   <span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770cc453044478-10">   <span class="crayon-i">form</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58794fc7770cc453044478-11">     <span class="crayon-i">Capacity</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">query</span><span class="crayon-sy">.</span><span class="crayon-i">capacity</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770cc453044478-12">   <span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794fc7770cc453044478-13"> <span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770cc453044478-14"> <span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-i">options</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794fc7770cc453044478-15"> <span class="crayon-e">req</span><span class="crayon-sy">(</span><span class="crayon-i">options</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">error</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">response</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">body</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770cc453044478-16"><span class="crayon-c">// snip code that goes on to handle request…</span></div><div class="crayon-line" id="crayon-58794fc7770cc453044478-17"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770cc453044478-18"> <span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">send</span><span class="crayon-sy">(</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794fc7770cc453044478-19"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0094 seconds] -->
<p>&nbsp;</p>
<p><img class="alignnone size-full wp-image-18982" src="https://www.twilio.com/blog/wp-content/uploads/2016/10/multitasking.gif" alt="multitasking" width="1018" height="886" /></p>
<p><span style="font-weight: 400;">And finally I also used Marketplace AddOns to get the name and address of folks texting in:</span></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794fc7770d7246708087" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title">Getting marketplace AddOns</span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
try {
             var addOnsData = JSON.parse(request.body.AddOns);
             friendlyName_first = addOnsData['results']['nextcaller_advanced_caller_id']['result']['records'][0]['first_name'];
             friendlyName_last = addOnsData['results']['nextcaller_advanced_caller_id']['result']['records'][0]['last_name'];
             address_street = addOnsData['results']['nextcaller_advanced_caller_id']['result']['records'][0]['address'][0]['line1'];
           } catch (err) {}
           myFirebase.child("profiles").child(newTaskResponse.sid).set({
             'first_name': friendlyName_first,
             'last_name': friendlyName_last,
             'address_street': address_street,
             'message_type': 'sms',
             'profile_pic': 'img/unknownavatar.jpeg'
           });</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794fc7770d7246708087-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770d7246708087-2">2</div><div class="crayon-num" data-line="crayon-58794fc7770d7246708087-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770d7246708087-4">4</div><div class="crayon-num" data-line="crayon-58794fc7770d7246708087-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770d7246708087-6">6</div><div class="crayon-num" data-line="crayon-58794fc7770d7246708087-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770d7246708087-8">8</div><div class="crayon-num" data-line="crayon-58794fc7770d7246708087-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770d7246708087-10">10</div><div class="crayon-num" data-line="crayon-58794fc7770d7246708087-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794fc7770d7246708087-12">12</div><div class="crayon-num" data-line="crayon-58794fc7770d7246708087-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794fc7770d7246708087-1"><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770d7246708087-2">             <span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">addOnsData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">JSON</span><span class="crayon-sy">.</span><span class="crayon-e">parse</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">body</span><span class="crayon-sy">.</span><span class="crayon-i">AddOns</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794fc7770d7246708087-3">             <span class="crayon-v">friendlyName_first</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">addOnsData</span><span class="crayon-sy">[</span><span class="crayon-s">'results'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'nextcaller_advanced_caller_id'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'result'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'records'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'first_name'</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770d7246708087-4">             <span class="crayon-v">friendlyName_last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">addOnsData</span><span class="crayon-sy">[</span><span class="crayon-s">'results'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'nextcaller_advanced_caller_id'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'result'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'records'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'last_name'</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794fc7770d7246708087-5">             <span class="crayon-v">address_street</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">addOnsData</span><span class="crayon-sy">[</span><span class="crayon-s">'results'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'nextcaller_advanced_caller_id'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'result'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'records'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'address'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'line1'</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770d7246708087-6">           <span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">err</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794fc7770d7246708087-7">           <span class="crayon-v">myFirebase</span><span class="crayon-sy">.</span><span class="crayon-e">child</span><span class="crayon-sy">(</span><span class="crayon-s">"profiles"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">child</span><span class="crayon-sy">(</span><span class="crayon-v">newTaskResponse</span><span class="crayon-sy">.</span><span class="crayon-i">sid</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">set</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770d7246708087-8">             <span class="crayon-s">'first_name'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">friendlyName_first</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794fc7770d7246708087-9">             <span class="crayon-s">'last_name'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">friendlyName_last</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770d7246708087-10">             <span class="crayon-s">'address_street'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">address_street</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58794fc7770d7246708087-11">             <span class="crayon-s">'message_type'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'sms'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794fc7770d7246708087-12">             <span class="crayon-s">'profile_pic'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'img/unknownavatar.jpeg'</span></div><div class="crayon-line" id="crayon-58794fc7770d7246708087-13">           <span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0157 seconds] -->
<p><span style="font-weight: 400;">So now we have a customer service solution where users can message in through SMS or Facebook, and based on what they say they need help with (and how they say it), they will get routed to the best qualified agent. The agent will have all the context of the conversation so far, and details about the customer from the Marketplace AddOns lookup of their phone number. The agent can choose how many customers they want to handle concurrently using the new multi-tasking capability of TaskRouter. </span></p>
<p><span style="font-weight: 400;">You can hear me talk more about this demo in </span><a href="https://www.youtube.com/watch?v=AaGN-12uPE0" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.youtube.com/watch?v=AaGN-12uPE0', 'this video');"><span style="font-weight: 400;">this video</span></a><span style="font-weight: 400;"> from SIGNAL. All my code is available in </span><a href="https://github.com/calozpom/taskrouterbot" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/calozpom/taskrouterbot', 'github');"><span style="font-weight: 400;">github</span></a><span style="font-weight: 400;">. The back end is all Node, the front end uses Foundation, and the bot platform used was </span><a href="http://meya.ai/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://meya.ai/', 'https://www.twilio.com/blog/2016/10/meya.ai');"><span style="font-weight: 400;">meya.ai</span></a><span style="font-weight: 400;"> (who are phenomenally helpful, nice people). Disclaimer: I hadn’t coded anything in ten years, and had never used Node or any of these tools before, so in no way is this production code. Pull Requests welcome!</span></p>
<p>&nbsp;</p>
			</div>
					</div>
	</div><!-- .entry-content -->

	<footer class="entry-footer col-md-12">
		<div class="entry-meta">
					<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html" data-text="Using Bots To Route Customer Requests Based On Sentiment and Emotion ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
<span class="author-avatar"><img alt='' src='https://secure.gravatar.com/avatar/7cc06bde78dcabc7caa76f98a76f57f3?s=20&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/7cc06bde78dcabc7caa76f98a76f57f3?s=40&amp;d=mm&amp;r=g 2x' class='avatar avatar-20 photo' height='20' width='20' /></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/al-cook">Al Cook</a></span></span> <span class="author-meta author-email"><a href="mailto:acook@twilio.com">acook@twilio.com</a></span>		</div>
	</footer><!-- .entry-footer -->

   <div class="build-more"><h3>Use Twilio Tutorials to Start Building</h3>         <a href="https://www.twilio.com/docs/tutorials/walkthrough/call-tracking/php/laravel" onclick="__gaTracker('send', 'event', 'startbuilding-widget', 'https://www.twilio.com/docs/tutorials/walkthrough/call-tracking/php/laravel', '');">
          <h5>Call Tracking</h5>
        </a>
         <a href="https://www.twilio.com/docs/tutorials/walkthrough/server-notifications/php/laravel" onclick="__gaTracker('send', 'event', 'startbuilding-widget', 'https://www.twilio.com/docs/tutorials/walkthrough/server-notifications/php/laravel', '');">
          <h5>SMS and MMS Notifications</h5>
        </a>
         <a href="https://www.twilio.com/docs/tutorials/walkthrough/two-factor-authentication/php/laravel" onclick="__gaTracker('send', 'event', 'startbuilding-widget', 'https://www.twilio.com/docs/tutorials/walkthrough/two-factor-authentication/php/laravel', '');">
          <h5>Two-Factor Authentication with Authy</h5>
        </a>
      
</article><!-- #post-## -->

			
<div id="disqus_thread">
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'https://www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html';
    var disqus_identifier = 'https://www.twilio.com/blog/2016/10/18980 https://www.twilio.com/blog/?p=18980';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'twilioblog';
    var disqus_title = "Using Bots To Route Customer Requests Based On Sentiment and Emotion";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html?cf_action=sync_comments&amp;post_id=18980';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "https:\/\/www.twilio.com\/blog\/2016\/10\/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html\/trackback"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		
		</main><!-- #main -->
	</div><!-- #primary -->


<div id="secondary" class="widget-area col-md-3 hide-xs" role="complementary">
	<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://www.twilio.com/blog/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside><aside id="text-2" class="widget widget_text">			<div class="textwidget"><p>Power modern communications. Build the next generation of voice and SMS applications.</p>

 <a href="http://twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://twilio.com/try-twilio', 'Start Building For Free');" class="btn">Start Building For Free</a></div>
		</aside><style scoped type="text/css">.utcw-8ngloje {word-wrap:break-word}.utcw-8ngloje span,.utcw-8ngloje a{border-style:solid;border-width:1px}.utcw-8ngloje span:hover,.utcw-8ngloje a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-2" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Stack</h1><div class="utcw-8ngloje tagcloud"><a class="tag-link-22 utcw-tag utcw-tag-net" href="https://www.twilio.com/blog/tag/net" style="font-size:16px" title="40 topics">.NET</a> <a class="tag-link-98 utcw-tag utcw-tag-arduino" href="https://www.twilio.com/blog/tag/arduino" style="font-size:16px" title="21 topics">Arduino</a> <a class="tag-link-598 utcw-tag utcw-tag-java" href="https://www.twilio.com/blog/tag/java" style="font-size:16px" title="14 topics">Java</a> <a class="tag-link-600 utcw-tag utcw-tag-javascript" href="https://www.twilio.com/blog/tag/javascript" style="font-size:16px" title="86 topics">JavaScript</a> <a class="tag-link-847 utcw-tag utcw-tag-php" href="https://www.twilio.com/blog/tag/php" style="font-size:16px" title="57 topics">PHP</a> <a class="tag-link-891 utcw-tag utcw-tag-python" href="https://www.twilio.com/blog/tag/python" style="font-size:16px" title="72 topics">Python</a> <a class="tag-link-969 utcw-tag utcw-tag-ruby" href="https://www.twilio.com/blog/tag/ruby" style="font-size:16px" title="69 topics">Ruby</a> <a class="tag-link-2856 utcw-tag utcw-tag-swift" href="https://www.twilio.com/blog/tag/swift" style="font-size:16px" title="22 topics">Swift</a></div></aside><style scoped type="text/css">.utcw-5dkhj5o {word-wrap:break-word}.utcw-5dkhj5o span,.utcw-5dkhj5o a{border-style:solid;border-width:1px}.utcw-5dkhj5o span:hover,.utcw-5dkhj5o a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-3" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Product</h1><div class="utcw-5dkhj5o tagcloud"><a class="tag-link-2043 utcw-tag utcw-tag-mms" href="https://www.twilio.com/blog/tag/mms" style="font-size:16px" title="50 topics">MMS</a> <a class="tag-link-3513 utcw-tag utcw-tag-programmable-chat" href="https://www.twilio.com/blog/tag/programmable-chat" style="font-size:16px" title="9 topics">Programmable Chat</a> <a class="tag-link-1537 utcw-tag utcw-tag-sip" href="https://www.twilio.com/blog/tag/sip" style="font-size:16px" title="15 topics">SIP</a> <a class="tag-link-1031 utcw-tag utcw-tag-sms" href="https://www.twilio.com/blog/tag/sms" style="font-size:16px" title="372 topics">SMS</a> <a class="tag-link-2871 utcw-tag utcw-tag-taskrouter" href="https://www.twilio.com/blog/tag/taskrouter" style="font-size:16px" title="8 topics">Task Router</a> <a class="tag-link-1199 utcw-tag utcw-tag-twilio-client" href="https://www.twilio.com/blog/tag/twilio-client" style="font-size:16px" title="32 topics">Twilio Client</a> <a class="tag-link-3032 utcw-tag utcw-tag-twilio-video" href="https://www.twilio.com/blog/tag/twilio-video" style="font-size:16px" title="9 topics">Twilio Video</a> <a class="tag-link-1277 utcw-tag utcw-tag-voice" href="https://www.twilio.com/blog/tag/voice" style="font-size:16px" title="172 topics">Voice</a></div></aside><aside id="text-5" class="widget widget_text">			<div class="textwidget"><a href="http://www.twilio.com/docs/tutorials" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/docs/tutorials', '');"><img src="https://www.twilio.com/blog/wp-content/uploads/2016/07/tutorials.png" style="width: 255px" /></a></div>
		</aside><aside id="categories-3" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-13"><a href="https://www.twilio.com/blog/all-things-code" >Code, Tutorials and Hacks</a>
</li>
	<li class="cat-item cat-item-5"><a href="https://www.twilio.com/blog/customer-highlights" >Customer Highlights</a>
</li>
	<li class="cat-item cat-item-7"><a href="https://www.twilio.com/blog/developers-drawing-the-owl" >Developers Drawing The Owl</a>
</li>
	<li class="cat-item cat-item-3"><a href="https://www.twilio.com/blog/news" >News</a>
</li>
	<li class="cat-item cat-item-4"><a href="https://www.twilio.com/blog/stories-from-the-road" >Stories From The Road</a>
</li>
	<li class="cat-item cat-item-8"><a href="https://www.twilio.com/blog/inside-twilio" >The Owl’s Nest: Inside Twilio</a>
</li>
		</ul>
</aside><aside id="text-4" class="widget widget_text">			<div class="textwidget"><div class="tagcloud "><a href="http://www.twilio.com/blog/feed" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog/feed', 'RSS Feed');">RSS Feed</a></div></div>
		</aside></div><!-- #secondary -->

		</div><!-- .row -->
	</div><!-- #content.container -->

<div class="" id="footer">
	<div class="container">
		<header>
			<div class="banner"></div>
			<div class="border"></div>
			<div class="stitching"></div>
		</header>
    <div class="row sitemap">
      <div class="row">
        <div class="col-md-2 col-md-offset-1">
          <h4><a href="http://www.twilio.com/company">Company</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/company">About Twilio</a></li>
            <li><a href="http://www.twilio.com/company/nine-values">Our Nine Values</a></li>
            <li><a href="http://www.twilio.com/company/leadership-principles">Our Leadership Principles</a></li>
            <li><a href="http://www.twilio.com/company/management">The Team</a></li>
            <li><a href="http://www.twilio.com/press">Press &amp; Media</a></li>
            <li><a href="http://www.twilio.org/">Twilio.org</a></li>
            <li><a href="http://www.twilio.com/company/jobs">Careers</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4><a href="http://www.twilio.com/products">Products</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/voice">Voice</a></li>
            <li><a href="http://www.twilio.com/video">Video</a></li>
            <li><a href="http://www.twilio.com/sms">SMS (Text Messaging)</a></li>
            <li><a href="http://www.twilio.com/mms">MMS (Picture Messaging)</a></li>
            <li><a href="http://www.twilio.com/sms/toll-free">Toll-Free SMS</a></li>
            <li><a href="http://www.twilio.com/sip-trunking">SIP Trunking</a></li>
            <li><a href="http://www.twilio.com/client/mobile">Client Mobile</a></li>
            <li><a href="http://www.twilio.com/webrtc">Client WebRTC</a></li>
            <li><a href="http://www.twilio.com/stun-turn">Network Traversal Service</a></li>
            <li><a href="http://www.twilio.com/taskrouter">TaskRouter</a></li>
            <li><a href="http://www.twilio.com/sms/phone-numbers">Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/sms/shortcodes">Short Codes</a></li>
            <li><a href="http://www.twilio.com/support-plans">Support Plans</a></li>
            <li><a href="http://www.twilio.com/platform">Platform</a></li>
            <li><a href="http://www.twilio.com/lookup">Lookup</a></li>
            <li><a href="http://www.twilio.com/monitor">Monitor</a></li>
            <li><a href="http://www.twilio.com/copilot">Messaging Copilot</a></li>
            <li><a href="http://www.twilio.com/voice/conference">Global Conference</a></li>
            <li><a href="http://www.twilio.com/authy">Authy</a></li>
          </ul>
      </div>
      <div class="col-md-2">
        <h4><a href="http://www.twilio.com/pricing">Pricing</a></h4>
        <ul>
          <li><a href="http://www.twilio.com/voice/pricing">Voice Pricing</a></li>
          <li><a href="http://www.twilio.com/sms/pricing">Messaging Pricing</a></li>
          <li><a href="http://www.twilio.com/sip-trunking/pricing">SIP Trunking Pricing</a></li>
          <li><a href="http://www.twilio.com/client/pricing">Client Pricing</a></li>
          <li><a href="http://www.twilio.com/stun-turn/pricing">Network Traversal Pricing</a></li>
          <li><a href="http://www.twilio.com/taskrouter/pricing">TaskRouter</a></li>
          <li><a href="http://www.twilio.com/lookup#pricing">Lookup</a></li>
          <li><a href="http://www.twilio.com/international">International Coverage</a></li>
        </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/use-cases">Use Cases</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/customers">Customer Stories</a></li>
            <li><a href="http://www.twilio.com/showcase">Showcase</a></li>
            <li><a href="http://www.twilio.com/use-cases/two-factor-authentication">Two-Factor Authentication</a></li>
            <li><a href="http://www.twilio.com/use-cases/appointment-reminders">Appointment Reminders</a></li>
            <li><a href="http://www.twilio.com/use-cases/dispatch-notifications">Dispatch Notifications</a></li>
            <li><a href="http://www.twilio.com/use-cases/eta-alerts">ETA Alerts</a></li>
            <li><a href="http://www.twilio.com/use-cases/automated-surveys">Automated Surveys</a></li>
            <li><a href="http://www.twilio.com/use-cases/masked-phone-numbers">Masked Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/use-cases/visual-estimates">Visual Estimates</a></li>
            <li><a href="http://www.twilio.com/doers">Developer Network</a></li>
            <li><a href="http://www.twilio.com/webinars">Webinars</a></li>
            <li><a href="http://www.twilio.com/white-papers">White Papers</a></li>
          </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/api">Api &amp; Docs</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/docs/api">API Documentation</a></li>
            <li><a href="http://www.twilio.com/docs/quickstart">Quickstarts</a></li>
            <li><a href="http://www.twilio.com/docs/howto">How Tos</a></li>
            <li><a href="http://www.twilio.com/docs/libraries">Helper Libraries</a></li>
            <li><a href="http://www.twilio.com/docs/security">Security</a></li>
          </ul>
      </div>
    </div>
		<div class="row clear">
			<footer><span>&copy; 2017 Twilio. All rights reserved. <aside>|</aside><a href="http://www.twilio.com/legal/tos">Terms of Service</a><aside>|</aside><a href="http://www.twilio.com/legal/privacy">Privacy Policy</a></span>
			</footer>
		</div>
	</div>
</div>


</div><!-- #page -->

<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201702'></script>







<script type="text/javascript" defer src="https://www.twilio.com/blog/wp-content/cache/autoptimize/js/autoptimize_30cf8936a215677503cd64ef48677239.js"></script></body>

<!-- Mirrored from www.twilio.com/blog/2016/10/using-bots-to-route-customer-requests-based-on-sentiment-and-emotion.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:10:05 GMT -->
</html>
