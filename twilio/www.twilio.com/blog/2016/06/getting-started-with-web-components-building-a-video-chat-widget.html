<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:10:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<script type="text/javascript">
(function() {
    var projectId = 3524915770;
    var protocol = ('https:' == document.location.protocol ?
    'https://' : 'http://');
    var scriptTag = document.createElement('script');
    scriptTag.type = 'text/javascript';
    scriptTag.async = true;
    scriptTag.src = protocol + 'cdn.optimizely.com/js/' +
    projectId + '.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(scriptTag, s);
})();
function optimizelyTimeout() {
    window.optimizely = window.optimizely|| [];
    if (!window.optimizely.data) {
    window.optimizely.push("timeout");
    }
}
setTimeout(optimizelyTimeout, 1000);
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.twilio.com/blog/xmlrpc.php">
<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '815114181']);
_elqQ.push(['elqTrackPageView']);
_elqQ.push(['elqUseFirstPartyCookie', 'www.twilio.com']);
(function () {
  function async_load()
  {
    var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
    s.src = 'http://img03.en25.com/i/elqCfg.min.js';
    var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
  }
  if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
  else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>
<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','http://connect.facebook.net/en_US/fbevents.js');

fbq('init', '467131150158811');
fbq('track', "PageView");</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=467131150158811&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

<style>
@media screen and (max-width: 600px) {
  #signal-header { display: none; }
}
</style>

<link type="text/css" media="all" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_7a2cc50131d932d32297f43c61de37cd.css" rel="stylesheet" /><link type="text/css" media="screen" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_97ca666341cd9b69002e26c8f2ca5299.css" rel="stylesheet" /><title>Getting started with Web Components building a Video Chat widget &#8211; Twilio Cloud Communications Blog</title>

<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.13 - http://yoast.com/wordpress/seo/ -->
<link rel="canonical" href="https://www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html" />
<!-- / Yoast WordPress SEO plugin. -->

<link rel='dns-prefetch' href='https://www.twilio.com/blog//s0.wp.com' />
<link rel='dns-prefetch' href='https://www.twilio.com/blog//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Feed" href="https://www.twilio.com/blog/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Comments Feed" href="https://www.twilio.com/blog/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Getting started with Web Components building a Video Chat widget Comments Feed" href="https://www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/twilioinc.wpengine.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.2"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>










<!-- This site uses the Google Analytics by Yoast plugin v5.4.7 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','http://www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-2900316-1', 'auto');
	__gaTracker('set', 'forceSSL', true);
	 window.optimizely = window.optimizely || [];
 window.optimizely.push("activateUniversalAnalytics");
	__gaTracker('set', 'dimension4', 'Phil Nash');
	__gaTracker('set', 'dimension5', 'post');
	__gaTracker('set', 'dimension6', 'all-things-code');
	__gaTracker('set', 'dimension7', 'JavaScript,Twilio Video,web components,WebRTC');
	__gaTracker('set', 'dimension8', '2016-06-06T13:14:43+00:00');
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by Yoast -->


<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.4.3","is_admin":"0","ajaxurl":"https:\/\/twilioinc.wpengine.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>

<script type='text/javascript'>
/* <![CDATA[ */
var swiftypeParams = {"engineKey":"UpGyyJZzgUMXHM65YENj"};
/* ]]> */
</script>

<link rel='https://api.w.org/' href='https://www.twilio.com/blog/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.twilio.com/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.twilio.com/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://www.twilio.com/blog/?p=18072' />
<link rel="alternate" type="application/json+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2016%2F06%2Fgetting-started-with-web-components-building-a-video-chat-widget.html" />
<link rel="alternate" type="text/xml+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2016%2F06%2Fgetting-started-with-web-components-building-a-video-chat-widget.html&amp;format=xml" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-32x32.png" sizes="32x32" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-270x270.png" />
</head>

<body class="single single-post postid-18072 single-format-standard group-blog">
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.twilio.com/blog//www.googletagmanager.com/ns.html?id=GTM-W4RVXH"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W4RVXH');</script>
<!-- End Google Tag Manager -->

<div id="fb-root"></div>
<script>(function(d, s, id) {
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) return;
		js = d.createElement(s); js.id = id;
		js.src = "http://connect.facebook.net/en_US/sdk.js#xfbml=1&appId=414254592083321&version=v2.0";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
window.fbAsyncInit = function() {
  FB.Event.subscribe('edge.create', function(targetUrl) {
    __gaTracker('send', 'social', 'facebook', 'like', targetUrl);
  });
};
window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));

function trackTwitter(intent_event) {
  if (intent_event) {
    var opt_pagePath;
    if (intent_event.target && intent_event.target.nodeName == 'IFRAME') {
          opt_target = extractParamFromUri(intent_event.target.src, 'url');
    }
    __gaTracker('send', 'social', 'twitter', 'tweet', opt_pagePath);
  }
}

function extractParamFromUri(uri, paramName) {
  if (!uri) {
    return;
  }
  var regex = new RegExp('[\\?&#]' + paramName + '=([^&#]*)');
  var params = regex.exec(uri);
  if (params != null) {
    return unescape(params[1]);
  }
  return;
}

//Wrap event bindings - Wait for async js to load
twttr.ready(function (twttr) {
  //event bindings
  twttr.events.bind('tweet', trackTwitter);
});
</script>
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o);for(var r=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=r(p[c])};
  heap.load("1541905715");
</script>
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<nav class="navbar navbar-default" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle hidden-xs" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="https://www.twilio.com/blog/">
					<img src="https://s3.amazonaws.com/ahoy-assets.twilio.com/global/images/wordmark.svg" width="200"> <span class="logo-blog">blog</span>
				</a>
			</div>

			<div class="hidden-xs"><ul id="menu-site-navigation" class="nav navbar-nav pull-right"><li id="menu-item-12202" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12202"><a href="http://www.twilio.com/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/', 'Home');" title="Home">Home</a></li>
<li id="menu-item-12205" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12205"><a href="http://www.twilio.com/blog" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog', 'Blog');" title="Blog">Blog</a></li>
<li id="menu-item-12204" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12204"><a href="https://www.twilio.com/docs/howto" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/howto', 'Tutorials');" title="Tutorials">Tutorials</a></li>
<li id="menu-item-12206" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12206"><a href="https://www.twilio.com/docs/api" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/api', 'Docs');" title="Docs">Docs</a></li>
<li id="menu-item-12207" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12207"><a href="http://www.twilio.com/help" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/help', 'Help');" title="Help">Help</a></li>
<li id="menu-item-12208" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12208"><a href="https://www.twilio.com/login" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/login', 'Login');" title="Login">Login</a></li>
<li id="menu-item-12209" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12209"><a href="https://www.twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/try-twilio', 'Signup');" title="Signup">Signup</a></li>
</ul></div>		</div>
	</nav>

	<div id="content" class="site-content container">
		<div class="row">

	<div id="primary" class="content-area col-md-9">
		<main id="main" class="site-main" role="main">

		
			
<article id="post-18072" class="row post-18072 post type-post status-publish format-standard has-post-thumbnail hentry category-all-things-code tag-javascript tag-twilio-video tag-web-components tag-webrtc">
	<header class="entry-header col-md-12">
		<h2 class="entry-title">Getting started with Web Components building a Video Chat widget</h2>
						<div class="entry-image col-md-12">
        <img width="640" height="260" src="https://www.twilio.com/blog/wp-content/uploads/2016/06/BLin3LIGmd8f6RJ8GfWNVCZK5VNWuiZdzYmkT9_vavZObj7A4W1Wr41CkSoSweYMnc83g96zzihMTKaR4AQyub53mP_X-Usp92_oILpk7YWrZTKjTeuqCXWvg8iTqvoEnpk05RM.png" class="img-responsive wp-post-image" alt="" srcset="https://www.twilio.com/blog/wp-content/uploads/2016/06/BLin3LIGmd8f6RJ8GfWNVCZK5VNWuiZdzYmkT9_vavZObj7A4W1Wr41CkSoSweYMnc83g96zzihMTKaR4AQyub53mP_X-Usp92_oILpk7YWrZTKjTeuqCXWvg8iTqvoEnpk05RM.png 640w, https://www.twilio.com/blog/wp-content/uploads/2016/06/BLin3LIGmd8f6RJ8GfWNVCZK5VNWuiZdzYmkT9_vavZObj7A4W1Wr41CkSoSweYMnc83g96zzihMTKaR4AQyub53mP_X-Usp92_oILpk7YWrZTKjTeuqCXWvg8iTqvoEnpk05RM-300x122.png 300w, https://www.twilio.com/blog/wp-content/uploads/2016/06/BLin3LIGmd8f6RJ8GfWNVCZK5VNWuiZdzYmkT9_vavZObj7A4W1Wr41CkSoSweYMnc83g96zzihMTKaR4AQyub53mP_X-Usp92_oILpk7YWrZTKjTeuqCXWvg8iTqvoEnpk05RM-200x81.png 200w" sizes="(max-width: 640px) 100vw, 640px" />			</div>
      <div class="clear"></div>
			
		<footer class="entry-footer">
			<div class="entry-meta">
					<div class="row">
	<div class="col-md-6">
	<span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/phil">Phil Nash</a></span></span> on <span class="posted-on"><a href="https://www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html" rel="bookmark"><time class="entry-date published" datetime="2016-06-06T13:14:43+00:00">June 6, 2016</time><time class="updated" datetime="2016-06-06T13:52:49+00:00">June 6, 2016</time></a></span>	</div>
	<div class="col-md-6">
		<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html" data-text="Getting started with Web Components building a Video Chat widget ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
	</div>
	</div>
			</div><!-- .entry-meta -->
		</footer><!-- .entry-footer -->
	</header><!-- .entry-header -->

	<div class="entry-content col-md-12">
		<div class="row">
			<div class="col-md-12">
				<p>Component based UI libraries are a popular way of building modern applications. <a href="https://www.twilio.com/blog/2016/05/build-video-chat-using-angularjs-1-x.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/blog/2016/05/build-video-chat-using-angularjs-1-x.html', 'Angular');">Angular</a> and <a href="https://www.twilio.com/blog/2016/03/building-a-react-powered-video-chat.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/blog/2016/03/building-a-react-powered-video-chat.html', 'React');">React</a> are the heavyweights at the moment, but the humble browser and its native APIs are never far behind. <a href="http://webcomponents.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://webcomponents.org/', 'Web Components');">Web Components</a> were first introduced in 2011 and are the browsers&#8217; attempt to bring componentisation to the web platform.</p>
<p>There are a few libraries available for writing Web Components, most notably Google&#8217;s <a href="https://www.polymer-project.org/1.0/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.polymer-project.org/1.0/', 'Polymer');">Polymer</a>, but also <a href="http://x-tag.github.io/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://x-tag.github.io/', 'X-Tag');">X-Tag</a> and <a href="http://bosonic.github.io/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://bosonic.github.io/', 'Bosonic');">Bosonic</a>. To really get a grip on what the platform can achieve on it&#8217;s own, I&#8217;m going to show you how to build a Web Component using the APIs available in browsers today. There are many <a href="https://github.com/webcomponents/hello-world-element" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/webcomponents/hello-world-element', '&#8220;hello world&#8221; examples of Web Components');">&#8220;hello world&#8221; examples of Web Components</a>, so we&#8217;re going to build something a bit trickier today, a video chat widget using <a href="https://www.twilio.com/video" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/video', 'Twilio Video');">Twilio Video</a>. By the end of the post it will look a bit like this:</p>
<p><img alt="A video chat between Phil and Marcos" src="https://www.twilio.com/blog/wp-content/uploads/2016/06/DP6wJ8HPVGUm3KYipXignu-RSuusa0BIrIJ-Vldprsoo4oEUmQTxK9xsuQRZtrTnifdXdmQiCIKcxPWxrCiBzYBUKPE3qbJF_K5Y-gCpmiYScrEHdDNsHI4uY0xz4Qe-dIVqyVI.png" class="aligncenter"></p>
<p>More importantly, once we&#8217;ve written our component, using it will only need the following HTML:</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030c5b868287298" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;link rel="import" href="https://www.twilio.com/blog/twilio-video.html"&gt;

&lt;twilio-video identity="phil"&gt;&lt;/twilio-video&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030c5b868287298-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030c5b868287298-2">2</div><div class="crayon-num" data-line="crayon-5879500030c5b868287298-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030c5b868287298-1"><span class="crayon-r ">&lt;link </span><span class="crayon-e ">rel</span><span class="crayon-o">=</span><span class="crayon-s ">"import"</span><span class="crayon-h"> </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"/twilio-video.html"</span><span class="crayon-r ">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030c5b868287298-2">&nbsp;</div><div class="crayon-line" id="crayon-5879500030c5b868287298-3"><span class="crayon-r ">&lt;twilio-video </span><span class="crayon-e ">identity</span><span class="crayon-o">=</span><span class="crayon-s ">"phil"</span><span class="crayon-r ">&gt;</span><span class="crayon-r ">&lt;/twilio-video&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0015 seconds] -->
<p></p>
<h3 id="h.2cdh0xk0icfu">So what are Web Components anyway?</h3>
<p>Web Components are made up of four complementary browser capabilities, <a href="http://webcomponents.org/articles/introduction-to-custom-elements/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://webcomponents.org/articles/introduction-to-custom-elements/', 'Custom Elements');">Custom Elements</a>, <a href="http://webcomponents.org/articles/introduction-to-html-imports/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://webcomponents.org/articles/introduction-to-html-imports/', 'HTML Imports');">HTML Imports</a>, <a href="http://webcomponents.org/articles/introduction-to-shadow-dom/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://webcomponents.org/articles/introduction-to-shadow-dom/', 'Shadow DOM');">Shadow DOM</a> and <a href="http://webcomponents.org/articles/introduction-to-template-element/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://webcomponents.org/articles/introduction-to-template-element/', 'Templates');">Templates</a>. Together, they can create reusable user interface widgets that encapsulate a behaviour and can be used, as displayed above, by importing the component and placing a custom element in an HTML page. We&#8217;ll see how these technologies fit together as we build up our video chat component.</p>
<p>If you just want to see the completed component and how to use it, check out the <a href="https://github.com/philnash/twilio-video-chat-web-component/tree/web-component-complete" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/philnash/twilio-video-chat-web-component/tree/web-component-complete', 'repo on GitHub');">repo on GitHub</a>. Otherwise, let&#8217;s get building.</p>
<h3 id="h.g1438l4f7fcf">Tools for the job</h3>
<p>To build our video chat component, we&#8217;re going to need the following:</p>
<ul>
<li>
A Twilio account – you can sign up for a <a href="https://www.twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/try-twilio', 'free Twilio account here');">free Twilio account here</a>
</li>
<li>
<a href="https://nodejs.org/en/download/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://nodejs.org/en/download/', 'https://www.twilio.com/blog/2016/06/Node.js');">Node.js</a> – we&#8217;ll be running a server to create tokens to authenticate with the Twilio platform
</li>
<li>
<a href="https://www.google.com/chrome/browser/desktop/index.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.google.com/chrome/browser/desktop/index.html', 'Chrome');">Chrome</a> – different browsers support different elements of the various Web Component features, but <a href="http://caniuse.com/#search=web%20components" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://caniuse.com/#search=web%20components', 'Chrome currently supports them all');">Chrome currently supports them all</a>
</li>
</ul>
<p>Got all that? Let&#8217;s get started then.</p>
<h3 id="h.4z2e545l7x6d">Setting up our server</h3>
<p>To get this project going, I&#8217;ve built up a basic server which you&#8217;ll need to get running. First of all, clone or <a href="https://github.com/philnash/twilio-video-chat-web-component/archive/master.zip" onclick="__gaTracker('send', 'event', 'download', 'https://github.com/philnash/twilio-video-chat-web-component/archive/master.zip');">download the repo</a>.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030c74895757448" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
$ git clone https://github.com/philnash/twilio-video-chat-web-component.git
$ cd twilio-video-chat-web-component</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030c74895757448-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030c74895757448-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030c74895757448-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">git </span><span class="crayon-r">clone</span><span class="crayon-h"> </span><span class="crayon-i">https</span><span class="crayon-o">:</span><span class="crayon-c">//github.com/philnash/twilio-video-chat-web-component.git</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030c74895757448-2"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-i">twilio</span><span class="crayon-o">-</span><span class="crayon-i">video</span><span class="crayon-o">-</span><span class="crayon-i">chat</span><span class="crayon-o">-</span><span class="crayon-i">web</span><span class="crayon-o">-</span><span class="crayon-i">component</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0017 seconds] -->
<p></p>
<p>Once you&#8217;ve done that, you&#8217;re going to need some Twilio credentials so that the application works. Grab your Twilio Account SID from your <a href="https://www.twilio.com/user/account" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/user/account', 'account dashboard');">account dashboard</a>, generate a <a href="https://www.twilio.com/user/account/video/profiles" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/user/account/video/profiles', 'Video Configuration Profile');">Video Configuration Profile</a> and take note of the SID and finally <a href="https://www.twilio.com/user/account/messaging/dev-tools/api-keys" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/user/account/messaging/dev-tools/api-keys', 'generate an API Key and Secret');">generate an API Key and Secret</a>. Once you have all of those we can add them to the project.</p>
<p>Make a copy of the <code>.env.example</code> file and call it <code>.env</code>. You can do this in the terminal like this:</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030c87243341484" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
$ cp .env.example .env</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030c87243341484-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030c87243341484-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-r">cp</span><span class="crayon-h"> </span><span class="crayon-e">.env</span><span class="crayon-e">.example</span><span class="crayon-h"> </span><span class="crayon-e">.env</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<p>Open up <code>.env</code> and fill in all those credentials.</p>
<p>Now, install the dependencies for the project and start the server.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030c9c070360935" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
$ npm install
$ node index.js</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030c9c070360935-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030c9c070360935-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030c9c070360935-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">npm </span><span class="crayon-i">install</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030c9c070360935-2"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">node </span><span class="crayon-v">index</span><span class="crayon-e">.js</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<p>The app is now running on <a href="http://localhost:3000/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://localhost:3000/', 'localhost:3000');">localhost:3000</a>. Open it in Chrome and check out the page we have to work with.</p>
<p><img alt="A blank page is shown. It may be blank, but it's a start." src="https://www.twilio.com/blog/wp-content/uploads/2016/06/cnB_x8-SpqlbycY0Xg908lBBaz8BnlQnX1DzfneogAADoZLCBMnDi9mQmxCxH9EoHGHSLtcR6kTILT2Dl6cNr9SXUk1SEk8oHJVDdOIXgeiDG6EOXgbVhohg-PgKkylcdoKzgp4.png" class="aligncenter"></p>
<p>Not much going on at the moment, right? Let&#8217;s change that; let&#8217;s build a Web Component.</p>
<h3 id="h.p667t8qiev14">HTML Imports</h3>
<p>When you build a component, it lives in its own file and can be imported. This keeps all the code encapsulated nicely. Let&#8217;s start our component by creating the HTML import for it.</p>
<p>In the public directory, create a file called <code>twilio-video.html</code>. It doesn&#8217;t need anything in it just yet.</p>
<p>Now, in <code>public/index.html</code> add the following at the bottom of the <code>&lt;head&gt;</code> element:</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030cb1462941101" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  &lt;link href="https://www.twilio.com/blog/css/app.css" rel="stylesheet"&gt;
  &lt;link rel="import" href="https://www.twilio.com/blog/twilio-video.html"&gt;
&lt;/head&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030cb1462941101-1">1</div><div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-5879500030cb1462941101-2">2</div><div class="crayon-num" data-line="crayon-5879500030cb1462941101-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030cb1462941101-1"> <span class="crayon-h"> </span><span class="crayon-r ">&lt;link </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"/css/app.css"</span><span class="crayon-h"> </span><span class="crayon-e ">rel</span><span class="crayon-o">=</span><span class="crayon-s ">"stylesheet"</span><span class="crayon-r ">&gt;</span></div><div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-5879500030cb1462941101-2"><span class="crayon-i ">  </span><span class="crayon-r ">&lt;link </span><span class="crayon-e ">rel</span><span class="crayon-o">=</span><span class="crayon-s ">"import"</span><span class="crayon-h"> </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"/twilio-video.html"</span><span class="crayon-r ">&gt;</span></div><div class="crayon-line" id="crayon-5879500030cb1462941101-3"><span class="crayon-r ">&lt;/head&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p></p>
<p>Refresh the page and nothing new happens! Well, that&#8217;s not strictly true. Open up the dev tools console on the Network tab (Cmd + Opt + I on a Mac or Ctrl + Shift + I on Windows) and you&#8217;ll see that we loaded our new HTML document.</p>
<p><img alt="" src="https://www.twilio.com/blog/wp-content/uploads/2016/06/jzL-c58DrEKZPEmySpBwDk-VtO7UnxubtGlR1XgJ9kxKyxeoXNbb76gB1FUpv8rUZbZd6JXzEk5ipvpD3q9LAciDee5F9kO1D7BbUpcUXggIyOLjF3tErOgyGDAFDrnV2Y8M7Ik.png" style="width: 601.70px; height: 448.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="" class='" aligncenter'></p>
<p>To really get the most out of our HTML import let&#8217;s build our component in it.</p>
<h3 id="h.uordrqbttqh4">Custom Elements</h3>
<p>Our aim is to make creating a video chat as easy as dropping an HTML element onto the page, the <code>&lt;twilio-video&gt;</code> element. Let&#8217;s add it to <code>index.html</code> now. Replace the <code>&lt;h1&gt;</code> on the page with:</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030cbe049992995" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;twilio-video identity="phil"&gt;&lt;/twilio-video&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030cbe049992995-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030cbe049992995-1"><span class="crayon-r ">&lt;twilio-video </span><span class="crayon-e ">identity</span><span class="crayon-o">=</span><span class="crayon-s ">"phil"</span><span class="crayon-r ">&gt;</span><span class="crayon-r ">&lt;/twilio-video&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p></p>
<p>Refresh the page and the title has disappeared, replaced with our custom element. Except that element doesn&#8217;t do anything&hellip; yet. Let&#8217;s go into our HTML import and start building our custom element.</p>
<p>The first thing we need to do here is to register our element. To do this we need to write some JavaScript. In the <code>twilio-video.html</code> file write:</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030cc9310498556" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;script&gt;
  var TwilioVideoPrototype = Object.create(HTMLElement.prototype);
  document.registerElement("twilio-video", {
    prototype: TwilioVideoPrototype
  });
&lt;/script&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030cc9310498556-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cc9310498556-2">2</div><div class="crayon-num" data-line="crayon-5879500030cc9310498556-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cc9310498556-4">4</div><div class="crayon-num" data-line="crayon-5879500030cc9310498556-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cc9310498556-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030cc9310498556-1"><span class="crayon-ta">&lt;script&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cc9310498556-2"> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">Object</span><span class="crayon-sy">.</span><span class="crayon-e">create</span><span class="crayon-sy">(</span><span class="crayon-v">HTMLElement</span><span class="crayon-sy">.</span><span class="crayon-i">prototype</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cc9310498556-3"> <span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">registerElement</span><span class="crayon-sy">(</span><span class="crayon-s">"twilio-video"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cc9310498556-4"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">prototype:</span><span class="crayon-h"> </span><span class="crayon-i">TwilioVideoPrototype</span></div><div class="crayon-line" id="crayon-5879500030cc9310498556-5"> <span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cc9310498556-6"><span class="crayon-ta">&lt;/script&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0103 seconds] -->
<p></p>
<p><code>document.registerElement</code> takes the name of the element we want to register, in this case &#8220;twilio-video&#8221;. Note, we need to use a name with a hyphen in, this separates custom elements from browser defined elements.</p>
<p>It also takes an optional object of options. This object defines what our custom element is based on. We&#8217;re using <code>prototype</code> and we supply a new prototype based on the <code>HTMLElement</code> prototype, the base object for all HTML elements. We&#8217;ll be extending this prototype as we go on with this project.</p>
<p>Reload the page and&hellip; nothing else happens. All we&#8217;ve done so far is create a blank element. By default it is an inline element with no content and no behaviour. Using the prototype we defined earlier, we can add both content and behaviour. But first we need to learn about custom element lifecycles.</p>
<h4 id="h.lh22q9ifa603">The lifecycle of a custom element</h4>
<p>Custom elements have a number of functions that get called throughout their lifecycle. These callbacks are useful for adding and removing behaviour, markup and content. They are:</p>
<ul>
<li>
<code>createdCallback</code> for when an instance of the element is created
</li>
<li>
 <code>attachedCallback</code> for when the instance is inserted into the document
</li>
<li>
<code>detachedCallback</code> for when the instance is removed from the document
</li>
<li>
<code>attributeChangedCallback</code> for when an attribute on the element is updated
</li>
</ul>
<p>We&#8217;re going to use the <code>createdCallback</code> to define the contents and behaviour of the element and the <code>detachedCallback</code> to tear things down again.</p>
<p>To get into the contents of our element, we need to learn about the last two facets of Web Components.</p>
<h3 id="h.ume8khf0tq4o">Templates</h3>
<p>It might be tempting to generate the HTML contents of our custom element in JavaScript, but in reality that&#8217;s unwieldy and there is a better way. HTML Templates are inert pieces of HTML that can be included onto a page and then instantiated in JavaScript. They are inert because inside of a template <code>&lt;script&gt;</code>s won&#8217;t execute, <code>&lt;link&gt;</code>s and resources, like <code>&lt;img&gt;</code>s, won&#8217;t be fetched until the template is instantiated.</p>
<p>We&#8217;ll set up the content that we need in our element with a template. Then, when we receive the <code>createdCallback</code> lifecycle function, we pour in the content. We start with a <code>&lt;template&gt;</code> element at the top of our <code>twilio-video.html</code> file.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030cd5332702799" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;template id="twilio-video-template"&gt;
  &lt;style type="text/css"&gt;
  :host {
    display: block;
  }
  #picture-in-picture {
    position: relative;
    width: 400px;
    height: 300px;
  }
  #caller {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
  }
  #caller video,
  #me video {
    width: 100%;
  }
  #me {
    position: absolute;
    width: 25%;
    bottom: 5%;
    right: 5%;
  }
  #hangup {
    position: absolute;
    bottom: 5%;
    left: 5%;
  }
  &lt;/style&gt;

  &lt;div id="picture-in-picture"&gt;
    &lt;div id="caller"&gt;&lt;/div&gt;
    &lt;div id="me"&gt;&lt;/div&gt;
    &lt;button id="hangup"&gt;Hangup&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030cd5332702799-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-2">2</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-4">4</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-6">6</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-8">8</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-10">10</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-12">12</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-14">14</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-16">16</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-18">18</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-20">20</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-22">22</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-24">24</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-26">26</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-28">28</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-30">30</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-32">32</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-34">34</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-36">36</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-38">38</div><div class="crayon-num" data-line="crayon-5879500030cd5332702799-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cd5332702799-40">40</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030cd5332702799-1"><span class="crayon-r ">&lt;template </span><span class="crayon-e ">id</span><span class="crayon-o">=</span><span class="crayon-s ">"twilio-video-template"</span><span class="crayon-r ">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-2"><span class="crayon-i ">  <span class="crayon-ta">&lt;style </span><span class="crayon-e ">type</span><span class="crayon-k ">="text/css"&gt;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-3"><span class="crayon-k ">  :host </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-4"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">display</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">block</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-5"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-6"><span class="crayon-k ">  #picture-in-picture </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-7"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">position</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">relative</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-8"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">width</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">400px</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-9"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">height</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">300px</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-10"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-11"><span class="crayon-k ">  #caller </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-12"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">position</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">absolute</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-13"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">top</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-14"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">bottom</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-15"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">left</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-16"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">right</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-17"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-18"><span class="crayon-k ">  #caller video,</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-19"><span class="crayon-k ">  #me video </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-20"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">width</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">100%</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-21"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-22"><span class="crayon-k ">  #me </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-23"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">position</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">absolute</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-24"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">width</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">25%</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-25"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">bottom</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">5%</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-26"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">right</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">5%</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-27"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-28"><span class="crayon-k ">  #hangup </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-29"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">position</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">absolute</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-30"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">bottom</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">5%</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-31"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-e ">left</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-i ">5%</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-32"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-33"><span class="crayon-i "> </span><span class="crayon-h"> </span><span class="crayon-ta">&lt;/style&gt;</span></span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-34">&nbsp;</div><div class="crayon-line" id="crayon-5879500030cd5332702799-35"><span class="crayon-i ">  </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">id</span><span class="crayon-o">=</span><span class="crayon-s ">"picture-in-picture"</span><span class="crayon-r ">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-36"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">id</span><span class="crayon-o">=</span><span class="crayon-s ">"caller"</span><span class="crayon-r ">&gt;</span><span class="crayon-r ">&lt;/div&gt;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-37"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">id</span><span class="crayon-o">=</span><span class="crayon-s ">"me"</span><span class="crayon-r ">&gt;</span><span class="crayon-r ">&lt;/div&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-38"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;button </span><span class="crayon-e ">id</span><span class="crayon-o">=</span><span class="crayon-s ">"hangup"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">Hangup</span><span class="crayon-r ">&lt;/button&gt;</span></div><div class="crayon-line" id="crayon-5879500030cd5332702799-39"><span class="crayon-i ">  </span><span class="crayon-r ">&lt;/div&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cd5332702799-40"><span class="crayon-r ">&lt;/template&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0151 seconds] -->
<p></p>
<p>The styles within the template will all be scoped to the element itself. Now we have our HTML, let&#8217;s add it to our custom element.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030ce0733178490" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;script&gt;
  var TwilioVideoPrototype = Object.create(HTMLElement.prototype);
  var importDoc = document.currentScript.ownerDocument;

  TwilioVideoPrototype.createdCallback = function() {
    var template = importDoc.getElementById('twilio-video-template');
    var clone = importDoc.importNode(template.content, true);
    this.appendChild(clone);
  }

  document.registerElement("twilio-video", {
    prototype: TwilioVideoPrototype
  });
&lt;/script&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030ce0733178490-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030ce0733178490-2">2</div><div class="crayon-num crayon-marked-num crayon-top" data-line="crayon-5879500030ce0733178490-3">3</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-5879500030ce0733178490-4">4</div><div class="crayon-num crayon-marked-num" data-line="crayon-5879500030ce0733178490-5">5</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-5879500030ce0733178490-6">6</div><div class="crayon-num crayon-marked-num" data-line="crayon-5879500030ce0733178490-7">7</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-5879500030ce0733178490-8">8</div><div class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-5879500030ce0733178490-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030ce0733178490-10">10</div><div class="crayon-num" data-line="crayon-5879500030ce0733178490-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030ce0733178490-12">12</div><div class="crayon-num" data-line="crayon-5879500030ce0733178490-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030ce0733178490-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030ce0733178490-1"><span class="crayon-ta">&lt;script&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030ce0733178490-2"> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">Object</span><span class="crayon-sy">.</span><span class="crayon-e">create</span><span class="crayon-sy">(</span><span class="crayon-v">HTMLElement</span><span class="crayon-sy">.</span><span class="crayon-i">prototype</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-top" id="crayon-5879500030ce0733178490-3">  <span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">importDoc</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-v">currentScript</span><span class="crayon-sy">.</span><span class="crayon-i">ownerDocument</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-5879500030ce0733178490-4">&nbsp;</div><div class="crayon-line crayon-marked-line" id="crayon-5879500030ce0733178490-5"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">createdCallback</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-5879500030ce0733178490-6"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">template</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">importDoc</span><span class="crayon-sy">.</span><span class="crayon-e">getElementById</span><span class="crayon-sy">(</span><span class="crayon-s">'twilio-video-template'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line" id="crayon-5879500030ce0733178490-7"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-r">clone</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">importDoc</span><span class="crayon-sy">.</span><span class="crayon-e">importNode</span><span class="crayon-sy">(</span><span class="crayon-v">template</span><span class="crayon-sy">.</span><span class="crayon-i">content</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-5879500030ce0733178490-8"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-e">appendChild</span><span class="crayon-sy">(</span><span class="crayon-r">clone</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-bottom" id="crayon-5879500030ce0733178490-9"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030ce0733178490-10">&nbsp;</div><div class="crayon-line" id="crayon-5879500030ce0733178490-11"> <span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">registerElement</span><span class="crayon-sy">(</span><span class="crayon-s">"twilio-video"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030ce0733178490-12"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">prototype:</span><span class="crayon-h"> </span><span class="crayon-i">TwilioVideoPrototype</span></div><div class="crayon-line" id="crayon-5879500030ce0733178490-13"> <span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030ce0733178490-14"><span class="crayon-ta">&lt;/script&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0071 seconds] -->
<p>
<p>
We&#8217;ve used a couple of new things here.</p>
<p><code>document.currentScript.ownerDocument</code> refers to the HTML file we&#8217;re writing this all in, rather than the document that imports it. This way we can refer to elements within our file, such as the template.</p>
<p>Then, using that document, we get a reference to our template and clone it using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/importNode" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://developer.mozilla.org/en-US/docs/Web/API/Document/importNode', 'importNode');"><code>importNode</code></a> which creates a clone of the HTML in the template. We clone so that the original HTML remains in the template. We then append that clone to our custom element.</p>
<p>Refresh the application and check the inspector.</p>
<p><img alt="When you inspect the custom element, you can see all its internals. Not what we want." src="https://www.twilio.com/blog/wp-content/uploads/2016/06/ApZWxV1L5p13xQ97sGtIhP_braQsZSdhhD-W21x4boWyufTfH1s1ufAJAGs8NrmxK5A0xFoLtFZsCAhwrQn_jahJ-t3P9t420ZmnJR65aDyUXaYz7vUUfZfCDN3UbEMs2te1wE.png" class="aligncenter"></p>
<p>Our custom element now has some contents. This is a bit messy though, those contents are accessible from the rest of the page. We don&#8217;t really want that to happen, the beauty of Web Components is that we can encapsulate all the behaviour. So we turn to our final feature of Web Components, the Shadow DOM.</p>
<h3 id="h.938l2z9ncfjp">Shadow DOM</h3>
<p>The best way to explain the Shadow DOM is to see it in action. Open up a page with an HTML5 video element on it, <a href="http://www.quirksmode.org/html5/tests/video.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.quirksmode.org/html5/tests/video.html', 'if you can&#8217;t think of one, this should do');">if you can&#8217;t think of one, this should do</a>. Inspect the video element, all you see is the <code>&lt;video&gt;</code> tag and the <code>&lt;source&gt;</code> elements inside.</p>
<p><img alt="Inspecting an HTML5 Video element only shows the HTML you'd expect, a source element and a fallback paragraph element." src="https://www.twilio.com/blog/wp-content/uploads/2016/06/A2hau6TXbSYGDBbUhf-5aRzQAljQoAS8mXgMOFXp8QIoNPxHwt8WtdXKg51-Bldwjixy6zEzta62qhLAebxvsG3Fwr_OVH_zx-XSpFuK1CelJ81Odto8XgF5VopHrzl5LYY6iJk.png"  class="aligncenter"></p>
<p>Now, as we&#8217;re using Chrome, open up dev tools settings and find the &#8220;Show user agent shadow DOM&#8221; checkbox and tick it.</p>
<p><img alt="When you open dev tools settings there is an option to show user agent shadow DOM under the heading 'Elements'. Check that." src="https://www.twilio.com/blog/wp-content/uploads/2016/06/A9igoyuO_CGXKmm8iL0BCm89FwYfaWGnIyM-ybzDjKsSOlK2ZW8qN_75_zufepeR2WyJD9RkeZEBgHH2Q0t_PRn52tDntMcTrRbmibdJq22Rsjn74b3DlYpDUrg57iPcYTOrOUg.png" class="aligncenter"></p>
<p>Inspect that video again and you will see a <code>#shadow-root</code> element which you can open and inspect all the HTML inside.</p>
<p><img alt="Now when you inspect the Video element there is a shadow-root and a whole load of divs, inputs and other HTML within." src="https://www.twilio.com/blog/wp-content/uploads/2016/06/PJWm9yI7zyWa00cMZz7bnmbs4emjjcPzaOonPaI4XMW9XJyj6RrK-VX3_FQC1HFAefPGMONkxg1Pd5EAuWxrcZyhJ22MGSUzaKnzNzzb5FuGsVbgcx-n9UqcrMwW44Vhi-yVsFQ.png" class="aligncenter"></p>
<p>That is the <a href="http://webcomponents.org/articles/introduction-to-shadow-dom/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://webcomponents.org/articles/introduction-to-shadow-dom/', 'shadow DOM');">shadow DOM</a>. It keeps the internal structure of our custom element private and we&#8217;re going to update our custom element to use it. To do so, make  the following change to our JavaScript.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030ced258813110" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.createdCallback = function() {
    var template = importDoc.getElementById('twilio-video-template');
    var clone = importDoc.importNode(template.content, true);
    var shadowRoot = this.createShadowRoot();
    shadowRoot.appendChild(clone);
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030ced258813110-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030ced258813110-2">2</div><div class="crayon-num" data-line="crayon-5879500030ced258813110-3">3</div><div class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="crayon-5879500030ced258813110-4">4</div><div class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-5879500030ced258813110-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030ced258813110-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030ced258813110-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">createdCallback</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030ced258813110-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">template</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">importDoc</span><span class="crayon-sy">.</span><span class="crayon-e">getElementById</span><span class="crayon-sy">(</span><span class="crayon-s">'twilio-video-template'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030ced258813110-3"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-r">clone</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">importDoc</span><span class="crayon-sy">.</span><span class="crayon-e">importNode</span><span class="crayon-sy">(</span><span class="crayon-v">template</span><span class="crayon-sy">.</span><span class="crayon-i">content</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="crayon-5879500030ced258813110-4"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">shadowRoot</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-e">createShadowRoot</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-bottom" id="crayon-5879500030ced258813110-5"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">shadowRoot</span><span class="crayon-sy">.</span><span class="crayon-e">appendChild</span><span class="crayon-sy">(</span><span class="crayon-r">clone</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030ced258813110-6"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0049 seconds] -->
<p></p>
<p>Instead of appending our template clone to the element itself we create a shadow root for the element. Then we append our template clone to that. Refresh the page and check out our new shadow root.</p>
<p><img alt="With the update to the JavaScript we now see a shadow-root for our custom element in the inspector." src="https://www.twilio.com/blog/wp-content/uploads/2016/06/dmeHThpHiIlUd2L15bnspyOBp5OhKEGvCn46gcA_krAGurNqHFIIwCVXvbpHfFEofFVgsc8cdkpWd02BVTgBo8swDM-4CDssQtk1NcstGJOZZ7vI6trxBeszGT7q-YZC-aYqy4Y.png" class="aligncenter"></p>
<h3 id="h.x25ttirhjopi">The video chat</h3>
<p>We&#8217;ve done a lot of setup to get our Web Component together. All that&#8217;s left to do is implement our video chat. If you have read Sam&#8217;s post on <a href="https://www.twilio.com/blog/2016/03/getting-started-with-the-twilio-video-javascript-sdk.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/blog/2016/03/getting-started-with-the-twilio-video-javascript-sdk.html', 'getting started with the JavaScript Video SDK');">getting started with the JavaScript Video SDK</a> or gone through the <a href="https://www.twilio.com/docs/api/video/guide/quickstart-js" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/docs/api/video/guide/quickstart-js', 'JavaScript Video quickstart');">JavaScript Video quickstart</a> then you will recognise most of this. Let&#8217;s add the Twilio Video scripts to the top of our component:</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030cf8136062626" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;script src="https://media.twiliocdn.com/sdk/js/common/v0.1/twilio-common.min.js"&gt;&lt;/script&gt;
&lt;script src="https://media.twiliocdn.com/sdk/js/conversations/v0.13/twilio-conversations.min.js"&gt;&lt;/script&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030cf8136062626-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030cf8136062626-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030cf8136062626-1"><span class="crayon-ta">&lt;script </span><span class="crayon-e ">src</span><span class="crayon-o">=</span><span class="crayon-s">"https://media.twiliocdn.com/sdk/js/common/v0.1/twilio-common.min.js"</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;/script&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030cf8136062626-2"><span class="crayon-ta">&lt;script </span><span class="crayon-e ">src</span><span class="crayon-o">=</span><span class="crayon-s">"https://media.twiliocdn.com/sdk/js/conversations/v0.13/twilio-conversations.min.js"</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;/script&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0017 seconds] -->
<p></p>
<p>Then, within the <code>&lt;script&gt;</code> element we&#8217;ve been working in, we&#8217;ll need the following functions.</p>
<p><code>fetchToken</code> which uses the <a href="https://developer.mozilla.org/en/docs/Web/API/Fetch_API" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://developer.mozilla.org/en/docs/Web/API/Fetch_API', 'Fetch API');">Fetch API</a> to generate an access token from our Node.js server, parse the json and return a Promise.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d03192363356" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.fetchToken = function(identity) {
    return fetch("/token?identity="   identity).then(function(data){
      return data.json();
    });
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d03192363356-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d03192363356-2">2</div><div class="crayon-num" data-line="crayon-5879500030d03192363356-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d03192363356-4">4</div><div class="crayon-num" data-line="crayon-5879500030d03192363356-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d03192363356-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">fetchToken</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">identity</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d03192363356-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">fetch</span><span class="crayon-sy">(</span><span class="crayon-s">"/token?identity="</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-i">identity</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-st">then</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">data</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5879500030d03192363356-3"> <span class="crayon-h"> </span> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d03192363356-4"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d03192363356-5"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0034 seconds] -->
<p></p>
<p><code>createClient</code> sets up an <a href="https://media.twiliocdn.com/sdk/js/common/releases/0.1.5/docs/AccessManager.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://media.twiliocdn.com/sdk/js/common/releases/0.1.5/docs/AccessManager.html', '');"><code></a><a href="https://media.twiliocdn.com/sdk/js/common/releases/0.1.5/docs/AccessManager.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://media.twiliocdn.com/sdk/js/common/releases/0.1.5/docs/AccessManager.html', 'AccessManager');">AccessManager</a><a href="https://media.twiliocdn.com/sdk/js/common/releases/0.1.5/docs/AccessManager.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://media.twiliocdn.com/sdk/js/common/releases/0.1.5/docs/AccessManager.html', '');"></code></a> with the token we retrieve from the server, then instantiates a <a href="https://media.twiliocdn.com/sdk/js/conversations/releases/0.13.5/docs/Client.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://media.twiliocdn.com/sdk/js/conversations/releases/0.13.5/docs/Client.html', '');"><code></a><a href="https://media.twiliocdn.com/sdk/js/conversations/releases/0.13.5/docs/Client.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://media.twiliocdn.com/sdk/js/conversations/releases/0.13.5/docs/Client.html', 'Conversations.Client');">Conversations.Client</a><a href="https://media.twiliocdn.com/sdk/js/conversations/releases/0.13.5/docs/Client.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://media.twiliocdn.com/sdk/js/conversations/releases/0.13.5/docs/Client.html', '');"></code></a> and starts to listen for incoming connections.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d0e128819566" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.createClient = function(obj) {
    var accessManager = new Twilio.AccessManager(obj.token);
    this.conversationsClient = new Twilio.Conversations.Client(accessManager);
    return this.conversationsClient.listen();
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d0e128819566-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d0e128819566-2">2</div><div class="crayon-num" data-line="crayon-5879500030d0e128819566-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d0e128819566-4">4</div><div class="crayon-num" data-line="crayon-5879500030d0e128819566-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d0e128819566-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">createClient</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">obj</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d0e128819566-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">accessManager</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">Twilio</span><span class="crayon-sy">.</span><span class="crayon-e">AccessManager</span><span class="crayon-sy">(</span><span class="crayon-v">obj</span><span class="crayon-sy">.</span><span class="crayon-i">token</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d0e128819566-3"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">conversationsClient</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">Twilio</span><span class="crayon-sy">.</span><span class="crayon-v">Conversations</span><span class="crayon-sy">.</span><span class="crayon-e">Client</span><span class="crayon-sy">(</span><span class="crayon-i">accessManager</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d0e128819566-4"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">conversationsClient</span><span class="crayon-sy">.</span><span class="crayon-e">listen</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d0e128819566-5"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0044 seconds] -->
<p></p>
<p><code>setupClient</code> runs once the conversation client is listening for incoming connections. It starts listening for incoming invites.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d18687013611" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.setupClient = function() {
    this.conversationsClient.on("invite", this.inviteReceived.bind(this));
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d18687013611-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d18687013611-2">2</div><div class="crayon-num" data-line="crayon-5879500030d18687013611-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d18687013611-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">setupClient</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d18687013611-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">conversationsClient</span><span class="crayon-sy">.</span><span class="crayon-e">on</span><span class="crayon-sy">(</span><span class="crayon-s">"invite"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">inviteReceived</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d18687013611-3"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0028 seconds] -->
<p></p>
<p>When an invite is received, <code>inviteReceived</code> is called we accept it, which returns a promise.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d22741211437" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.inviteReceived = function(invite){
    invite.accept().then(this.setupConversation.bind(this));
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d22741211437-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d22741211437-2">2</div><div class="crayon-num" data-line="crayon-5879500030d22741211437-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d22741211437-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">inviteReceived</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">invite</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d22741211437-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">invite</span><span class="crayon-sy">.</span><span class="crayon-e">accept</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-st">then</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">setupConversation</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d22741211437-3"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0025 seconds] -->
<p></p>
<p>When the promise resolves, we call <code>setupConversation</code> which shows the elements within our custom element, displays our local media stream, listens for clicks on the hangup button and handles connections and disconnections from other participants.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d2c052567689" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.setupConversation = function(conversation) {
    this.currentConversation = conversation;
    conversation.localMedia.attach(this.me);
    this.chat.classList.remove("hidden");
    this.hangup.addEventListener("click", this.disconnect.bind(this));
    conversation.on("participantConnected", this.participantConnected.bind(this));
    conversation.on("disconnected", this.disconnected.bind(this));
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d2c052567689-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d2c052567689-2">2</div><div class="crayon-num" data-line="crayon-5879500030d2c052567689-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d2c052567689-4">4</div><div class="crayon-num" data-line="crayon-5879500030d2c052567689-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d2c052567689-6">6</div><div class="crayon-num" data-line="crayon-5879500030d2c052567689-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d2c052567689-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d2c052567689-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">setupConversation</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">conversation</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d2c052567689-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">currentConversation</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">conversation</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d2c052567689-3"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">conversation</span><span class="crayon-sy">.</span><span class="crayon-v">localMedia</span><span class="crayon-sy">.</span><span class="crayon-e">attach</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-i">me</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d2c052567689-4"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">chat</span><span class="crayon-sy">.</span><span class="crayon-v">classList</span><span class="crayon-sy">.</span><span class="crayon-e">remove</span><span class="crayon-sy">(</span><span class="crayon-s">"hidden"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d2c052567689-5"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">hangup</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">"click"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">disconnect</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d2c052567689-6"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">conversation</span><span class="crayon-sy">.</span><span class="crayon-e">on</span><span class="crayon-sy">(</span><span class="crayon-s">"participantConnected"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">participantConnected</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d2c052567689-7"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">conversation</span><span class="crayon-sy">.</span><span class="crayon-e">on</span><span class="crayon-sy">(</span><span class="crayon-s">"disconnected"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">disconnected</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d2c052567689-8"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0068 seconds] -->
<p></p>
<p>On receiving the <code>participantConnected</code> event we show the new participant&#8217;s media stream too.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d37210367494" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.participantConnected = function(participant) {
    participant.media.attach(this.caller);
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d37210367494-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d37210367494-2">2</div><div class="crayon-num" data-line="crayon-5879500030d37210367494-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d37210367494-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">participantConnected</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">participant</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d37210367494-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">participant</span><span class="crayon-sy">.</span><span class="crayon-v">media</span><span class="crayon-sy">.</span><span class="crayon-e">attach</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-i">caller</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d37210367494-3"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0026 seconds] -->
<p></p>
<p>When a participant disconnects we hide the whole chat, remove our local media stream and stop listening to events on the hangup button.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d41093148868" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.disconnected = function() {
    this.chat.classList.add("hidden");
    this.currentConversation.localMedia.detach();
    this.hangup.removeEventListener("click", this.disconnect.bind(this));
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d41093148868-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d41093148868-2">2</div><div class="crayon-num" data-line="crayon-5879500030d41093148868-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d41093148868-4">4</div><div class="crayon-num" data-line="crayon-5879500030d41093148868-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d41093148868-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">disconnected</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d41093148868-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">chat</span><span class="crayon-sy">.</span><span class="crayon-v">classList</span><span class="crayon-sy">.</span><span class="crayon-e">add</span><span class="crayon-sy">(</span><span class="crayon-s">"hidden"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d41093148868-3"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">currentConversation</span><span class="crayon-sy">.</span><span class="crayon-v">localMedia</span><span class="crayon-sy">.</span><span class="crayon-e">detach</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d41093148868-4"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">hangup</span><span class="crayon-sy">.</span><span class="crayon-e">removeEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">"click"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">disconnect</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d41093148868-5"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0045 seconds] -->
<p></p>
<p>If the hangup button is pressed, we disconnect the call ourselves. This function is also used when the element is removed from the page, so we check to see if there is a live conversation at the moment.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d4c283720661" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.disconnect = function() {
    if(this.currentConversation){
      this.currentConversation.disconnect();
      this.currentConversation = null;
    }
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d4c283720661-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d4c283720661-2">2</div><div class="crayon-num" data-line="crayon-5879500030d4c283720661-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d4c283720661-4">4</div><div class="crayon-num" data-line="crayon-5879500030d4c283720661-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d4c283720661-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d4c283720661-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">disconnect</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d4c283720661-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-i">currentConversation</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5879500030d4c283720661-3"> <span class="crayon-h"> </span> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">currentConversation</span><span class="crayon-sy">.</span><span class="crayon-e">disconnect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d4c283720661-4"> <span class="crayon-h"> </span> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">currentConversation</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d4c283720661-5"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d4c283720661-6"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0035 seconds] -->
<p></p>
<p>Our <code>createdCallback</code> that we started earlier now handles setting up the template, adding it to the shadow root and querying the shadow root for the elements we&#8217;ve been using in the functions above. It also checks for the identity attribute on the component using <code>this.getAttribute("identity")</code>. As we saw earlier, I defined the element as <code>&lt;twilio-video identity="phil"&gt;&lt;/twilio-video&gt;</code>, so this will get the identity &#8220;phil&#8221; and send it to the server to generate an access token for that identity using <code>fetchToken</code>.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d56391389705" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.createdCallback = function() {
    var template = importDoc.getElementById("twilio-video-template");
    var clone = importDoc.importNode(template.content, true);
    var shadowRoot = this.createShadowRoot();
    shadowRoot.appendChild(clone);

    var identity = this.getAttribute("identity") || "example";

    this.me = shadowRoot.getElementById("me");
    this.caller = shadowRoot.getElementById("caller");
    this.chat = shadowRoot.getElementById("picture-in-picture");
    this.hangup = shadowRoot.getElementById("hangup");

    this.fetchToken(identity).
      then(this.createClient.bind(this)).
      then(this.setupClient.bind(this)).
      catch(function(err) {
        console.log(err);
      });
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d56391389705-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d56391389705-2">2</div><div class="crayon-num" data-line="crayon-5879500030d56391389705-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d56391389705-4">4</div><div class="crayon-num" data-line="crayon-5879500030d56391389705-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d56391389705-6">6</div><div class="crayon-num crayon-marked-num crayon-top" data-line="crayon-5879500030d56391389705-7">7</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-5879500030d56391389705-8">8</div><div class="crayon-num crayon-marked-num" data-line="crayon-5879500030d56391389705-9">9</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-5879500030d56391389705-10">10</div><div class="crayon-num crayon-marked-num" data-line="crayon-5879500030d56391389705-11">11</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-5879500030d56391389705-12">12</div><div class="crayon-num crayon-marked-num" data-line="crayon-5879500030d56391389705-13">13</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-5879500030d56391389705-14">14</div><div class="crayon-num crayon-marked-num" data-line="crayon-5879500030d56391389705-15">15</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-5879500030d56391389705-16">16</div><div class="crayon-num crayon-marked-num" data-line="crayon-5879500030d56391389705-17">17</div><div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-5879500030d56391389705-18">18</div><div class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-5879500030d56391389705-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d56391389705-20">20</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d56391389705-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">createdCallback</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d56391389705-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">template</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">importDoc</span><span class="crayon-sy">.</span><span class="crayon-e">getElementById</span><span class="crayon-sy">(</span><span class="crayon-s">"twilio-video-template"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d56391389705-3"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-r">clone</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">importDoc</span><span class="crayon-sy">.</span><span class="crayon-e">importNode</span><span class="crayon-sy">(</span><span class="crayon-v">template</span><span class="crayon-sy">.</span><span class="crayon-i">content</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d56391389705-4"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">shadowRoot</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-e">createShadowRoot</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d56391389705-5"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">shadowRoot</span><span class="crayon-sy">.</span><span class="crayon-e">appendChild</span><span class="crayon-sy">(</span><span class="crayon-r">clone</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d56391389705-6">&nbsp;</div><div class="crayon-line crayon-marked-line crayon-top" id="crayon-5879500030d56391389705-7"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">identity</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-e">getAttribute</span><span class="crayon-sy">(</span><span class="crayon-s">"identity"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-s">"example"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-5879500030d56391389705-8">&nbsp;</div><div class="crayon-line crayon-marked-line" id="crayon-5879500030d56391389705-9"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">me</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">shadowRoot</span><span class="crayon-sy">.</span><span class="crayon-e">getElementById</span><span class="crayon-sy">(</span><span class="crayon-s">"me"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-5879500030d56391389705-10"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">caller</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">shadowRoot</span><span class="crayon-sy">.</span><span class="crayon-e">getElementById</span><span class="crayon-sy">(</span><span class="crayon-s">"caller"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line" id="crayon-5879500030d56391389705-11"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">chat</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">shadowRoot</span><span class="crayon-sy">.</span><span class="crayon-e">getElementById</span><span class="crayon-sy">(</span><span class="crayon-s">"picture-in-picture"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-5879500030d56391389705-12"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">hangup</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">shadowRoot</span><span class="crayon-sy">.</span><span class="crayon-e">getElementById</span><span class="crayon-sy">(</span><span class="crayon-s">"hangup"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line" id="crayon-5879500030d56391389705-13">&nbsp;</div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-5879500030d56391389705-14"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-e">fetchToken</span><span class="crayon-sy">(</span><span class="crayon-i">identity</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-marked-line" id="crayon-5879500030d56391389705-15"> <span class="crayon-h"> </span> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-st">then</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">createClient</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-5879500030d56391389705-16"> <span class="crayon-h"> </span> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-st">then</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">setupClient</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-marked-line" id="crayon-5879500030d56391389705-17"> <span class="crayon-h"> </span> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-i">err</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-5879500030d56391389705-18"> <span class="crayon-h"> </span> <span class="crayon-h"> </span> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-i">err</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-marked-line crayon-bottom" id="crayon-5879500030d56391389705-19"> <span class="crayon-h"> </span> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d56391389705-20"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0148 seconds] -->
<p></p>
<p>Finally we have the <code>detachedCallback</code> which disconnects from any live conversations and stops the conversation client from listening to more incoming connections.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d61668211561" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
  TwilioVideoPrototype.detachedCallback = function() {
    this.disconnect();
    this.conversationsClient.unlisten();
  }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d61668211561-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d61668211561-2">2</div><div class="crayon-num" data-line="crayon-5879500030d61668211561-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d61668211561-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d61668211561-1"> <span class="crayon-h"> </span><span class="crayon-v">TwilioVideoPrototype</span><span class="crayon-sy">.</span><span class="crayon-v">detachedCallback</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d61668211561-2"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-e">disconnect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5879500030d61668211561-3"> <span class="crayon-h"> </span> <span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">conversationsClient</span><span class="crayon-sy">.</span><span class="crayon-e">unlisten</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d61668211561-4"> <span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0025 seconds] -->
<p></p>
<p>Add all that to the <code>&lt;script&gt;</code> element in our component, refresh the page and wait for an incoming call. I&#8217;ve made that nice and easy for you, just open up <a href="http://localhost/caller.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://localhost/caller.html', 'http://localhost/caller.html');">http://localhost/caller.html</a>. There&#8217;s no UI on this page, but it does generate a call to your component (as long as you kept the identity as &#8220;phil&#8221;, if you changed it, you can change the line <code>conversationsClient.inviteToConversation("phil");</code> in <code>caller.html</code> to use the identity you chose).</p>
<p>When the page loads you will receive a permissions request for access to your video and microphone on each page. Granting the request will connect the call and you&#8217;ll see you Video Chat Web Component come to life.</p>
<p><img alt="It's the same chat as before. Phil and Marcos wave happily to one another over the internet." src="https://www.twilio.com/blog/wp-content/uploads/2016/06/fg-ciZLU1_Z55PNQtGZ0aQpWolI4cJVJJ3TcAb16EDb6yCdDACNhqFWWWoVdeplkkkFSNywYYZKSpyb0KIqN7t3AWvlUC-_XuT97z8n7B8b4_7cboY9rAw98udqizk-GSfOedII.png" class="aligncenter"></p>
<p>Check out all the code for this <a href="https://github.com/philnash/twilio-video-chat-web-component/tree/web-component-complete" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/philnash/twilio-video-chat-web-component/tree/web-component-complete', 'Web Component on GitHub');">Web Component on GitHub</a>.</p>
<h3 id="h.rlkhrtotffcf">Reduce, reuse, recycle</h3>
<p>With just under 130 lines of HTML, CSS and JavaScript we have created, without using a framework, a reusable Web Component that can receive incoming video calls. Now, with just these two lines of code (and a <code>/token</code> endpoint to generate access tokens) we can use this anywhere.</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5879500030d6c432014502" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;link rel="import" href="https://www.twilio.com/blog/twilio-video.html"&gt;

&lt;twilio-video identity="phil"&gt;&lt;/twilio-video&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-5879500030d6c432014502-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5879500030d6c432014502-2">2</div><div class="crayon-num" data-line="crayon-5879500030d6c432014502-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-5879500030d6c432014502-1"><span class="crayon-r ">&lt;link </span><span class="crayon-e ">rel</span><span class="crayon-o">=</span><span class="crayon-s ">"import"</span><span class="crayon-h"> </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"/twilio-video.html"</span><span class="crayon-r ">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5879500030d6c432014502-2">&nbsp;</div><div class="crayon-line" id="crayon-5879500030d6c432014502-3"><span class="crayon-r ">&lt;twilio-video </span><span class="crayon-e ">identity</span><span class="crayon-o">=</span><span class="crayon-s ">"phil"</span><span class="crayon-r ">&gt;</span><span class="crayon-r ">&lt;/twilio-video&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p></p>
<p>Well, OK, it will only work in Chrome today. But there are <a href="http://webcomponents.org/polyfills/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://webcomponents.org/polyfills/', 'polyfills available');">polyfills available</a> that we can use to make it work in every browser (though do watch out for the slight differences in the API).</p>
<p>I&#8217;d love to hear about your uses of Web Components. Have you built your own or used someone else&#8217;s? Get in touch in the comments below or drop me a line on <a href="https://twitter.com/philnash" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://twitter.com/philnash', 'Twitter');">Twitter</a> or <a class="c4" href="mailto:philnash@twilio.com">email</a>.</p>
			</div>
					</div>
	</div><!-- .entry-content -->

	<footer class="entry-footer col-md-12">
		<div class="entry-meta">
					<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html" data-text="Getting started with Web Components building a Video Chat widget ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
<span class="author-avatar"><img alt='' src='https://secure.gravatar.com/avatar/79fac5826d02217e841fd2354db2ae37?s=20&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/79fac5826d02217e841fd2354db2ae37?s=40&amp;d=mm&amp;r=g 2x' class='avatar avatar-20 photo' height='20' width='20' /></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/phil">Phil Nash</a></span></span> <span class="author-meta author-email"><a href="mailto:pnash@twilio.com">pnash@twilio.com</a></span><span class="author-meta author-twitter"><a href="http://twitter.com/philnash">@philnash<a/></span>		</div>
	</footer><!-- .entry-footer -->

   <div class="build-more"><h3>Build More With JavaScript</h3>        <a href="https://www.twilio.com/docs/tutorials/walkthrough/server-notifications/node/express" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/docs/tutorials/walkthrough/server-notifications/node/express', '');">
          <h5>SMS and MMS Notifications with Node.js</h5>
        </a>
              <a href="https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html" rel="bookmark" title="Permanent Link to Twilio on Rails Part 3 &#8211; Adding Contextual VOIP Using WebRTC to Your Rails 4 App" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/01/twilio-on-rails-part-3-adding-contextual-voip-using-webrtc-to-your-rails-4-app.html', '');">
          <h5>Twilio on Rails Part 3 &#8211; Adding Contextual VOIP Using WebRTC to Your Rails 4 App<h4>
        </a>
                <a href="https://www.twilio.com/blog/2015/02/answering-health-questions-via-sms-with-ibm-watson-and-twilio.html" rel="bookmark" title="Permanent Link to Answering Health Questions via SMS with IBM Watson and Twilio" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/answering-health-questions-via-sms-with-ibm-watson-and-twilio.html', '');">
          <h5>Answering Health Questions via SMS with IBM Watson and Twilio<h4>
        </a>
                <a href="https://www.twilio.com/blog/2015/02/building-your-own-personal-assistant-with-twilio-and-google-calendar.html" rel="bookmark" title="Permanent Link to Building your own personal assistant with Twilio and Google Calendar" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/building-your-own-personal-assistant-with-twilio-and-google-calendar.html', '');">
          <h5>Building your own personal assistant with Twilio and Google Calendar<h4>
        </a>
        </div>
</article><!-- #post-## -->

			
<div id="disqus_thread">
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'https://www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html';
    var disqus_identifier = 'https://www.twilio.com/blog/2016/06/18072 https://www.twilio.com/blog/?p=18072';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'twilioblog';
    var disqus_title = "Getting started with Web Components building a Video Chat widget";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html?cf_action=sync_comments&amp;post_id=18072';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "https:\/\/www.twilio.com\/blog\/2016\/06\/getting-started-with-web-components-building-a-video-chat-widget.html\/trackback"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		
		</main><!-- #main -->
	</div><!-- #primary -->


<div id="secondary" class="widget-area col-md-3 hide-xs" role="complementary">
	<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://www.twilio.com/blog/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside><aside id="text-2" class="widget widget_text">			<div class="textwidget"><p>Power modern communications. Build the next generation of voice and SMS applications.</p>

 <a href="http://twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://twilio.com/try-twilio', 'Start Building For Free');" class="btn">Start Building For Free</a></div>
		</aside><style scoped type="text/css">.utcw-8ngloje {word-wrap:break-word}.utcw-8ngloje span,.utcw-8ngloje a{border-style:solid;border-width:1px}.utcw-8ngloje span:hover,.utcw-8ngloje a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-2" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Stack</h1><div class="utcw-8ngloje tagcloud"><a class="tag-link-22 utcw-tag utcw-tag-net" href="https://www.twilio.com/blog/tag/net" style="font-size:16px" title="40 topics">.NET</a> <a class="tag-link-98 utcw-tag utcw-tag-arduino" href="https://www.twilio.com/blog/tag/arduino" style="font-size:16px" title="21 topics">Arduino</a> <a class="tag-link-598 utcw-tag utcw-tag-java" href="https://www.twilio.com/blog/tag/java" style="font-size:16px" title="14 topics">Java</a> <a class="tag-link-600 utcw-tag utcw-tag-javascript" href="https://www.twilio.com/blog/tag/javascript" style="font-size:16px" title="86 topics">JavaScript</a> <a class="tag-link-847 utcw-tag utcw-tag-php" href="https://www.twilio.com/blog/tag/php" style="font-size:16px" title="57 topics">PHP</a> <a class="tag-link-891 utcw-tag utcw-tag-python" href="https://www.twilio.com/blog/tag/python" style="font-size:16px" title="72 topics">Python</a> <a class="tag-link-969 utcw-tag utcw-tag-ruby" href="https://www.twilio.com/blog/tag/ruby" style="font-size:16px" title="69 topics">Ruby</a> <a class="tag-link-2856 utcw-tag utcw-tag-swift" href="https://www.twilio.com/blog/tag/swift" style="font-size:16px" title="22 topics">Swift</a></div></aside><style scoped type="text/css">.utcw-5dkhj5o {word-wrap:break-word}.utcw-5dkhj5o span,.utcw-5dkhj5o a{border-style:solid;border-width:1px}.utcw-5dkhj5o span:hover,.utcw-5dkhj5o a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-3" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Product</h1><div class="utcw-5dkhj5o tagcloud"><a class="tag-link-2043 utcw-tag utcw-tag-mms" href="https://www.twilio.com/blog/tag/mms" style="font-size:16px" title="50 topics">MMS</a> <a class="tag-link-3513 utcw-tag utcw-tag-programmable-chat" href="https://www.twilio.com/blog/tag/programmable-chat" style="font-size:16px" title="9 topics">Programmable Chat</a> <a class="tag-link-1537 utcw-tag utcw-tag-sip" href="https://www.twilio.com/blog/tag/sip" style="font-size:16px" title="15 topics">SIP</a> <a class="tag-link-1031 utcw-tag utcw-tag-sms" href="https://www.twilio.com/blog/tag/sms" style="font-size:16px" title="372 topics">SMS</a> <a class="tag-link-2871 utcw-tag utcw-tag-taskrouter" href="https://www.twilio.com/blog/tag/taskrouter" style="font-size:16px" title="8 topics">Task Router</a> <a class="tag-link-1199 utcw-tag utcw-tag-twilio-client" href="https://www.twilio.com/blog/tag/twilio-client" style="font-size:16px" title="32 topics">Twilio Client</a> <a class="tag-link-3032 utcw-tag utcw-tag-twilio-video" href="https://www.twilio.com/blog/tag/twilio-video" style="font-size:16px" title="9 topics">Twilio Video</a> <a class="tag-link-1277 utcw-tag utcw-tag-voice" href="https://www.twilio.com/blog/tag/voice" style="font-size:16px" title="172 topics">Voice</a></div></aside><aside id="text-5" class="widget widget_text">			<div class="textwidget"><a href="http://www.twilio.com/docs/tutorials" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/docs/tutorials', '');"><img src="https://www.twilio.com/blog/wp-content/uploads/2016/07/tutorials.png" style="width: 255px" /></a></div>
		</aside><aside id="categories-3" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-13"><a href="https://www.twilio.com/blog/all-things-code" >Code, Tutorials and Hacks</a>
</li>
	<li class="cat-item cat-item-5"><a href="https://www.twilio.com/blog/customer-highlights" >Customer Highlights</a>
</li>
	<li class="cat-item cat-item-7"><a href="https://www.twilio.com/blog/developers-drawing-the-owl" >Developers Drawing The Owl</a>
</li>
	<li class="cat-item cat-item-3"><a href="https://www.twilio.com/blog/news" >News</a>
</li>
	<li class="cat-item cat-item-4"><a href="https://www.twilio.com/blog/stories-from-the-road" >Stories From The Road</a>
</li>
	<li class="cat-item cat-item-8"><a href="https://www.twilio.com/blog/inside-twilio" >The Owl’s Nest: Inside Twilio</a>
</li>
		</ul>
</aside><aside id="text-4" class="widget widget_text">			<div class="textwidget"><div class="tagcloud "><a href="http://www.twilio.com/blog/feed" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog/feed', 'RSS Feed');">RSS Feed</a></div></div>
		</aside></div><!-- #secondary -->

		</div><!-- .row -->
	</div><!-- #content.container -->

<div class="" id="footer">
	<div class="container">
		<header>
			<div class="banner"></div>
			<div class="border"></div>
			<div class="stitching"></div>
		</header>
    <div class="row sitemap">
      <div class="row">
        <div class="col-md-2 col-md-offset-1">
          <h4><a href="http://www.twilio.com/company">Company</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/company">About Twilio</a></li>
            <li><a href="http://www.twilio.com/company/nine-values">Our Nine Values</a></li>
            <li><a href="http://www.twilio.com/company/leadership-principles">Our Leadership Principles</a></li>
            <li><a href="http://www.twilio.com/company/management">The Team</a></li>
            <li><a href="http://www.twilio.com/press">Press &amp; Media</a></li>
            <li><a href="http://www.twilio.org/">Twilio.org</a></li>
            <li><a href="http://www.twilio.com/company/jobs">Careers</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4><a href="http://www.twilio.com/products">Products</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/voice">Voice</a></li>
            <li><a href="http://www.twilio.com/video">Video</a></li>
            <li><a href="http://www.twilio.com/sms">SMS (Text Messaging)</a></li>
            <li><a href="http://www.twilio.com/mms">MMS (Picture Messaging)</a></li>
            <li><a href="http://www.twilio.com/sms/toll-free">Toll-Free SMS</a></li>
            <li><a href="http://www.twilio.com/sip-trunking">SIP Trunking</a></li>
            <li><a href="http://www.twilio.com/client/mobile">Client Mobile</a></li>
            <li><a href="http://www.twilio.com/webrtc">Client WebRTC</a></li>
            <li><a href="http://www.twilio.com/stun-turn">Network Traversal Service</a></li>
            <li><a href="http://www.twilio.com/taskrouter">TaskRouter</a></li>
            <li><a href="http://www.twilio.com/sms/phone-numbers">Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/sms/shortcodes">Short Codes</a></li>
            <li><a href="http://www.twilio.com/support-plans">Support Plans</a></li>
            <li><a href="http://www.twilio.com/platform">Platform</a></li>
            <li><a href="http://www.twilio.com/lookup">Lookup</a></li>
            <li><a href="http://www.twilio.com/monitor">Monitor</a></li>
            <li><a href="http://www.twilio.com/copilot">Messaging Copilot</a></li>
            <li><a href="http://www.twilio.com/voice/conference">Global Conference</a></li>
            <li><a href="http://www.twilio.com/authy">Authy</a></li>
          </ul>
      </div>
      <div class="col-md-2">
        <h4><a href="http://www.twilio.com/pricing">Pricing</a></h4>
        <ul>
          <li><a href="http://www.twilio.com/voice/pricing">Voice Pricing</a></li>
          <li><a href="http://www.twilio.com/sms/pricing">Messaging Pricing</a></li>
          <li><a href="http://www.twilio.com/sip-trunking/pricing">SIP Trunking Pricing</a></li>
          <li><a href="http://www.twilio.com/client/pricing">Client Pricing</a></li>
          <li><a href="http://www.twilio.com/stun-turn/pricing">Network Traversal Pricing</a></li>
          <li><a href="http://www.twilio.com/taskrouter/pricing">TaskRouter</a></li>
          <li><a href="http://www.twilio.com/lookup#pricing">Lookup</a></li>
          <li><a href="http://www.twilio.com/international">International Coverage</a></li>
        </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/use-cases">Use Cases</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/customers">Customer Stories</a></li>
            <li><a href="http://www.twilio.com/showcase">Showcase</a></li>
            <li><a href="http://www.twilio.com/use-cases/two-factor-authentication">Two-Factor Authentication</a></li>
            <li><a href="http://www.twilio.com/use-cases/appointment-reminders">Appointment Reminders</a></li>
            <li><a href="http://www.twilio.com/use-cases/dispatch-notifications">Dispatch Notifications</a></li>
            <li><a href="http://www.twilio.com/use-cases/eta-alerts">ETA Alerts</a></li>
            <li><a href="http://www.twilio.com/use-cases/automated-surveys">Automated Surveys</a></li>
            <li><a href="http://www.twilio.com/use-cases/masked-phone-numbers">Masked Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/use-cases/visual-estimates">Visual Estimates</a></li>
            <li><a href="http://www.twilio.com/doers">Developer Network</a></li>
            <li><a href="http://www.twilio.com/webinars">Webinars</a></li>
            <li><a href="http://www.twilio.com/white-papers">White Papers</a></li>
          </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/api">Api &amp; Docs</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/docs/api">API Documentation</a></li>
            <li><a href="http://www.twilio.com/docs/quickstart">Quickstarts</a></li>
            <li><a href="http://www.twilio.com/docs/howto">How Tos</a></li>
            <li><a href="http://www.twilio.com/docs/libraries">Helper Libraries</a></li>
            <li><a href="http://www.twilio.com/docs/security">Security</a></li>
          </ul>
      </div>
    </div>
		<div class="row clear">
			<footer><span>&copy; 2017 Twilio. All rights reserved. <aside>|</aside><a href="http://www.twilio.com/legal/tos">Terms of Service</a><aside>|</aside><a href="http://www.twilio.com/legal/privacy">Privacy Policy</a></span>
			</footer>
		</div>
	</div>
</div>


</div><!-- #page -->

<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201702'></script>







<script type="text/javascript" defer src="https://www.twilio.com/blog/wp-content/cache/autoptimize/js/autoptimize_30cf8936a215677503cd64ef48677239.js"></script></body>

<!-- Mirrored from www.twilio.com/blog/2016/06/getting-started-with-web-components-building-a-video-chat-widget.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:10:06 GMT -->
</html>
