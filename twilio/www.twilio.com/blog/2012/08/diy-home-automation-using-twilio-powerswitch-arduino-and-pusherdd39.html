<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html?utm_source=blog&utm_medium=link&utm_campaign=sms-4-lines-april-2014 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:09:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<script type="text/javascript">
(function() {
    var projectId = 3524915770;
    var protocol = ('https:' == document.location.protocol ?
    'https://' : 'http://');
    var scriptTag = document.createElement('script');
    scriptTag.type = 'text/javascript';
    scriptTag.async = true;
    scriptTag.src = protocol + 'cdn.optimizely.com/js/' +
    projectId + '.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(scriptTag, s);
})();
function optimizelyTimeout() {
    window.optimizely = window.optimizely|| [];
    if (!window.optimizely.data) {
    window.optimizely.push("timeout");
    }
}
setTimeout(optimizelyTimeout, 1000);
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.twilio.com/blog/xmlrpc.php">
<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '815114181']);
_elqQ.push(['elqTrackPageView']);
_elqQ.push(['elqUseFirstPartyCookie', 'www.twilio.com']);
(function () {
  function async_load()
  {
    var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
    s.src = 'http://img03.en25.com/i/elqCfg.min.js';
    var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
  }
  if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
  else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>
<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','http://connect.facebook.net/en_US/fbevents.js');

fbq('init', '467131150158811');
fbq('track', "PageView");</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=467131150158811&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

<style>
@media screen and (max-width: 600px) {
  #signal-header { display: none; }
}
</style>

<link type="text/css" media="all" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_7a2cc50131d932d32297f43c61de37cd.css" rel="stylesheet" /><link type="text/css" media="screen" href="https://www.twilio.com/blog/wp-content/cache/autoptimize/css/autoptimize_97ca666341cd9b69002e26c8f2ca5299.css" rel="stylesheet" /><title>DIY Home Automation Using Twilio, PowerSwitch, Arduino, and Pusher &#8211; Twilio Cloud Communications Blog</title>

<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.13 - http://yoast.com/wordpress/seo/ -->
<meta name="description" content="Build you own DIY Home Automation Using Twilio, PowerSwitch, Arduino, and Pusher"/>
<link rel="canonical" href="https://www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html" />
<!-- / Yoast WordPress SEO plugin. -->

<link rel='dns-prefetch' href='https://www.twilio.com/blog//s0.wp.com' />
<link rel='dns-prefetch' href='https://www.twilio.com/blog//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Feed" href="https://www.twilio.com/blog/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; Comments Feed" href="https://www.twilio.com/blog/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="Twilio Cloud Communications Blog &raquo; DIY Home Automation Using Twilio, PowerSwitch, Arduino, and Pusher Comments Feed" href="https://www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/twilioinc.wpengine.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.2"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>










<!-- This site uses the Google Analytics by Yoast plugin v5.4.7 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','http://www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-2900316-1', 'auto');
	__gaTracker('set', 'forceSSL', true);
	 window.optimizely = window.optimizely || [];
 window.optimizely.push("activateUniversalAnalytics");
	__gaTracker('set', 'dimension4', 'Jonathan Gottfried');
	__gaTracker('set', 'dimension5', 'post');
	__gaTracker('set', 'dimension6', 'all-things-code');
	__gaTracker('set', 'dimension7', 'Arduino,DIY Home Automation,Hardware,Ruby,Sinatra,SMS');
	__gaTracker('set', 'dimension8', '2012-08-21T08:09:13+00:00');
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by Yoast -->


<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.4.3","is_admin":"0","ajaxurl":"https:\/\/twilioinc.wpengine.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>

<script type='text/javascript'>
/* <![CDATA[ */
var swiftypeParams = {"engineKey":"UpGyyJZzgUMXHM65YENj"};
/* ]]> */
</script>

<link rel='https://api.w.org/' href='https://www.twilio.com/blog/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.twilio.com/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.twilio.com/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://www.twilio.com/blog/?p=10734' />
<link rel="alternate" type="application/json+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2012%2F08%2Fdiy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html" />
<link rel="alternate" type="text/xml+oembed" href="https://www.twilio.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.twilio.com%2Fblog%2F2012%2F08%2Fdiy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html&amp;format=xml" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-32x32.png" sizes="32x32" />
<link rel="icon" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.twilio.com/blog/wp-content/uploads/2015/09/cropped-favicon_1141-270x270.png" />
</head>

<body class="single single-post postid-10734 single-format-standard group-blog">
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.twilio.com/blog//www.googletagmanager.com/ns.html?id=GTM-W4RVXH"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W4RVXH');</script>
<!-- End Google Tag Manager -->

<div id="fb-root"></div>
<script>(function(d, s, id) {
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) return;
		js = d.createElement(s); js.id = id;
		js.src = "http://connect.facebook.net/en_US/sdk.js#xfbml=1&appId=414254592083321&version=v2.0";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
window.fbAsyncInit = function() {
  FB.Event.subscribe('edge.create', function(targetUrl) {
    __gaTracker('send', 'social', 'facebook', 'like', targetUrl);
  });
};
window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));

function trackTwitter(intent_event) {
  if (intent_event) {
    var opt_pagePath;
    if (intent_event.target && intent_event.target.nodeName == 'IFRAME') {
          opt_target = extractParamFromUri(intent_event.target.src, 'url');
    }
    __gaTracker('send', 'social', 'twitter', 'tweet', opt_pagePath);
  }
}

function extractParamFromUri(uri, paramName) {
  if (!uri) {
    return;
  }
  var regex = new RegExp('[\\?&#]' + paramName + '=([^&#]*)');
  var params = regex.exec(uri);
  if (params != null) {
    return unescape(params[1]);
  }
  return;
}

//Wrap event bindings - Wait for async js to load
twttr.ready(function (twttr) {
  //event bindings
  twttr.events.bind('tweet', trackTwitter);
});
</script>
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o);for(var r=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=r(p[c])};
  heap.load("1541905715");
</script>
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<nav class="navbar navbar-default" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle hidden-xs" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="https://www.twilio.com/blog/">
					<img src="https://s3.amazonaws.com/ahoy-assets.twilio.com/global/images/wordmark.svg" width="200"> <span class="logo-blog">blog</span>
				</a>
			</div>

			<div class="hidden-xs"><ul id="menu-site-navigation" class="nav navbar-nav pull-right"><li id="menu-item-12202" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12202"><a href="http://www.twilio.com/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/', 'Home');" title="Home">Home</a></li>
<li id="menu-item-12205" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12205"><a href="http://www.twilio.com/blog" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog', 'Blog');" title="Blog">Blog</a></li>
<li id="menu-item-12204" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12204"><a href="https://www.twilio.com/docs/howto" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/howto', 'Tutorials');" title="Tutorials">Tutorials</a></li>
<li id="menu-item-12206" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12206"><a href="https://www.twilio.com/docs/api" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/docs/api', 'Docs');" title="Docs">Docs</a></li>
<li id="menu-item-12207" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12207"><a href="http://www.twilio.com/help" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/help', 'Help');" title="Help">Help</a></li>
<li id="menu-item-12208" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12208"><a href="https://www.twilio.com/login" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/login', 'Login');" title="Login">Login</a></li>
<li id="menu-item-12209" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12209"><a href="https://www.twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://www.twilio.com/try-twilio', 'Signup');" title="Signup">Signup</a></li>
</ul></div>		</div>
	</nav>

	<div id="content" class="site-content container">
		<div class="row">

	<div id="primary" class="content-area col-md-9">
		<main id="main" class="site-main" role="main">

		
			
<article id="post-10734" class="row post-10734 post type-post status-publish format-standard hentry category-all-things-code tag-arduino tag-diy-home-automation tag-hardware tag-ruby tag-sinatra tag-sms">
	<header class="entry-header col-md-12">
		<h2 class="entry-title">DIY Home Automation Using Twilio, PowerSwitch, Arduino, and Pusher</h2>
			
		<footer class="entry-footer">
			<div class="entry-meta">
					<div class="row">
	<div class="col-md-6">
	<span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/jonmarkgo">Jonathan Gottfried</a></span></span> on <span class="posted-on"><a href="https://www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html" rel="bookmark"><time class="entry-date published" datetime="2012-08-21T08:09:13+00:00">August 21, 2012</time><time class="updated" datetime="2016-07-29T13:38:54+00:00">July 29, 2016</time></a></span>	</div>
	<div class="col-md-6">
		<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html" data-text="DIY Home Automation Using Twilio, PowerSwitch, Arduino, and Pusher ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
	</div>
	</div>
			</div><!-- .entry-meta -->
		</footer><!-- .entry-footer -->
	</header><!-- .entry-header -->

	<div class="entry-content col-md-12">
		<div class="row">
			<div class="col-md-12">
				<p><em>Need a primer? Take the Twilio SMS Docs for a spin <a href="https://www.twilio.com/docs/api/rest/sending-messages" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/docs/api/rest/sending-messages', 'here');">here</a></em></p>
<figure id="attachment_10801" style="width: 300px" class="wp-caption alignright"><a href="https://www.twilio.com/blog/wp-content/uploads/2012/08/twiliobot.jpeg"><img class="size-medium wp-image-10801" title="twiliobot" src="https://www.twilio.com/blog/wp-content/uploads/2012/08/twiliobot-300x225.jpeg" alt="" width="300" height="225" srcset="https://www.twilio.com/blog/wp-content/uploads/2012/08/twiliobot-300x225.jpeg 300w, https://www.twilio.com/blog/wp-content/uploads/2012/08/twiliobot.jpeg 640w" sizes="(max-width: 300px) 100vw, 300px" /></a><figcaption class="wp-caption-text">Phone-controlled TwilioBot</figcaption></figure>
<p>You may have seen my recent blog post about <a href="https://www.twilio.com/blog/2012/06/build-a-phone-controlled-robot-using-node-js-arduino-rn-xv-wifly-arduinoand-twilio.html">building a Phone-controlled Robot using Twilio</a>. Since then, I&#8217;ve had ideas for new Twilio + Arduino mashups pouring in from the community. Today is the second post in our new series of Twilio Hardware mashups &#8211; build your own home automation solution using <a href="https://www.twilio.com/docs/api/rest/sending-messages" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/docs/api/rest/sending-messages', 'Twilio SMS');">Twilio SMS</a>, <a href="http://www.powerswitchtail.com/Pages/default.aspx" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.powerswitchtail.com/Pages/default.aspx', 'PowerSwitch');">PowerSwitch</a>, <a href="http://arduino.cc/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://arduino.cc/', 'Arduino');">Arduino</a>, and <a href="http://pusher.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://pusher.com/', 'PusherApp');">PusherApp</a>.</p>
<p>Last week I left the A/C in my apartment on while at work. All day, I was wishing I had remembered to turn it off for the sake of my electric bill. But alas, I was out of luck. If only my A/C were able to be controlled from some sort of distributed network.</p>
<p>Lucky for me, Al Gore invented the Internet (100% better than ARPANET for home automation). While there are consumer home automation utilities out there such as Belkin&#8217;s WeMo, I decided that it would be more interesting and enjoyable to build my own. It would have been selfish of me to keep this to myself, so I wrote it up in the tutorial for the good of the internets.</p>
<p>First off, here is a video of the final, working version of the project (I recommend watching it in 1080P so you can see the debug console output):<br />
<iframe src="https://www.youtube.com/embed/aAWCUhGsXpc" frameborder="0" width="640" height="315"></iframe></p>
<p>As we release more of these tutorials, you&#8217;ll notice that some have more complex hardware and some have more complex software &#8211; I&#8217;ll do my best to keep them varied and interesting for all of you amazing hardware hackers out there. For those of you looking for the <a href="http://techcrunch.com/2012/07/14/twilio-evangelist-builds-popular-phone-powered-rolling-robot-hints-flying-bot-is-next/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://techcrunch.com/2012/07/14/twilio-evangelist-builds-popular-phone-powered-rolling-robot-hints-flying-bot-is-next/', 'flying robot that Techcrunch mentioned');">flying robot that Techcrunch mentioned</a>&#8230;don&#8217;t worry, its coming.</p>
<p>When you finish this tutorial, you will be able to turn on and off a power outlet using Twilio SMS or a simple web application. Also, please note that <strong>electricity is dangerous &#8211; </strong>I recommend that you don&#8217;t crack open your PowerSwitch, it is designed to safely handle 120vac power but human bodies are not. That being said, lets jump right in!</p>
<h3>The Parts</h3>
<p>You will need the following parts to build your application &#8211; while its a decent upfront investment, all of the parts are reusable for future hardware experimentation and fun:</p>
<ul>
<li><a href="https://www.sparkfun.com/products/10747" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.sparkfun.com/products/10747', 'PowerSwitch Tail II');">PowerSwitch Tail II</a></li>
<li><a href="https://www.sparkfun.com/products/10822" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.sparkfun.com/products/10822', 'RN-XV WiFly');">RN-XV WiFly</a></li>
<li><a href="http://arduino.cc/en/Main/ArduinoWirelessShield" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://arduino.cc/en/Main/ArduinoWirelessShield', 'Wireless SD Shield');">Wireless SD Shield</a></li>
<li><a href="https://www.sparkfun.com/products/11224" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.sparkfun.com/products/11224', 'Arduino Uno SMD w/ USB Cable');">Arduino Uno SMD w/ USB Cable</a></li>
<li><a href="https://www.sparkfun.com/products/8431" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.sparkfun.com/products/8431', 'M/M Jumper Wires');">M/M Jumper Wires</a></li>
<li><a href="https://www.sparkfun.com/products/9718" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.sparkfun.com/products/9718', '5V FTDI Cable');">5V FTDI Cable</a></li>
<li><a href="https://www.sparkfun.com/products/9518" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.sparkfun.com/products/9518', '9V Battery Adapter');">9V Battery Adapter</a></li>
<li>A small flat-head screwdriver</li>
</ul>
<p>Note that the one part you do not need is the FTDI Cable, but I found it very useful for debugging my Arduino over alternative Serial pins while using the WiFly chip, which takes over the standard hardware Serial.</p>
<h3>The Hardware</h3>
<p>The hardware setup is pretty basic and requires no soldering. The first few steps are very similar to the robot tutorial as they cover basic initial setup &#8211; feel free to skip to Step 3 if you&#8217;re comfortable setting up an Arduino.</p>
<figure style="width: 320px" class="wp-caption aligncenter"><a href="http://i.imgur.com/rUndU.jpg" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/rUndU.jpg', '');"><img class=" " title="Arduino Uno" src="http://i.imgur.com/rUndUm.jpg" alt="" width="320" height="240" /></a><figcaption class="wp-caption-text">Arduino Uno</figcaption></figure>
<p><strong>Step 1: </strong>Plug the Wireless SD Shield into your Arduino</p>
<figure style="width: 320px" class="wp-caption aligncenter"><a href="http://i.imgur.com/FJFhV.jpg" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/FJFhV.jpg', '');"><img class=" " title="Arduino with Wireless SD Shield" src="http://i.imgur.com/FJFhVm.jpg" alt="" width="320" height="240" /></a><figcaption class="wp-caption-text">Wireless SD Shield Plugged Into Arduino Uno</figcaption></figure>
<p><strong>Step 2: </strong>Plug your LED into digital pin 13 and GND. Note that the shorter pin on the LED is GND.</p>
<figure style="width: 320px" class="wp-caption aligncenter"><a href="http://i.imgur.com/054Aj.jpg" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/054Aj.jpg', '');"><img class=" " title="LED Plugged Into Arduino" src="http://i.imgur.com/054Ajm.jpg" alt="" width="320" height="240" /></a><figcaption class="wp-caption-text">LED Plugged Into Arduino</figcaption></figure>
<p><strong>Step 3: </strong>Plug a yellow cable into digital pin 12 and a black cable into GND &#8211; these are to connect your Arduino to the PowerSwitch. Then use your flat-head screwdriver to secure the cables in your PowerSwitch.</p>
<figure style="width: 320px" class="wp-caption aligncenter"><a href="http://i.imgur.com/AIAg5.jpg" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/AIAg5.jpg', '');"><img class=" " title="Yellow and Black Cable Plugged Into Arduino" src="http://i.imgur.com/AIAg5m.jpg" alt="" width="320" height="240" /></a><figcaption class="wp-caption-text">Yellow and Black Cable Plugged Into Arduino</figcaption></figure>
<p><strong>Step 4: </strong>Plug the other end of the yellow cable into +in (pin 1) on the PowerSwitch and the other end of the black cable into -in (pin 2) on the PowerSwitch.</p>
<figure style="width: 320px" class="wp-caption aligncenter"><a href="http://i.imgur.com/eFW6j.jpg" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/eFW6j.jpg', '');"><img title="Yellow and Black Cables plugged into PowerSwitch" src="http://i.imgur.com/eFW6jm.jpg" alt="" width="320" height="240" /></a><figcaption class="wp-caption-text">Yellow and Black Cables plugged into PowerSwitch</figcaption></figure>
<p><strong>Step 5 <em>(Optional)</em>: </strong>Plug a green cable into digital pin 3 on the Arduino and a brown cable into digital pin 2 &#8211; these are to connect to your FTDI Cable for SoftwareSerial debugging.</p>
<figure style="width: 320px" class="wp-caption aligncenter"><a href="http://i.imgur.com/okzKo.jpg" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/okzKo.jpg', '');"><img title="Green and brown cables plugged into Arduino" src="http://i.imgur.com/okzKom.jpg" alt="" width="320" height="240" /></a><figcaption class="wp-caption-text">Green and Brown cables plugged into Arduino for FTDI</figcaption></figure>
<p><strong>Step 6 <em>(Optional)</em>: </strong>Plug the other end of the green cable into the port where the FTDI cable&#8217;s yellow wire ends (RX). The other end of the brown cable goes next to it, where the FTDI cable&#8217;s orange wire ends (TX). These are the 2nd and 3rd from the green end of the FTDI cable.</p>
<figure style="width: 320px" class="wp-caption aligncenter"><a href="http://i.imgur.com/evelD.jpg" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/evelD.jpg', '');"><img title="Green and Brown Wires Connected to FTDI Cable" src="http://i.imgur.com/evelDm.jpg" alt="" width="320" height="240" /></a><figcaption class="wp-caption-text">Green and Brown Wires Connected to FTDI Cable</figcaption></figure>
<p><strong>Step 7: </strong>Plug the RN-XV WiFly into the slot on the Wireless SD Shield. You may wish to postpone this step until you have uploaded your sketch onto the Arduino &#8211; the WiFly chip can interfere with the sketch upload.</p>
<figure style="width: 320px" class="wp-caption aligncenter"><a href="http://i.imgur.com/RFXaR.jpg" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/RFXaR.jpg', '');"><img title="RN-XV Plugged Into Arduino" src="http://i.imgur.com/RFXaRm.jpg" alt="" width="320" height="240" /></a><figcaption class="wp-caption-text">RN-XV Plugged Into Arduino</figcaption></figure>
<p><strong>Step 8: </strong>Plug the device that you wish to control (I&#8217;m controlling these awesome Woot-off lights) into the PowerSwitch and plug the PowerSwitch into an outlet. Your hardware setup is now completed!</p>
<figure style="width: 640px" class="wp-caption aligncenter"><a href="http://i.imgur.com/3g4aG.jpg" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/3g4aG.jpg', '');"><img title="Completed Twilio + Arduino Power Outlet" src="http://i.imgur.com/3g4aGl.jpg" alt="" width="640" height="444" /></a><figcaption class="wp-caption-text">Completed Twilio + Arduino Power Outlet</figcaption></figure>
<h3>It&#8217;s Software Time</h3>
<p>Firstly, you will need the <a href="http://arduino.cc/en/Main/Software" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://arduino.cc/en/Main/Software', 'Arduino software');">Arduino software</a> to download your code onto your chip. Then you will need some libraries to communicate with your RN-XV WiFly chip.<br />
For this tutorial, I decided to use the <a href="https://github.com/harlequin-tech/WiFlyHQ" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/harlequin-tech/WiFlyHQ', 'WiFlyHQ');">WiFlyHQ</a> library by <a href="https://github.com/harlequin-tech" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/harlequin-tech', 'harlequin-tech');">harlequin-tech</a> and to borrow their examples as a boilerplate. This library allows the Arduino to connect to a WiFi network via the RN-XV module. We then connect to the <a href="http://www.pusher.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.pusher.com/', 'Pusher');">Pusher</a> service which will trigger an event when an SMS is received or a form button is clicked on a website. I used Pusher rather than a simple TCP server because I found it easier to debug and more stable, I also wanted to experiment with using Arduino and WebSockets.</p>
<p>In order to get the Arduino to connect to Pusher successfully, I forked <a href="https://github.com/krohling" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/krohling', 'krohling');">krohling</a>&#8216;s <a href="https://github.com/krohling/ArduinoPusherClient" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/krohling/ArduinoPusherClient', 'ArduinoPusherClient');">ArduinoPusherClient</a> (designed for the Ethernet shield) and modified it to work with the WiFlyHQ library. I also included the WiFlyHQ library in my repo for ease of use so you do not need to download them separately.</p>
<p>First things first, you will need to download my <a href="https://github.com/jonmarkgo/ArduinoPusherClient" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/jonmarkgo/ArduinoPusherClient', 'modified ArduinoPusherClient library');">modified ArduinoPusherClient library</a> and place it in your <a href="http://www.arduino.cc/en/Hacking/Libraries" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.arduino.cc/en/Hacking/Libraries', 'Arduino library directory');">Arduino library directory</a>. Then we can dive right in to the sketch, just start out by opening up a new file in the <a href="http://arduino.cc/en/Main/Software" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://arduino.cc/en/Main/Software', 'Arduino IDE');">Arduino IDE</a> and add the following code:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da4693cc099459916" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Arduino</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
#include &lt;WiFlyHQ.h&gt;
#include &lt;SoftwareSerial.h&gt;
#include &lt;PusherClient.h&gt;
 
const char mySSID[] = "my$ssid"; //use $ to represent spaces in your ssid or passphrase
const char myPassword[] = "my$pass$phrase";
 
const char pusherKey[] = "abc123";
 
PusherClient client;
 
SoftwareSerial wifiSerial(2,3); //we will use these pins for debug output
 
int poweroutlet = 12; //pinout for the powerswitch
 
int led = 13; //status indicator led
 
WiFly wifly;
 
void setup() {
//initialize our digital pinouts
pinMode(poweroutlet, OUTPUT);
pinMode(led, OUTPUT);
 
//turn off the poweroutlet and led starting out
digitalWrite(poweroutlet, LOW);
digitalWrite(led, LOW);
wifiSerial.begin(57600);
 
Serial.begin(9600);
if (!wifly.begin(&amp;Serial, &amp;wifiSerial)) { //start up the serial connection to our wifi, tell the WiFlyHQ lib to use our softwareserial for debug
wifiSerial.println(F("Failed to start wifly"));
wifly.terminal(); //if the wifly fails to start, give us access to a direct serial terminal to the RN-XV
}
//paste next block of code here
}
//paste loop function here</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da4693cc099459916-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-2">2</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-4">4</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-6">6</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-8">8</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-10">10</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-12">12</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-14">14</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-16">16</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-18">18</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-20">20</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-22">22</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-24">24</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-26">26</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-28">28</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-30">30</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-32">32</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-34">34</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693cc099459916-36">36</div><div class="crayon-num" data-line="crayon-58794da4693cc099459916-37">37</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da4693cc099459916-1"><span class="crayon-p">#include &lt;WiFlyHQ.h&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-2"><span class="crayon-p">#include &lt;SoftwareSerial.h&gt;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-3"><span class="crayon-p">#include &lt;PusherClient.h&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-4"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-5"><span class="crayon-r">const</span><span class="crayon-h"> </span><span class="crayon-r">char</span><span class="crayon-h"> </span><span class="crayon-v">mySSID</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"my$ssid"</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//use $ to represent spaces in your ssid or passphrase</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-6"><span class="crayon-r">const</span><span class="crayon-h"> </span><span class="crayon-r">char</span><span class="crayon-h"> </span><span class="crayon-v">myPassword</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"my$pass$phrase"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-7"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-8"><span class="crayon-r">const</span><span class="crayon-h"> </span><span class="crayon-r">char</span><span class="crayon-h"> </span><span class="crayon-v">pusherKey</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"abc123"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-9"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-10"><span class="crayon-i">PusherClient</span><span class="crayon-h"> </span><span class="crayon-i">client</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-11"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-12"><span class="crayon-i">SoftwareSerial</span><span class="crayon-h"> </span><span class="crayon-i">wifiSerial</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//we will use these pins for debug output</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-13"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-14"><span class="crayon-r">int</span><span class="crayon-h"> </span><span class="crayon-v">poweroutlet</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">12</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//pinout for the powerswitch</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-15"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-16"><span class="crayon-r">int</span><span class="crayon-h"> </span><span class="crayon-v">led</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">13</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//status indicator led</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-17"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-18"><span class="crayon-i">WiFly</span><span class="crayon-h"> </span><span class="crayon-i">wifly</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-19"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-20"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-st">setup</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-21"><span class="crayon-c">//initialize our digital pinouts</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-22"><span class="crayon-st">pinMode</span><span class="crayon-sy">(</span><span class="crayon-i">poweroutlet</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k">OUTPUT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-23"><span class="crayon-st">pinMode</span><span class="crayon-sy">(</span><span class="crayon-i">led</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k">OUTPUT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-24"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-25"><span class="crayon-c">//turn off the poweroutlet and led starting out</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-26"><span class="crayon-st">digitalWrite</span><span class="crayon-sy">(</span><span class="crayon-i">poweroutlet</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k">LOW</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-27"><span class="crayon-st">digitalWrite</span><span class="crayon-sy">(</span><span class="crayon-i">led</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k">LOW</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-28"><span class="crayon-v">wifiSerial</span><span class="crayon-sy">.</span><span class="crayon-i">begin</span><span class="crayon-sy">(</span><span class="crayon-cn">57600</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-29"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-30"><span class="crayon-st">Serial</span><span class="crayon-sy">.</span><span class="crayon-i">begin</span><span class="crayon-sy">(</span><span class="crayon-cn">9600</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-31"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">wifly</span><span class="crayon-sy">.</span><span class="crayon-i">begin</span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-st">Serial</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-i">wifiSerial</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">//start up the serial connection to our wifi, tell the WiFlyHQ lib to use our softwareserial for debug</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-32"><span class="crayon-v">wifiSerial</span><span class="crayon-sy">.</span><span class="crayon-e">println</span><span class="crayon-sy">(</span><span class="crayon-cn">F</span><span class="crayon-sy">(</span><span class="crayon-s">"Failed to start wifly"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-33"><span class="crayon-v">wifly</span><span class="crayon-sy">.</span><span class="crayon-i">terminal</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//if the wifly fails to start, give us access to a direct serial terminal to the RN-XV</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-34"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-35"><span class="crayon-c">//paste next block of code here</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693cc099459916-36"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794da4693cc099459916-37"><span class="crayon-c">//paste loop function here</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0142 seconds] -->
<p>&nbsp;<br />
The beginning of this sketch is straightforward &#8211; we initialize our output pins for the PowerSwitch and our status LED, and we initialize our WiFly to ready it for instructions. I am using SoftwareSerial as a workaround to get debug output while the RN-XV occupies the hardware Serial pins (0/1) that the Arduino normally uses for debug output. You will need to put in your WiFi credentials and Pusher API key in the defines at the top of this sketch. Next you can go ahead and add the following code to the end of our setup() function. This snippet joins a WiFi network and then connects to pusher, subscribing to our robot_channel channel. It then binds to the powersms event which will be triggered upon receiving an SMS.</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da4693e0957964249" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Arduino</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
 //paste next block of code here
if (!wifly.isAssociated()) { //check to see if we are already associated with the network before connecting
wifiSerial.println(F("Joining network"));
if (wifly.join(mySSID, myPassword, true)) { //using the true flag at the end of wifly.join indicates that we are using WPA
wifly.save();
wifiSerial.println(F("Joined wifi network"));
}
else {
wifiSerial.println(F("Failed to join wifi network"));
wifly.terminal();
}
}
else { //if we are already associated with the network
wifiSerial.println(F("Already joined network"));
}
client.setClient(wifly); //initialize the pusher client with our
if(client.connect(pusherKey)) { //connect to our pusher account
client.bind("powersms", powerSwitch); //bind the powersms event to the powerSwitch callback function
client.subscribe("robot_channel"); //subscribe to our pusher channel
}
else { //if we fail to connect, just loop
while(1) {
}
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da4693e0957964249-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-2">2</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-4">4</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-6">6</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-8">8</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-10">10</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-12">12</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-14">14</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-16">16</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-18">18</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-20">20</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-22">22</div><div class="crayon-num" data-line="crayon-58794da4693e0957964249-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693e0957964249-24">24</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da4693e0957964249-1"><span class="crayon-h"> </span><span class="crayon-c">//paste next block of code here</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-2"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">wifly</span><span class="crayon-sy">.</span><span class="crayon-i">isAssociated</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">//check to see if we are already associated with the network before connecting</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-3"><span class="crayon-v">wifiSerial</span><span class="crayon-sy">.</span><span class="crayon-e">println</span><span class="crayon-sy">(</span><span class="crayon-cn">F</span><span class="crayon-sy">(</span><span class="crayon-s">"Joining network"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-4"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">wifly</span><span class="crayon-sy">.</span><span class="crayon-i">join</span><span class="crayon-sy">(</span><span class="crayon-i">mySSID</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">myPassword</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k">true</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">//using the true flag at the end of wifly.join indicates that we are using WPA</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-5"><span class="crayon-v">wifly</span><span class="crayon-sy">.</span><span class="crayon-i">save</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-6"><span class="crayon-v">wifiSerial</span><span class="crayon-sy">.</span><span class="crayon-e">println</span><span class="crayon-sy">(</span><span class="crayon-cn">F</span><span class="crayon-sy">(</span><span class="crayon-s">"Joined wifi network"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-7"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-8"><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-9"><span class="crayon-v">wifiSerial</span><span class="crayon-sy">.</span><span class="crayon-e">println</span><span class="crayon-sy">(</span><span class="crayon-cn">F</span><span class="crayon-sy">(</span><span class="crayon-s">"Failed to join wifi network"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-10"><span class="crayon-v">wifly</span><span class="crayon-sy">.</span><span class="crayon-i">terminal</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-11"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-12"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-13"><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">//if we are already associated with the network</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-14"><span class="crayon-v">wifiSerial</span><span class="crayon-sy">.</span><span class="crayon-e">println</span><span class="crayon-sy">(</span><span class="crayon-cn">F</span><span class="crayon-sy">(</span><span class="crayon-s">"Already joined network"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-15"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-16"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-i">setClient</span><span class="crayon-sy">(</span><span class="crayon-i">wifly</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//initialize the pusher client with our</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-17"><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-i">connect</span><span class="crayon-sy">(</span><span class="crayon-i">pusherKey</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">//connect to our pusher account</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-18"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-i">bind</span><span class="crayon-sy">(</span><span class="crayon-s">"powersms"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">powerSwitch</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//bind the powersms event to the powerSwitch callback function</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-19"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-i">subscribe</span><span class="crayon-sy">(</span><span class="crayon-s">"robot_channel"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//subscribe to our pusher channel</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-20"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-21"><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">//if we fail to connect, just loop</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-22"><span class="crayon-st">while</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58794da4693e0957964249-23"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693e0957964249-24"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0122 seconds] -->
<p>&nbsp;<br />
Our setup() function was the most complex part of our sketch, in fact our loop simply monitors the incoming TCP requests for events and then turns on the LED if we have a successful connection:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da4693ec715529073" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Arduino</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
//paste loop function here
void loop() {
if (client.connected()) {
digitalWrite(led,HIGH);
client.monitor();
}
 
}
//paste powerSwitch function here</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da4693ec715529073-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693ec715529073-2">2</div><div class="crayon-num" data-line="crayon-58794da4693ec715529073-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693ec715529073-4">4</div><div class="crayon-num" data-line="crayon-58794da4693ec715529073-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693ec715529073-6">6</div><div class="crayon-num" data-line="crayon-58794da4693ec715529073-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693ec715529073-8">8</div><div class="crayon-num" data-line="crayon-58794da4693ec715529073-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da4693ec715529073-1"><span class="crayon-c">//paste loop function here</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693ec715529073-2"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-st">loop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58794da4693ec715529073-3"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-i">connected</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693ec715529073-4"><span class="crayon-st">digitalWrite</span><span class="crayon-sy">(</span><span class="crayon-i">led</span><span class="crayon-sy">,</span><span class="crayon-k">HIGH</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693ec715529073-5"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-i">monitor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693ec715529073-6"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794da4693ec715529073-7"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693ec715529073-8"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794da4693ec715529073-9"><span class="crayon-c">//paste powerSwitch function here</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0032 seconds] -->
<p>&nbsp;<br />
All that is left now is to add our powerSwitch() callback function, which receives event data from Pusher and responds by turning on or off our power outlet. You will note that we are using a PusherClient function called parseMessageMember &#8211; this is an extremely basic parser for the JSON event data being sent along by Pusher. There is an Arduino JSON library but it was exceedingly complex for this application. In the following function we are taking the data string and retrieving the command parameter from it, which is what tells us whether to turn the outlet on or off &#8211; in a production example, you will likely want to implement some sort of security check here so that you make sure only verified users are controlling your device:<br />
&nbsp;</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da4693f6151741534" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Arduino</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
//paste powerSwitch function here
void powerSwitch(String data) {
String cmd = client.parseMessageMember("command", data);
wifiSerial.print("Command: ");
wifiSerial.println(cmd);
 
if (cmd == "on") {
digitalWrite(poweroutlet,HIGH);
}
else {
digitalWrite(poweroutlet,LOW);
}
 
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da4693f6151741534-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693f6151741534-2">2</div><div class="crayon-num" data-line="crayon-58794da4693f6151741534-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693f6151741534-4">4</div><div class="crayon-num" data-line="crayon-58794da4693f6151741534-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693f6151741534-6">6</div><div class="crayon-num" data-line="crayon-58794da4693f6151741534-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693f6151741534-8">8</div><div class="crayon-num" data-line="crayon-58794da4693f6151741534-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693f6151741534-10">10</div><div class="crayon-num" data-line="crayon-58794da4693f6151741534-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693f6151741534-12">12</div><div class="crayon-num" data-line="crayon-58794da4693f6151741534-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da4693f6151741534-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da4693f6151741534-1"><span class="crayon-c">//paste powerSwitch function here</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693f6151741534-2"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-i">powerSwitch</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-i">data</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58794da4693f6151741534-3"><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">cmd</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-i">parseMessageMember</span><span class="crayon-sy">(</span><span class="crayon-s">"command"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693f6151741534-4"><span class="crayon-v">wifiSerial</span><span class="crayon-sy">.</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Command: "</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693f6151741534-5"><span class="crayon-v">wifiSerial</span><span class="crayon-sy">.</span><span class="crayon-e">println</span><span class="crayon-sy">(</span><span class="crayon-i">cmd</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693f6151741534-6"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-58794da4693f6151741534-7"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">cmd</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"on"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693f6151741534-8"><span class="crayon-st">digitalWrite</span><span class="crayon-sy">(</span><span class="crayon-i">poweroutlet</span><span class="crayon-sy">,</span><span class="crayon-k">HIGH</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58794da4693f6151741534-9"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693f6151741534-10"><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58794da4693f6151741534-11"><span class="crayon-st">digitalWrite</span><span class="crayon-sy">(</span><span class="crayon-i">poweroutlet</span><span class="crayon-sy">,</span><span class="crayon-k">LOW</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693f6151741534-12"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58794da4693f6151741534-13"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da4693f6151741534-14"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0056 seconds] -->
<p>&nbsp;<br />
You can now upload your sketch to the Arduino using the included USB cable (plug the fat end into the Arduino and the USB end into your computer) and then plug in the RN-XV module if you have not done so already! You can find the <a href="https://github.com/jonmarkgo/TwilioPowerOutlet/blob/master/twiliopower.ino" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/jonmarkgo/TwilioPowerOutlet/blob/master/twiliopower.ino', 'full sketch file here');">full sketch file here</a> for reference.</p>
<p><em>(Optional)</em>: In order to get debug output from your FTDI cable via SoftwareSerial, you will need to install the <a href="http://www.ftdichip.com/Drivers/VCP.htm" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.ftdichip.com/Drivers/VCP.htm', 'FTDI Drivers');">FTDI Drivers</a> first. You will want the VCP version of the drivers.</p>
<h3>The Server</h3>
<p>The server is a very basic application written in Ruby using Sinatra and hosted on Heroku. The first thing to do is set up basic configuration with our Gemfile and Procfile:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da469401046274418" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
source :rubygems
gem 'sinatra'
gem 'pusher'
gem 'twilio-ruby'</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da469401046274418-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469401046274418-2">2</div><div class="crayon-num" data-line="crayon-58794da469401046274418-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469401046274418-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da469401046274418-1"><span class="crayon-i">source</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">rubygems</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469401046274418-2"><span class="crayon-i">gem</span><span class="crayon-h"> </span><span class="crayon-s">'sinatra'</span></div><div class="crayon-line" id="crayon-58794da469401046274418-3"><span class="crayon-i">gem</span><span class="crayon-h"> </span><span class="crayon-s">'pusher'</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469401046274418-4"><span class="crayon-i">gem</span><span class="crayon-h"> </span><span class="crayon-s">'twilio-ruby'</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da46940c258952460" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
web: bundle exec ruby twilio-power-outlet.rb -p $PORT</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da46940c258952460-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da46940c258952460-1"><span class="crayon-i">web</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">bundle</span><span class="crayon-h"> </span><span class="crayon-i">exec</span><span class="crayon-h"> </span><span class="crayon-i">ruby</span><span class="crayon-h"> </span><span class="crayon-i">twilio</span><span class="crayon-o">-</span><span class="crayon-i">power</span><span class="crayon-o">-</span><span class="crayon-v">outlet</span><span class="crayon-sy">.</span><span class="crayon-i">rb</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-v">$PORT</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p>Now you can go ahead and create twilio-power-outlet.rb and add the following code:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da469416992993503" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
require 'sinatra'
require 'twilio-ruby'
require 'pusher'
 
configure do
Pusher.app_id = ENV['PUSHER_APP_ID']
Pusher.key = ENV['PUSHER_KEY']
Pusher.secret = ENV['PUSHER_SECRET']
end</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da469416992993503-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469416992993503-2">2</div><div class="crayon-num" data-line="crayon-58794da469416992993503-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469416992993503-4">4</div><div class="crayon-num" data-line="crayon-58794da469416992993503-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469416992993503-6">6</div><div class="crayon-num" data-line="crayon-58794da469416992993503-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469416992993503-8">8</div><div class="crayon-num" data-line="crayon-58794da469416992993503-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da469416992993503-1"><span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'sinatra'</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469416992993503-2"><span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'twilio-ruby'</span></div><div class="crayon-line" id="crayon-58794da469416992993503-3"><span class="crayon-i">require</span><span class="crayon-h"> </span><span class="crayon-s">'pusher'</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469416992993503-4"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-58794da469416992993503-5"><span class="crayon-i">configure</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469416992993503-6"><span class="crayon-v">Pusher</span><span class="crayon-sy">.</span><span class="crayon-v">app_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ENV</span><span class="crayon-sy">[</span><span class="crayon-s">'PUSHER_APP_ID'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-58794da469416992993503-7"><span class="crayon-v">Pusher</span><span class="crayon-sy">.</span><span class="crayon-v">key</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ENV</span><span class="crayon-sy">[</span><span class="crayon-s">'PUSHER_KEY'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469416992993503-8"><span class="crayon-v">Pusher</span><span class="crayon-sy">.</span><span class="crayon-v">secret</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ENV</span><span class="crayon-sy">[</span><span class="crayon-s">'PUSHER_SECRET'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-58794da469416992993503-9"><span class="crayon-st">end</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0031 seconds] -->
<p>&nbsp;<br />
In this snippet we are setting up our Pusher configuration variables and including necessary gems. We will set up the environment variables later when we push to Heroku. Next we can go ahead and set up our &#8216;/control/&#8217; route, which receives incoming SMS or form submissions from our basic web page. You&#8217;ll notice that we output errors to TwiML SMS or web depending on how your request was submitted.<br />
&nbsp;</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da469420818450917" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
post '/control/?' do
output = "Message transmitted" #sms/html output message
#try to trigger a pusher event based on the Body of the incoming SMS or submitted form
begin
Pusher['robot_channel'].trigger('powersms', {:command =&gt; params['Body'].downcase})
rescue Pusher::Error =&gt; e
output = "Failed: #{e.message}"
end
#if the web form was submitted, render our erb template
if params['SmsSid'] == nil
erb :index, :locals =&gt; {:msg =&gt; output}
else
#otherwise return TwiML to send an SMS
response = Twilio::TwiML::Response.new do |r|
r.Sms output
end
response.text
end
end</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da469420818450917-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469420818450917-2">2</div><div class="crayon-num" data-line="crayon-58794da469420818450917-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469420818450917-4">4</div><div class="crayon-num" data-line="crayon-58794da469420818450917-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469420818450917-6">6</div><div class="crayon-num" data-line="crayon-58794da469420818450917-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469420818450917-8">8</div><div class="crayon-num" data-line="crayon-58794da469420818450917-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469420818450917-10">10</div><div class="crayon-num" data-line="crayon-58794da469420818450917-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469420818450917-12">12</div><div class="crayon-num" data-line="crayon-58794da469420818450917-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469420818450917-14">14</div><div class="crayon-num" data-line="crayon-58794da469420818450917-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469420818450917-16">16</div><div class="crayon-num" data-line="crayon-58794da469420818450917-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469420818450917-18">18</div><div class="crayon-num" data-line="crayon-58794da469420818450917-19">19</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da469420818450917-1"><span class="crayon-i">post</span><span class="crayon-h"> </span><span class="crayon-s">'/control/?'</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469420818450917-2"><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Message transmitted"</span><span class="crayon-h"> </span><span class="crayon-c">#sms/html output message</span></div><div class="crayon-line" id="crayon-58794da469420818450917-3"><span class="crayon-c">#try to trigger a pusher event based on the Body of the incoming SMS or submitted form</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469420818450917-4"><span class="crayon-st">begin</span></div><div class="crayon-line" id="crayon-58794da469420818450917-5"><span class="crayon-v">Pusher</span><span class="crayon-sy">[</span><span class="crayon-s">'robot_channel'</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">trigger</span><span class="crayon-sy">(</span><span class="crayon-s">'powersms'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">{</span><span class="crayon-o">:</span><span class="crayon-v">command</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-sy">[</span><span class="crayon-s">'Body'</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">downcase</span><span class="crayon-k ">}</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469420818450917-6"><span class="crayon-st">rescue</span><span class="crayon-h"> </span><span class="crayon-i">Pusher</span><span class="crayon-o">::</span><span class="crayon-v">Error</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-i">e</span></div><div class="crayon-line" id="crayon-58794da469420818450917-7"><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Failed: #{e.message}"</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469420818450917-8"><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-58794da469420818450917-9"><span class="crayon-c">#if the web form was submitted, render our erb template</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469420818450917-10"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-sy">[</span><span class="crayon-s">'SmsSid'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-r">nil</span></div><div class="crayon-line" id="crayon-58794da469420818450917-11"><span class="crayon-i">erb</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">index</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">locals</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">{</span><span class="crayon-o">:</span><span class="crayon-v">msg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-i">output</span><span class="crayon-k ">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469420818450917-12"><span class="crayon-st">else</span></div><div class="crayon-line" id="crayon-58794da469420818450917-13"><span class="crayon-c">#otherwise return TwiML to send an SMS</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469420818450917-14"><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">Twilio</span><span class="crayon-o">::</span><span class="crayon-i">TwiML</span><span class="crayon-o">::</span><span class="crayon-v">Response</span><span class="crayon-sy">.</span><span class="crayon-i">new</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-i">r</span><span class="crayon-o">|</span></div><div class="crayon-line" id="crayon-58794da469420818450917-15"><span class="crayon-v">r</span><span class="crayon-sy">.</span><span class="crayon-i">Sms</span><span class="crayon-h"> </span><span class="crayon-i">output</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469420818450917-16"><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-58794da469420818450917-17"><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-i">text</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469420818450917-18"><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-58794da469420818450917-19"><span class="crayon-st">end</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0086 seconds] -->
<p>Last but not least, we need to define our index route, which displays our index.erb template containing a form to control the power outlet from the web:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da46942b817430017" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
get '/' do
erb :index, :locals =&gt; {:msg =&gt; "Control the Outlet"}
end</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da46942b817430017-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da46942b817430017-2">2</div><div class="crayon-num" data-line="crayon-58794da46942b817430017-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da46942b817430017-1"><span class="crayon-i">get</span><span class="crayon-h"> </span><span class="crayon-s">'/'</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da46942b817430017-2"><span class="crayon-i">erb</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-i">index</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-v">locals</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">{</span><span class="crayon-o">:</span><span class="crayon-v">msg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">"Control the Outlet"</span><span class="crayon-k ">}</span></div><div class="crayon-line" id="crayon-58794da46942b817430017-3"><span class="crayon-st">end</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0021 seconds] -->
<p>Once your twilio-power-outlet.rb file is completed (check it against the <a href="https://github.com/jonmarkgo/TwilioPowerOutlet/blob/master/twilio-power-outlet.rb" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/jonmarkgo/TwilioPowerOutlet/blob/master/twilio-power-outlet.rb', 'complete example here');">complete example here</a>) you can create a views directory and set up our index.erb file, which displays a form to control the power outlet from the web:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da469435115444371" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Ruby</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
&lt;h1&gt;&lt;%= msg %&gt;&lt;/h1&gt;
&lt;form action="https://www.twilio.com/blog/control/" method="POST"&gt;
&lt;select name="Body"&gt;
&lt;option value="on"&gt;Turn On&lt;/option&gt;
&lt;option value="off"&gt;Turn Off&lt;/option&gt;
&lt;/select&gt;
&lt;br /&gt;&lt;input type="submit" /&gt;
&lt;/form&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da469435115444371-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469435115444371-2">2</div><div class="crayon-num" data-line="crayon-58794da469435115444371-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469435115444371-4">4</div><div class="crayon-num" data-line="crayon-58794da469435115444371-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469435115444371-6">6</div><div class="crayon-num" data-line="crayon-58794da469435115444371-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469435115444371-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da469435115444371-1"><span class="crayon-o">&lt;</span><span class="crayon-i">h1</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;%=</span><span class="crayon-h"> </span><span class="crayon-i">msg</span><span class="crayon-h"> </span><span class="crayon-ta">%&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">h1</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469435115444371-2"><span class="crayon-o">&lt;</span><span class="crayon-i">form</span><span class="crayon-h"> </span><span class="crayon-v">action</span><span class="crayon-o">=</span><span class="crayon-s">"/control/"</span><span class="crayon-h"> </span><span class="crayon-t">method</span><span class="crayon-o">=</span><span class="crayon-s">"POST"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-58794da469435115444371-3"><span class="crayon-o">&lt;</span><span class="crayon-i">select</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">"Body"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469435115444371-4"><span class="crayon-o">&lt;</span><span class="crayon-i">option</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-o">=</span><span class="crayon-s">"on"</span><span class="crayon-o">&gt;</span><span class="crayon-i">Turn</span><span class="crayon-h"> </span><span class="crayon-i">On</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">option</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-58794da469435115444371-5"><span class="crayon-o">&lt;</span><span class="crayon-i">option</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-o">=</span><span class="crayon-s">"off"</span><span class="crayon-o">&gt;</span><span class="crayon-i">Turn</span><span class="crayon-h"> </span><span class="crayon-i">Off</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">option</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469435115444371-6"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">select</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-58794da469435115444371-7"><span class="crayon-o">&lt;</span><span class="crayon-i">br</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-i">input</span><span class="crayon-h"> </span><span class="crayon-v">type</span><span class="crayon-o">=</span><span class="crayon-s">"submit"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469435115444371-8"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">form</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0053 seconds] -->
<p>&nbsp;<br />
Now that our scripts are complete, we can retrieve our Pusher account credentials, set up our Twilio number, and push our app to Heroku. First things first, you will need to <a href="https://toolbelt.heroku.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://toolbelt.heroku.com/', 'install the Heroku Toolbelt');">install the Heroku Toolbelt</a>, which includes git and heroku. If you have never used Heroku before, I recommend checking out <a href="https://devcenter.heroku.com/articles/quickstart" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://devcenter.heroku.com/articles/quickstart', 'Heroku&#8217;s Getting Started document');">Heroku&#8217;s Getting Started document</a> that shows you how to set up an account and log in for the first time.</p>
<p>Once you have that installed and set up, you can execute the following commands to add your files to a new git repository:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da469440313610230" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
git init
git add .
git commit -am "Initial commit"</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da469440313610230-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469440313610230-2">2</div><div class="crayon-num" data-line="crayon-58794da469440313610230-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da469440313610230-1"><span class="crayon-e">git </span><span class="crayon-e">init</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469440313610230-2"><span class="crayon-e">git </span><span class="crayon-v">add</span><span class="crayon-h"> </span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-58794da469440313610230-3"><span class="crayon-e">git </span><span class="crayon-i">commit</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">am</span><span class="crayon-h"> </span><span class="crayon-s">"Initial commit"</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0019 seconds] -->
<p>Then you can run these commands to create a new Heroku application and push your code to the server:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da46944a568993912" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
heroku create --stack cedar
git push heroku master</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da46944a568993912-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da46944a568993912-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da46944a568993912-1"><span class="crayon-e">heroku </span><span class="crayon-i">create</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">stack </span><span class="crayon-e">cedar</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da46944a568993912-2"><span class="crayon-e">git </span><span class="crayon-e">push </span><span class="crayon-e">heroku </span><span class="crayon-i">master</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>&nbsp;<br />
When your git push is finished executing, you should see a line similar to this: &#8220;http://blazing-galaxy-997.herokuapp.com deployed to Heroku&#8221; &#8211; that gives you the URL of your new Heroku application.<br />
Take this URL, add /control/ to the end, and enter it into the SMS Callback URL for your Twilio phone number.</p>
<p>If you are brand new to Twilio I recommend watching our <a href="https://www.twilio.com/blog/2012/04/get-started-with-twilio-sms-receiving-incoming-sms-quickstart.html">SMS Quickstart Screencast</a> which shows you how to buy a number for the first time.<br />
&nbsp;<br />
<figure style="width: 640px" class="wp-caption aligncenter"><a href="http://i.imgur.com/Mzd2e.png" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/Mzd2e.png', '');"><img title="Set Up Your Twilio Phone Number" src="http://i.imgur.com/Mzd2el.png" alt="" width="640" height="306" /></a><figcaption class="wp-caption-text">Set Up Your Twilio Phone Number</figcaption></figure></p>
<p>Next you can head over to your Pusher dashboard and get your API Access Key. If you have not used Pusher before, you can sign up at <a href="http://pusher.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://pusher.com/', 'pusher.com');">pusher.com</a>. Note: Never share your API credentials (I changed mine after taking this screenshot, don&#8217;t worry)</p>
<figure style="width: 640px" class="wp-caption aligncenter"><a href="http://i.imgur.com/ZdYPv.png" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/ZdYPv.png', '');"><img title="Pusher API Access Dashboard" src="http://i.imgur.com/ZdYPvl.png" alt="" width="640" height="280" /></a><figcaption class="wp-caption-text">Pusher API Access Dashboard</figcaption></figure>
<p>And last but not least you need to set up some Heroku environment variables. First, you should go back to your Arduino sketch and update your pusherKey variable with the information from your Pusher dashboard.</p>
<p>Then take the app id, key, and secret from Pusher and replace where necessary in the following shell commands, then run them from your Terminal:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-58794da469455728651177" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover expand" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 16px !important; line-height: 24px !important;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:2; -o-tab-size:2; -webkit-tab-size:2; tab-size:2; font-size: 16px !important; line-height: 24px !important;">
heroku config:add PUSHER_APP_ID=12345
heroku config:add PUSHER_KEY=abc123456789
heroku config:add PUSHER_SECRET=abc123456789</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-num" data-line="crayon-58794da469455728651177-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58794da469455728651177-2">2</div><div class="crayon-num" data-line="crayon-58794da469455728651177-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 24px !important;"><div class="crayon-line" id="crayon-58794da469455728651177-1"><span class="crayon-e">heroku </span><span class="crayon-i">config</span><span class="crayon-o">:</span><span class="crayon-e">add </span><span class="crayon-v">PUSHER_APP_ID</span><span class="crayon-o">=</span><span class="crayon-cn">12345</span></div><div class="crayon-line crayon-striped-line" id="crayon-58794da469455728651177-2"><span class="crayon-e">heroku </span><span class="crayon-i">config</span><span class="crayon-o">:</span><span class="crayon-e">add </span><span class="crayon-v">PUSHER_KEY</span><span class="crayon-o">=</span><span class="crayon-e">abc123456789</span></div><div class="crayon-line" id="crayon-58794da469455728651177-3"><span class="crayon-e">heroku </span><span class="crayon-i">config</span><span class="crayon-o">:</span><span class="crayon-e">add </span><span class="crayon-v">PUSHER_SECRET</span><span class="crayon-o">=</span><span class="crayon-i">abc123456789</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p>Your output should be similar to this: &#8220;Setting config vars and restarting twiliopoweroutlet&#8230; done&#8221;</p>
<p>Now you should be all set to go. You can head over to your Heroku URL and should see the form to turn your Arduino on and off. If you&#8217;re curious about whether the Arduino is actually connecting to Pusher, you can use your Serial Monitor for debug information or use the Pusher Debug console for information on their end.</p>
<h3><em>Optional</em>: Debugging with your FTDI Cable</h3>
<p>As I mentioned throughout the tutorial, you can use your FTDI cable as an alternate Serial port to get debugging output from your Arduino. In order to do this, you will need to follow the optional wiring steps above, and then plug the USB end of the FTDI cable into your computer after installing the <a href="http://www.ftdichip.com/Drivers/VCP.htm" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.ftdichip.com/Drivers/VCP.htm', 'FTDI USB driver');">FTDI USB driver</a>. To see the output, have your Arduino plugged into your computer via both the included USB cable (for downloading sketches) and the FTDI cable. Then, when you are in your Arduino IDE (the Arduino should be on), go to the Tools menu, then the Serial Port submenu, and select /dev/tty.usbserial-##### &#8211; this is the FTDI USB port.</p>
<p><a href="http://i.imgur.com/QdzfC.png" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/QdzfC.png', '');"><img class="aligncenter" title="FTDI Serial Port selection" src="http://i.imgur.com/QdzfCl.png" alt="" width="640" height="282" /></a></p>
<p>Then, under the Tools menu select Serial Monitor. On the bottom of this window, where it says 9600 baud by default, change it so that 57600 baud is selected.</p>
<p><a href="http://i.imgur.com/1FKWY.png" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://i.imgur.com/1FKWY.png', '');"><img class="aligncenter" title="57600 baud selection" src="http://i.imgur.com/1FKWY.png" alt="" width="509" height="569" /></a></p>
<p>Then, when you restart your Arduino you should start seeing debug output! Note that if you need to download an updated sketch, you will need to change the selected Serial Port under the Tools menu back to tty.usbmodem### (uploader) instead of tty.usbserial (debugger) before attempting to upload your sketch. You may also need to remove the RN-XV or flip the small switch on the Wireless SD shield from Micro to USB in order to upload a new sketch onto your board.</p>
<p>You can find the full source for this project on GitHub at <a href="https://github.com/jonmarkgo/TwilioPowerOutlet" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/jonmarkgo/TwilioPowerOutlet', 'jonmarkgo/TwilioPowerOutlet');">jonmarkgo/TwilioPowerOutlet</a> and the required libraries at <a href="https://github.com/jonmarkgo/ArduinoPusherClient" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/jonmarkgo/ArduinoPusherClient', 'jonmarkgo/ArduinoPusherClient');">jonmarkgo/ArduinoPusherClient</a>. I&#8217;d like to see you go out and build your own home automation solutions using Twilio and Arduino!</p>
<p>If you have any questions, feedback, or angry rants about how your robot burned your morning toast please feel free to Tweet <a href="http://twitter.com/jonmarkgo" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/jonmarkgo', '@jonmarkgo');">@jonmarkgo</a> or e-mail me at <a href="mailto:jonmarkgo@twilio.com">jonmarkgo@twilio.com</a></p>
			</div>
					</div>
	</div><!-- .entry-content -->

	<footer class="entry-footer col-md-12">
		<div class="entry-meta">
					<div class="social-buttons">
			<div class="fb-like" data-href="https://www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="twilio" data-count="none" data-url="https://www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html" data-text="DIY Home Automation Using Twilio, PowerSwitch, Arduino, and Pusher ">Tweet</a>
      <a href="https://twitter.com/twilio" class="twitter-follow-button" data-show-count="false">Follow @twilio</a>
		</div>
<span class="author-avatar"><img alt='' src='https://secure.gravatar.com/avatar/fec68aa3b0963b379ee5e5552def067e?s=20&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/fec68aa3b0963b379ee5e5552def067e?s=40&amp;d=mm&amp;r=g 2x' class='avatar avatar-20 photo' height='20' width='20' /></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://www.twilio.com/blog/author/jonmarkgo">Jonathan Gottfried</a></span></span> <span class="author-meta author-email"><a href="mailto:jonmarkgo@twilio.com">jonmarkgo@twilio.com</a></span>		</div>
	</footer><!-- .entry-footer -->

   <div class="build-more"><h3>Build More With Arduino</h3>        <a href="https://www.twilio.com/blog/2015/02/arduino-wifi-getting-started-arduino-yun.html" rel="bookmark" title="Permanent Link to Getting started with the Arduino Yun &#8211; the Arduino with WiFi" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/arduino-wifi-getting-started-arduino-yun.html', '');">
          <h5>Getting started with the Arduino Yun &#8211; the Arduino with WiFi<h4>
        </a>
                <a href="https://www.twilio.com/blog/2015/02/arduino-powered-photobooth-arduino-yun-a-webcam-and-dropbox.html" rel="bookmark" title="Permanent Link to Build a Photobooth with an Arduino Yun, a Webcam and Dropbox" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/arduino-powered-photobooth-arduino-yun-a-webcam-and-dropbox.html', '');">
          <h5>Build a Photobooth with an Arduino Yun, a Webcam and Dropbox<h4>
        </a>
                <a href="https://www.twilio.com/blog/2015/02/taskrouter-and-the-internet-of-things.html" rel="bookmark" title="Permanent Link to TaskRouter and the Internet of Things" onclick="__gaTracker('send', 'event', 'buildmore-widget', 'https://www.twilio.com/blog/2015/02/taskrouter-and-the-internet-of-things.html', '');">
          <h5>TaskRouter and the Internet of Things<h4>
        </a>
        </div>
</article><!-- #post-## -->

			
<div id="disqus_thread">
                    <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-1764">
        <div id="dsq-comment-header-1764" class="dsq-comment-header">
            <cite id="dsq-cite-1764">
http://twitter.com/Fellytone84                <span id="dsq-author-user-1764">Dylan Conlin</span>
            </cite>
        </div>
        <div id="dsq-comment-body-1764" class="dsq-comment-body">
            <div id="dsq-comment-message-1764" class="dsq-comment-message"><p>I didn&#8217;t have the power outlet, so i tested it with an led on pin 12 &#8212; works like a charm! Excellent tutorial!</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-1965">
        <div id="dsq-comment-header-1965" class="dsq-comment-header">
            <cite id="dsq-cite-1965">
http://www.rackorganizer.net/                <span id="dsq-author-user-1965">Richard</span>
            </cite>
        </div>
        <div id="dsq-comment-body-1965" class="dsq-comment-body">
            <div id="dsq-comment-message-1965" class="dsq-comment-message"><p>Great tutorial, thank you for sharing. <a href="http://www.rackorganizer.net/" onclick="__gaTracker('send', 'event', 'outbound-comment', 'http://www.rackorganizer.net/', 'http://www.rackorganizer.net/');" rel="nofollow">http://www.rackorganizer.net/</a></p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-2351">
        <div id="dsq-comment-header-2351" class="dsq-comment-header">
            <cite id="dsq-cite-2351">
http://www.dangayle.com/                <span id="dsq-author-user-2351">Dan Gayle</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2351" class="dsq-comment-body">
            <div id="dsq-comment-message-2351" class="dsq-comment-message"><p>Fantastic. I wish I had time to get all the materials before our Art-Up event next Friday.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-2757">
        <div id="dsq-comment-header-2757" class="dsq-comment-header">
            <cite id="dsq-cite-2757">
                <span id="dsq-author-user-2757">patscomputerservices</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2757" class="dsq-comment-body">
            <div id="dsq-comment-message-2757" class="dsq-comment-message"><p>I know this is an older post, but here are my questions:</p>
<p>1. Can I hook up more than one power outlet to the arduino?<br />
2. Can I send the command such as &#8220;poweroutlet1 on&#8221; or &#8220;lights off&#8221; instead of just &#8220;on&#8221; and &#8220;off&#8221;?<br />
3. In the twilio app (where I create my sms link), can I specify another port (such as 8080), as long as I have my router forwarding that to my arduino on port 80? I run multiple web servers on my network.<br />
4. Can this be used in connection with another arduino or system to say change the thermostat settings? (I realize that I&#8217;d have to code that myself.)</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-2760">
        <div id="dsq-comment-header-2760" class="dsq-comment-header">
            <cite id="dsq-cite-2760">
                <span id="dsq-author-user-2760">jonmarkgo</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2760" class="dsq-comment-body">
            <div id="dsq-comment-message-2760" class="dsq-comment-message"><p>You can theoretically hook as many PowerTails (or relays) as your Arduino has I/O ports to control them. In this situation you would also need to modify your application to add multiple commands that the Arduino recognizes to refer to different control ports (aka different power outlets)</p>
<p>The Twilio app can run on any port as long as you put that in the URL that you provide to Twilio as our SMS Callback.</p>
<p>Twilio is really just the communication layer, so you could hook it up to any hardware system that you are working on such as a thermostat or other crazy things like your blinds!</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-2790">
        <div id="dsq-comment-header-2790" class="dsq-comment-header">
            <cite id="dsq-cite-2790">
                <span id="dsq-author-user-2790">SanUSB Laese</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2790" class="dsq-comment-body">
            <div id="dsq-comment-message-2790" class="dsq-comment-message"><p>Sketch Arduino for Wifly RN-XV modem configuration without Wifly library and </p>
<p>with front-end: <a href="https://dl.dropboxusercontent.com/u/101922388/WiflySanUSB.zip" onclick="__gaTracker('send', 'event', 'download', 'https://dl.dropboxusercontent.com/u/101922388/WiflySanUSB.zip');" rel="nofollow">https://dl.dropboxusercontent.com/u/101922388/WiflySanUSB.zip</a></p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-2894">
        <div id="dsq-comment-header-2894" class="dsq-comment-header">
            <cite id="dsq-cite-2894">
                <span id="dsq-author-user-2894">MySensors</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2894" class="dsq-comment-body">
            <div id="dsq-comment-message-2894" class="dsq-comment-message"><p>Hi Jonathan,<br />
You should also check out the MySensors project if you want to add some wireless sensors to your setup. We use the low price nRF24L01 radio together with Arduino.</p>
<p>Website:<br />
<a href="http://mysensors.org/" onclick="__gaTracker('send', 'event', 'outbound-comment', 'http://mysensors.org/', 'http://mysensors.org/');" rel="nofollow">http://mysensors.org/</a></p>
<p>Arduino library code @ Github:<br />
<a href="https://github.com/mysensors/" onclick="__gaTracker('send', 'event', 'outbound-comment', 'https://github.com/mysensors/', 'https://github.com/mysensors/');" rel="nofollow">https://github.com/mysensors/</a></p>
<p>Cheers<br />
Henrik</p>
</div>
        </div>

    </li><!-- #comment-## -->
            </ul>


        </div>

    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'https://www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html';
    var disqus_identifier = 'https://www.twilio.com/blog/2012/08/10734 http://www.twilio.com/blog/?p=10413';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'twilioblog';
    var disqus_title = "DIY Home Automation Using Twilio, PowerSwitch, Arduino, and Pusher";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html?cf_action=sync_comments&amp;post_id=10734';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "https:\/\/www.twilio.com\/blog\/2012\/08\/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html\/trackback"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		
		</main><!-- #main -->
	</div><!-- #primary -->


<div id="secondary" class="widget-area col-md-3 hide-xs" role="complementary">
	<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://www.twilio.com/blog/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside><aside id="text-2" class="widget widget_text">			<div class="textwidget"><p>Power modern communications. Build the next generation of voice and SMS applications.</p>

 <a href="http://twilio.com/try-twilio" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://twilio.com/try-twilio', 'Start Building For Free');" class="btn">Start Building For Free</a></div>
		</aside><style scoped type="text/css">.utcw-8ngloje {word-wrap:break-word}.utcw-8ngloje span,.utcw-8ngloje a{border-style:solid;border-width:1px}.utcw-8ngloje span:hover,.utcw-8ngloje a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-2" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Stack</h1><div class="utcw-8ngloje tagcloud"><a class="tag-link-22 utcw-tag utcw-tag-net" href="https://www.twilio.com/blog/tag/net" style="font-size:16px" title="40 topics">.NET</a> <a class="tag-link-98 utcw-tag utcw-tag-arduino" href="https://www.twilio.com/blog/tag/arduino" style="font-size:16px" title="21 topics">Arduino</a> <a class="tag-link-598 utcw-tag utcw-tag-java" href="https://www.twilio.com/blog/tag/java" style="font-size:16px" title="14 topics">Java</a> <a class="tag-link-600 utcw-tag utcw-tag-javascript" href="https://www.twilio.com/blog/tag/javascript" style="font-size:16px" title="86 topics">JavaScript</a> <a class="tag-link-847 utcw-tag utcw-tag-php" href="https://www.twilio.com/blog/tag/php" style="font-size:16px" title="57 topics">PHP</a> <a class="tag-link-891 utcw-tag utcw-tag-python" href="https://www.twilio.com/blog/tag/python" style="font-size:16px" title="72 topics">Python</a> <a class="tag-link-969 utcw-tag utcw-tag-ruby" href="https://www.twilio.com/blog/tag/ruby" style="font-size:16px" title="69 topics">Ruby</a> <a class="tag-link-2856 utcw-tag utcw-tag-swift" href="https://www.twilio.com/blog/tag/swift" style="font-size:16px" title="22 topics">Swift</a></div></aside><style scoped type="text/css">.utcw-5dkhj5o {word-wrap:break-word}.utcw-5dkhj5o span,.utcw-5dkhj5o a{border-style:solid;border-width:1px}.utcw-5dkhj5o span:hover,.utcw-5dkhj5o a:hover{border-style:solid;border-width:1px}</style><aside id="utcw-3" class="widget widget_utcw widget_tag_cloud"><h1 class="widget-title">Posts By Product</h1><div class="utcw-5dkhj5o tagcloud"><a class="tag-link-2043 utcw-tag utcw-tag-mms" href="https://www.twilio.com/blog/tag/mms" style="font-size:16px" title="50 topics">MMS</a> <a class="tag-link-3513 utcw-tag utcw-tag-programmable-chat" href="https://www.twilio.com/blog/tag/programmable-chat" style="font-size:16px" title="9 topics">Programmable Chat</a> <a class="tag-link-1537 utcw-tag utcw-tag-sip" href="https://www.twilio.com/blog/tag/sip" style="font-size:16px" title="15 topics">SIP</a> <a class="tag-link-1031 utcw-tag utcw-tag-sms" href="https://www.twilio.com/blog/tag/sms" style="font-size:16px" title="372 topics">SMS</a> <a class="tag-link-2871 utcw-tag utcw-tag-taskrouter" href="https://www.twilio.com/blog/tag/taskrouter" style="font-size:16px" title="8 topics">Task Router</a> <a class="tag-link-1199 utcw-tag utcw-tag-twilio-client" href="https://www.twilio.com/blog/tag/twilio-client" style="font-size:16px" title="32 topics">Twilio Client</a> <a class="tag-link-3032 utcw-tag utcw-tag-twilio-video" href="https://www.twilio.com/blog/tag/twilio-video" style="font-size:16px" title="9 topics">Twilio Video</a> <a class="tag-link-1277 utcw-tag utcw-tag-voice" href="https://www.twilio.com/blog/tag/voice" style="font-size:16px" title="172 topics">Voice</a></div></aside><aside id="text-5" class="widget widget_text">			<div class="textwidget"><a href="http://www.twilio.com/docs/tutorials" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/docs/tutorials', '');"><img src="https://www.twilio.com/blog/wp-content/uploads/2016/07/tutorials.png" style="width: 255px" /></a></div>
		</aside><aside id="categories-3" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-13"><a href="https://www.twilio.com/blog/all-things-code" >Code, Tutorials and Hacks</a>
</li>
	<li class="cat-item cat-item-5"><a href="https://www.twilio.com/blog/customer-highlights" >Customer Highlights</a>
</li>
	<li class="cat-item cat-item-7"><a href="https://www.twilio.com/blog/developers-drawing-the-owl" >Developers Drawing The Owl</a>
</li>
	<li class="cat-item cat-item-3"><a href="https://www.twilio.com/blog/news" >News</a>
</li>
	<li class="cat-item cat-item-4"><a href="https://www.twilio.com/blog/stories-from-the-road" >Stories From The Road</a>
</li>
	<li class="cat-item cat-item-8"><a href="https://www.twilio.com/blog/inside-twilio" >The Owl’s Nest: Inside Twilio</a>
</li>
		</ul>
</aside><aside id="text-4" class="widget widget_text">			<div class="textwidget"><div class="tagcloud "><a href="http://www.twilio.com/blog/feed" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.twilio.com/blog/feed', 'RSS Feed');">RSS Feed</a></div></div>
		</aside></div><!-- #secondary -->

		</div><!-- .row -->
	</div><!-- #content.container -->

<div class="" id="footer">
	<div class="container">
		<header>
			<div class="banner"></div>
			<div class="border"></div>
			<div class="stitching"></div>
		</header>
    <div class="row sitemap">
      <div class="row">
        <div class="col-md-2 col-md-offset-1">
          <h4><a href="http://www.twilio.com/company">Company</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/company">About Twilio</a></li>
            <li><a href="http://www.twilio.com/company/nine-values">Our Nine Values</a></li>
            <li><a href="http://www.twilio.com/company/leadership-principles">Our Leadership Principles</a></li>
            <li><a href="http://www.twilio.com/company/management">The Team</a></li>
            <li><a href="http://www.twilio.com/press">Press &amp; Media</a></li>
            <li><a href="http://www.twilio.org/">Twilio.org</a></li>
            <li><a href="http://www.twilio.com/company/jobs">Careers</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <h4><a href="http://www.twilio.com/products">Products</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/voice">Voice</a></li>
            <li><a href="http://www.twilio.com/video">Video</a></li>
            <li><a href="http://www.twilio.com/sms">SMS (Text Messaging)</a></li>
            <li><a href="http://www.twilio.com/mms">MMS (Picture Messaging)</a></li>
            <li><a href="http://www.twilio.com/sms/toll-free">Toll-Free SMS</a></li>
            <li><a href="http://www.twilio.com/sip-trunking">SIP Trunking</a></li>
            <li><a href="http://www.twilio.com/client/mobile">Client Mobile</a></li>
            <li><a href="http://www.twilio.com/webrtc">Client WebRTC</a></li>
            <li><a href="http://www.twilio.com/stun-turn">Network Traversal Service</a></li>
            <li><a href="http://www.twilio.com/taskrouter">TaskRouter</a></li>
            <li><a href="http://www.twilio.com/sms/phone-numbers">Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/sms/shortcodes">Short Codes</a></li>
            <li><a href="http://www.twilio.com/support-plans">Support Plans</a></li>
            <li><a href="http://www.twilio.com/platform">Platform</a></li>
            <li><a href="http://www.twilio.com/lookup">Lookup</a></li>
            <li><a href="http://www.twilio.com/monitor">Monitor</a></li>
            <li><a href="http://www.twilio.com/copilot">Messaging Copilot</a></li>
            <li><a href="http://www.twilio.com/voice/conference">Global Conference</a></li>
            <li><a href="http://www.twilio.com/authy">Authy</a></li>
          </ul>
      </div>
      <div class="col-md-2">
        <h4><a href="http://www.twilio.com/pricing">Pricing</a></h4>
        <ul>
          <li><a href="http://www.twilio.com/voice/pricing">Voice Pricing</a></li>
          <li><a href="http://www.twilio.com/sms/pricing">Messaging Pricing</a></li>
          <li><a href="http://www.twilio.com/sip-trunking/pricing">SIP Trunking Pricing</a></li>
          <li><a href="http://www.twilio.com/client/pricing">Client Pricing</a></li>
          <li><a href="http://www.twilio.com/stun-turn/pricing">Network Traversal Pricing</a></li>
          <li><a href="http://www.twilio.com/taskrouter/pricing">TaskRouter</a></li>
          <li><a href="http://www.twilio.com/lookup#pricing">Lookup</a></li>
          <li><a href="http://www.twilio.com/international">International Coverage</a></li>
        </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/use-cases">Use Cases</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/customers">Customer Stories</a></li>
            <li><a href="http://www.twilio.com/showcase">Showcase</a></li>
            <li><a href="http://www.twilio.com/use-cases/two-factor-authentication">Two-Factor Authentication</a></li>
            <li><a href="http://www.twilio.com/use-cases/appointment-reminders">Appointment Reminders</a></li>
            <li><a href="http://www.twilio.com/use-cases/dispatch-notifications">Dispatch Notifications</a></li>
            <li><a href="http://www.twilio.com/use-cases/eta-alerts">ETA Alerts</a></li>
            <li><a href="http://www.twilio.com/use-cases/automated-surveys">Automated Surveys</a></li>
            <li><a href="http://www.twilio.com/use-cases/masked-phone-numbers">Masked Phone Numbers</a></li>
            <li><a href="http://www.twilio.com/use-cases/visual-estimates">Visual Estimates</a></li>
            <li><a href="http://www.twilio.com/doers">Developer Network</a></li>
            <li><a href="http://www.twilio.com/webinars">Webinars</a></li>
            <li><a href="http://www.twilio.com/white-papers">White Papers</a></li>
          </ul>
      </div>
      <div class="col-md-2">
          <h4><a href="http://www.twilio.com/api">Api &amp; Docs</a></h4>
          <ul>
            <li><a href="http://www.twilio.com/docs/api">API Documentation</a></li>
            <li><a href="http://www.twilio.com/docs/quickstart">Quickstarts</a></li>
            <li><a href="http://www.twilio.com/docs/howto">How Tos</a></li>
            <li><a href="http://www.twilio.com/docs/libraries">Helper Libraries</a></li>
            <li><a href="http://www.twilio.com/docs/security">Security</a></li>
          </ul>
      </div>
    </div>
		<div class="row clear">
			<footer><span>&copy; 2017 Twilio. All rights reserved. <aside>|</aside><a href="http://www.twilio.com/legal/tos">Terms of Service</a><aside>|</aside><a href="http://www.twilio.com/legal/privacy">Privacy Policy</a></span>
			</footer>
		</div>
	</div>
</div>


</div><!-- #page -->

<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201702'></script>







<script type="text/javascript" defer src="https://www.twilio.com/blog/wp-content/cache/autoptimize/js/autoptimize_30cf8936a215677503cd64ef48677239.js"></script></body>

<!-- Mirrored from www.twilio.com/blog/2012/08/diy-home-automation-using-twilio-powerswitch-arduino-and-pusher.html?utm_source=blog&utm_medium=link&utm_campaign=sms-4-lines-april-2014 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 22:09:59 GMT -->
</html>
