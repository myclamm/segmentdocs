<!DOCTYPE html>
<html lang="en" id="radar-guide"  >

  
<!-- Mirrored from stripe.com/radar/guide by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:45:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="csrf-token" content="n14sJPPIo_kNijsSfr0Ddlv56eMkWUkMOH9abyn2sI0GxDhZ9Q1nvMDOHw2ytTYNcodnZHj1iKx5ylBHjCF6_A==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Stripe: Radar Technical Guide</title>

    <meta name="description" content="A detailed primer from Stripe on how machine learning is used to detect and stop fraud.">


    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../img/v3/home/social.png">

    <meta property="og:title" content="Stripe: Radar Technical Guide">
    <meta property="og:url" content="guide.html">
    <meta property="og:description" content="A detailed primer from Stripe on how machine learning is used to detect and stop fraud.">
    <meta property="og:image" content="../img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="../img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Stripe: Radar Technical Guide">
    <meta name="twitter:description" content="A detailed primer from Stripe on how machine learning is used to detect and stop fraud.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-ec238f46e7cb9867e3c1b529e2cfa37b.css&quot;,&quot;v3/external/scroll.min.js&quot;:&quot;/assets/v3/external/scroll.min-edeac478d5b2565d8006373806f6b61c.js&quot;}</script>

      <link rel="stylesheet" href="../assets/v3/default-ef2bff54073622b9e08cf24466b5668f.css">
  <link rel="stylesheet" href="../assets/v3/radar_guide/index-7309c58d50857934f508698eb0610d1c.css">

  <script defer src="../assets/v3/default-70bb9a14949117cf716ae5fc9a2ce709.js"></script>
  <script defer src="../assets/v3/radar_guide/index-2179ca867a0b05dc2d92a7ed9a0df545.js"></script>


    


  </head>

  <body>

    

    <header class='globalNav'>


  <div class="container-lg">
    <ul class="navRoot">


      <li class="navSection logo">
        <a class="rootLink item-home colorize" href="../index.html"><h1><svg width="62" height="25"><title>Stripe</title><path d="M5 10.1c0-.6.6-.9 1.4-.9 1.2 0 2.8.4 4 1.1V6.5c-1.3-.5-2.7-.8-4-.8C3.2 5.7 1 7.4 1 10.3c0 4.4 6 3.6 6 5.6 0 .7-.6 1-1.5 1-1.3 0-3-.6-4.3-1.3v3.8c1.5.6 2.9.9 4.3.9 3.3 0 5.5-1.6 5.5-4.5.1-4.8-6-3.9-6-5.7zM29.9 20h4V6h-4v14zM16.3 2.7l-3.9.8v12.6c0 2.4 1.8 4.1 4.1 4.1 1.3 0 2.3-.2 2.8-.5v-3.2c-.5.2-3 .9-3-1.4V9.4h3V6h-3V2.7zm8.4 4.5L24.6 6H21v14h4v-9.5c1-1.2 2.7-1 3.2-.8V6c-.5-.2-2.5-.5-3.5 1.2zm5.2-2.3l4-.8V.8l-4 .8v3.3zM61.1 13c0-4.1-2-7.3-5.8-7.3s-6.1 3.2-6.1 7.3c0 4.8 2.7 7.2 6.6 7.2 1.9 0 3.3-.4 4.4-1.1V16c-1.1.6-2.3.9-3.9.9s-2.9-.6-3.1-2.5H61c.1-.2.1-1 .1-1.4zm-7.9-1.5c0-1.8 1.1-2.5 2.1-2.5s2 .7 2 2.5h-4.1zM42.7 5.7c-1.6 0-2.5.7-3.1 1.3l-.1-1h-3.6v18.5l4-.7v-4.5c.6.4 1.4 1 2.8 1 2.9 0 5.5-2.3 5.5-7.4-.1-4.6-2.7-7.2-5.5-7.2zm-1 11c-.9 0-1.5-.3-1.9-.8V10c.4-.5 1-.8 1.9-.8 1.5 0 2.5 1.6 2.5 3.7 0 2.2-1 3.8-2.5 3.8z"/></svg></h1></a>
      </li>

      <li class="navSection primary">
        <a class="rootLink item-products hasDropdown colorize" data-dropdown="products">
          Products
        </a>
        <a class="rootLink item-developers hasDropdown colorize" data-dropdown="developers">
          Developers
        </a>
        <a class="rootLink item-company hasDropdown colorize" data-dropdown="company">
          Company
        </a>
      </li>

      <li class="navSection secondary">
        <a class="rootLink item-support colorize" href="https://support.stripe.com/">
          Support
        </a>
        <a class="rootLink item-dashboard colorize" data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">
          Sign in
        </a>
      </li>



      <li class="navSection mobile">
        <a class="rootLink item-mobileMenu colorize"><h2>Menu</h2></a>
        <div class="popup">
          <div class="popupContainer">
            <a class="popupCloseButton">Close</a>
            <div class="mobileProducts">
              <h4>Products</h4>
              <div class="mobileProductsList">
                <ul>
                  <li><a class="linkContainer item-payments" href="../us/payments.html">
                    <svg viewbox="0 0 48 48"><path fill="#87BBFD" class="hover-fillLight" d="M24 48C12.11 48 2.244 39.35.338 28H6.5V9H5.27C9.67 3.515 16.423 0 24 0c13.255 0 24 10.745 24 24S37.255 48 24 48z"/><path fill="#555ABF" class="hover-fillDark" d="M25 21v8H.526A24.082 24.082 0 0 1 0 24 23.908 23.908 0 0 1 6.116 8H31.5c.828 0 1.5.67 1.5 1.5V21h-8zm-10.502-8.995a6.497 6.497 0 1 0 0 12.994 6.497 6.497 0 0 0 0-12.996z"/><path fill="#FFF" d="M39.823 39.276a2.44 2.44 0 0 1-1.76.724H16.5a1.5 1.5 0 0 1-1.5-1.5v-18c0-.828.67-1.5 1.5-1.5h27.693a1.51 1.51 0 0 1 1.484 1.256c.21 1.217.323 2.467.323 3.744 0 5.936-2.355 11.32-6.177 15.276zM33.5 23.002a6.497 6.497 0 1 0 0 12.995 6.497 6.497 0 0 0 .002-12.994z"/></svg>Payments
                  </a></li>
                  <li><a class="linkContainer item-subscriptions" href='../subscriptions.html'>
                    <svg viewbox="0 0 48 48"><path fill="#74E4A2" class="hover-fillLight" d="M24 0c13.255 0 24 10.745 24 24S37.255 48 24 48 0 37.255 0 24 10.745 0 24 0z"/><path fill="#FFF" d="M39.558 30.977c-6.23 6.225-16.304 6.194-22.535-.03l13.975-13.962c-6.232-6.224-16.335-6.224-22.567 0-4.043 4.04-5.456 9.712-4.247 14.896l-.654.174a21.89 21.89 0 0 1-1.536-8.61c.284-11.806 10.003-21.35 21.823-21.446 6.15-.05 11.72 2.42 15.744 6.438 6.23 6.226 6.23 16.318 0 22.542z"/><path fill="#159570" class="hover-fillDark" d="M33.653 21.413c1.43 5.336-1.735 10.82-7.068 12.25-5.332 1.43-10.814-1.736-12.242-7.072-1.43-5.334 1.735-10.82 7.068-12.25 5.334-1.43 10.815 1.738 12.244 7.074z"/></svg>Subscriptions
                  </a></li>
                  <li><a class="linkContainer item-connect" href='../connect.html'>
                    <svg viewbox="0 0 48 48"><path fill="#68D4F8" class="hover-fillLight" d="M48 24c0 13.255-10.745 24-24 24S0 37.255 0 24 10.745 0 24 0c1.363 0 2.698.12 4 .338V15h5v5h14.662c.218 1.302.338 2.637.338 4z"/><path fill="#FFF" d="M16.99 29.966L17 17l-5.55-.006a1.02 1.02 0 0 0-.725.3L2.65 25.446a1.55 1.55 0 0 0-.44 1.28c1.22 9.944 9.1 17.825 19.042 19.047.472.058.945-.104 1.28-.44l8.172-8.076c.192-.193.3-.453.3-.725L31 31l-12.985-.01a1.023 1.023 0 0 1-1.024-1.024z"/><path fill="#217AB7" class="hover-fillDark" d="M47.697 20.195L37.194 30.702a1.03 1.03 0 0 1-.726.3h-5.462V18.03c0-.567-.46-1.025-1.025-1.025H16.994V11.52c0-.274.108-.534.3-.726L27.783.3C38 1.916 46.07 9.98 47.698 20.194z"/></svg>Connect
                  </a></li>
                </ul>
                <ul>
                  <li><a class="linkContainer item-relay" href='../relay.html'>
                    <svg viewbox="0 0 48 48"><path fill="#FFA27B" class="hover-fillLight" d="M24 0c13.255 0 24 10.745 24 24S37.255 48 24 48 0 37.255 0 24 10.745 0 24 0z"/><path fill="#C23D4B" class="hover-fillDark" d="M24 12.5c8.285 0 15 6.828 15 15.25S32.285 43 24 43c-8.284 0-15-6.828-15-15.25S15.716 12.5 24 12.5z"/><path fill="#FFF" d="M25 38.925v6.288a.787.787 0 0 1-.788.787h-.424a.787.787 0 0 1-.788-.788v-6.287c-3.668-.49-6.5-3.623-6.5-7.425a7.5 7.5 0 0 1 15 0c0 3.802-2.832 6.935-6.5 7.425z"/></svg>Relay
                  </a></li>
                  <li><a class="linkContainer item-atlas" href='../atlas.html'>
                    <svg viewbox="0 0 48 48"><path fill="#FCD669" class="hover-fillLight" d="M24 0c13.255 0 24 10.745 24 24S37.255 48 24 48 0 37.255 0 24 10.745 0 24 0z"/><path fill="#CE7C3A" class="hover-fillDark" d="M24.012 1.834c.366.005.73.196.92.575l16.825 33.72c.396.79-.314 1.685-1.175 1.48L24 33.626V1.834h.01z"/><path fill="#FFF" d="M24 1.834v31.794l-16.584 3.98A1.043 1.043 0 0 1 6.24 36.13L23.067 2.41c.195-.39.572-.58.947-.576H24z"/></svg>Atlas
                  </a></li>
                  <li><a class="linkContainer item-radar" href='../radar.html'>
                    <svg viewbox="0 0 48 48"><path class="hover-fillLight" fill="#F6A4EB" d="M41.364 21.886h6.538c.06.697.098 1.4.098 2.114 0 13.255-10.745 24-24 24S0 37.255 0 24 10.745 0 24 0c6.833 0 12.993 2.86 17.364 7.442v14.444z"/><path fill="#FFF" d="M37.746 37.4a1.3 1.3 0 0 1 .92-.38c.72 0 1.303.444 1.303 1.163 0 .503-.353.982-.708 1.292-3.484 3.122-8.325 5.53-13.783 5.53-11.75 0-19.486-9.538-19.486-18.83 0-8.72 7.195-16.19 15.25-16.19s11.227 5.54 11.227 5.54L37.747 37.4z"/><path class="hover-fillDark" fill="#9251AC" d="M47.995 24zm0 0c0-.995-.807-1.974-1.802-1.974-1.15 0-1.8.94-1.8 1.83-.09 3.174-1.228 7.127-3.453 10.182-2.355 3.232-6.91 6.956-13.242 6.956-7.625 0-13.213-5.767-13.213-11.925 0-4.3 2.886-7.17 5.828-7.17 1.588 0 2.48.683 2.965 1.312.362.468 1.063.493 1.482.074L40.968 7.032A23.926 23.926 0 0 1 47.995 24z"/></svg>Radar
                    <span class='new-badge'>New</span>
                  </a></li>
                </ul>
              </div>
            </div>
            <div class="mobileSecondaryNav">
              <ul>
                <li>
                  <a
                    class="item-pricing"
                    href="../us/pricing.html"
                    data-analytics-action="pricing"
                    data-action-source="mobile-nav"
                  >
                    Pricing
                  </a>
                </li>
                  <li><a class="item-workswith" href="../works-with.html">Works with Stripe</a></li>
                <li><a class="item-gallery" href="../customers.html">Customers</a></li>
                <li><a class="item-documentation" href="../docs.html">Documentation</a></li>
              </ul>
              <ul>
                <li><a class="item-about" href="../about.html">About Stripe</a></li>
                <li><a class="item-jobs" href="../jobs.html">Jobs</a></li>
                <li><a class="item-blog" href="../blog.html">Blog</a></li>
              </ul>
            </div>
            <a class="mobileSignIn" data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">Sign in</a>
          </div>
        </div>
      </li>


    </ul>
  </div>



  <div class="dropdownRoot">
    <div class="dropdownBackground">
      <div class="alternateBackground"></div>
    </div>
    <div class="dropdownArrow"></div>
    <div class="dropdownContainer">

      <div class="dropdownSection" data-dropdown="products">
        <div class="dropdownContent">

          <div class="linkGroup">
            <ul class="productsGroup">
              <li><a class="linkContainer item-payments" href="../au/payments.html">
                <svg viewbox="0 0 48 48"><path fill="#87BBFD" class="hover-fillLight" d="M24 48C12.11 48 2.244 39.35.338 28H6.5V9H5.27C9.67 3.515 16.423 0 24 0c13.255 0 24 10.745 24 24S37.255 48 24 48z"/><path fill="#555ABF" class="hover-fillDark" d="M25 21v8H.526A24.082 24.082 0 0 1 0 24 23.908 23.908 0 0 1 6.116 8H31.5c.828 0 1.5.67 1.5 1.5V21h-8zm-10.502-8.995a6.497 6.497 0 1 0 0 12.994 6.497 6.497 0 0 0 0-12.996z"/><path fill="#FFF" d="M39.823 39.276a2.44 2.44 0 0 1-1.76.724H16.5a1.5 1.5 0 0 1-1.5-1.5v-18c0-.828.67-1.5 1.5-1.5h27.693a1.51 1.51 0 0 1 1.484 1.256c.21 1.217.323 2.467.323 3.744 0 5.936-2.355 11.32-6.177 15.276zM33.5 23.002a6.497 6.497 0 1 0 0 12.995 6.497 6.497 0 0 0 .002-12.994z"/></svg>
                <div class='productLinkContent'>
                  <h3 class="linkTitle">Payments</h3>
                  <p class="linkSub">A complete commerce toolkit, built for&nbsp;developers.</p>
                </div>
              </a></li>
              <li><a class="linkContainer item-subscriptions" href='../subscriptions.html'>
                <svg viewbox="0 0 48 48"><path fill="#74E4A2" class="hover-fillLight" d="M24 0c13.255 0 24 10.745 24 24S37.255 48 24 48 0 37.255 0 24 10.745 0 24 0z"/><path fill="#FFF" d="M39.558 30.977c-6.23 6.225-16.304 6.194-22.535-.03l13.975-13.962c-6.232-6.224-16.335-6.224-22.567 0-4.043 4.04-5.456 9.712-4.247 14.896l-.654.174a21.89 21.89 0 0 1-1.536-8.61c.284-11.806 10.003-21.35 21.823-21.446 6.15-.05 11.72 2.42 15.744 6.438 6.23 6.226 6.23 16.318 0 22.542z"/><path fill="#159570" class="hover-fillDark" d="M33.653 21.413c1.43 5.336-1.735 10.82-7.068 12.25-5.332 1.43-10.814-1.736-12.242-7.072-1.43-5.334 1.735-10.82 7.068-12.25 5.334-1.43 10.815 1.738 12.244 7.074z"/></svg>
                <div class='productLinkContent'>
                  <h3 class="linkTitle">Subscriptions</h3>
                  <p class="linkSub">The smart engine for recurring&nbsp;payments.</p>
                </div>
              </a></li>
              <li><a class="linkContainer item-connect" href='../connect.html'>
                <svg viewbox="0 0 48 48"><path fill="#68D4F8" class="hover-fillLight" d="M48 24c0 13.255-10.745 24-24 24S0 37.255 0 24 10.745 0 24 0c1.363 0 2.698.12 4 .338V15h5v5h14.662c.218 1.302.338 2.637.338 4z"/><path fill="#FFF" d="M16.99 29.966L17 17l-5.55-.006a1.02 1.02 0 0 0-.725.3L2.65 25.446a1.55 1.55 0 0 0-.44 1.28c1.22 9.944 9.1 17.825 19.042 19.047.472.058.945-.104 1.28-.44l8.172-8.076c.192-.193.3-.453.3-.725L31 31l-12.985-.01a1.023 1.023 0 0 1-1.024-1.024z"/><path fill="#217AB7" class="hover-fillDark" d="M47.697 20.195L37.194 30.702a1.03 1.03 0 0 1-.726.3h-5.462V18.03c0-.567-.46-1.025-1.025-1.025H16.994V11.52c0-.274.108-.534.3-.726L27.783.3C38 1.916 46.07 9.98 47.698 20.194z"/></svg>
                <div class='productLinkContent'>
                  <h3 class="linkTitle">Connect</h3>
                  <p class="linkSub">Everything platforms need to get sellers&nbsp;paid.</p>
                </div>
              </a></li>
              <li><a class="linkContainer item-relay" href='../relay.html'>
                <svg viewbox="0 0 48 48"><path fill="#FFA27B" class="hover-fillLight" d="M24 0c13.255 0 24 10.745 24 24S37.255 48 24 48 0 37.255 0 24 10.745 0 24 0z"/><path fill="#C23D4B" class="hover-fillDark" d="M24 12.5c8.285 0 15 6.828 15 15.25S32.285 43 24 43c-8.284 0-15-6.828-15-15.25S15.716 12.5 24 12.5z"/><path fill="#FFF" d="M25 38.925v6.288a.787.787 0 0 1-.788.787h-.424a.787.787 0 0 1-.788-.788v-6.287c-3.668-.49-6.5-3.623-6.5-7.425a7.5 7.5 0 0 1 15 0c0 3.802-2.832 6.935-6.5 7.425z"/></svg>
                <div class='productLinkContent'>
                  <h3 class="linkTitle">Relay</h3>
                  <p class="linkSub">Sell your products in other mobile&nbsp;apps.</p>
                </div>
              </a></li>
              <li><a class="linkContainer item-atlas" href='../atlas.html'>
                <svg viewbox="0 0 48 48"><path fill="#FCD669" class="hover-fillLight" d="M24 0c13.255 0 24 10.745 24 24S37.255 48 24 48 0 37.255 0 24 10.745 0 24 0z"/><path fill="#CE7C3A" class="hover-fillDark" d="M24.012 1.834c.366.005.73.196.92.575l16.825 33.72c.396.79-.314 1.685-1.175 1.48L24 33.626V1.834h.01z"/><path fill="#FFF" d="M24 1.834v31.794l-16.584 3.98A1.043 1.043 0 0 1 6.24 36.13L23.067 2.41c.195-.39.572-.58.947-.576H24z"/></svg>
                <div class='productLinkContent'>
                  <h3 class="linkTitle">Atlas</h3>
                  <p class="linkSub">A new way to start an internet&nbsp;business.</p>
                </div>
              </a></li>
              <li><a class="linkContainer item-radar" href='../radar.html'>
                <svg viewbox="0 0 48 48"><path class="hover-fillLight" fill="#F6A4EB" d="M41.364 21.886h6.538c.06.697.098 1.4.098 2.114 0 13.255-10.745 24-24 24S0 37.255 0 24 10.745 0 24 0c6.833 0 12.993 2.86 17.364 7.442v14.444z"/><path fill="#FFF" d="M37.746 37.4a1.3 1.3 0 0 1 .92-.38c.72 0 1.303.444 1.303 1.163 0 .503-.353.982-.708 1.292-3.484 3.122-8.325 5.53-13.783 5.53-11.75 0-19.486-9.538-19.486-18.83 0-8.72 7.195-16.19 15.25-16.19s11.227 5.54 11.227 5.54L37.747 37.4z"/><path class="hover-fillDark" fill="#9251AC" d="M47.995 24zm0 0c0-.995-.807-1.974-1.802-1.974-1.15 0-1.8.94-1.8 1.83-.09 3.174-1.228 7.127-3.453 10.182-2.355 3.232-6.91 6.956-13.242 6.956-7.625 0-13.213-5.767-13.213-11.925 0-4.3 2.886-7.17 5.828-7.17 1.588 0 2.48.683 2.965 1.312.362.468 1.063.493 1.482.074L40.968 7.032A23.926 23.926 0 0 1 47.995 24z"/></svg>
                <div class='productLinkContent'>
                  <h3 class="linkTitle">Radar <span class='new-badge'>New</span></h3>
                  <p class="linkSub">Modern tools to help beat fraud, integrated with your&nbsp;payments.</p>
                </div>
              </a></li>
            </ul>
          </div>

          <ul class="linkGroup linkList prodsubGroup">
              <li>
                <a
                  class="linkContainer item-pricing"
                  href="../us/pricing.html"
                  data-analytics-action="pricing"
                  data-action-source="nav"
                >
                  <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path fill="#6772E5" class="hover-fillDark" d="M15.998 6.98c0 .24-.083.458-.217.635a1.373 1.373 0 0 1-.187.24l-7.736 7.742c-.534.534-1.4.534-1.934 0L1.41 11.08a1.37 1.37 0 0 1 0-1.935l7.736-7.743c.15-.15.33-.255.52-.32a.918.918 0 0 1 .16-.048c.136-.03.275-.034.412-.02l4.192.002c.867 0 1.57.665 1.57 1.486l-.002 4.48zm-2.366-3.62a1.254 1.254 0 0 0-1.772 1.77 1.254 1.254 0 0 0 1.772-1.77z"/><path fill="#87BBFD" class="hover-fillLight" d="M5.143 10.396l3.253-3.254c.2-.2.523-.2.722 0l.723.723c.2.2.2.524.003.723L6.59 11.842c-.2.2-.524.2-.724 0l-.723-.724a.51.51 0 0 1 0-.723z"/></svg>Pricing</h3>
                </a>
              </li>
              <li><a class="linkContainer item-workswith" href="../works-with.html">
                <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path class="hover-fillLight" fill="#87BBFD" d="M15.998 12.495a1.03 1.03 0 0 1-.595.908L8.93 16.395a1.018 1.018 0 0 1-.86 0l-6.473-2.992a1.03 1.03 0 0 1-.594-.908V4.51c.006-.2.07-.39.18-.55L8.5 7.338l7.32-3.38c.108.16.172.35.178.55v7.984z"/><path class="hover-fillDark" fill="#6772E5" d="M15.998 12.495a1.03 1.03 0 0 1-.595.908L8.93 16.395a1.026 1.026 0 0 1-.43.095V7.34l7.32-3.38c.11.16.173.35.18.55v7.984z"/><path class="hover-fillLight" fill="#87BBFD" d="M8.5 5C6.567 5 5 4.228 5 3.275v-1.15h.098c.36.768 1.742 1.34 3.402 1.34 1.66.002 3.043-.572 3.402-1.34H12v1.15C12 4.228 10.433 5 8.5 5z"/></svg>Works with Stripe</h3>
              </a></li>
          </ul>

        </div>
      </div>

      <div class="dropdownSection" data-dropdown="developers">
        <div class="dropdownContent">

          <div class="linkGroup documentationGroup">
            <a class="linkContainer withIcon item-documentation" href="../docs.html">
              <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path fill="#87BBFD" class="hover-fillLight" d="M.945 1.998h3.632C6.744 1.998 8.5 3.005 8.5 4.83v11.583c-.512 0-1.015-.337-1.33-.59-1.03-.828-3.057-.828-5.222-.828H.945A.944.944 0 0 1 0 14.052V2.944C0 2.422.423 2 .945 2z"/><path fill="#6772E5" class="hover-fillDark" d="M16.055 1.998h-3.632C10.257 1.998 8.5 3.005 8.5 4.83v11.583c.512 0 1.015-.337 1.33-.59 1.03-.828 3.057-.828 5.222-.828h1.003A.944.944 0 0 0 17 14.05V2.945A.944.944 0 0 0 16.055 2z"/></svg>Documentation</h3>
              <span class="linkSub">Start integrating Stripe’s products and&nbsp;tools.</span>
            </a>
            <div class="documentationArticles">
              <ul>
                <li><h4>Get started</h4></li>
                <li><a href="../docs/custom-form.html">Stripe.js</a></li>
                <li><a href='../docs/checkout/tutorial.html'>Checkout</a></li>
                <li><a href='../docs/mobile.html'>Mobile apps</a></li>
                <li><a href='../docs/libraries.html'>Libraries</a></li>
              </ul>
              <ul>
                <li><h4>Popular topics</h4></li>
                <li><a href='../docs/apple-pay.html'>Apple Pay</a></li>
                <li><a href='../docs/testing.html'>Testing</a></li>
                <li><a href='../docs/checklist.html'>Launch checklist</a></li>
                <li><a href='../docs/libraries.html#third-party-plugins'>Plug-ins</a></li>
              </ul>
            </div>
          </div>

          <ul class="linkGroup linkList developersGroup">
            <li><a class="linkContainer item-apiReference" href="../docs/api.html">
              <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path d="M2 15h13M2 11h13M2 7h13M2 3h13" fill="none" stroke="#6772e5" class="hover-strokeDark" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Full API Reference</h3>
            </a></li>
            <li><a class="linkContainer item-apiStatus" href="https://status.stripe.com/">
              <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path d="M1 9h2.95l3-6.5 3 12 3-5.45L16 9" fill="none" stroke="#6772e5" class="hover-strokeDark" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>API Status</h3>
            </a></li>
            <li><a class="linkContainer item-openSource" href="../open-source.html">
              <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path fill="#6772E5" class="hover-fillDark" d="M8.5 17a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17zM6.987 6.078a.684.684 0 0 0-.968-.968L3.116 8.012a.684.684 0 0 0 0 .967l2.9 2.9a.684.684 0 0 0 .97-.967l-2.42-2.418 2.42-2.42zm6.996 1.95L11.08 5.123a.684.684 0 0 0-.966.968l2.418 2.42-2.418 2.417a.684.684 0 0 0 .967.967l2.904-2.902a.684.684 0 0 0 0-.966z"/></svg>Open Source</h3>
            </a></li>
          </ul>

        </div>
      </div>

      <div class="dropdownSection" data-dropdown="company">
        <div class="dropdownContent">

          <ul class="linkGroup linkList companyGroup">
            <li><a class="linkContainer item-about" href="../about.html">
              <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path fill="#6772E5" class="hover-fillDark" d="M8.5 17a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17zm.178-10.89c.76 0 1.726.278 2.486.69V4.443c-.828-.33-1.656-.502-2.484-.502-2.028 0-3.41 1.06-3.41 2.83 0 2.77 3.8 2.32 3.8 3.513 0 .462-.37.612-.93.612-.827 0-1.867-.366-2.706-.823v2.388c.93.4 1.843.592 2.705.592 2.077 0 3.48-1.027 3.48-2.827 0-2.98-3.82-2.447-3.82-3.572-.003-.39.352-.542.877-.542z"/></svg>About Stripe</h3>
            </a></li>
            <li><a class="linkContainer item-customers" href="../customers.html">
              <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path fill="#87BBFD" class="hover-fillLight" d="M2 16a1 1 0 0 1-1-1V9a4 4 0 0 1 8 0v7H2zm3-9a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/><path fill="#6772E5" class="hover-fillDark" d="M15 16H9a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h.55a2.5 2.5 0 0 1 4.9 0H15a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1z"/><path fill="#87BBFD" class="hover-fillLight" d="M11 12h2v4h-2v-4z"/></svg>Customers</h3>
            </a></li>
            <li><a class="linkContainer item-jobs" href="../jobs.html">
              <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path fill="#6772E5" class="hover-fillDark" d="M1.5 4h14c.828 0 1.5.67 1.5 1.5v8a1.5 1.5 0 0 1-1.5 1.5h-14A1.5 1.5 0 0 1 0 13.5v-8C0 4.67.67 4 1.5 4z"/><path fill="#87BBFD" class="hover-fillLight" d="M13 15V4h2v11h-2zM2 4h2v11H2V4z"/><path fill="#6772E5" class="hover-fillDark" d="M11.5 3.5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1V4H4v-.5A2.5 2.5 0 0 1 6.5 1h4A2.5 2.5 0 0 1 13 3.5V4h-1.5v-.5z"/></svg>Jobs</h3>
            </a></li>
          </ul>

          <div class="linkGroup blogGroup">
            <a class="linkContainer withIcon item-blog" href="../blog.html">
              <h3 class="linkTitle linkIcon"><svg width="17" height="17"><path fill="#87BBFD" class="hover-fillLight" d="M1 4h4.5v11H1.75A1.75 1.75 0 0 1 0 13.25V5a1 1 0 0 1 1-1z"/><path fill="#6772E5" class="hover-fillDark" d="M14 15H2v-.025a2.243 2.243 0 0 0 2-2.225V3a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v9a3 3 0 0 1-3 3zm1-11H6v3h9V4z"/></svg>From the blog</h3>
            </a>
            <ul class="blogPosts">
              <li><a href="https://stripe.com/blog/atlas-guide">
                <span class='title '>Starting a real business</span>
                
              </a></li>
              <li><a href="https://stripe.com/blog/android-sdk-updates">
                <span class='title '>Android SDK updates</span>
                
              </a></li>
              <li><a href="https://stripe.com/blog/reproducible-research">
                <span class='title '>Reproducible research: Stripe’s approach to data science</span>
                
              </a></li>
            </ul>
          </div>

        </div>
      </div>

    </div>
  </div>

</header>


    <div class="globalContent">
      
<div class='StripeBackground'>
  <div class='stripe s0'></div>
  <div class='stripe s1'></div>
  <div class='stripe s2'></div>
  <div class='stripe s3'></div>
  <div class='stripe s4'></div>
</div>

<header class='container-lg content-container guide-header'>
  <div class='logo'>
    <a href='../radar.html' class='common-ProductLockupBack'>
      <figure class='icon'><svg width="48" height="48">
  <path class='hover-fillLight' fill="#F6A4EB" d="M41.364 21.886h6.538c.06.697.098 1.4.098 2.114 0 13.255-10.745 24-24 24S0 37.255 0 24 10.745 0 24 0c6.833 0 12.993 2.86 17.364 7.442v14.444z"/>
  <path fill="#FFF" d="M37.746 37.4a1.3 1.3 0 0 1 .92-.38c.72 0 1.303.444 1.303 1.163 0 .503-.353.982-.708 1.292-3.484 3.122-8.325 5.53-13.783 5.53-11.75 0-19.486-9.538-19.486-18.83 0-8.72 7.195-16.19 15.25-16.19s11.227 5.54 11.227 5.54L37.747 37.4z"/>
  <path class='hover-fillDark' fill="#9251AC" d="M47.995 24zm0 0c0-.995-.807-1.974-1.802-1.974-1.15 0-1.8.94-1.8 1.83-.09 3.174-1.228 7.127-3.453 10.182-2.355 3.232-6.91 6.956-13.242 6.956-7.625 0-13.213-5.767-13.213-11.925 0-4.3 2.886-7.17 5.828-7.17 1.588 0 2.48.683 2.965 1.312.362.468 1.063.493 1.482.074L40.968 7.032A23.926 23.926 0 0 1 47.995 24z"/>
</svg></figure>
      <span>Radar</span>
    </a>
  </div>
  <h1 class='common-SuperTitle'>A primer on machine learning for fraud&nbsp;detection</h1>
</header>

<div class='container-lg guide-columns guide-cover'>

  <section class='guide-content guide-introduction' id='introduction'>
    <p>Stripe builds products that enable hundreds of thousands of e-commerce companies, SaaS businesses, on-demand marketplaces, nonprofits, and platforms to conduct business online. One inescapable facet of online commerce<span class='pad-small'>—</span>and one that, unfortunately, frequently comes as an unpleasant surprise<span class='pad-small'>—</span>is fraud. Unlike businesses that accept payments in person, internet businesses are liable for fraudulent purchases<span class='pad-small'>—</span>this despite the fact that they are no more experts on fraud than their brick-and-mortar counterparts. As a result, many internet businesses have had to build up teams of fraud analysts and expend engineering effort on fraud detection systems. At Stripe, we want to help businesses focus on their product and customer experiences and not on fraud, so we’ve developed <a class='common-Link' href='../radar.html'>Stripe Radar</a>, a suite of modern tools for fraud detection and&nbsp;prevention.</p>

    <p>The goal of this guide is to provide more detail on the <strong>machine learning</strong> that powers the core of Radar, explain how we think about the efficacy and performance of fraud detection systems, and describe how other tools in the Radar suite can help businesses optimize their outcomes. Before getting into details, though, it’s worth spending a little time on the nature and consequences of online&nbsp;fraud.</p>

    <h3 id='credit-card-fraud'><a class='scroll toc-entry' href='#credit-card-fraud'>Credit card fraud</a></h3>

    <p>Online payments fraud at a basic level involves a fraudster obtaining someone else’s credit card number and using it to make unauthorized purchases. For example, the fraudster might buy a high value item<span class='pad-small'>—</span>say a watch<span class='pad-small'>—</span>from an internet business for $1,000 and then resell it on eBay or Craigslist for $200. The real cardholder will eventually discover the unauthorized transaction and initiate a dispute (also known as a “chargeback”) with his or her bank. (While there are different types of disputes, our focus here is on payments that are disputed with fraud as the specified&nbsp;reason.)</p>

    <p>If the cardholder’s bank decides that the transaction actually was fraudulent, then the cardholder is made whole but the business is left responsible for the cost of the fraud. This cost is not only the value of the item sold (however much the business paid for the watch) but also any additional fees levied for the dispute. When a business is being targeted by fraudsters, these costs can add up and have a significant impact on the business’s financials. <strong>False negatives</strong><span class='pad-small'>—</span>or fraud that is not identified and prevented before a dispute occurs<span class='pad-small'>—</span>are not the only way in which fraud can have a real, financial impact on a&nbsp;business.</p>

    <p><strong>False positives</strong><span class='pad-small'>—</span>or legitimate transactions that are blocked by a fraud detection system<span class='pad-small'>—</span>are also costly: when a customer tries to make a purchase but is prevented from doing so, the business takes both a gross profit and a reputational&nbsp;hit.</p>

    <p>We’ll examine this more closely later, but there is a tradeoff between false negatives and false positives<span class='pad-small'>—</span>the fewer you have of the former, the more you need to tolerate of the latter (and vice versa). Businesses need to decide how to trade off the two. Each false negative incurs a certain cost (the cost of goods sold and the fee for disputes), as does each false positive (the margin on the goods sold). If a business’s margins are small, a false negative is very costly and a false positive is not so costly and so the business should lean towards casting a wide net when trying to stop potential fraud (even if that means more false positives). If margins are large, the reverse is&nbsp;true.</p>

    <p>It’s important to note, however, that businesses are not always truly free to control this tradeoff. If a business’s fraud rate is greater than 1%, card networks like Visa and Mastercard may revoke its ability to process any credit card payments. The exact definition of “fraud rate” and how long it needs to be above 1% before serious action is taken varies between card brands, but the important point is that businesses only have room to make tradeoffs per their utility functions if their fraud rate is below 1%. Once it is above 1%, they must reduce the rate at all costs, even if that means accepting a false positive rate that is higher than is economically rational for the business. Doing otherwise exposes the business to the existential risk of losing the ability to accept&nbsp;payments.</p>
  </section>

  <div class='guide-sidebar'>
    <aside class='guide-byline'>
      <img src='../img/about/team/mlm.jpg'>
      <h3>Michael Manapat</h3>
      <p>Michael leads work on Stripe’s machine learning products, including Radar. Prior to Stripe, he was an engineer at Google and a postdoctoral fellow in and lecturer on applied mathematics at Harvard. He received a Ph.D. in mathematics from&nbsp;MIT.</p>
    </aside>
    <div class='sidebar-box'>
      <ul class='toc'>
        <li><a class='common-Link scroll' href='#introduction'>Introduction</a></li>
      </ul>
      <section class='cta'>
        <h3>Interested in Stripe&nbsp;Radar?</h3>
        <section class='common-ButtonGroup buttons'>
          <a href='../radar.html' class='common-Button common-Button--dark'>Learn more</a>
        </section>
      </section>
    </div>
  </div>

</div>

<div class='guide-main'>
  <div class='container-lg content-container guide-content'>

    <section id='stripe-radar-and-the-stripe-network'>
      <h2><a class='scroll toc-entry' href='#stripe-radar-and-the-stripe-network'>Stripe Radar and the Stripe&nbsp;“network”</a></h2>

      <p><a href='../radar.html' class='common-Link'>Radar</a> is a suite of products from Stripe for detecting and preventing fraud. Radar’s core is powered by adaptive <strong>machine learning,</strong> the result of years of data science and infrastructure work by Stripe’s machine learning teams. Radar’s algorithms evaluate every transaction for fraud risk and take action appropriately. High risk payments are blocked by default, but Radar provides tools so that users can specify when other actions should be&nbsp;taken.</p>

      <p>Radar is built directly into Stripe and works out of the box. Other fraud prevention solutions generally require a substantial amount of both upfront and ongoing investment. First, businesses must integrate with the product. This involves engineering work to send data on relevant events and payments and to process the assessments returned by the service. Second<span class='pad-small'>—</span>at least for fraud detection systems that involve machine learning<span class='pad-small'>—</span>businesses must spend several weeks manually <strong>labelling</strong> payments, explicitly indicating for each of their payments whether it is fraudulent or not, before the fraud system has a chance to be effective. And because fraud patterns change, a diligent business will need to keep labelling transactions indefinitely. Radar, on the other hand, receives information directly from the usual Stripe payment flow and taps into data from card networks and&nbsp;issuers.</p>

      <p>We can be more concrete about the benefits of Radar in these two areas. Because Radar is an integral part of Stripe, aggregate data relevant to fraud from all of Stripe’s 100,000+ businesses<span class='pad-small'>—</span>collected automatically because these businesses have already integrated with Stripe for payments<span class='pad-small'>—</span>is used to improve our fraud detection ability. While properties that can be “read off” a single credit card payment<span class='pad-small'>—</span>for example, the country in which the card was issued, the IP address from which the payment was made, and the user’s email domain<span class='pad-small'>—</span>provide valuable signal when predicting whether the payment is likely to be fraudulent, we’ve found that some of the most predictive signals come from behavioral data aggregated over time. For example, the number of countries in which a card was used (across all the businesses working with Stripe) in the recent past is a very precise indicator of&nbsp;fraud.</p>

      <p>Radar analyzes every single credit card payment made across all of the hundreds of thousands of Stripe users to build up this sort of behavioral data. When a business using Stripe sees a card for the first time, there’s an <strong>80% chance</strong> that we’ve seen the card elsewhere on the Stripe network in the past. Previous encounters with a card offer a significant amount of data to inform our risk&nbsp;assessments.</p>

      <p>The fact that Radar receives information on disputes directly from Stripe’s banking and financial partners means that ongoing labelling of transactions by businesses is not necessary. Labelling is a labor-intensive&nbsp;      process that also “bakes in” the biases of the people doing the labelling. A particularly aggressive (or lenient) analyst can detrimentally affect the performance of a fraud detection system that relies on these manual labels. Radar learns about the “ground truth” of fraud directly from comprehensive and authoritative dispute information from card issuers, and its machine learning starts providing protection on Day 1.</p>

      <p>Let’s get started with a more detailed look at machine learning and how we use it at&nbsp;Stripe.</p>
    </section>

    <section id='machine-learning-basics'>
      <h2><a class='scroll toc-entry' href='#machine-learning-basics'>The basics of&nbsp;machine&nbsp;learning</a></h2>

      <p><strong>Machine learning</strong> refers to a body of techniques for taking large amounts of data and using that data to produce <strong>models</strong> that encode the relationships in that&nbsp;data.</p>

      <p>One of the main applications of machine learning is <strong>prediction:</strong> we want to predict the value of some output (in this case, a boolean value that is <code>true</code> if the payment is fraudulent and <code>false</code> otherwise) given some input values (for example, the country the card was issued in and the number of distinct countries the card was used from across the Stripe network in the past day). We determine how to make that prediction based on previous examples of input and output data. We can further divide the prediction problem into two types of&nbsp;tasks:</p>

      <ul>
        <li>For <strong>classification</strong> tasks, we want to predict if a sample is in one class or another (for example, we'd like to predict whether a transaction in the “class” of fraudulent payments or in the “class” of legitimate&nbsp;ones).</li>
        <li>For <strong>regression</strong> tasks, we want to predict a numerical output value associated with the inputs (for example, we might want to predict the lifetime value, in dollars, of a new&nbsp;customer).</li>
      </ul>

      <p>While the distinction between classification and regression is helpful in practice, they involve fundamentally similar techniques. Classification can be viewed as the regression problem of predicting the probability that a sample is in a&nbsp;class.</p>

      <p>The data that is used to <strong>train</strong> (or generate) the models consists of records (often obtained from historical data) with both the output value and the various input values as we have in the following (highly simplified)&nbsp;example:</p>

      <figure id='training-data' class='training-data'>
        <a class='figure-anchor scroll' href='#training-data'>&para;</a>
        <table>
          <thead>
            <tr>
              <th>Amount in USD</th>
              <th>Card country</th>
              <th>Countries card used from&nbsp;(24h)</th>
              <th>Fraud?</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>$10.00</td>
              <td><span class='common-FlagIcon common-FlagIcon--us'>US</span></td>
              <td>1 <span class='country-dot'></span></td>
              <td><span class='fraud-status'>No</span></td>
            </tr>
            <tr>
              <td>$10.00</td>
              <td><span class='common-FlagIcon common-FlagIcon--ca'>CA</span></td>
              <td>2 <span class='country-dot'></span><span class='country-dot'></span></td>
              <td><span class='fraud-status'>No</span></td>
            </tr>
            <tr>
              <td>$10.00</td>
              <td><span class='common-FlagIcon common-FlagIcon--ca'>CA</span></td>
              <td>1 <span class='country-dot'></span></td>
              <td><span class='fraud-status'>No</span></td>
            </tr>
            <tr class='fraud-row'>
              <td>$10.00</td>
              <td><span class='common-FlagIcon common-FlagIcon--us'>US</span></td>
              <td>1 <span class='country-dot'></span></td>
              <td><span class='fraud-status'>Yes</span></td>
            </tr>
            <tr class='fraud-row'>
              <td>$30.00</td>
              <td><span class='common-FlagIcon common-FlagIcon--us'>US</span></td>
              <td>1 <span class='country-dot'></span></td>
              <td><span class='fraud-status'>Yes</span></td>
            </tr>
            <tr class='fraud-row'>
              <td>$99.00</td>
              <td><span class='common-FlagIcon common-FlagIcon--ca'>CA</span></td>
              <td>1 <span class='country-dot'></span></td>
              <td><span class='fraud-status'>Yes</span></td>
            </tr>
            <tr class='fraud-row'>
              <td>$15.00</td>
              <td><span class='common-FlagIcon common-FlagIcon--ca'>CA</span></td>
              <td>3 <span class='country-dot'></span><span class='country-dot'></span><span class='country-dot'></span></td>
              <td><span class='fraud-status'>Yes</span></td>
            </tr>
            <tr>
              <td>$70.00</td>
              <td><span class='common-FlagIcon common-FlagIcon--us'>US</span></td>
              <td>1 <span class='country-dot'></span></td>
              <td><span class='fraud-status'>No</span></td>
            </tr>
          </tbody>
        </table>
      </figure>

      <p>While there are only three inputs in this example, in practice machine learning models often have hundreds or thousands of inputs. The output of the machine learning algorithm might be a model like the following <strong>decision&nbsp;tree:</strong></p>

      <figure id='decision-tree' class='decision-tree'>
        <a class='figure-anchor scroll' href='#decision-tree'>&para;</a>
        <div class='align'>
          <div class='centered block'>
            <div class='condition'>
              <span>Amount in USD</span>
              <em>&gt;</em>
              <strong>$20</strong>
            </div>
            <div class='columns stretch'>
              <div class='centered'>
                <span class='decision left'>YES</span>
              </div>
              <div class='space large'></div>
              <div class='centered'>
                <span class='decision right'>NO</span>
              </div>
            </div>
          </div>
        </div>
        <div class='columns'>
          <div class='align right'>
            <div class='centered block'>
              <div class='condition'>
                <span>Card country</span>
                <em>=</em>
                <strong>CA</strong>
              </div>
              <div class='columns stretch'>
                <div class='centered'>
                  <span class='decision'>YES</span>
                  <span class='score bad'>100%</span>
                </div>
                <div class='centered'>
                  <span class='decision'>NO</span>
                  <span class='score'>50%</span>
                </div>
              </div>
            </div>
          </div>
          <div class='space'></div>
          <div class='align left'>
            <div class='centered block'>
              <div class='condition'>
                <span>Countries card used from</span>
                <em>></em>
                <strong>2</strong>
              </div>
              <div class='columns stretch'>
                <div class='centered'>
                  <span class='decision'>YES</span>
                  <span class='score bad'>100%</span>
                </div>
                <div class='centered'>
                  <span class='decision'>NO</span>
                  <span class='score good'>25%</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class='caption'>
          <span>Fraud probability</span>
        </div>
      </figure>

      <p>When we observe a new transaction, we can look at the country in which the card was issued, the number of countries from which the card was used in the past day, and the payment amount in USD  and traverse the tree “<a href='https://en.wikipedia.org/wiki/Twenty_Questions' class='common-Link'>20-questions</a> style” until we reach one of its “leaves.” Each leaf consists of all the samples in the data set (the table above) satisfying the question-answer pairs along the path we followed down the tree, and the probability that we think the new transaction is fraudulent is the number of samples in the leaf that are fraudulent divided by the total number of samples in the leaf. Put another way, the tree answers the question, “of transactions in our data set with properties similar to the transaction we’re examining now, what fraction were actually fraudulent?” The machine learning part is concerned with the construction of the tree<span class='pad-small'>—</span>what questions do we ask, in what order, to maximize the chances that we can distinguish between the two classes accurately? Decision trees are particularly easy to visualize and reason about, but there are many different learning algorithms, and they each have their own unique ways of representing the relationships we are trying to&nbsp;model.</p>

      <p>Today machine learning models are prevalent<span class='pad-small'>—</span>powering, behind the scenes, many of the products we interact with frequently<span class='pad-small'>—</span>and generally much more sophisticated than the toy model&nbsp;above:</p>

      <ul>
        <li>Google, Apple, Amazon, and Microsoft use machine learning to power their intelligent assistants (Google Assistant, Siri, Alexa, and Cortana). Machine learning is used in a number of ways<span class='pad-small'>—</span>from predicting the text represented by a fragment of speech (with models generated from input data consisting of a huge number of samples of text in both written and spoken form) to extracting the semantic intent of the&nbsp;question.</li>

        <li>Amazon uses machine learning for its recommendation system: based on what people have purchased after buying a particular item, Amazon can determine what three or four other items to recommend to people to maximize the probability of a follow-up&nbsp;purchase.</li>

        <li>Google and Facebook use machine learning to determine what ads to show you for a given search query or in your news feed. In both cases, inputs include the content of the ad and other contextual information (like the query text or the content of an adjacent news feed post) and the model output is the probability that you click on the ad (which both Google and Facebook would like to&nbsp;maximize).</li>
      </ul>

      <p>And, most relevant to this discussion, machine learning is the basis for Stripe Radar, which seeks to predict which of your payments are&nbsp;fraudulent.</p>

      <h3 id='how-does-machine-learning-work'><a href='#how-does-machine-learning-work' class='scroll toc-entry'>How does machine learning&nbsp;work?</a></h3>

      <p>Academic machine learning courses will usually focus on the <strong>modeling</strong> process<span class='pad-small'>—</span>the methods for translating data (e.g., the table above) into the <strong>models</strong> (e.g., the decision tree), which are the algorithms that tell you how input values (the country in which the card was issued, the number of countries from which the card was used, etc.) map to output values (was the transaction fraudulent or not?). The process that takes the input data table above and produces the “best” tree is an example of a particular machine learning method. Modeling involves a number of steps, and while we won’t go into too much detail, a high-level overview&nbsp;follows.</p>

      <p>First, we need to <strong>obtain training data.</strong> Before we can begin automatically detecting fraud, we need to have seen plenty of examples of fraud. For each example, we need to have recorded (or be able to compute retrospectively) a range of input properties that could be useful in making future predictions about the output value. These input properties are called <strong>features</strong> and the collection of inputs together for a given sample a <strong>feature vector.</strong> In our example above, the feature vector had a length of three (the country in which the card was issued, the number of countries from which the card was used in the past day, and the payment amount in USD). However, feature vectors with hundreds or thousands of features are not uncommon. In fact, Radar uses hundreds of features and most of them are “behavioral aggregates” computed from across the Stripe network. The output value<span class='pad-small'>—</span>in our running example, the boolean as to whether or not the transaction was fraudulent<span class='pad-small'>—</span>is often called a <strong>target</strong> or <strong>label.</strong> The training data thus consists of a large number of feature vectors and their corresponding output values. Coming up with good features is a difficult data science and engineering problem that we talk more about in the next&nbsp;section.</p>

      <p>Second, we need to <strong>train a model.</strong> Given the training data, we need a method for producing our predictive model. As mentioned above, there are two general classes of prediction tasks in machine learning: <strong>regression</strong> and <strong>classification.</strong> In the former, we are trying to predict a numerical output (e.g., the amount of fraud loss). In the latter, we are trying to predict the class to which the sample belongs (e.g., is this payment in the class of fraudulent payments?). Machine learning <strong>classifiers</strong> (which are models for the classification problem) generally do not just output a class label<span class='pad-small'>—</span>they typically assign probabilities that the given sample belongs to each possible class. For example, the output of a fraud classifier might be an assessment that the payment has a 65% of being fraudulent and a 35% chance of being&nbsp;legitimate.</p>

      <p>There are many machine learning techniques for each of the two types of tasks. For regression, one could use traditional models like <strong>linear regression</strong> or <strong>regression trees.</strong> For classification, one could use <strong>logistic regression, decision trees,</strong> or <strong>random forests,</strong> among&nbsp;others.</p>

      <aside class='learn-more-box'>
        <a href='https://www.infoq.com/presentations/stripe-machine-learning'>
          <div class='hero' style='background-image: url(../img/v3/radar_guide/talk_qcon.jpg)'></div>
          <div class='text'>
            <svg width="43" height="43"><path class="hover-fillDark" d="M21.5 0C33.374 0 43 9.626 43 21.5S33.374 43 21.5 43 0 33.374 0 21.5 9.626 0 21.5 0z"/><path fill="#FFF" d="M15.995 14.034v14.932c0 .776.82 1.265 1.485.884l13.017-7.466a1.025 1.025 0 0 0 0-1.768L17.48 13.15c-.664-.382-1.485.107-1.485.884z"/></svg>
            <p>Learn more about the model development process</p>
          </div>
        </a>
      </aside>

      <p><strong><a href='http://neuralnetworksanddeeplearning.com/' class='common-Link'>Neural nets and deep learning</a></strong>, inspired by the architecture of neurons in the brain, are also applicable to both types of tasks. (They are responsible for many of the stunning recent advances in the field, including <a href='https://en.wikipedia.org/wiki/AlphaGo_versus_Lee_Sedol' class='common-Link'>AlphaGo’s defeat of Lee Sedol</a>.) However, for most industrial machine learning applications, traditional models do just fine. Though we constantly iterate on and experiment with our modeling process at Stripe, we’ve found that random forests (a generalization of decision trees like the one above) work well for a wide swath of the machine learning problems we&nbsp;face.</p>

      <h3 id='feature-engineering'><a class='scroll toc-entry' href='#feature-engineering'>Feature engineering</a></h3>

      <p>Machine learning courses (and <a href='https://www.kaggle.com/' class='common-Link'>Kaggle</a> competitions) would have you believe that the hard work is done once you’ve produced a machine learning model from data<span class='pad-small'>—</span>they don’t cover where the data comes from or what you have to do to operationalize the model for your business. Before the model training process, you have to build the data infrastructure to take the data from your business (wherever it may be stored) and consolidate it in a way that’s useful to train models. There’s also heavy lifting after the model has been produced: you still need to integrate the new model into your business’s operational&nbsp;flows.</p>

      <p>One of the most involved parts of industrial machine learning is feature engineering. Feature engineering consists of both the formulation (based on extensive knowledge of the problem domain) of features that have predictive value and the engineering to make the values of those features available both for model training and for model evaluation in&nbsp;"production."</p>

      <p>For example, a Stripe data scientist may have a hunch that a useful feature is a boolean indicating whether the card payment is coming from one of the two IP addresses from which we’ve seen the card across Stripe most frequently in the past (two because people use their cards both from home and from work). In this case the idea is intuitive but generally these hunches come from examining thousands of cases of&nbsp;fraud.</p>

      <p>Once we have the feature idea, we need to compute its historical values so that we can train a new model including the feature<span class='pad-small'>—</span>this is the process of adding a new column to the “table” of data we use to produce our model. To do this for our candidate feature, for every payment in Stripe’s history, we need to compute the two most frequent IP addresses from which preceding payments were made with the card. We might do this in a distributed fashion with a <a href='http://hadoop.apache.org/' class='common-Link'>Hadoop</a> job, but even then we may find that the job takes too much time (or memory). We might then try optimizing the computation by using a space-saving <strong>probabilistic data structure.</strong> Even for features that are intuitively simple, there can be a substantial amount of work to produce the data for model&nbsp;training.</p>

      <p>Once we have a model that incorporates the feature (we’ll talk about how we determine if the model is effective in the next section), we need to deploy it to production. While we have all feature values for historical payments from jobs like the one described above, we need to be able to compute the value of every feature for every new payment in real-time, when an API call is made to Stripe to create the payment, since we want to be able to block all transactions that our classifier believes are likely to be fraudulent. This computation is entirely separate from the one used to produce training data<span class='pad-small'>—</span>we need to maintain up-to-date state on the two most frequently used IP addresses for every card ever seen at Stripe, and fetching and updating those counts needs to be fast because those operations happen as part of the Stripe API&nbsp;flow.</p>

      <p> Lastly, it would be terribly inefficient if we had to go through this process for every feature idea. Ideally, there would be a way to specify a feature in a declarative way, and supporting infrastructure should automatically make the historical values of the feature available for training and the current values of the features available in production with suitably low latency. This is one of the infrastructure problems Stripe’s machine learning engineers work&nbsp;on.</p>

      <p class='callout'>If you’re interested in working on machine learning products at Stripe, <a class='common-Link' href='../jobs.html'>get in&nbsp;touch</a>!</p>
    </section>

    <section id='evaluating-machine-learning-models'>
      <h2><a class='scroll toc-entry' href='#evaluating-machine-learning-models'>Evaluating machine learning&nbsp;models</a></h2>

      <p>Once we’ve developed a machine learning classifier for fraud that uses hundreds of features and assigns a probability (or <strong>score</strong>) that the payment is fraud to every incoming transaction, we need to determine how effective the model is at detecting&nbsp;fraud.</p>

      <h3 id='key-terms'><a href='#key-terms' class='scroll toc-entry'>Key terms</a></h3>

      <p>To better understand how we evaluate our machine learning systems, it’s useful to define some key&nbsp;terms.</p>

      <figure id='classifiers' class='classifiers'>
        <a class='figure-anchor scroll' href='#classifiers'>&para;</a>
        <div class='graph'>
          <div class='neg'>
            <div class='fraud'>
              <span>False negatives</span>
              <ul class='charges'>
                <li></li> <li></li> <li></li> <li></li> <li></li>
                <li></li> <li></li> <li></li> <li></li> <li></li>
                <li></li>
              </ul>
            </div>
            <div class='legit'>
              <span>True negatives</span>
              <ul class='charges'>
                <li></li> <li></li> <li></li> <li></li> <li></li>
                <li></li> <li></li> <li></li> <li></li> <li></li>
                <li></li> <li></li>
              </ul>
            </div>
          </div>
          <div class='pos-pointer'></div>
          <div class='shadow'>
            <div class='fraud'></div>
            <div class='legit'></div>
          </div>
          <div class='pos'>
            <div class='fraud'>
              <span>True positives</span>
              <ul class='charges'>
                <li></li> <li></li> <li></li> <li></li> <li></li>
                <li></li> <li></li> <li></li>
              </ul>
            </div>
            <div class='legit'>
              <span>False positives</span>
              <ul class='charges'>
                <li></li> <li></li> <li></li> <li></li> <li></li>
                <li></li> <li></li> <li></li>
              </ul>
            </div>
          </div>
        </div>
        <div class='legend'>
          <span class='fraud'>Fraudulent charges</span>
          <span class='blocked'>Blocked charges</span>
          <span class='legit'>Legitimate charges</span>
        </div>
      </figure>

      <p>Let’s start by supposing we’ve created a <strong>policy</strong> to block a payment if the machine learning model assigns the transaction a probability of being fraudulent of at least <code>0.7</code>. (We write this as <code>P(fraud)<span class='pad-large'>&gt;</span>0.7</code>). Here are some quantities useful for reasoning about the performance of our model and&nbsp;policy:</p>

      <ol>
        <li><strong>Precision:</strong> The precision of our policy is the fraction of transactions that we block that are actually fraudulent. The higher the precision is, the fewer <strong>false positives</strong> there are. Let’s say out of 10 transactions, <code>P(fraud)<span class='pad-large'>&gt;</span>0.7</code> for 6 and, of those 6, 4 are actually fraudulent. The precision is then&nbsp;<code>4<span class='pad-small'>/</span>6<span class='pad-large'>=</span><strong>0.66</strong></code>. </li>

        <li> <strong>Recall:</strong> Also known as <strong>sensitivity</strong> or the <strong>true positive rate,</strong> recall is the fraction of all fraud that is caught by our policy, i.e., the fraction of fraud for which <code>P(fraud)<span class='pad-large'>&gt;</span>0.7</code>. The higher the recall is, the fewer <strong>false negatives</strong> there are. Let’s say out of 10 transactions, 5 are actually fraudulent. If 4 of these transactions are assigned a <code>P(fraud)<span class='pad-large'>&gt;</span>0.7</code> by our model, then recall is&nbsp;<code>4<span class='pad-small'>/</span>5<span class='pad-large'>=</span><strong>0.8</strong></code>. </li>

        <li> <strong>False positive rate:</strong> The false positive rate is the fraction of all legitimate payments that are incorrectly blocked by our policy. Let’s say out of 10 transactions, 5 are legitimate. If 2 of these transactions are assigned a <code>P(fraud)<span class='pad-large'>&gt;</span>0.7</code> by our model, then the false positive rate is&nbsp;<code>2<span class='pad-small'>/</span>5<span class='pad-large'>=</span><strong>0.4</strong></code>. </li>
      </ol>

      <p>While there are other quantities that are used when evaluating a <strong>classifier,</strong> we’ll focus on these&nbsp;three.</p>

      <h3 id='precision-recall-and-roc-curves'><a href='#precision-recall-and-roc-curves' class='scroll toc-entry'>Precision-recall and ROC&nbsp;curves</a></h3>

      <p>The next natural question is what good values are for the precision, recall, and false positive rate. In a theoretically ideal world, precision would be <code>1.0</code> (that is, 100% of transactions that you classify as fraud are actually fraud), which would make your false positive rate <code>0</code> (you didn’t incorrectly classify a single legitimate transaction as fraudulent), and recall would also be <code>1.0</code> (100% of fraud is identified as&nbsp;such).</p>

      <p>In reality, there is a tradeoff between precision and recall<span class='pad-small'>—</span>as you increase the probability threshold for blocking, precision will increase (since the criterion for blocking is more stringent) and recall will decrease (since fewer transactions match the high probability criterion). As you decrease the probability threshold, the reverse is generally true: precision will decrease and recall will increase. For a given model, a precision-recall curve captures the tradeoff between precision and recall as the policy threshold is&nbsp;varied:</p>

      <figure id='precision-recall-curve' class='curve-graph pr'>
        <a class='figure-anchor scroll' href='#precision-recall-curve'>&para;</a>
        <h4 class='common-Uppercase'>Precision-recall curve</h4>
        <div class='graph-container'>
          <div class='graph'>
            <img src='../img/v3/radar_guide/curve_pr.svg'>
            <div class='curve-labels'>
              <label class='great'><span>Great</span></label>
              <label class='good'><span>Good</span></label>
              <label class='okay'><span>Okay</span></label>
            </div>
            <div class='points'>
              <span class='high label-left'></span>
              <span class='low label-up-right'></span>
            </div>
          </div>
          <div class='axis-container x'>
            <div class='axis x'>
              <label><span><code>0.0</code></span></label>
              <label class='title'><span>Recall</span></label>
              <label><span><code>1.0</code></span></label>
            </div>
          </div>
          <div class='axis-container y'>
            <div class='axis y'>
              <label><span><code>1.0</code></span></label>
              <label class='title'><span>Precision</span></label>
              <label><span><code>0.0</code></span></label>
            </div>
          </div>
          <div class='point-labels'>
            <label class='left high'><span>High score threshold for blocking</span></label>
            <label class='right low'><span>Low score threshold for blocking</span></label>
          </div>
        </div>
      </figure>

      <p>As our model gets better overall<span class='pad-small'>—</span>because we add features that are good predictors of fraud, tweak other model parameters, use more and more data from across the Stripe network as training inputs, and so forth<span class='pad-small'>—</span>the precision-recall curve will change, as depicted in the example above. As it controls the tradeoff for businesses on Stripe, we closely monitor the impact on the precision-recall curve when our data scientists and machine learning engineers modify&nbsp;models.</p>

      <p>When considering a precision-recall graph, it’s important to distinguish between the two notions of “performance.” On its own, a model is  better overall the closer it hugs the top-right of the chart (that is, where precision and recall are both <code>1.0</code>). However, operationalizing a model usually requires the selection of an <strong>operating point</strong> on the precision-recall curve (in our case, the policy threshold for blocking a transaction), which controls the concrete impact using the model has on a&nbsp;business.</p>

      <p>Put simplistically, there are two problems: the <strong>data science</strong> problem of producing a good machine learning model by adding the right features (which controls the shape of the precision-recall curve) and the <strong>business</strong> problem of picking a policy for actioning a given machine learning model’s outputs (which controls where on the curve we're&nbsp;operating).</p>

      <p>Another curve that is examined when evaluating a machine learning model is the <strong>ROC curve.</strong> (ROC is short for “receiver operating characteristic," a relic of the curve’s origin in signal processing applications.) The ROC curve is a plot of the false positive rate (on the x-axis) and the true positive rate (which is the same as the recall) on the y-axis for various values of the policy&nbsp;threshold.</p>

      <figure id='roc-curve' class='curve-graph roc'>
        <a class='figure-anchor scroll' href='#roc-curve'>&para;</a>
        <h4 class='common-Uppercase'>ROC curve example</h4>
        <div class='graph-container'>
          <div class='graph'>
            <img src='../img/v3/radar_guide/curve_roc.svg'>
            <div class='curve-labels'>
              <label class='great'><span>Great</span></label>
              <label class='good'><span>Good</span></label>
              <label class='okay'><span>Okay</span></label>
            </div>
            <div class='points'>
              <span class='high label-up-left'></span>
              <span class='low label-down-right'></span>
            </div>
          </div>
          <div class='axis-container x'>
            <div class='axis x'>
              <label><span><code>0.0</code></span></label>
              <label class='title'><span>False positive rate</span></label>
              <label><span><code>1.0</code></span></label>
            </div>
          </div>
          <div class='axis-container y'>
            <div class='axis y'>
              <label><span><code>1.0</code></span></label>
              <label class='title'><span>True positive rate (recall)</span></label>
              <label><span><code>0.0</code></span></label>
            </div>
          </div>
          <div class='point-labels'>
            <label class='left high'><span>High score threshold for blocking</span></label>
            <label class='right low'><span>Low score threshold for blocking</span></label>
          </div>
        </div>
      </figure>

      <p>The ideal ROC will hug the top left of the graph (where recall is <code>1.0</code> and the false positive rate is <code>0.0</code>), and as the model improves the ROC will move and more in that direction. One way to capture the overall quality of the model is by computing the area under the curve (or <strong>AUC</strong>); in the ideal case, the AUC will be <code>1.0</code>. When developing our models, we look to see how the precision-recall curve, the ROC curve, and the AUC&nbsp;change.</p>

      <h3 id='score-distributions'><a href='#score-distributions' class='scroll toc-entry'>Score distributions</a></h3>

      <p>Imagine that we have a model that randomly assigns a probability of fraud between <code>0.0</code> and <code>1.0</code> to a transaction. Practically, this model does nothing to discriminate between legitimate and fraudulent transactions and is of little use to us. This randomness is captured by the <strong>score distribution</strong> of the model<span class='pad-small'>—</span>the fraction of transactions getting each possible score. In the completely random case, the score distribution would be close to&nbsp;uniform:</p>

      <figure id='score-distribution-random' class='score-dist-diagram'>
        <a class='figure-anchor scroll' href='#score-distribution-random'>&para;</a>
        <main>
          <img src='../img/v3/radar_guide/score_dist_0.svg'>
          <div class='x-axis'>
            <span class='label min'><code>0.0</code></span>
            <span class='label title'>Score Distribution – <code>P(fraud)</code></span>
            <span class='label max'><code>1.0</code></span>
          </div>
        </main>
      </figure>

      <p>A model will have a uniform score distribution like the above if, for example, the model has no features that are even remotely predictive of fraud. As a model is improved<span class='pad-small'>—</span>by adding predictive features, training on more data, and so forth<span class='pad-small'>—</span>its power to discriminate between the fraudulent and legitimate classes will increase and the score distribution will become more bimodal, with peaks around the scores of <code>0.0</code> and&nbsp;<code>1.0</code>.</p>

      <figure id='score-distribution-efficient' class='score-dist-diagram'>
        <a class='figure-anchor scroll' href='#score-distribution-efficient'>&para;</a>
        <main>
          <img src='../img/v3/radar_guide/score_dist_1.svg'>
          <div class='x-axis'>
            <span class='label min'><code>0.0</code></span>
            <span class='label title'>Score Distribution – <code>P(fraud)</code></span>
            <span class='label max'><code>1.0</code></span>
          </div>
        </main>
      </figure>

      <p>On its own, a bimodal distribution does not tell you that a model is good. (A vacuous model that randomly assigns probabilities of just <code>0.0</code> and <code>1.0</code> would also have a bimodal score distribution.) However, in the presence of evidence that transactions with a low score are not fraudulent and transactions with a high score are fraudulent, an increasingly bimodal distribution is a sign of improved efficacy for a&nbsp;model.</p>

      <h3 id='computing-precision-and-recall'><a href='#computing-precision-and-recall' class='scroll toc-entry'>Computing precision and&nbsp;recall</a></h3>

      <p>We can compute the metrics above in two different contexts: during model training, using the historical data that drives the model development process, and after model deployment, using production data<span class='pad-small'>—</span>i.e., data from the world when the model is already being used to take action by, say, blocking transactions if&nbsp;<code>P(fraud)<span class='pad-large'>&gt;</span>0.7</code>.</p>

      <p>For the former, data scientists will typically take the training data they have (recall the table from above) and randomly assign some fraction of the records to a <strong>training set</strong> and the other records to a <strong>validation set.</strong> One could imagine that the first 80% of rows go into the former and the last 20% to the latter, for&nbsp;example.</p>

      <p>The training set is the data fed into a machine learning method to produce a model as described above. Once we have a candidate model, we can then use it to assign scores to each sample in the validation set. The validation set scores together with their output values are used to compute the ROC and precision-recall curves, the score distributions, and so forth. We split data into separate training and validation sets so that we have metrics that are an accurate measure of the predictive power of the model. Every sample in the training set (by virtue of being data on which the model is trained) is in some sense “baked in” to the model, and thus the predictive performance of the model on the training set will generally be better than it is on new data that hasn’t been seen before. Testing on a validation set makes our model assessment more&nbsp;accurate.</p>

      <aside class='learn-more-box'>
        <a href='https://www.youtube.com/watch?v=QWCSxAKR-h0'>
          <div class='hero' style='background-image: url(../img/v3/radar_guide/talk_pydata.jpg)'></div>
          <div class='text'>
            <svg width="43" height="43"><path class="hover-fillDark" d="M21.5 0C33.374 0 43 9.626 43 21.5S33.374 43 21.5 43 0 33.374 0 21.5 9.626 0 21.5 0z"/><path fill="#FFF" d="M15.995 14.034v14.932c0 .776.82 1.265 1.485.884l13.017-7.466a1.025 1.025 0 0 0 0-1.768L17.48 13.15c-.664-.382-1.485.107-1.485.884z"/></svg>
            <p>How Stripe approaches counterfactual analysis</p>
          </div>
        </a>
      </aside>

      <p>Once we put a model into production<span class='pad-small'>—</span>because the validation set metrics suggest we can use the model effectively<span class='pad-small'>—</span>there is the separate but related question of how we continuously monitor the performance of our model-policy pair. For payments that have scores below the threshold for blocking, we can observe the ultimate outcome<span class='pad-small'>—</span>was the transaction disputed by the cardholder as fraud? Payments that have scores above the threshold, however, are blocked, and so we can’t know what their outcomes would have been. Computing the full production precision-recall or ROC curve is thus more involved than computing the validation curves because it involves <strong>counterfactual analysis</strong><span class='pad-small'>—</span>we need to obtain statistically sound estimates of what would have happened even to the payments we blocked. Stripe has developed methods to do this, which you can learn more about from the referenced&nbsp;talk.</p>

      <p>We’ve just described a few of the measures of model efficacy that data scientists look at when developing machine learning models. Next, we’ll talk about how businesses should think about fraud prevention<span class='pad-small'>—</span>much of what we discussed above (for example, the inverse relationship between precision and recall) will be useful for obtaining an accurate picture of how fraud affects your&nbsp;business.</p>

    </section>

    <section id='fraud-prevention-performance'>
      <h2><a class='scroll toc-entry' href='#fraud-prevention-performance'>Reasoning about fraud prevention system&nbsp;performance</a></h2>

      <p>Fraud prevention platforms will often advertise a single number to capture performance, but fixating just on one number can result in choices that are not optimal for your business. (This is perhaps unsurprising since the metric that fraud teams own is usually one related to fraud rate<span class='pad-small'>—</span>they’re not responsible for lost revenue, which is harder to identify than fraud&nbsp;losses.)</p>

      <p>Here are some illustrations of the real-world implications of the false positive-false negative (or precision-recall)&nbsp;tradeoff:</p>

      <ul>
        <li>If you’re only optimizing the dispute rate, we could trivially reduce it to zero by blocking every payment. Needless to say, this would be disastrous for your business. While our ridiculous “model” would stop all fraud, it would do so at the expense of a terrible false positive rate (all legitimate transactions are also&nbsp;blocked).</li>

        <li>Focusing just on a low <strong>false positive rate</strong> in isolation can also lead you astray. You can trivially make the false positive rate zero by not blocking any fraud, but more seriously, a low false positive rate does you no good if your business’s dispute rate nears 1% (which is the upper limit imposed across almost all card networks)<span class='pad-small'>—</span>you need to reduce fraud significantly even if it means tolerating many false&nbsp;positives.</li>
      </ul>

      <p>While these examples might seem contrived, we’ve found that businesses will often overemphasize false negatives<span class='pad-small'>—</span>they’re very concerned about fraud that is missed<span class='pad-small'>—</span>and underemphasize false positives. This often results in generally ineffective and costly brute-force measures like blocking all international cards, or all IP addresses from a certain region, or all cards of a certain type. Machine learning systems aren’t immune to biases like this<span class='pad-small'>—</span>ones that depend primarily on human labelling learn to reproduce those biased decisions. The fact that Stripe gets all dispute information directly from card networks and issuers means that this is not an issue for&nbsp;Radar.</p>

      <p>We’ll give one more example of the subtlety involved in reasoning about system efficacy: is the existence of your fraud prevention system (even if it may be catching a substantial amount of fraud) actually making you money? It’s possible that it’s not if the system results in more legitimate transactions getting blocked (per fraudulent transaction blocked) than is appropriate for your&nbsp;business.</p>

      <p>Let’s start with a simple calculation<span class='pad-small'>—</span>imagine we’re selling a widget for $10 that costs us $4 to make. For a legitimate sale, our profit is $6. On the other hand, a fraudulent transaction costs us $4 (the cost of producing the widget) as well as a $15 chargeback fee (a total of $19&nbsp;lost).</p>

      <p>Given these numbers, we should be willing to forego <code>$19<span class='pad-small'>/</span>$6<span class='pad-large'>=</span><strong>3.17</strong></code> legitimate transactions if that means avoiding 1 fraudulent transaction. Put another way, as long as 1 out of every 4.17 transactions we block is actually fraudulent, then we are increasing our profit by having the fraud detection and blocking system in place. For the numbers in this simplified example, we call <code>1<span class='pad-small'>/</span>(1<span class='pad-large'>+</span>3.17)<span class='pad-large'>=</span><strong>0.24</strong></code> the <strong>break-even precision.</strong> If the system’s precision is less than <code>0.24</code>, you are actually making less money from having it in place, even if it has lowered your chargeback rate&nbsp;substantially!</p>

      <figure id='break-even-calculator' class='break-even-calculator'>
        <a class='figure-anchor scroll' href='#break-even-calculator'>&para;</a>
        <h4 class='common-Uppercase'>Approximate model for break-even precision</h4>

        <main>
          <p>
            If your <em>average sale</em> is
            <strong class='scrubber' id='bec-sale' data-value='26' data-min='1' data-max='10000' data-sensitivity='1'>
              $<span class='bec-sale' data-prec='0'></span>
            </strong>
            with a margin of
            <em>
              <strong class='scrubber' id='bec-margin' data-value='8' data-min='1' data-max='100' data-sensitivity='0.5'>
                <span class='bec-margin' data-prec='0'></span>%
              </strong>
              ,
            </em>
            your
            <em>
              profit per sale is
              <strong>
                <span class='has-hint'>
                  <span class='hint'>
                    $<span class='bec-sale'></span> &times; <span class='bec-margin'></span>%
                  </span>
                  $<span class='bec-profit'></span></span></strong>.
            </em>
          </p>
          <p>
            On average, if your product costs
            <strong class='has-hint'>
              <span class='hint'>
                $<span class='bec-sale'></span> – $<span class='bec-profit'></span>
              </span>
              $<span class='bec-lostcost'></span></strong>
            to produce and you’re levied a chargeback fee of
            <em>
              <strong class='scrubber' id='bec-fee' data-value='15' data-min='0' data-max='100' data-sensitivity='0.25'>
                $<span class='bec-fee' data-prec='0'></span>
              </strong>
              ,
            </em>
            your total loss for a <em>fraudulent sale</em> is
            <strong>
              <span class='has-hint'>
                <span class='hint'>
                  $<span class='bec-lostcost'></span> + $<span class='bec-fee'></span>
                </span>
                $<span class='bec-avgfraud'></span></span></strong>.
          </p>
          <p>
            Therefore, <em>one fraudulent sale</em> costs you the profit of
            <em>
              <strong class='has-hint'>
                <span class='hint'>
                  $<span class='bec-avgfraud'></span> / $<span class='bec-profit'></span>
                </span>
                <span class='bec-onefraud'></span></strong>
              legitimate sales
            </em>
            and your
            <em>
              break-even precision is
              <strong>
                <span class='has-hint'>
                  <span class='hint'>
                    1 / ( 1 + <span class='bec-onefraud'></span> )
                  </span>
                  <span class='bec-prec'></span>%</span></strong>.
            </em>
          </p>
        </main>
      </figure>

      <p>While there might still be times when you’ll have to tolerate a precision lower than the break-even value, such as if your business is nearing the critical 1% chargeback rate limit, in general you should be thinking about how all the various performance measures relate and what the right tradeoffs are given your particular circumstances.&nbsp;</p>
    </section>

    <section id='rules-and-manual-reviews'>
      <h2><a class='scroll toc-entry' href='#rules-and-manual-reviews'>Improving performance with rules and manual&nbsp;reviews</a></h2>

      <p>Alongside the more automatic machine learning algorithms, Stripe Radar also lets individual businesses compose customized rules (for example, “block all transactions above $1,000 when the IP country does not match the card’s country.”) and manually review flagged payments in the&nbsp;<a href='https://dashboard.stripe.com/' class='common-Link'>Dashboard</a>.</p>

      <p>Such rules can be seen as simple “models” (they can be represented as decision trees, after all!) and they should be evaluated<span class='pad-small'>—</span>with a full consideration of the tradeoff between precision and recall<span class='pad-small'>—</span>in the same way as models. When you create a rule with Radar, we’ll present historical statistics on the number of matching transactions that were actually disputed, refunded, or accepted to help aid with these&nbsp;calculations.</p>

      <p>Just as important, rules and manual review allow users to change the shape of the precision-recall curve in their favor by adding in proprietary, business-specific logic (rules) or by expending some additional effort (manual review).&nbsp;</p>

      <p>If you realize that the the machine learning algorithms are frequently missing a certain type of fraud particular to your business (and that fraud is easily identifiable to you), you can compose a rule to automatically block it. That specific intervention will increase recall with little cost to precision, in effect moving the operating point along a less steep, more favorable precision-recall&nbsp;curve.</p>

      <p>By sending some classes of transactions to manual review instead of blocking them outright, you can gain precision without a hit to recall. Similarly, by sending some transactions to manual review instead of allowing them outright, you can gain recall without a hit to precision.&nbsp;</p>

      <p>Of course, in these cases, you are paying for these gains with additional human work (and exposing yourself to the accuracy of your team’s assessments), but having manual review and rules as a additional tools gives you another lever to optimize fraud&nbsp;outcomes.</p>

    </section>

    <section id='next-steps'>
      <h2><a class='scroll toc-entry' href='#next-steps'>Next steps</a></h2>

      <p>We hope this guide helps you understand how machine learning is applied to fraud prevention at Stripe and how to gauge the efficacy of your fraud systems. You can <a href='../radar.html' class='common-Link'>learn more</a> about Radar’s features or <a href='../docs/radar.html' class='common-Link'>explore our&nbsp;docs</a>.</p>

      <p>If you have any questions or feedback about this guide or Stripe Radar, or are interested in working on machine learning products like Radar, <a href='mailto:michael.manapat@stripe.com' class='common-Link'>please reach&nbsp;out</a>!</p>
    </section>

  </div>
</div>


    </div>

    <footer class='globalFooter'>


    <article class='globalFooterCTA'>
    <div class='container-lg'>

      <div class='content'>
        <h1 class='title'>
          Introducing Stripe Radar.
          <span class='subtitle'>Modern tools to prevent fraud, fully integrated with your&nbsp;payments.</span>
        </h1>
      </div>

      <div class='common-ButtonGroup buttons'>
        <a class='common-Button common-Button--default' href="../radar.html">Learn more</a>
        <a href='../contact/sales.html' class='common-Button'>Get in touch</a>
      </div>

    </div>
  </article>


  <article class='globalFooterNav'>
  <div class='container-lg'>

    <ul class="metaNav">

        <li class="select country">
          <a class="rootLink item-country"><svg width="13" height="13"><path d="M1.543,7L6,7,5.979,11.462a0.536,0.536,0,0,0,1.016.24l4.941-9.931a0.537,0.537,0,0,0-.72-0.721L1.3,5.985A0.537,0.537,0,0,0,1.543,7Z"/></svg>
United States</a>

          <div class="popup countryPicker">
            <div class="countryList">
              <h4><a href="https://dashboard.stripe.com/login">Sign up instantly</a></h4>
              <div class="columns">
                <ul class='optionList'>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--au"
                      href="https://stripe.com/country?country=AU&amp;redirect=/radar/guide"
                      
                     ><span>Australia</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--at"
                      href="https://stripe.com/country?country=AT&amp;redirect=/radar/guide"
                      
                     ><span>Austria</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--be"
                      href="https://stripe.com/country?country=BE&amp;redirect=/radar/guide"
                      
                     ><span>Belgium</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--ca"
                      href="https://stripe.com/country?country=CA&amp;redirect=/radar/guide"
                      
                     ><span>Canada</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--dk"
                      href="https://stripe.com/country?country=DK&amp;redirect=/radar/guide"
                      
                     ><span>Denmark</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--fi"
                      href="https://stripe.com/country?country=FI&amp;redirect=/radar/guide"
                      
                     ><span>Finland</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--fr"
                      href="https://stripe.com/country?country=FR&amp;redirect=/radar/guide"
                      
                     ><span>France</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--de"
                      href="https://stripe.com/country?country=DE&amp;redirect=/radar/guide"
                      
                     ><span>Germany</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--hk"
                      href="https://stripe.com/country?country=HK&amp;redirect=/radar/guide"
                      
                     ><span>Hong Kong</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--ie"
                      href="https://stripe.com/country?country=IE&amp;redirect=/radar/guide"
                      
                     ><span>Ireland</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--it"
                      href="https://stripe.com/country?country=IT&amp;redirect=/radar/guide"
                      
                     ><span>Italy</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                </ul>
                <ul class='optionList'>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--jp"
                      href="https://stripe.com/country?country=JP&amp;redirect=/radar/guide"
                      
                     ><span>Japan</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--lu"
                      href="https://stripe.com/country?country=LU&amp;redirect=/radar/guide"
                      
                     ><span>Luxembourg</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--nl"
                      href="https://stripe.com/country?country=NL&amp;redirect=/radar/guide"
                      
                     ><span>Netherlands</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--no"
                      href="https://stripe.com/country?country=NO&amp;redirect=/radar/guide"
                      
                     ><span>Norway</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--pt"
                      href="https://stripe.com/country?country=PT&amp;redirect=/radar/guide"
                      
                     ><span>Portugal</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--sg"
                      href="https://stripe.com/country?country=SG&amp;redirect=/radar/guide"
                      
                     ><span>Singapore</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--es"
                      href="https://stripe.com/country?country=ES&amp;redirect=/radar/guide"
                      
                     ><span>Spain</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--se"
                      href="https://stripe.com/country?country=SE&amp;redirect=/radar/guide"
                      
                     ><span>Sweden</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--ch"
                      href="https://stripe.com/country?country=CH&amp;redirect=/radar/guide"
                      
                     ><span>Switzerland</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--gb"
                      href="https://stripe.com/country?country=GB&amp;redirect=/radar/guide"
                      
                     ><span>United Kingdom</span
                     >
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--us selected"
                      href="https://stripe.com/country?country=US&amp;redirect=/radar/guide"
                      
                     ><span>United States</span
                     >
                    </a>
                  </li>
                </ul>
               </div>
            </div>
            <div class="sidebar">
              <div class="countryList">
                <h4><a href="../global.html">Request an invite</a></h4>
                <ul class='optionList'>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--br"
                      href="../global.html#BR"
                      
                     ><span>Brazil</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--mx"
                      href="../global.html#MX"
                      
                     ><span>Mexico</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                  <li>
                    <a class="common-FlagIcon common-FlagIcon--nz"
                      href="../global.html#NZ"
                      
                     ><span>New Zealand</span
                     ><em class="badge">Preview</em>
                    </a>
                  </li>
                </ul>
              </div>
              <a class="globalLink" href='../global.html'>
                <span>More countries coming soon.</span>
                <strong>Sign up to get notified</strong>
              </a>
            </div>
          </div>

        </li>

        <li class="select language">
          <a class="rootLink item-language"><svg width="13" height="13"><path d="M8.079,9.837L6.116,12.3A0.654,0.654,0,0,1,5,11.841V9.852C2.488,9.351,1,7.6,1,5.5,1,3.015,3.087,1,6.5,1S12,3.015,12,5.5A4.5,4.5,0,0,1,8.079,9.837Z"/></svg>
English</a>

          <div class="popup languagePicker">
            <ul class='optionList'>
              <li>
                <a href="https://stripe.com/locale?locale=de&amp;redirect=/radar/guide"
                  
                  
                ><span>Deutsch</span
                >
                </a>
              </li>
              <li>
                <a href="https://stripe.com/locale?locale=en&amp;redirect=/radar/guide"
                  class="selected"
                  
                ><span>English</span
                >
                </a>
              </li>
              <li>
                <a href="https://stripe.com/locale?locale=es&amp;redirect=/radar/guide"
                  
                  
                ><span>Español</span
                >
                </a>
              </li>
              <li>
                <a href="https://stripe.com/locale?locale=fr&amp;redirect=/radar/guide"
                  
                  
                ><span>Français</span
                >
                </a>
              </li>
              <li>
                <a href="https://stripe.com/locale?locale=ja&amp;redirect=/radar/guide"
                  
                  
                ><span>日本語</span
                >
                </a>
              </li>
            </ul>
          </div>

        </li>

      <li class="space"></li>
      <li class="copyright">&copy; Stripe</li>
    </ul>

    <div class="siteNav">
      <div class="column">
        <h4>Products</h4>
        <div class="splitColumn">
          <ul>
            <li><a href="../au/payments.html"><strong>Payments</strong></a></li>
            <li><a href="../subscriptions.html"><strong>Subscriptions</strong></a></li>
            <li><a href="../connect.html"><strong>Connect</strong></a></li>
            <li><a href="../relay.html"><strong>Relay</strong></a></li>
            <li><a href="../atlas.html"><strong>Atlas</strong></a></li>
            <li><a href="../radar.html"><strong>Radar</strong></a></li>
          </ul>
          <ul>
            <li><a href="../us/pricing.html">Pricing</a></li>
              <li class='long-link'><a href="../works-with.html">Works with Stripe</a></li>
            <li><a href="../global.html">Global</a></li>
          </ul>
        </div>
      </div>
      <div class="column">
        <h4>Developers</h4>
        <ul>
          <li><a href="../docs.html">Documentation</a></li>
          <li><a href="../docs/api.html">API reference</a></li>
          <li><a href="https://status.stripe.com/">API status</a></li>
          <li><a href="../open-source.html">Open source</a></li>
        </ul>
      </div>
      <div class="column">
        <h4>Company</h4>
        <ul>
          <li><a href="../about.html">About</a></li>
          <li><a href="../customers.html">Customers</a></li>
          <li><a href="../jobs.html">Jobs</a></li>
          <li><a href="../blog.html">Blog</a></li>
          <li><a href="../press.html">Press</a></li>
        </ul>
      </div>
      <div class="column">
        <h4>Resources</h4>
        <ul>
          <li><a href="https://support.stripe.com/">Support</a></li>
          <li><a href="../contact.html">Contact</a></li>
          <li><a href="../us/privacy.html">Privacy &amp; terms</a></li>
        </ul>
      </div>
    </div>

  </div>
</article>


</footer>


    


    <script src="../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../assets/analytics-e800ab0ba76de2b697ea3f61c673695b.js"></script>
<script src="https://js.stripe.com/v2/m.js"></script>
<script src="../assets/mirador_ping-6bba7d3d9fbb1e991b7f0f8fab43b2b1.js"></script>

    <script type="text/javascript">
      Analytics.viewed("radar-guide");
    </script>

    <link type="text/css" rel="stylesheet" media="none" href="http://fast.fonts.net/t/1.css?apiType=css&amp;projectid=4414faae-0f1e-48be-9319-851fc710f613">

  </body>


<!-- Mirrored from stripe.com/radar/guide by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:45:30 GMT -->
</html>
