<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from stripe.com/docs/connect/standalone-accounts by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="csrf-token" content="uKYjc-QI0VxjIVQGpiMvSvAu7_JMChUGu_JznIdEwZkhPDcO4s0VGa5lcBlqKxox2VBhdRCm1Kb6R3m0IpML6A==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Connecting Standalone Accounts</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../../img/v3/home/social.png">

    <meta property="og:title" content="Connecting Standalone Accounts">
    <meta property="og:url" content="standalone-accounts.html">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="../../img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="../../img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Connecting Standalone Accounts">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-ec238f46e7cb9867e3c1b529e2cfa37b.css&quot;}</script>

    

    

    <link rel="stylesheet" href="../../assets/v3/default-ef2bff54073622b9e08cf24466b5668f.css">
    <link rel="stylesheet" href="../../assets/v3/shared/common-d0fb03fa2d48fcf29010779ca9a12b2c.css">
    <link rel="stylesheet" href="../../assets/v3/documentation/base-47c1fd7d3d670e4e08df8f5a67b20dea.css">
    <link rel="stylesheet" href="../../assets/v3/shared/prism_light-6d08c6ec0d72453693d775c3b96629c0.css">
    
      <link rel="stylesheet" href="../../assets/v3/documentation/connect_button-32eb736084ce624a104acae94437b9e2.css">

    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar">
        <div class="logo">
          <a class="site" href="../../index.html" title="Stripe"></a>
          <a class="extension" href="../../docs.html">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="../../docs.html">Home</a></h1>
          <h1 class="payments"><a class="toggle-content">Payments</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../quickstart.html">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="../checkout/tutorial.html">Checkout</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../checkout.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../custom-form.html">Stripe.js</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../stripe.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../mobile/ios.html">iOS</a>
    </li>
    <li>
      <a href="../mobile/android.html">Android</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="../charges.html">Creating Charges</a>
    </li>
    <li>
      <a href="../declines.html">Declines &amp; Failed Payments</a>
    </li>
    <li>
      <a href="../disputes.html">Disputes</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../disputes/evidence.html">Submitting Evidence</a>
    </li>
    <li>
      <a href="../disputes/types.html">Types</a>
    </li>
    <li>
      <a href="../disputes/faq.html">FAQ</a>
    </li>
</ul>

    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="../orders.html">Orders</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../orders/guide.html">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../orders/tax-integration.html">Tax Integrations</a>
    </li>
    <li>
      <a href="../orders/shipping-integration.html">Shipping Integrations</a>
    </li>
    <li>
      <a href="../sources.html">Getting Started</a>
    </li>
    <li>
      <a href="../sources/payment-methods.html">Payment Methods</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../sources/cards.html">Cards</a>
    </li>
    <li>
      <a href="../sources/3d-secure.html">3D Secure</a>
    </li>
    <li>
      <a href="../sources/bancontact.html">Bancontact</a>
    </li>
    <li>
      <a href="../sources/giropay.html">Giropay</a>
    </li>
    <li>
      <a href="../sources/ideal.html">iDEAL</a>
    </li>
    <li>
      <a href="../sources/sepa-direct-debit.html">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="../sources/sofort.html">Sofort</a>
    </li>
</ul>

    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="../ach.html">ACH</a>
    </li>
    <li>
      <a href="../apple-pay.html">Apple Pay</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../apple-pay/apps.html">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="../apple-pay/web.html">Apple Pay on the Web</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../alipay.html">Alipay</a>
    </li>
    <li>
      <a href="../bitcoin.html">Bitcoin</a>
    </li>
    <li class='separator'>
      <a href="../testing.html">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content">Subscriptions</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../subscriptions/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../subscriptions/creating.html">Creating Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="../subscriptions/discounts.html">Applying Discounts</a>
    </li>
    <li>
      <a href="../subscriptions/trials.html">Using Trial Periods</a>
    </li>
    <li>
      <a href="../subscriptions/quantities.html">Setting Quantities</a>
    </li>
    <li>
      <a href="../subscriptions/taxes.html">Adding Taxes</a>
    </li>
    <li>
      <a href="../subscriptions/multiple.html">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../subscriptions/lifecycle.html">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="../subscriptions/webhooks.html">Using Webhooks</a>
    </li>
    <li>
      <a href="../subscriptions/changing.html">Changing Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="../subscriptions/upgrading-downgrading.html">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="../subscriptions/billing-cycle.html">Billing Cycle</a>
    </li>
    <li>
      <a href="../subscriptions/canceling-pausing.html">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../subscriptions/invoices.html">Working with Invoices</a>
      <ul data-collapsable=false>
</ul>

    </li>
    <li>
      <a href="../subscriptions/plans.html">Managing Plans</a>
    </li>
    <li>
      <a href="../subscriptions/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content">Connect</a></h1>
<ul>
    <li>
      <a href="../connect.html">Overview</a>
    </li>
    <li>
      <a href="connecting-to-accounts.html">Connecting to Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="authentication.html">Authentication</a>
    </li>
</ul>

    </li>
    <li>
      <a class='selected' href="standalone-accounts.html">Standalone Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="reference.html">OAuth Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="managed-accounts.html">Managed Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="updating-accounts.html">Updating Accounts</a>
    </li>
    <li>
      <a href="identity-verification.html">Identity Verification</a>
    </li>
    <li>
      <a href="required-verification-information.html">Verification Fields</a>
    </li>
    <li>
      <a href="testing-verification.html">Testing Verification</a>
    </li>
    <li>
      <a href="bank-transfers.html">Bank Transfers</a>
    </li>
    <li>
      <a href="migrating.html">Migrating Recipients</a>
    </li>
    <li>
      <a href="best-practices.html">Best Practices</a>
    </li>
</ul>

    </li>
    <li>
      <a href="payments-fees.html">Payments and Fees</a>
    </li>
    <li>
      <a href="special-case-transfers.html">Special-case Transfers</a>
    </li>
    <li class='separator'>
      <a href="testing.html">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content">Relay</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../relay.html">Selling in Other Apps</a>
    </li>
    <li>
      <a href="../relay/apps-guide.html">Accepting Orders in Your App</a>
      <ul data-collapsable=false>
    <li>
      <a href="../relay/apps-error-guide.html">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="radar"><a class="toggle-content">Radar</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../radar.html">Overview</a>
    </li>
    <li>
      <a href="../radar/risk-evaluation.html">Risk Evaluation</a>
    </li>
    <li>
      <a href="../radar/review.html">Review</a>
      <ul data-collapsable=false>
    <li>
      <a href="../radar/review/auth-and-capture.html">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../radar/rules.html">Rules</a>
      <ul data-collapsable=false>
    <li>
      <a href="../radar/rules/reference.html">Reference</a>
    </li>
</ul>

    </li>
    <li class='separator'>
      <a href="../radar/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="account"><a class="toggle-content">Account</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../dashboard.html">Your Account</a>
    </li>
    <li>
      <a href="../checklist.html">Going Live Checklist</a>
    </li>
    <li>
      <a href="../transfers.html">Getting Paid</a>
    </li>
    <li>
      <a href="../reporting.html">Reporting</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content">Development</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../libraries.html">API Libraries</a>
    </li>
    <li>
      <a href="../upgrades.html">API Upgrades</a>
    </li>
    <li>
      <a href="../webhooks.html">Webhooks</a>
    </li>
    <li>
      <a href="../building-integrations.html">Integrations</a>
    </li>
    <li>
      <a href="../recipes.html">Recipes</a>
    </li>
    <li>
      <a href="../security.html">Security</a>
    </li>
</ul>


          <h1 class="references"><a href="../api.html" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content">
          
<header>
  <h1>Connecting to Standalone Accounts</h1>
  <p>Integrating with standalone Stripe accounts is the fastest and easiest way to get started, since you'll be offloading the majority of the user experience and user communication to Stripe. If you need help after reading this, check out our answers to <a href="https://support.stripe.com/search?q=connect">common questions</a> or chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.
</p>
</header>

<section>
    <aside class="important">
      <p>This tutorial assumes you have already <a href="https://dashboard.stripe.com/account/applications/settings" class="arrow">registered your platform</a>.</p>
    </aside>

<p>A <a href="connecting-to-accounts.html#standalone-accounts"><em>standalone</em></a> Stripe account is a normal Stripe account that is controlled by the account holder: your platform’s user. (By contrast, <a href="connecting-to-accounts.html#managed-accounts"><em>managed</em></a> accounts are fully controlled by the platform.)</p>

<p>To connect to Standalone Accounts—either if your users already have accounts or if you’d like them to create accounts—you’ll want to integrate with our standard OAuth flow. With this flow, there’s minimal integration work to do in terms of onboarding, communicating with users, ongoing maintenance, and so on since Stripe handles all of it for you and your users will have access to the Dashboard. (Of course, this also means that there’s not as much user experience customizability.)</p>

<p>Unless you’re looking to fully control the user experience from the beginning, we recommend starting off with an OAuth integration.</p></section>

<section>
<h2 id="oauth-flow">What does the flow look like?</h2>

<aside class="note">
  <h3>OAuth 2.0</h3>
  <p>For additional reading, feel free to head over to the <a href="https://tools.ietf.org/html/rfc6749">official OAuth 2.0 spec</a>.</p>
  <p>There’s also a <a href="http://oauth.net/2/">list of OAuth 2.0 clients</a> if you’d rather not implement the details yourself.</p>
</aside>

<p>When a user wants to connect to your platform, they’ll go through these steps:</p>

<ol>
  <li>Starting on a page at your site, the user will click a link that takes them to Stripe, passing along your platform’s <code>client_id</code>.</li>
  <li>On Stripe’s website, the user will be prompted to connect their Stripe account, or create a new account if they don’t already have one.</li>
  <li>The user will then be redirected back to your site (specifically to your <code>redirect_uri</code>), passing along either an authorization code or an error (if the connection request was denied).</li>
  <li>Your site then makes a request to our OAuth token endpoint to fetch the user’s authorization credentials, storing them on your site.</li>
  <li>Subsequent API requests can be made on behalf of the connected account using the authorization credentials.</li>
</ol>

<p>Unlike most OAuth implementations (like Facebook Connect or Sign In with Twitter), we’ve seamlessly added the process of creating a Stripe account right into our authorization flow. You don’t have to worry about whether or not your users already have Stripe accounts.</p>
  <div class="images">
    <div class="image">
      <a href="../../img/documentation/connect/oauth-authorize-screen.png" class="zoomable" data-width="960" data-height="799"><img src="../../img/documentation/connect/oauth-authorize-screen.png" height="266"></a>
      <p>The user is logged in, and can connect directly.</p>
    </div>
    <div class="image">
      <a href="../../img/documentation/connect/oauth-register-screen.png" class="zoomable" data-width="960" data-height="799"><img src="../../img/documentation/connect/oauth-register-screen.png" height="266"></a>
      <p>The user needs to create an account.</p>
    </div>
  </div>

<p>When your users land back on your site, their account is ready to accept credit card payments. You can also retrieve their <a href="../api.html#account">account status</a> at any time.</p>

<p>Keep reading for a step-by-step guide to integrating the flow. You can also check out the <a href="reference.html">OAuth reference</a> for additional details on the request and response parameters.</p></section>

<section>
<h2 id="integrating-oauth">Integrating OAuth</h2>

<p>To get started with your integration, you’ll first need to know two key pieces of information from in your <a href="https://dashboard.stripe.com/account/applications/settings">platform settings</a>:</p>

<ul>
  <li>Your <code>client_id</code>, a unique identifier for your platform, generated by Stripe.</li>
  <li>Your <code>redirect_uri</code>, a page on your website to which the user will be redirected after connecting their account (or failing to, should that be the case), set by you.</li>
</ul>

<p>Stripe also provides a development <code>client_id</code>, to make <a href="testing.html#using-oauth">testing</a> easier.</p></section>

<section>
<h2 id="connecting-users">Connecting users</h2>

<p>With these two pieces of information in hand, you’re ready to have your users connect with your platform. We recommend showing a <a href="../../about/resources.html">Connect button</a> that sends them to our <code>authorize_url</code> endpoint:</p>
<div class="code">
  <pre class="language-url wrap" ><code>https://connect.stripe.com/oauth/authorize?response_type=code&amp;client_id=ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7&amp;scope=read_write</code></pre>
</div>

<aside class="content note">
  <h3>CSRF Protection</h3>
  <p>To prevent CSRF attacks, use the <code>state</code> parameter, passing along a unique token as the value. We’ll include the <code>state</code> you gave us when we redirect back.</p>
</aside>

<p>The Stripe endpoint needs to at least receive two parameters:</p>

<ul>
  <li><code>response_type</code>, with a value of <code>code</code>.</li>
  <li>Your <code>client_id</code>.</li>
</ul>

<p>You’ll likely also want to provide the <code>scope</code>. This parameter dictates what your platform will be able to do on behalf of the connected account. The options are <code>read_write</code> and <code>read_only</code>, with <code>read_only</code> being the default.</p>

<p>For an analytics platform, <code>read_only</code> is appropriate; if you need to perform charges on behalf of the connected user, you will need to request <code>read_write</code> scope instead. See the <a href="reference.html">OAuth reference</a> for more.</p>

<p>Here is how this may look (the <code>href</code> value matches that above):</p>

<p><a href="https://connect.stripe.com/oauth/authorize?response_type=code&amp;client_id=ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7&amp;scope=read_write" class="connect-button"><span>Connect with Stripe</span></a></p></section>

<section>
<h2 id="token-request">After the user has connected</h2>

<p>When the user arrives at Stripe, they’ll be prompted to allow or deny the connection to your platform, and will then be sent to your <code>redirect_uri</code> page. In the URL, we’ll pass along an authorization code:</p>

<div class="code">
  <pre class="language-url wrap" ><code>https://stripe.com/connect/default/oauth/test?scope=read_write&amp;code=AUTHORIZATION_CODE</code></pre>
</div>

<p>If the authorization was denied by the user, we’ll include an error instead:</p>
<div class="code">
  <pre class="language-url wrap" ><code>https://stripe.com/connect/default/oauth/test?error=access_denied&amp;error_description=The%20user%20denied%20your%20request</code></pre>
</div>

<p>Using the <code>code</code> parameter, you should make a POST request to our <code>access_token_url</code> endpoint (also see the <a href="#sample-code">sample-code</a> below for non-curl examples):</p>
<div class="code">
  <pre class="language-curl numbered" ><code>curl https://connect.stripe.com/oauth/token \
   -d client_secret=sk_test_BQokikJOvBiI2HlWgH4olfQ2 \
   -d code=AUTHORIZATION_CODE \
   -d grant_type=authorization_code
</code></pre>
</div>

<p>Note that you’ll make the request with your live secret API key or test secret API key, depending on whether you want to get a live or test access token back.</p>

<p>Stripe will return a response containing the authentication credentials for the user:</p>

<div class="code">
  <pre class="language-javascript numbered" ><code>{
  &quot;token_type&quot;: &quot;bearer&quot;,
  &quot;stripe_publishable_key&quot;: PUBLISHABLE_KEY,
  &quot;scope&quot;: &quot;read_write&quot;,
  &quot;livemode&quot;: false,
  &quot;stripe_user_id&quot;: USER_ID,
  &quot;refresh_token&quot;: REFRESH_TOKEN,
  &quot;access_token&quot;: ACCESS_TOKEN
}</code></pre>
</div>

<p>If there was a problem, we’ll instead return an error:</p>
<div class="code">
  <pre class="language-javascript numbered" ><code>{
  &quot;error&quot;: &quot;invalid_grant&quot;,
  &quot;error_description&quot;: &quot;Authorization code does not exist: AUTHORIZATION_CODE&quot;
}</code></pre>
</div>

<p>You’re done! The user is now connected to your platform. You’ll want to store all of the returned information in your database for later use.</p>

<p>You’ll notice that the response also includes a <code>refresh_token</code>. This can be used to <a href="testing.html#test-keys-for-livemode-applications">generate test access tokens</a> for a production <code>client_id</code> or to roll your access token. You should hold on to this, as you’re only able to get it after this initial POST request.</p></section>

<section>
<h2 id="customizing-the-user-experience">Customizing the user experience</h2>

<p>Through additional parameters you can supply Stripe, you can easily customize the user’s experience. Below are a few example uses of those parameters, but see the <a href="reference.html">OAuth reference</a> for the full list.</p>

<h3 id="pre-filling-fields">Pre-filling fields</h3>

<p>If your user needs to set up a new account with Stripe, you can provide the best possible user experience by <a href="reference.html#get-authorize-request">pre-filling</a> the account form fields with information you already have, like the user’s email and name. Pre-filling has no effect if your user already has an existing Stripe account.</p>

<p>Alternatively, if you know your user has a Stripe account already, you can use the <code>stripe_landing</code> parameter, with a value of <code>login</code>, to have Stripe show a login screen instead of the default account application.</p>

<h3 id="redirect-uri">Dynamically setting the redirect URI</h3>

<p>For security purposes, Stripe will only redirect a user to a pre-defined url. However, Connect allows you to define more than one redirect URI, which can be used to further customize the user’s experience. For example, you could have some of your users redirected back to <code>https://sub1.example.com</code> and others sent to <code>https://sub2.example.com</code>, each with custom behavior.</p>

<p>First, in your <a href="https://dashboard.stripe.com/account/applications/settings">platform settings</a>, set the redirect URIs to a comma-separated list of allowed URIs. Second, add a <code>redirect_uri</code> parameter to your authorization request with a value found in your comma-separated list.</p>
<div class="code">
  <pre class="language-url wrap" ><code>https://connect.stripe.com/oauth/authorize?response_type=code&amp;client_id=ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7&amp;scope=read_write&amp;redirect_uri=https://sub2.example.com</code></pre>
</div>

<p>The first URI in your comma-separated list will always be treated as the default.</p>

<h3 id="deferred-account-activation">Deferred account activation</h3>

<p>In some cases, you may want to defer account activation until later—that is, let your user start accepting payments without completely setting up their account.</p>

<p>To do this, you can spin up a standalone account with <a href="deferred-accounts.html">just a country and email address</a>.</p></section>

<section>
<h2 id="revoked-access">Revoked Access</h2>

<p>An <code>account.application.deauthorized</code> <a href="../api.html#list_events">webhook
event</a> is sent when a user disconnects your platform from
their account. By watching for this event, you can perform any necessary credential cleanup on your
servers. (Note that a managed account cannot be disconnected by the account’s beneficiary.)</p>

<p>Additionally, if you want to disconnect access to a standalone account (for
example, to stop getting webhooks for an account you no longer work
with), you can POST your <code>client_id</code> and the connected account’s ID to
<code>https://connect.stripe.com/oauth/deauthorize</code>:</p>
<div class="code">
  <pre class="language-curl numbered" ><code>curl https://connect.stripe.com/oauth/deauthorize \
   -u {YOUR_SECRET_KEY}: \
   -d client_id=ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7 \
   -d stripe_user_id=acct_K65OiNOCWXvuD3
</code></pre>
</div>
</section>

<section>
<h2 id="sample-code">Sample OAuth Applications</h2>

<p>Here’s some sample code for performing the OAuth flow, but we recommend that you use a <a href="http://oauth.net/2/">client library</a> instead of handling the implementation yourself.</p>
  <div class="tabs tabs-code animated" data-platform=server>
    <nav class="nav-languages">
        <a data-language="ruby"
           >Ruby</a>
        <a data-language="python"
           >Python</a>
        <a data-language="php"
           >PHP</a>
        <a data-language="java"
           >Java</a>
        <a data-language="node"
           >Node</a>
    </nav>
    <div class="tabs-content">
      <div class="code">
  <pre class="language-ruby numbered" ><code># See full code example here: https://gist.github.com/2314782

# Using OAuth2 gem by Intridea (https://github.com/intridea/oauth2).

# Additionally, check out this OmniAuth Stripe Connect gem:
# https://github.com/isaacsanders/omniauth-stripe-connect

configure do
  config = YAML::load(File.open(&#39;config.yml&#39;))

  set :api_key, config[&#39;api_key&#39;]
  set :client_id, config[&#39;client_id&#39;]

  options = {
    :site =&gt; &#39;https://connect.stripe.com&#39;,
    :authorize_url =&gt; &#39;/oauth/authorize&#39;,
    :token_url =&gt; &#39;/oauth/token&#39;
  }

  set :client, OAuth2::Client.new(settings.client_id, settings.api_key, options)
end

get &#39;/authorize&#39; do
  params = {
    :scope =&gt; &#39;read_write&#39;
  }

  # Redirect the user to the authorize_uri endpoint
  url = settings.client.auth_code.authorize_url(params)
  redirect url
end

get &#39;/oauth/callback&#39; do
  # Pull the authorization_code out of the response
  code = params[:code]

  # Make a request to the access_token_uri endpoint to get an access_token
  @resp = settings.client.auth_code.get_token(code, :params =&gt; {:scope =&gt; &#39;read_write&#39;})
  @access_token = @resp.token

  # Use the access_token as you would a regular live-mode API key
  # TODO: Stripe logic

  erb :callback
end
</code></pre>
</div>
<div class="code">
  <pre class="language-python numbered" ><code># See full code example here: https://gist.github.com/3517668

@app.route(&#39;/authorize&#39;)
def authorize:
  site = app.config[&#39;SITE&#39;] + app.config[&#39;AUTHORIZE_URI&#39;]
  params = {
    &quot;response_type&quot;: &quot;code&quot;,
    &quot;scope&quot;: &quot;read_write&quot;,
    &quot;client_id&quot;: app.config[&#39;CLIENT_ID&#39;]
  }

  # Redirect to Stripe /oauth/authorize endpoint
  url = site + &#39;?&#39; + urllib.urlencode(params)
  return redirect(url)

@app.route(&#39;/oauth/callback&#39;)
def callback:
  code = request.args.get(&#39;code&#39;)
  data = {
    &quot;grant_type&quot;: &quot;authorization_code&quot;,
    &quot;client_id&quot;: app.config[&#39;CLIENT_ID&#39;],
    &quot;client_secret&quot;: app.config[&#39;API_KEY&#39;]
    &quot;code&quot;: code
  }

  # Make /oauth/token endpoint POST request
  url = app.config[&#39;SITE&#39;] + app.config[&#39;TOKEN_URI&#39;]
  resp = requests.post(url, params=data)

  # Grab access_token (use this as your user&#39;s API key)
  token = resp.json().get(&#39;access_token&#39;)
  return render_template(&#39;callback.html&#39;, token=token)
</code></pre>
</div>
<div class="code">
  <pre class="language-php numbered" ><code>// See full code example here: https://gist.github.com/3507366

if (isset($_GET[&#39;code&#39;])) { // Redirect w/ code
  $code = $_GET[&#39;code&#39;];

  $token_request_body = array(
    &#39;grant_type&#39; =&gt; &#39;authorization_code&#39;,
    &#39;client_id&#39; =&gt; &#39;ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7&#39;,
    &#39;code&#39; =&gt; $code,
    &#39;client_secret&#39; =&gt; &#39;sk_test_BQokikJOvBiI2HlWgH4olfQ2&#39;
  );

  $req = curl_init(TOKEN_URI);
  curl_setopt($req, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($req, CURLOPT_POST, true );
  curl_setopt($req, CURLOPT_POSTFIELDS, http_build_query($token_request_body));

  // TODO: Additional error handling
  $respCode = curl_getinfo($req, CURLINFO_HTTP_CODE);
  $resp = json_decode(curl_exec($req), true);
  curl_close($req);

  echo $resp[&#39;access_token&#39;];
} else if (isset($_GET[&#39;error&#39;])) { // Error
  echo $_GET[&#39;error_description&#39;];
} else { // Show OAuth link
  $authorize_request_body = array(
    &#39;response_type&#39; =&gt; &#39;code&#39;,
    &#39;scope&#39; =&gt; &#39;read_write&#39;,
    &#39;client_id&#39; =&gt; &#39;ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7&#39;
  );

  $url = AUTHORIZE_URI . &#39;?&#39; . http_build_query($authorize_request_body);
  echo &quot;&lt;a href=&#39;$url&#39;&gt;Connect with Stripe&lt;/a&gt;&quot;;
}
</code></pre>
</div>
<div class="code">
  <pre class="language-java numbered" ><code>// See full code example here: https://gist.github.com/4e5cf13ccc98124b1551

// Using Spark framework (http://sparkjava.com)

get(new Route(&quot;/authorize&quot;) {
    @Override
    public Object handle(Request request, Response response) {
        URI uri = new URIBuilder(AUTHORIZE_URI)
                .setParameter(&quot;response_type&quot;, &quot;code&quot;)
                .setParameter(&quot;scope&quot;, &quot;read_write&quot;)
                .setParameter(&quot;client_id&quot;, CLIENT_ID)
                .build();

        // Redirect to Stripe /oauth/authorize endpoint
        response.status(201);
        response.redirect(uri.toString());
        return &quot;&quot;;
    }
});

get(new FreeMarkerRoute(&quot;/oauth/callback&quot;) {
    @Override
    public ModelAndView handle(Request request, Response response) {
        Map&lt;String, Object&gt; viewObjects = new HashMap&lt;String, Object&gt;();

        CloseableHttpClient httpClient = HttpClients.createDefault();
        String code = request.queryParams(&quot;code&quot;);
        URI uri = new URIBuilder(TOKEN_URI)
                .setParameter(&quot;client_secret&quot;, API_KEY)
                .setParameter(&quot;grant_type&quot;, &quot;authorization_code&quot;)
                .setParameter(&quot;client_id&quot;, CLIENT_ID)
                .setParameter(&quot;code&quot;, code)
                .build();

        // Make /oauth/token endpoint POST request
        HttpPost httpPost = new HttpPost(uri);
        CloseableHttpResponse resp = httpClient.execute(httpPost);

        // Grab access_token (use this as your user&#39;s API key)
        String bodyAsString = EntityUtils.toString(resp.getEntity());
        Type t = new TypeToken&lt;Map&lt;String, String&gt;&gt;() { }.getType();
        Map&lt;String, String&gt; map = new GsonBuilder().create().fromJson(bodyAsString, t);
        String token = map.get(&quot;access_token&quot;);

        viewObjects.put(&quot;token&quot;, token);
        return modelAndView(viewObjects, &quot;callback.ftl&quot;);
    }
});
</code></pre>
</div>
<div class="code">
  <pre class="language-javascript numbered" ><code>// See full code example here: https://gist.github.com/7109113

app.get(&quot;/authorize&quot;, function(req, res) {
  // Redirect to Stripe /oauth/authorize endpoint
  res.redirect(AUTHORIZE_URI + &quot;?&quot; + qs.stringify({
    response_type: &quot;code&quot;,
    scope: &quot;read_write&quot;,
    client_id: CLIENT_ID
  }));
});

app.get(&quot;/oauth/callback&quot;, function(req, res) {

  var code = req.query.code;

  // Make /oauth/token endpoint POST request
  request.post({
    url: TOKEN_URI,
    form: {
      grant_type: &quot;authorization_code&quot;,
      client_id: CLIENT_ID,
      code: code,
      client_secret: API_KEY
    }
  }, function(err, r, body) {

    var accessToken = JSON.parse(body).access_token;

    // Do something with your accessToken

    // For demo&quot;s sake, output in response:
    res.send({ &quot;Your Token&quot;: accessToken });

  });
});
</code></pre>
</div>

    </div>
  </div>
</section>

<section>
  <h2>You're connected!</h2>
  <p>Now you can use the API on your user's behalf to accept payments, set up recurring billing, fetch account data, and more.</p>
<ul class="next-steps">
    <li><a href="payments-fees.html"><span>Payments and fees</a></li>
    <li><a href="../api.html"><span>Full API reference</a></li>
</ul>

</section>


          <footer>
  <h2>Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://support.stripe.com/">Search</a> our site for more information, <a href="https://support.stripe.com/email">send us an email</a>, or <a href="../../contact/sales.html">get in touch</a> with our sales team!</p>
</footer>

        </article>
      </div>
    </div>

    <div id="loading-bar"></div>

    <script src="../../assets/external/jquery.min-94df374d2ad5d02ae136584dc008fb1c.js"></script>
    <script src="../../assets/prism-aa9f4cb7aff3f31b5394455bcbea0d8b.js"></script>
    <script src="../../assets/external/dynamics.min-14579f80273a61e6d0f4f45484e20dc7.js"></script>
    <script src="../../assets/jquery.cookie-d7482a1bbfda18d981eda4398666acdd.js"></script>
    <script src="../../assets/documentation-84c208e01668170139f2f511cfc37644.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="https://js.stripe.com/v2/"></script>

    
    <script src="../../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../../assets/analytics-e800ab0ba76de2b697ea3f61c673695b.js"></script>
<script src="https://js.stripe.com/v2/m.js"></script>
<script src="../../assets/mirador_ping-6bba7d3d9fbb1e991b7f0f8fab43b2b1.js"></script>

    <script type="text/javascript">
    if ('Analytics' in window) {
      Analytics.viewed("docs", {
        docs_version: "2",
      });
    }
    </script>
  </body>

<!-- Mirrored from stripe.com/docs/connect/standalone-accounts by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:49 GMT -->
</html>
