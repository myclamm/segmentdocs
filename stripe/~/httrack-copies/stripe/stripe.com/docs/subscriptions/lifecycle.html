<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from stripe.com/docs/subscriptions/lifecycle by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="csrf-token" content="9hHYJd597nE0Yn_iJF4pe5b8HLDoBlI6Ytii21VayKxvi8xY2LgqNPkmW_3oVhwAv4KSN7Sqk5ojbajz8I0C3Q==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Lifecycle of a Subscription</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../../img/v3/home/social.png">

    <meta property="og:title" content="Lifecycle of a Subscription">
    <meta property="og:url" content="lifecycle.html">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="../../img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="../../img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Lifecycle of a Subscription">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-ec238f46e7cb9867e3c1b529e2cfa37b.css&quot;}</script>

    

    

    <link rel="stylesheet" href="../../assets/v3/default-ef2bff54073622b9e08cf24466b5668f.css">
    <link rel="stylesheet" href="../../assets/v3/shared/common-d0fb03fa2d48fcf29010779ca9a12b2c.css">
    <link rel="stylesheet" href="../../assets/v3/documentation/base-47c1fd7d3d670e4e08df8f5a67b20dea.css">
    <link rel="stylesheet" href="../../assets/v3/shared/prism_light-6d08c6ec0d72453693d775c3b96629c0.css">
    
    
    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar">
        <div class="logo">
          <a class="site" href="../../index.html" title="Stripe"></a>
          <a class="extension" href="../../docs.html">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="../../docs.html">Home</a></h1>
          <h1 class="payments"><a class="toggle-content">Payments</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../quickstart.html">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="../checkout/tutorial.html">Checkout</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../checkout.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../custom-form.html">Stripe.js</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../stripe.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../mobile/ios.html">iOS</a>
    </li>
    <li>
      <a href="../mobile/android.html">Android</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="../charges.html">Creating Charges</a>
    </li>
    <li>
      <a href="../declines.html">Declines &amp; Failed Payments</a>
    </li>
    <li>
      <a href="../disputes.html">Disputes</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../disputes/evidence.html">Submitting Evidence</a>
    </li>
    <li>
      <a href="../disputes/types.html">Types</a>
    </li>
    <li>
      <a href="../disputes/faq.html">FAQ</a>
    </li>
</ul>

    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="../orders.html">Orders</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../orders/guide.html">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../orders/tax-integration.html">Tax Integrations</a>
    </li>
    <li>
      <a href="../orders/shipping-integration.html">Shipping Integrations</a>
    </li>
    <li>
      <a href="../sources.html">Getting Started</a>
    </li>
    <li>
      <a href="../sources/payment-methods.html">Payment Methods</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../sources/cards.html">Cards</a>
    </li>
    <li>
      <a href="../sources/3d-secure.html">3D Secure</a>
    </li>
    <li>
      <a href="../sources/bancontact.html">Bancontact</a>
    </li>
    <li>
      <a href="../sources/giropay.html">Giropay</a>
    </li>
    <li>
      <a href="../sources/ideal.html">iDEAL</a>
    </li>
    <li>
      <a href="../sources/sepa-direct-debit.html">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="../sources/sofort.html">Sofort</a>
    </li>
</ul>

    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="../ach.html">ACH</a>
    </li>
    <li>
      <a href="../apple-pay.html">Apple Pay</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../apple-pay/apps.html">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="../apple-pay/web.html">Apple Pay on the Web</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../alipay.html">Alipay</a>
    </li>
    <li>
      <a href="../bitcoin.html">Bitcoin</a>
    </li>
    <li class='separator'>
      <a href="../testing.html">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content">Subscriptions</a></h1>
<ul>
    <li>
      <a href="quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="creating.html">Creating Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="discounts.html">Applying Discounts</a>
    </li>
    <li>
      <a href="trials.html">Using Trial Periods</a>
    </li>
    <li>
      <a href="quantities.html">Setting Quantities</a>
    </li>
    <li>
      <a href="taxes.html">Adding Taxes</a>
    </li>
    <li>
      <a href="multiple.html">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a class='selected' href="lifecycle.html">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="webhooks.html">Using Webhooks</a>
    </li>
    <li>
      <a href="changing.html">Changing Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="upgrading-downgrading.html">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="billing-cycle.html">Billing Cycle</a>
    </li>
    <li>
      <a href="canceling-pausing.html">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="invoices.html">Working with Invoices</a>
      <ul data-collapsable=false>
</ul>

    </li>
    <li>
      <a href="plans.html">Managing Plans</a>
    </li>
    <li>
      <a href="testing.html">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content">Connect</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../connect.html">Overview</a>
    </li>
    <li>
      <a href="../connect/connecting-to-accounts.html">Connecting to Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../connect/authentication.html">Authentication</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../connect/standalone-accounts.html">Standalone Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../connect/reference.html">OAuth Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../connect/managed-accounts.html">Managed Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../connect/updating-accounts.html">Updating Accounts</a>
    </li>
    <li>
      <a href="../connect/identity-verification.html">Identity Verification</a>
    </li>
    <li>
      <a href="../connect/required-verification-information.html">Verification Fields</a>
    </li>
    <li>
      <a href="../connect/testing-verification.html">Testing Verification</a>
    </li>
    <li>
      <a href="../connect/bank-transfers.html">Bank Transfers</a>
    </li>
    <li>
      <a href="../connect/migrating.html">Migrating Recipients</a>
    </li>
    <li>
      <a href="../connect/best-practices.html">Best Practices</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../connect/payments-fees.html">Payments and Fees</a>
    </li>
    <li>
      <a href="../connect/special-case-transfers.html">Special-case Transfers</a>
    </li>
    <li class='separator'>
      <a href="../connect/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content">Relay</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../relay.html">Selling in Other Apps</a>
    </li>
    <li>
      <a href="../relay/apps-guide.html">Accepting Orders in Your App</a>
      <ul data-collapsable=false>
    <li>
      <a href="../relay/apps-error-guide.html">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="radar"><a class="toggle-content">Radar</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../radar.html">Overview</a>
    </li>
    <li>
      <a href="../radar/risk-evaluation.html">Risk Evaluation</a>
    </li>
    <li>
      <a href="../radar/review.html">Review</a>
      <ul data-collapsable=false>
    <li>
      <a href="../radar/review/auth-and-capture.html">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../radar/rules.html">Rules</a>
      <ul data-collapsable=false>
    <li>
      <a href="../radar/rules/reference.html">Reference</a>
    </li>
</ul>

    </li>
    <li class='separator'>
      <a href="../radar/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="account"><a class="toggle-content">Account</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../dashboard.html">Your Account</a>
    </li>
    <li>
      <a href="../checklist.html">Going Live Checklist</a>
    </li>
    <li>
      <a href="../transfers.html">Getting Paid</a>
    </li>
    <li>
      <a href="../reporting.html">Reporting</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content">Development</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../libraries.html">API Libraries</a>
    </li>
    <li>
      <a href="../upgrades.html">API Upgrades</a>
    </li>
    <li>
      <a href="../webhooks.html">Webhooks</a>
    </li>
    <li>
      <a href="../building-integrations.html">Integrations</a>
    </li>
    <li>
      <a href="../recipes.html">Recipes</a>
    </li>
    <li>
      <a href="../security.html">Security</a>
    </li>
</ul>


          <h1 class="references"><a href="../api.html" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content">
          <header>
  <h1>Lifecycle of a Subscription</h1>
  <p>Learn more about the lifecycle of a subscription&mdash;and its events&mdash;to better understand how subscriptions work. If you need help after reading this, check out our answers to <a href="https://support.stripe.com/search?q=subscriptions+events">common questions</a> or chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.
</p>
</header>

<section>

<p>Understanding what happens in the natural course of a subscription helps provide the smoothest experience for both you and your users. Here you’ll read about:</p>

<ul>
  <li>The <a href="#lifecycle">subscription lifecycle</a></li>
  <li>The impact of your <a href="#settings">subscription settings</a> on payment failures</li>
  <li>The various <a href="#states">subscription states</a></li>
  <li>Other <a href="#other-events">subscription events</a> you’ll encounter</li>
</ul></section>

<section>
  <h2 id="lifecycle">The subscription lifecycle</h2>

<p>Stripe has an associated event for every activity that happens with a subscription. (There are <a href="../api.html#event_types">dozens of events</a> that occur when using Stripe, not all of which are specific to subscriptions.)</p>

<p>Taking a basic example of a new customer with a valid payment method and no trial period on the subscription, the following image shows the lifecycle of the most important events that occur. (Note that the exact order in which you receive the events–particularly those that happen “immediately”–is not guaranteed.)</p>
  <div class="image full">
    <a href="../../img/documentation/subscriptions/event_lifecycle%402x.png" class="zoomable" data-width="1024" data-height="624"><img src="../../img/documentation/subscriptions/event_lifecycle%402x.png" width="100%"></a>
  </div>

<p>When certain events occur, you want to take corresponding steps on your website, such as:</p>

<ul>
  <li>Emailing the customer when a payment fails</li>
  <li>Extending the length of time that a customer can use your service</li>
  <li>Terminating access when a subscription is canceled</li>
</ul>

<p>As subscription events primarily occur behind the scenes–and mostly asynchronously, your site should listen for them via <a href="webhooks.html">webhooks</a>.</p></section>

<section>
  <h2 id="settings">Subscription settings and payment failures</h2>
  <aside class="note">
    <h3>First invoice payment failure</h3>
    <p>If the very first invoice requires payment and that payment attempt fails, the subscription is not created.</p>
  </aside>
<p>Once a subscription has been created, a failure to pay an invoice becomes the most important event that could happen. Failures occur for many reasons:</p>

<ul>
  <li>Lack of an actual payment source on the associated customer</li>
  <li>Attempt to use an outdated or expired payment source</li>
  <li>An actual decline of an otherwise valid payment source</li>
</ul>

<p>Your <a href="https://dashboard.stripe.com/account/recurring">subscription settings</a> dictate how Stripe responds when an invoice payment fails.</p>
  <div class="image full">
    <a href="../../img/documentation/subscriptions/settings.png" class="zoomable" data-width="1024" data-height="624"><img src="../../img/documentation/subscriptions/settings.png" width="100%"></a>
  </div>

<p>You can have invoice payments be retried up to three times, each 1, 3, 5, or 7 days after the previous attempt. This flexibility allows for only one payment attempt to ever be made or up to four total attempts, over as many as 21 days.</p>

<p>After your set number of attempts, Stripe stops attempting to pay the invoice and take the next action you dictate. The options are:</p>

<ul>
  <li>Cancel the subscription</li>
  <li>Mark the subscription as unpaid</li>
  <li>Leave the subscription as-is</li>
</ul>

<p>(See the next section for more information on these subscription states.)</p>

<p>After the final payment attempt on an invoice, no further payment attempts are made until a new payment method is added to the customer.</p>

<p>Note that changing your subscription settings only affect future retries. Once a payment attempt is made on an invoice, its <a href="../api.html#invoice_object-next_payment_attempt">next_payment_attempt</a> value is set using the subscription settings as they are at that moment.</p></section>

<section>
  <h2 id="states">Subscription states</h2>
<p>The <a href="../api.html#subscription_object">Subscription</a> object has a <code>status</code> property that reflects the subscription’s current state. Its possible values are:</p>

<ul>
  <li><strong>trialing</strong></li>
  <li><strong>active</strong></li>
  <li><strong>past_due</strong></li>
  <li><strong>canceled</strong></li>
  <li><strong>unpaid</strong></li>
</ul>

<p>A subscription still in its trial period is <strong>trialing</strong> and moves to <strong>active</strong> once the trial period is over. This occurs before the first payment is attempted.</p>

<p>When an invoice payment on a subscription fails, the subscription becomes <strong>past_due</strong>. After Stripe exhausts all payment retry attempts, the subscription remains <strong>past_due</strong> or moves to a <code>status</code> of either <strong>canceled</strong> or <strong>unpaid</strong>, depending upon your retry <a href="#settings">settings</a>:</p>

<ul>
  <li>
    <p>With a <strong>canceled</strong> subscription, the most recent, unpaid invoice is closed, and no further invoices are generated. A <code>customer.subscription.deleted</code> event is triggered, following the <code>charge.failed</code> and <code>invoice.payment_failed</code> events that preceded it. (You can see that a subscription was canceled automatically–as opposed to by your request–if the <code>customer.subscription.deleted</code> event’s <code>request</code> property is <strong>null</strong>.) Since the subscription has been deleted, it cannot be reactivated. Instead, you can collect updated billing details from your customer, update your customer’s default payment source in Stripe, and create a new subscription for the customer.</p>
  </li>
  <li>
    <p>If you choose to mark the subscription as <strong>unpaid</strong>, no subsequent payments are attempted on any invoice. (Invoices will continue to be created, but then immediately closed.) Additionally, updating the payment source for the customer does not trigger a retry of the most recent invoice. After updating the customer’s payment source, you may choose to reopen and pay any unpaid, closed invoices. This default behavior allows you to best dictate how an unpaid subscription is billed upon reactivation.</p>
  </li>
  <li>
    <p>If you choose to leave the subscription as-is (in a <strong>past_due</strong> state), it continues to generate new invoices, and payment on those new invoices is attempted. You can use this behavior if you want to continue attempts to bill your customers every month, even when previous invoice payments have failed.</p>
  </li>
</ul>

<p>To set a subscription <code>status</code> back to <strong>active</strong> from an <strong>unpaid</strong> or <strong>past_due</strong> state, open the most recent invoice and attempt to pay it. Note that paying any other invoice–that is not the most recent–does not change the subscription’s status.</p></section>

<section>
  <h2 id="other-events">Other subscription events</h2>
<p>Other subscription events occur that you may need to handle, depending upon your use of subscriptions.</p>

<p>If a subscription is on a <a href="trials.html">trial period</a>, we’ll let you know the trial is ending via the <code>customer.subscription.trial_will_end</code> event. This event notification goes out 3 days before the trial period concludes (unless that’s not possible, such as when a trial is only 1 day long).</p>

<p>Successful payments of invoices also trigger <code>invoice.updated</code> events, notifying you that the invoice’s <code>paid</code> attribute now has a <strong>true</strong> value. If an invoice payment fails, that also triggers <code>invoice.updated</code>, this time with a <code>paid</code> value of <strong>false</strong>. You also see an <code>invoice.payment_failed</code> event in that case.</p>

<p>If the invoice payment failed because the charge is declined, that comes with a <code>charge.failed</code> event as well.</p>

<p><a href="changing.html">Changing a subscription</a> results in <code>customer.subscription.updated</code> events. There are other relevant events you’ll encounter when using subscriptions related to:</p>

<ul>
  <li>Coupons</li>
  <li>Discounts</li>
  <li>Invoice items</li>
  <li>Plans</li>
</ul>

<p>See the <a href="../api.html#event_types">API reference</a> for the complete list.</p></section>

<section>
  <h2>Next steps</h2>
  <p>Congrats! You've learned about the subscription lifecycle at Stripe. Some documentation you might want to read next:</p>
<ul class="next-steps">
    <li><a href="webhooks.html"><span>Using Webhooks</a></li>
    <li><a href="changing.html"><span>Changing Subscriptions</a></li>
    <li><a href="invoices.html"><span>Working with Invoices</a></li>
</ul>
</section>


          <footer>
  <h2>Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://support.stripe.com/">Search</a> our site for more information, <a href="https://support.stripe.com/email">send us an email</a>, or <a href="../../contact/sales.html">get in touch</a> with our sales team!</p>
</footer>

        </article>
      </div>
    </div>

    <div id="loading-bar"></div>

    <script src="../../assets/external/jquery.min-94df374d2ad5d02ae136584dc008fb1c.js"></script>
    <script src="../../assets/prism-aa9f4cb7aff3f31b5394455bcbea0d8b.js"></script>
    <script src="../../assets/external/dynamics.min-14579f80273a61e6d0f4f45484e20dc7.js"></script>
    <script src="../../assets/jquery.cookie-d7482a1bbfda18d981eda4398666acdd.js"></script>
    <script src="../../assets/documentation-84c208e01668170139f2f511cfc37644.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="https://js.stripe.com/v2/"></script>

    
    <script src="../../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../../assets/analytics-e800ab0ba76de2b697ea3f61c673695b.js"></script>
<script src="https://js.stripe.com/v2/m.js"></script>
<script src="../../assets/mirador_ping-6bba7d3d9fbb1e991b7f0f8fab43b2b1.js"></script>

    <script type="text/javascript">
    if ('Analytics' in window) {
      Analytics.viewed("docs", {
        docs_version: "2",
      });
    }
    </script>
  </body>

<!-- Mirrored from stripe.com/docs/subscriptions/lifecycle by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:48 GMT -->
</html>
