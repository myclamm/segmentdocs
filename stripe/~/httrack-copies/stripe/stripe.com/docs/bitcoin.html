<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from stripe.com/docs/bitcoin by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="csrf-token" content="vDB4V0hwb-49hEjgfLpw1BKsURnWzNRCAS9j6kVo9dclqmwqTrWrq_DAbP-wskWvO9LfnopgFeJAmmnC4L8_pg==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Bitcoin Guide</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../img/v3/home/social.png">

    <meta property="og:title" content="Bitcoin Guide">
    <meta property="og:url" content="bitcoin.html">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="../img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="../img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Bitcoin Guide">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-ec238f46e7cb9867e3c1b529e2cfa37b.css&quot;}</script>

    

    

    <link rel="stylesheet" href="../assets/v3/default-ef2bff54073622b9e08cf24466b5668f.css">
    <link rel="stylesheet" href="../assets/v3/shared/common-d0fb03fa2d48fcf29010779ca9a12b2c.css">
    <link rel="stylesheet" href="../assets/v3/documentation/base-47c1fd7d3d670e4e08df8f5a67b20dea.css">
    <link rel="stylesheet" href="../assets/v3/shared/prism_light-6d08c6ec0d72453693d775c3b96629c0.css">
    
    
    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar">
        <div class="logo">
          <a class="site" href="../index.html" title="Stripe"></a>
          <a class="extension" href="../docs.html">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="../docs.html">Home</a></h1>
          <h1 class="payments"><a class="toggle-content">Payments</a></h1>
<ul>
    <li>
      <a href="quickstart.html">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="checkout/tutorial.html">Checkout</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="checkout.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="custom-form.html">Stripe.js</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="stripe.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="mobile/ios.html">iOS</a>
    </li>
    <li>
      <a href="mobile/android.html">Android</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="charges.html">Creating Charges</a>
    </li>
    <li>
      <a href="declines.html">Declines &amp; Failed Payments</a>
    </li>
    <li>
      <a href="disputes.html">Disputes</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="disputes/evidence.html">Submitting Evidence</a>
    </li>
    <li>
      <a href="disputes/types.html">Types</a>
    </li>
    <li>
      <a href="disputes/faq.html">FAQ</a>
    </li>
</ul>

    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="orders.html">Orders</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="orders/guide.html">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a href="orders/tax-integration.html">Tax Integrations</a>
    </li>
    <li>
      <a href="orders/shipping-integration.html">Shipping Integrations</a>
    </li>
    <li>
      <a href="sources.html">Getting Started</a>
    </li>
    <li>
      <a href="sources/payment-methods.html">Payment Methods</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="sources/cards.html">Cards</a>
    </li>
    <li>
      <a href="sources/3d-secure.html">3D Secure</a>
    </li>
    <li>
      <a href="sources/bancontact.html">Bancontact</a>
    </li>
    <li>
      <a href="sources/giropay.html">Giropay</a>
    </li>
    <li>
      <a href="sources/ideal.html">iDEAL</a>
    </li>
    <li>
      <a href="sources/sepa-direct-debit.html">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="sources/sofort.html">Sofort</a>
    </li>
</ul>

    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="ach.html">ACH</a>
    </li>
    <li>
      <a href="apple-pay.html">Apple Pay</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="apple-pay/apps.html">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="apple-pay/web.html">Apple Pay on the Web</a>
    </li>
</ul>

    </li>
    <li>
      <a href="alipay.html">Alipay</a>
    </li>
    <li>
      <a class='selected' href="bitcoin.html">Bitcoin</a>
    </li>
    <li class='separator'>
      <a href="testing.html">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content">Subscriptions</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="subscriptions/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="subscriptions/creating.html">Creating Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="subscriptions/discounts.html">Applying Discounts</a>
    </li>
    <li>
      <a href="subscriptions/trials.html">Using Trial Periods</a>
    </li>
    <li>
      <a href="subscriptions/quantities.html">Setting Quantities</a>
    </li>
    <li>
      <a href="subscriptions/taxes.html">Adding Taxes</a>
    </li>
    <li>
      <a href="subscriptions/multiple.html">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a href="subscriptions/lifecycle.html">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="subscriptions/webhooks.html">Using Webhooks</a>
    </li>
    <li>
      <a href="subscriptions/changing.html">Changing Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="subscriptions/upgrading-downgrading.html">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="subscriptions/billing-cycle.html">Billing Cycle</a>
    </li>
    <li>
      <a href="subscriptions/canceling-pausing.html">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="subscriptions/invoices.html">Working with Invoices</a>
      <ul data-collapsable=false>
</ul>

    </li>
    <li>
      <a href="subscriptions/plans.html">Managing Plans</a>
    </li>
    <li>
      <a href="subscriptions/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content">Connect</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="connect.html">Overview</a>
    </li>
    <li>
      <a href="connect/connecting-to-accounts.html">Connecting to Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="connect/authentication.html">Authentication</a>
    </li>
</ul>

    </li>
    <li>
      <a href="connect/standalone-accounts.html">Standalone Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="connect/reference.html">OAuth Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="connect/managed-accounts.html">Managed Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="connect/updating-accounts.html">Updating Accounts</a>
    </li>
    <li>
      <a href="connect/identity-verification.html">Identity Verification</a>
    </li>
    <li>
      <a href="connect/required-verification-information.html">Verification Fields</a>
    </li>
    <li>
      <a href="connect/testing-verification.html">Testing Verification</a>
    </li>
    <li>
      <a href="connect/bank-transfers.html">Bank Transfers</a>
    </li>
    <li>
      <a href="connect/migrating.html">Migrating Recipients</a>
    </li>
    <li>
      <a href="connect/best-practices.html">Best Practices</a>
    </li>
</ul>

    </li>
    <li>
      <a href="connect/payments-fees.html">Payments and Fees</a>
    </li>
    <li>
      <a href="connect/special-case-transfers.html">Special-case Transfers</a>
    </li>
    <li class='separator'>
      <a href="connect/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content">Relay</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="relay.html">Selling in Other Apps</a>
    </li>
    <li>
      <a href="relay/apps-guide.html">Accepting Orders in Your App</a>
      <ul data-collapsable=false>
    <li>
      <a href="relay/apps-error-guide.html">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="radar"><a class="toggle-content">Radar</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="radar.html">Overview</a>
    </li>
    <li>
      <a href="radar/risk-evaluation.html">Risk Evaluation</a>
    </li>
    <li>
      <a href="radar/review.html">Review</a>
      <ul data-collapsable=false>
    <li>
      <a href="radar/review/auth-and-capture.html">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="radar/rules.html">Rules</a>
      <ul data-collapsable=false>
    <li>
      <a href="radar/rules/reference.html">Reference</a>
    </li>
</ul>

    </li>
    <li class='separator'>
      <a href="radar/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="account"><a class="toggle-content">Account</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="dashboard.html">Your Account</a>
    </li>
    <li>
      <a href="checklist.html">Going Live Checklist</a>
    </li>
    <li>
      <a href="transfers.html">Getting Paid</a>
    </li>
    <li>
      <a href="reporting.html">Reporting</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content">Development</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="libraries.html">API Libraries</a>
    </li>
    <li>
      <a href="upgrades.html">API Upgrades</a>
    </li>
    <li>
      <a href="webhooks.html">Webhooks</a>
    </li>
    <li>
      <a href="building-integrations.html">Integrations</a>
    </li>
    <li>
      <a href="recipes.html">Recipes</a>
    </li>
    <li>
      <a href="security.html">Security</a>
    </li>
</ul>


          <h1 class="references"><a href="api.html" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content">
          <header>
  <h1>Bitcoin Guide</h1>
  <p>Quickly and easily accept Bitcoin, a digital cryptocurrency, alongside other types of payment. If you need help after reading this, check out our answers to <a href="https://support.stripe.com/search?q=bitcoin">common questions</a> or chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.
</p>
</header>


<section>
  <aside class="note">
    <h3>Bitcoin requirements</h3>
    <p>Bitcoin processing is currently limited to users in the United States.</p>
    <p>You must also process Bitcoin payments in accordance with our <a href="../bitcoin/legal.html">Bitcoin Terms of Service</a>.</p>
  </aside>

<p>Stripe users in the United States can accept Bitcoin for USD payments using either <a href="checkout.html">Checkout</a> or <a href="stripe.html">Stripe.js</a>. Many users can even start accepting Bitcoin payments without needing to make changes to their server-side integration—Stripe’s API supports Bitcoin payments in the same way as credit card payments.</p>

<p>To see how a Bitcoin payment works in Checkout, click the button below and fill in the resulting form with any random, syntactically valid email address.</p>
  <script
    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
    data-key="pk_test_6pRNASCoBOKtIshFeQd4XMUh"
    data-amount="2000"
    data-name="Demo Site"
    data-description="2 widgets ($20.00)"
    data-image="/img/documentation/checkout/marketplace.png"
    data-label="Pay with Card or Bitcoin"
    data-locale="auto"
    data-currency="usd"
    data-bitcoin="true"
    data-notrack>
  </script>
</section>

<section>
<h2 id="payment-flow">Payment flow</h2>

<p>Stripe handles Bitcoin payments similar to card payments, though with some key differences. When accepting a card payment, the customer provides their card information and your integration then creates a charge. Unless the card issuer declines the payment, the payment process is completed. The card details can also be saved and used repeatedly to create additional charges.</p>

<p>With Bitcoin, the process is inverted. Instead of charging a specified amount, the customer must send the amount in bitcoin from their digital wallet, which is used to complete the payment.</p>

<ol>
  <li>The customer is notified of the amount in USD that needs to be paid. Stripe determines what amount of bitcoin (BTC) is needed to convert to the specified amount in USD.</li>
  <li>A <a href="api.html#sources">source</a> of type <strong>bitcoin</strong> and flow <strong>receiver</strong> is created—a wrapper around a Bitcoin address that provides a virtual location that your customer can send the payment to.</li>
  <li>Once the correct amount of bitcoin has been sent into the receiver, the <a href="api.html#sources">source</a> can be charged to create a <a href="api.html#charges">charge</a>. This is the same process as using a credit card <a href="api.html#tokens">token</a> to create a charge.</li>
</ol>

<p>Unlike credit card payments, Bitcoin payments cannot be declined. Once the funds are in the receiver, the charge will succeed as the specified amount has already been sent.</p>

<p>A Bitcoin source can only be used for a single payment—Stripe does not currently support recurring or repeated payments with Bitcoin.</p>
  <aside class="important"><p>To process live Bitcoin payments, you need to <a href='https://dashboard.stripe.com/account/payments/settings' class='arrow'>enable the live Bitcoin API on your account</a></p></aside>
</section>

<section>
<h2 id="quickstart-using-checkout">Quickstart using Checkout</h2>

<p>The simplest way to accept Bitcoin is with <a href="checkout.html">Checkout</a>. After integrating Checkout for card payments, only one code change is needed to begin accepting Bitcoin payments—the addition of <code>data-bitcoin="true"</code> in the form’s code:</p>
<div class="code">
  <pre class="language-html numbered" ><code>&lt;form action=&quot;&quot; method=&quot;POST&quot;&gt;
  &lt;script
    src=&quot;https://checkout.stripe.com/checkout.js&quot; class=&quot;stripe-button&quot;
    data-key=&quot;pk_test_6pRNASCoBOKtIshFeQd4XMUh&quot;
    data-amount=&quot;2000&quot;
    data-name=&quot;Demo Site&quot;
    data-description=&quot;2 widgets ($20.00)&quot;
    data-image=&quot;/img/documentation/checkout/marketplace.png&quot;
    data-label=&quot;Pay with Card or Bitcoin&quot;
    data-locale=&quot;auto&quot;
    data-currency=&quot;usd&quot;
    data-bitcoin=&quot;true&quot;&gt;
  &lt;/script&gt;
&lt;/form&gt;</code></pre>
</div>

  <aside class="note">
    <h3>Additional testing</h3>
<p>Use one of Stripe’s <a href="testing.html#how-do-i-test-bitcoin">test email addresses</a> when you need to test Bitcoin payments under different conditions.</p>  </aside>

<p>After specifying the amount in USD that you want to receive, Stripe handles displaying the converted amount in BTC that your customer needs to pay. Once a Bitcoin payment is received, Checkout submits the form with the following extra fields:</p>

<ul>
  <li><code>stripeToken</code>: The ID of the chargeable <a href="api.html#sources">source</a> object</li>
  <li><code>stripeTokenType</code>: The type of token returned—the value is <strong>source_bitcoin</strong></li>
  <li><code>stripeEmail</code>: The email address provided by the customer</li>
</ul>

<p>You then create a charge on your server, using the returned source object’s ID, in the same way you would for a credit card token. The charge request process is explored in more detail in the later section about <a href="#creating-a-charge">creating a charge</a>.</p></section>

<section>
<h2 id="using-stripejs">Using Stripe.js</h2>

<p>You can use Stripe.js if you want complete control over your Bitcoin payment flow, user interface, polling logic, etc. By contrast, <a href="#using-checkout">Checkout</a> handles all of this for you.</p>

<h3 id="generating-a-bitcoin-address-for-payment">Generating a Bitcoin address for payment</h3>

<p>Once you decide how much you’d like to charge, generate a Bitcoin address by creating a <a href="api.html#sources">source</a> object of type <strong>bitcoin</strong>. Bitcoin sources have a <code>receiver</code> subhash that includes a Bitcoin <code>address</code> where the customer can send bitcoin as well as the USD amount received so far. They also have a <code>bitcoin</code> subhash that contains the converted BTC amount for the customer to send.</p>

<p>While <a href="api.html#sources">source</a> objects are treated very similarly to credit card tokens, there is a major difference. When either Checkout or Stripe.js (via callback) passes a source back to the server, that source is “filled” and becomes <code>chargeable</code>—the customer has sent bitcoin to the specified Bitcoin address, and the bitcoin were converted to USD.</p>

<h3 id="creating-and-displaying-a-source-object">Creating and displaying a Source object</h3>

<p>A <a href="api.html#sources">source</a> is first created via the Stripe API with the amount in USD that should be charged. You must also specify the customer’s email address.</p>
  <div class="tabs tabs-code animated" data-platform=server>
    <nav class="nav-languages">
        <a data-language="ruby"
           >Ruby</a>
        <a data-language="python"
           >Python</a>
        <a data-language="php"
           >PHP</a>
        <a data-language="java"
           >Java</a>
        <a data-language="node"
           >Node</a>
        <a data-language="go"
           >Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code">
  <pre class="language-ruby numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

source = Stripe::Source.create(
  :type =&gt; &quot;bitcoin&quot;,
  :amount =&gt; 1000,
  :currency =&gt; &quot;usd&quot;,
  :owner =&gt; {
    :email =&gt; &quot;payinguser+fill_now@example.com&quot;,
  },
)
</code></pre>
</div>
<div class="code">
  <pre class="language-python numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

source=stripe.Source.create(
  type=&#39;bitcoin&#39;,
  amount=1000,
  currency=&#39;usd&#39;,
  owner={
    &quot;email&quot;:&#39;payinguser+fill_now@example.com&#39;
  }
)
</code></pre>
</div>
<div class="code">
  <pre class="language-php numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

$source = \Stripe\Source::create(array(
  &quot;type&quot; =&gt; &quot;bitcoin&quot;,
  &quot;amount&quot; =&gt; 1000,
  &quot;currency&quot; =&gt; &quot;usd&quot;,
  &quot;owner&quot; =&gt; array(
    &quot;email&quot; =&gt; &quot;payinguser+fill_now@example.com&quot;
  )
));
</code></pre>
</div>
<div class="code">
  <pre class="language-java numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.apiKey = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;;

Map&lt;String, Object&gt; ownerParams = new HashMap&lt;String, Object&gt;();
ownerParams.put(&quot;email&quot;, &quot;payinguser+fill_now@example.com&quot;);

Map&lt;String, Object&gt; sourceParams = new HashMap&lt;String, Object&gt;();
sourceParams.put(&quot;type&quot;, &quot;bitcoin&quot;);
sourceParams.put(&quot;amount&quot;, 1000);
sourceParams.put(&quot;currency&quot;, &quot;usd&quot;);
sourceParams.put(&quot;owner&quot;, ownerParams);

Source source = Source.create(sourceParams);
</code></pre>
</div>
<div class="code">
  <pre class="language-javascript numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require(&quot;stripe&quot;)(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

stripe.source.create({
  type: &quot;bitcoin&quot;,
  amount: 1000,
  currency: &quot;usd&quot;,
  owner: {
    email: &quot;payinguser+fill_now@example.com&quot;
  }
}, function(err, source) {
  // asynchronously called
});
</code></pre>
</div>
<div class="code">
  <pre class="language-go numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.Key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

sourceParams := &amp;stripe.SourceObjectParams{
  Type: &quot;bitcoin&quot;,
  Amount: 1000,
  Currency: &quot;usd&quot;,
  Owner: &amp;stripe.SourceOwnerParams{
    Email: &quot;payinguser+fill_now@example.com&quot;,
  },
}

s, err := source.New(sourceParams)

if err != nil {
  // handle error
  return;
}
</code></pre>
</div>

    </div>
  </div>

<p>The created source exposes an amount in bitcoin (BTC), and an address that the customer can send their payment to:</p>
<div class="code">
  <pre class="language-javascript numbered" ><code>{
  &quot;id&quot;: &quot;src_18h4EOEniDLYboM3JphgS37m&quot;,
  &quot;object&quot;: &quot;source&quot;,
  &quot;amount&quot;: 200,
  &quot;client_secret&quot;: &quot;src_client_secret_OkNv1HJ3melzdk2bgd2o4es8&quot;,
  &quot;created&quot;: 1470864440,
  &quot;currency&quot;: &quot;usd&quot;,
  &quot;flow&quot;: &quot;receiver&quot;,
  &quot;livemode&quot;: true,
  &quot;metadata&quot;: {},
  &quot;owner&quot;: {
    &quot;address&quot;: null,
    &quot;email&quot;: &quot;jenny@rosen.net&quot;,
    &quot;name&quot;: &quot;Jenny Rosen&quot;,
    &quot;phone&quot;: null,
    &quot;verified_address&quot;: null,
    &quot;verified_email&quot;: null,
    &quot;verified_name&quot;: null,
    &quot;verified_phone&quot;: null
  },
  &quot;receiver&quot;: {
    &quot;address&quot;: &quot;1Nar8gbhZqahaKdoxLAnxVhGjd5YoHs8T1&quot;,
    &quot;amount_charged&quot;: 0,
    &quot;amount_received&quot;: 0,
    &quot;amount_returned&quot;: 0,
    &quot;refund_attributes_method&quot;: &quot;email&quot;,
    &quot;refund_attributes_status&quot;: &quot;missing&quot;
  },
  &quot;status&quot;: &quot;pending&quot;,
  &quot;type&quot;: &quot;bitcoin&quot;,
  &quot;usage&quot;: &quot;single_use&quot;,
  &quot;bitcoin&quot;: {
    &quot;address&quot;: &quot;1Nar8gbhZqahaKdoxLAnxVhGjd5YoHs8T1&quot;,
    &quot;amount&quot;: 334400,
    &quot;amount_charged&quot;: 0,
    &quot;amount_received&quot;: 0,
    &quot;amount_returned&quot;: 0,
    &quot;uri&quot;: &quot;bitcoin:1Nar8gbhZqahaKdoxLAnxVhGjd5YoHs8T1?amount=0.003344&quot;
  }
}</code></pre>
</div>

<p>There are three pieces of information you should display to the customer:</p>

<ul>
  <li><code>bitcoin[amount]</code>: The amount (in <a href="https://en.bitcoin.it/wiki/Satoshi_(unit)">Satoshi</a>) that the customer must send. This amount, like all amounts used by the Stripe API, represents the smallest unit of currency. There are 10<sup>8</sup> (100,000,000) satoshi in one bitcoin, so the returned <code>bitcoin[amount]</code> must be divided by 100,000,000 to present the amount in BTC.</li>
  <li><code>receiver[address]</code>: The bitcoin address that is specific to this receiver</li>
  <li><code>bitcoin[uri]</code>: An encoding of the amount and address. If you encode this URI as a QR code, many Bitcoin apps can scan it. If this URI is presented as a hyperlink, many customers can click on it to activate their preferred Bitcoin client.</li>
</ul>

<h3 id="polling-the-source">Polling the source</h3>

<p>Bitcoin payments are asynchronous: after generating the address, you need to wait for the customer to send the payment. We provide a utility method that will help you poll the Stripe API for changes to the <a href="api.html#sources">source</a> object:</p>
<div class="code">
  <pre class="language-javascript numbered" ><code>Stripe.source.poll(
  &#39;src_18h4EOEniDLYboM3JphgS37m&#39;,
  &#39;src_client_secret_OkNv1HJ3melzdk2bgd2o4es8&#39;,
  function(status, source) {
    // `source`: is the source object.
    // `status`: is the HTTP status. if non 200, an error occured
    //          and the poll is canceled.

    // This handler is called as soon as the source is retrieved and subsequently
    // anytime the source&#39;s status (`source.status`) is updated.
});</code></pre>
</div>

<p>The method takes in a callback as third argument; when the requested amount is received (when the source is “filled” and its status becomes <code>chargeable</code>), Stripe.js will call the specified handler. You can use this function to post the ID of the source to your server, along with any other necessary customer information.</p>

<p>Because a Bitcoin source’s guaranteed exchange rate expires after 10 minutes, sources of type <strong>bitcoin</strong> are canceled after this time elapses. Your handler will be called client-side and the source’s status will be <code>canceled</code>. Any fund received after a source is canceled will be automatically refunded to the customer.</p>

<p>When you receive that callback you can instruct your servers to create a new Source, update the payment page with this new receiver’s information and start polling it.</p></section>

<section>
<h2 id="creating-a-charge">Creating a charge</h2>

<p>When the source has become chargeable, it should be submitted to your server to make a charge request and complete the payment, as you would with a credit card token. If you don’t create a charge using the source, you will not be paid the funds from the transaction.</p>

<p>Sources with status <code>chargeable</code> are canceled after one hour if they are not charged. When they get canceled the USD amount of the source is converted back to BTC and returned to the customer (if the USD/BTC rate moved during that hour the amount of BTC returned to the customer might be different from the amount they sent).</p>

<p>The charge request must use the same amount and currency (USD) as the source, and a charge cannot be for less than the source’s amount. Additionally, a source can only be used once, and only if it has been filled and has a status <code>chargeable</code>.</p>
  <div class="tabs tabs-code animated" data-platform=server>
    <nav class="nav-languages">
        <a data-language="ruby"
           >Ruby</a>
        <a data-language="python"
           >Python</a>
        <a data-language="php"
           >PHP</a>
        <a data-language="java"
           >Java</a>
        <a data-language="node"
           >Node</a>
        <a data-language="go"
           >Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code">
  <pre class="language-ruby numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

source = Stripe::Source.create(
  :type =&gt; &quot;bitcoin&quot;,
  :amount =&gt; 1000,
  :currency =&gt; &quot;usd&quot;,
  :owner =&gt; {
    :email =&gt; &quot;payinguser+fill_now@example.com&quot;,
  },
)

charge = Stripe::Charge.create(
  :amount =&gt; source.amount,
  :currency =&gt; source.currency,
  :source =&gt; source.id,
  :description =&gt; source.owner.email
)
</code></pre>
</div>
<div class="code">
  <pre class="language-python numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

source=stripe.Source.create(
  type=&#39;bitcoin&#39;,
  amount=1000,
  currency=&#39;usd&#39;,
  owner={
    &quot;email&quot;:&#39;payinguser+fill_now@example.com&#39;
  }
)

charge = stripe.Charge.create(
    amount=source.amount,
    currency=source.currency,
    source=source.id,
    description=source.owner.email
)
</code></pre>
</div>
<div class="code">
  <pre class="language-php numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

$source = \Stripe\Source::create(array(
  &quot;type&quot; =&gt; &quot;bitcoin&quot;,
  &quot;amount&quot; =&gt; 1000,
  &quot;currency&quot; =&gt; &quot;usd&quot;,
  &quot;owner&quot; =&gt; array(
    &quot;email&quot; =&gt; &quot;payinguser+fill_now@example.com&quot;
  )
));

$charge = \Stripe\Charge::create(array(
  &quot;amount&quot; =&gt; $source-&gt;amount,
  &quot;currency&quot; =&gt; $source-&gt;currency,
  &quot;source&quot; =&gt; $source-&gt;id,
  &quot;description&quot; =&gt; &quot;Example charge&quot;
));
</code></pre>
</div>
<div class="code">
  <pre class="language-java numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.apiKey = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;;

Map&lt;String, Object&gt; ownerParams = new HashMap&lt;String, Object&gt;();
ownerParams.put(&quot;email&quot;, &quot;payinguser+fill_now@example.com&quot;);

Map&lt;String, Object&gt; sourceParams = new HashMap&lt;String, Object&gt;();
sourceParams.put(&quot;type&quot;, &quot;bitcoin&quot;);
sourceParams.put(&quot;amount&quot;, 1000);
sourceParams.put(&quot;currency&quot;, &quot;usd&quot;);
sourceParams.put(&quot;owner&quot;, ownerParams);

Source source = Source.create(sourceParams);

Map&lt;String, Object&gt; chargeParams = new HashMap&lt;String, Object&gt;();
chargeParams.put(&quot;source&quot;, source.getId());
chargeParams.put(&quot;amount&quot;, source.getAmount());
chargeParams.put(&quot;currency&quot;, source.getCurrency());
Charge charge = Charge.create(chargeParams);
</code></pre>
</div>
<div class="code">
  <pre class="language-javascript numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require(&quot;stripe&quot;)(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

var source = stripe.source.create({
  type: &quot;bitcoin&quot;,
  amount: 1000,
  currency: &quot;usd&quot;,
  owner: {
    email: &quot;payinguser+fill_now@example.com&quot;
  }
}, function(err, source) {
  stripe.charges.create({
    amount: source.amount,
    currency: source.currency,
    source: source.id,
    description: &quot;Example charge&quot;
  }, function(err, charge) {
    // asynchronously called
  });
});

</code></pre>
</div>
<div class="code">
  <pre class="language-go numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.Key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

sourceParams := &amp;stripe.SourceObjectParams{
  Type: &quot;bitcoin&quot;,
  Amount: 1000,
  Currency: &quot;usd&quot;,
  Owner: &amp;stripe.SourceOwnerParams{
    Email: &quot;payinguser+fill_now@example.com&quot;,
  },
}

s, err := source.New(sourceParams)

if err != nil {
  // handle error
  return;
}

chargeParams := &amp;stripe.ChargeParams{
  Amount:   source.Amount,
  Currency: source.Currency,
}
chargeParams.SetSource(s.ID)

ch, err := charge.New(chargeParams)

if err != nil {
  // handle error
  return;
}
</code></pre>
</div>

    </div>
  </div>

<p>A source can also be linked to a <a href="api.html#customers">Customer</a> object and used to create a charge for that customer. Only one charge can be made against the source that has been attached to a customer, and it must be for the same amount and currency as the source.</p></section>

<section>
<h2 id="managing-refunds">Managing refunds</h2>

<aside class="note">
  <h3>Advanced integration</h3>
  <p>Advanced users may want to manage the collection of the refund addresses themselves. Please <a href="https://support.stripe.com/email">contact us</a> to learn more about this option.</p>
</aside>

<p>Like any other type of payment, Bitcoin payments can be refunded through either the Dashboard or API. However, with Bitcoin, the Bitcoin address where to return the funds needs to be communicated by the customer. By default, as soon as a refund is created (or the source is canceled and funds need to be returned), we will automatically contact the customer at the email address provided when you created the <a href="api.html#sources">source</a> object. Once the customer provides us with their Bitcoin address, we will process the refund automatically.</p></section>

<section>
<h2 id="mispayments">Mispayments</h2>

<p>The customer is responsible for sending the correct amount of bitcoin to fill the <a href="api.html#sources">source</a>. While uncommon, it is possible for a customer to send an unexpected amount that prevents a payment from being completed—referred to as <em>mispayment</em>. These possibilities are:</p>

<ol>
  <li>The customer sends too few bitcoin so the payment cannot be completed</li>
  <li>The customer sends too many bitcoin and needs to be partially refunded</li>
  <li>The customer sends the correct amount of bitcoin but they send it belatedly, or there’s a network error such that the source token is never posted to your server</li>
</ol>

<p>You can help avoid the third possibility of mispayments through the use of <a href="webhooks.html">webhooks</a>. You can configure your integration to receive <code>source.chargeable</code> events, then subsequently create charges from those sources.</p>

<p>All mispayments are handled automatically by Stripe. When a source is charged, any unused bitcoin received in excess will be returned to the customer automatically (after collecting their refund address as described in the previous section). Similarly if a source is never charged, it eventually gets canceled and any unused bitcoin is also returned the customer automatically.</p></section>

<section>
<h2 id="webhook-events">Webhook events</h2>

<p>A successful Bitcoin payment generates the <code>charge.succeeded</code> event, which is the same as a successful credit card charge. There are also events specific to Bitcoin sources:</p>

<ul>
  <li><code>source.chargeable</code>: Occurs whenever a source is filled and has become chargeable</li>
  <li><code>source.canceled</code>: Occurs whenever a source has been canceled</li>
</ul>

<p>You can refer to our <a href="webhooks.html">webhooks documentation</a> for more information on receiving webhook notifications.</p></section>




          <footer>
  <h2>Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://support.stripe.com/">Search</a> our site for more information, <a href="https://support.stripe.com/email">send us an email</a>, or <a href="../contact/sales.html">get in touch</a> with our sales team!</p>
</footer>

        </article>
      </div>
    </div>

    <div id="loading-bar"></div>

    <script src="../assets/external/jquery.min-94df374d2ad5d02ae136584dc008fb1c.js"></script>
    <script src="../assets/prism-aa9f4cb7aff3f31b5394455bcbea0d8b.js"></script>
    <script src="../assets/external/dynamics.min-14579f80273a61e6d0f4f45484e20dc7.js"></script>
    <script src="../assets/jquery.cookie-d7482a1bbfda18d981eda4398666acdd.js"></script>
    <script src="../assets/documentation-84c208e01668170139f2f511cfc37644.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="https://js.stripe.com/v2/"></script>

    
    <script src="../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../assets/analytics-e800ab0ba76de2b697ea3f61c673695b.js"></script>
<script src="https://js.stripe.com/v2/m.js"></script>
<script src="../assets/mirador_ping-6bba7d3d9fbb1e991b7f0f8fab43b2b1.js"></script>

    <script type="text/javascript">
    if ('Analytics' in window) {
      Analytics.viewed("docs", {
        docs_version: "2",
      });
    }
    </script>
  </body>

<!-- Mirrored from stripe.com/docs/bitcoin by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:47 GMT -->
</html>
