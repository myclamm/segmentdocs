<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from stripe.com/docs/building-integrations by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="csrf-token" content="SChb07O6mosc_HQEVA34I_90KFzmLDGhv2S3fKylyEnRsk-utX9eztG4UBuYBc1Y1gqm27qA8AH-0b1UCXICOA==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Building an Integration</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../img/v3/home/social.png">

    <meta property="og:title" content="Building an Integration">
    <meta property="og:url" content="building-integrations.html">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="../img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="../img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Building an Integration">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-ec238f46e7cb9867e3c1b529e2cfa37b.css&quot;}</script>

    

    

    <link rel="stylesheet" href="../assets/v3/default-ef2bff54073622b9e08cf24466b5668f.css">
    <link rel="stylesheet" href="../assets/v3/shared/common-d0fb03fa2d48fcf29010779ca9a12b2c.css">
    <link rel="stylesheet" href="../assets/v3/documentation/base-47c1fd7d3d670e4e08df8f5a67b20dea.css">
    <link rel="stylesheet" href="../assets/v3/shared/prism_light-6d08c6ec0d72453693d775c3b96629c0.css">
    
      <link rel="stylesheet" href="../assets/v3/documentation/connect_button-32eb736084ce624a104acae94437b9e2.css">

    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar">
        <div class="logo">
          <a class="site" href="../index.html" title="Stripe"></a>
          <a class="extension" href="../docs.html">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="../docs.html">Home</a></h1>
          <h1 class="payments"><a class="toggle-content">Payments</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="quickstart.html">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="checkout/tutorial.html">Checkout</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="checkout.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="custom-form.html">Stripe.js</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="stripe.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="mobile/ios.html">iOS</a>
    </li>
    <li>
      <a href="mobile/android.html">Android</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="charges.html">Creating Charges</a>
    </li>
    <li>
      <a href="declines.html">Declines &amp; Failed Payments</a>
    </li>
    <li>
      <a href="disputes.html">Disputes</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="disputes/evidence.html">Submitting Evidence</a>
    </li>
    <li>
      <a href="disputes/types.html">Types</a>
    </li>
    <li>
      <a href="disputes/faq.html">FAQ</a>
    </li>
</ul>

    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="orders.html">Orders</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="orders/guide.html">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a href="orders/tax-integration.html">Tax Integrations</a>
    </li>
    <li>
      <a href="orders/shipping-integration.html">Shipping Integrations</a>
    </li>
    <li>
      <a href="sources.html">Getting Started</a>
    </li>
    <li>
      <a href="sources/payment-methods.html">Payment Methods</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="sources/cards.html">Cards</a>
    </li>
    <li>
      <a href="sources/3d-secure.html">3D Secure</a>
    </li>
    <li>
      <a href="sources/bancontact.html">Bancontact</a>
    </li>
    <li>
      <a href="sources/giropay.html">Giropay</a>
    </li>
    <li>
      <a href="sources/ideal.html">iDEAL</a>
    </li>
    <li>
      <a href="sources/sepa-direct-debit.html">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="sources/sofort.html">Sofort</a>
    </li>
</ul>

    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="ach.html">ACH</a>
    </li>
    <li>
      <a href="apple-pay.html">Apple Pay</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="apple-pay/apps.html">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="apple-pay/web.html">Apple Pay on the Web</a>
    </li>
</ul>

    </li>
    <li>
      <a href="alipay.html">Alipay</a>
    </li>
    <li>
      <a href="bitcoin.html">Bitcoin</a>
    </li>
    <li class='separator'>
      <a href="testing.html">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content">Subscriptions</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="subscriptions/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="subscriptions/creating.html">Creating Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="subscriptions/discounts.html">Applying Discounts</a>
    </li>
    <li>
      <a href="subscriptions/trials.html">Using Trial Periods</a>
    </li>
    <li>
      <a href="subscriptions/quantities.html">Setting Quantities</a>
    </li>
    <li>
      <a href="subscriptions/taxes.html">Adding Taxes</a>
    </li>
    <li>
      <a href="subscriptions/multiple.html">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a href="subscriptions/lifecycle.html">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="subscriptions/webhooks.html">Using Webhooks</a>
    </li>
    <li>
      <a href="subscriptions/changing.html">Changing Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="subscriptions/upgrading-downgrading.html">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="subscriptions/billing-cycle.html">Billing Cycle</a>
    </li>
    <li>
      <a href="subscriptions/canceling-pausing.html">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="subscriptions/invoices.html">Working with Invoices</a>
      <ul data-collapsable=false>
</ul>

    </li>
    <li>
      <a href="subscriptions/plans.html">Managing Plans</a>
    </li>
    <li>
      <a href="subscriptions/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content">Connect</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="connect.html">Overview</a>
    </li>
    <li>
      <a href="connect/connecting-to-accounts.html">Connecting to Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="connect/authentication.html">Authentication</a>
    </li>
</ul>

    </li>
    <li>
      <a href="connect/standalone-accounts.html">Standalone Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="connect/reference.html">OAuth Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="connect/managed-accounts.html">Managed Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="connect/updating-accounts.html">Updating Accounts</a>
    </li>
    <li>
      <a href="connect/identity-verification.html">Identity Verification</a>
    </li>
    <li>
      <a href="connect/required-verification-information.html">Verification Fields</a>
    </li>
    <li>
      <a href="connect/testing-verification.html">Testing Verification</a>
    </li>
    <li>
      <a href="connect/bank-transfers.html">Bank Transfers</a>
    </li>
    <li>
      <a href="connect/migrating.html">Migrating Recipients</a>
    </li>
    <li>
      <a href="connect/best-practices.html">Best Practices</a>
    </li>
</ul>

    </li>
    <li>
      <a href="connect/payments-fees.html">Payments and Fees</a>
    </li>
    <li>
      <a href="connect/special-case-transfers.html">Special-case Transfers</a>
    </li>
    <li class='separator'>
      <a href="connect/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content">Relay</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="relay.html">Selling in Other Apps</a>
    </li>
    <li>
      <a href="relay/apps-guide.html">Accepting Orders in Your App</a>
      <ul data-collapsable=false>
    <li>
      <a href="relay/apps-error-guide.html">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="radar"><a class="toggle-content">Radar</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="radar.html">Overview</a>
    </li>
    <li>
      <a href="radar/risk-evaluation.html">Risk Evaluation</a>
    </li>
    <li>
      <a href="radar/review.html">Review</a>
      <ul data-collapsable=false>
    <li>
      <a href="radar/review/auth-and-capture.html">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="radar/rules.html">Rules</a>
      <ul data-collapsable=false>
    <li>
      <a href="radar/rules/reference.html">Reference</a>
    </li>
</ul>

    </li>
    <li class='separator'>
      <a href="radar/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="account"><a class="toggle-content">Account</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="dashboard.html">Your Account</a>
    </li>
    <li>
      <a href="checklist.html">Going Live Checklist</a>
    </li>
    <li>
      <a href="transfers.html">Getting Paid</a>
    </li>
    <li>
      <a href="reporting.html">Reporting</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content">Development</a></h1>
<ul>
    <li>
      <a href="libraries.html">API Libraries</a>
    </li>
    <li>
      <a href="upgrades.html">API Upgrades</a>
    </li>
    <li>
      <a href="webhooks.html">Webhooks</a>
    </li>
    <li>
      <a class='selected' href="building-integrations.html">Integrations</a>
    </li>
    <li>
      <a href="recipes.html">Recipes</a>
    </li>
    <li>
      <a href="security.html">Security</a>
    </li>
</ul>


          <h1 class="references"><a href="api.html" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content">
          
<header>
  <h1>Building an Integration</h1>
  <p>A start-to-finish guide that helps you build a Stripe integration. Browse the <a href="../works-with.html">Works with Stripe gallery</a> to discover hundreds of applications and services that already integrate with Stripe.</p>
</header>

<section>
<h2 id="introduction">Introduction</h2>

<p>Hundreds of thousands of businesses use Stripe to build and manage their internet business. Collectively, they accept billions of dollars in payments every year. While Stripe offers users hundreds of features, there’s some capabilities we don’t offer out of the box—that’s where you come in! By building an integration on top of Stripe, our network of businesses can use your products instantly and seamlessly. If you’d like to build a useful integration for all Stripe users, this guide covers the process from start to finish.</p>

<p>Integrations on Stripe range from simple tools to calculate taxes and shipping to fully-featured analytics platforms that calculate churn rates, ARR, MRR, and more.</p>

<h3 id="use-cases">Use cases</h3>

<p>This guide is primarily useful for developers that want to build pre-built integrations to extend Stripe’s feature set (such as integrations for accounting, analytics and notifications, inventory management, sending emails, card readers, shipping, tax calculations, and more). Some example integrations include <a href="../works-with/baremetrics.html">Baremetrics</a>, <a href="../works-with/cardflight.html">CardFlight</a>, <a href="../works-with/zapier.html">Zapier</a>, and <a href="../works-with/easypost.html">EasyPost</a>.</p>

<p>It should also prove useful for integrations that help non-technical users get started in accepting payments online, such as services to collect donations, or for setting up subscriptions or invoicing for small businesses. Some example integrations include <a href="../works-with/chargify.html">Chargify</a>, <a href="../works-with/invoice2go.html">Invoice2Go</a>, <a href="../works-with/donorbox.html">DonorBox</a>, and <a href="../works-with/wufoo.html">Wufoo</a>.</p>

<h3 id="getting-started">Getting started</h3>

<p>It’s easy to get started with a simple OAuth 2.0 flow to connect to Stripe accounts. Optionally, you can request permissions to take actions on behalf of Stripe accounts. Stripe will automatically send <a href="webhooks.html">webhooks</a> to signal changes in accounts that connect to your integration. You also have the flexibility to set your own pricing and offer your integration for free, charge a per-transaction fee, or subscribe users to a recurring plan.</p>

<p>Once you’re ready to launch, we’ll be happy to feature you in our <a href="../works-with.html">Works with Stripe gallery</a> so that businesses on Stripe can discover and start using your integration.</p></section>

<section>
<h2 id="oauth-workflow">OAuth workflow</h2>

<aside class="note">
  <h3>OAuth 2.0</h3>
  <p>For additional reading, feel free to head over to the <a href="https://tools.ietf.org/html/rfc6749">official OAuth 2.0 spec</a>.</p>
  <p>There’s also a <a href="http://oauth.net/2/">list of OAuth 2.0 clients</a> if you’d rather not implement the details yourself.</p>
</aside>

<p>We offer a standard OAuth 2.0 flow for you to connect to Stripe accounts. As part of this OAuth flow, you will need to create two pages on your website:</p>

<ul>
  <li>A start page that begins the connection process (i.e., where the user goes to connect to your integration).</li>
  <li>A destination page to which the user will be redirected after connecting their Stripe account.</li>
</ul>

<p>Once the OAuth flow is successfully completed, you will be able to use the Stripe API on behalf of your user’s account.</p>

<h3 id="registering-your-application">Registering your application</h3>

<p>The first thing you need to do is <a href="https://dashboard.stripe.com/account/applications/settings">register your platform</a> with Stripe. We only ask you to complete a couple details about your application in the “Standalone accounts” section:</p>

<div class="image full">
  <p><a href="../img/documentation/integrations/connect-oauth-settings.png" class="zoomable" data-width="1600" data-height="1150"><img src="../img/documentation/integrations/connect-oauth-settings.png" width="75%" /></a></p>
</div>

<p>Your logo will be shown to users when linking their Stripe account to your application, and your icon will be displayed in their list of connected applications.</p>

<p>To get started with your integration, you will need two key pieces of information displayed just below:</p>

<ul>
  <li>Your <code>client_id</code>, a unique identifier for your platform, generated by Stripe.</li>
  <li>Your <code>redirect_uri</code>, a page on your website to which the user will be redirected after connecting their account (or failing to, should that be the case), set by you.</li>
</ul>

<p>Stripe provides a development <code>client_id</code> and lets you define a different <code>redirect_uri</code> for development, to make <a href="connect/testing.html#using-oauth">testing</a> easier.</p>

<h3 id="connecting-accounts">Connecting accounts</h3>

<p>With these two pieces of information in hand, you’re ready to have your users link their Stripe account with your application.</p>

<p>We support connections under two different scopes: <code>read_only</code>, which is the default option, and <code>read_write</code>.</p>

<ul>
  <li>If you’re building an application only reading data from Stripe, you’ll want to request <code>read_only</code>. This permission type allows you to read data from the user’s account, but not create charges or transfers: you can see the money moving around, but not move it yourself.</li>
  <li>If you’re building an application that needs to perform any actions on behalf of the connected user, you’ll want to request <code>read_write</code> scope instead. See the <a href="connect/reference.html">OAuth reference</a> for more information.</li>
</ul>

<aside class="important">
  <p>Regardless of which scope you select, you must clearly indicate the types of data being requested, as well as accurate information on the storage and retention policy.</p>
</aside>

<p>We recommend showing a <a href="../about/resources.html">Connect with Stripe button</a> that sends them to our <code>authorize_url</code> endpoint:</p>
<div class="code">
  <pre class="language-url wrap" ><code>https://connect.stripe.com/oauth/authorize?response_type=code&amp;client_id=ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7&amp;scope=read_only</code></pre>
</div>

<p>Here is how your button may look (the <code>href</code> value matches that above):</p>

<p><a href="https://connect.stripe.com/oauth/authorize?response_type=code&amp;client_id=ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7&amp;scope=read_write" class="connect-button"><span>Connect with Stripe</span></a></p>

<p>The user will be taken to a page like this to review the requested permissions and link their account:</p>

<div class="image full">
  <p><img src="../img/documentation/integrations/connect-oauth-flow.png" width="100%" /></p>
</div>

<p>At the end of the OAuth workflow, you’ll be provided with authorization credentials for the user’s account:</p>
<div class="code">
  <pre class="language-javascript numbered" ><code>{
  ...
  &quot;stripe_user_id&quot;: &quot;acct_0SsxLehtH9gatD&quot;,
  ...
}</code></pre>
</div>

<p>You’ll want to store the <code>stripe_user_id</code> on your side, as this is used to identify the account.</p>

<h3 id="using-the-stripe-account-header">Using the Stripe-Account header</h3>

<p>In order to perform API requests on behalf of this user’s account, all you will need is your platform account secret key, and a <code>Stripe-Account</code> header identifying the account for which the request is being made.</p>

<p>All of Stripe’s libraries support this style of authentication on a per-request basis, and we listed examples of use cases in the two following sections:</p>

<ol>
  <li><a href="#viewing-and-manipulating-data">Viewing and manipulating data</a></li>
  <li><a href="#performing-actions-on-behalf-of-stripe-accounts">Performing actions on behalf of Stripe accounts</a></li>
</ol></section>

<section>
<h2 id="viewing-and-manipulating-data">Viewing and manipulating data</h2>

<p>Whether you’re building an analytics or custom reporting integration, or any application on top of Stripe data, this section is for you. A few examples of what you can build by simply requesting the <code>read_only</code> scope are:</p>

<ul>
  <li>Trend identification, such as sales by weekday.</li>
  <li>Percentage reporting, like how many charges are authorized but not captured or captured and later refunded.</li>
  <li>Aggregation, such as the total fees paid within a period.</li>
  <li>Custom accounting, for example, showing the difference between the cash on hand and the transfers pending.</li>
  <li>Tax reporting, watching sales by geographic location.</li>
</ul>

<h3 id="fetching-data">Fetching data</h3>

<p>Once a user links their Stripe account to your application, you have the ability to perform API requests on behalf of their Stripe account. Generally speaking, you can perform nearly any kind of request, but when granted a <code>read_only</code> scope, your integration is restricted to <code>GET</code> requests: fetching individual objects (e.g., a single charge) or lists of objects. This means that you can, through the API, make “list all” requests to fetch a connected user’s data such as listing customers or transactions.</p>

<p>Let’s try it out by fetching charges for a connected Stripe account. By only passing the account ID, that request would return by default the 10 most recent charges. Taking this further, you can use the <code>created</code> parameter to filter what transactions are returned, and paginate the request using the <code>limit</code>, <code>ending_before</code>, and <code>starting_after</code> parameters.</p>

<p>As an example of that, this request will fetch the first 50 charges starting at the beginning of the year:</p>
  <div class="tabs tabs-code animated" data-platform=server>
    <nav class="nav-languages">
        <a data-language="ruby"
           >Ruby</a>
        <a data-language="python"
           >Python</a>
        <a data-language="php"
           >PHP</a>
        <a data-language="java"
           >Java</a>
        <a data-language="node"
           >Node</a>
    </nav>
    <div class="tabs-content">
      <div class="code">
  <pre class="language-ruby numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

Stripe::Charge.list(
  {
    :limit =&gt; 50,
    :created =&gt; {&quot;lte&quot;: 1483228800}
  },
  {:stripe_account =&gt; CONNECTED_STRIPE_ACCOUNT_ID}
)
</code></pre>
</div>
<div class="code">
  <pre class="language-python numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

stripe.Charge.list(
  limit=50,
  created={&quot;lte&quot;: 1483228800},
  stripe_account=CONNECTED_STRIPE_ACCOUNT_ID
)
</code></pre>
</div>
<div class="code">
  <pre class="language-php numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

\Stripe\Charge::all(
  array(
    &quot;limit&quot; =&gt; 50,
    &quot;created&quot; =&gt; array(&quot;lte&quot; =&gt; 1483228800)
  ),
  array(&quot;stripe_account&quot; =&gt; CONNECTED_STRIPE_ACCOUNT_ID)
);
</code></pre>
</div>
<div class="code">
  <pre class="language-java numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.apiKey = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;;

RequestOptions requestOptions = RequestOptions.builder().setStripeAccount(CONNECTED_STRIPE_ACCOUNT_ID).build();

Map&lt;String, Object&gt; chargeParams = new HashMap&lt;String, Object&gt;();
chargeParams.put(&quot;limit&quot;, 50);
chargeParams.put(&quot;created&quot;, {&quot;lte&quot;: 1483228800});

Charge.list(chargeParams, requestOptions);
</code></pre>
</div>
<div class="code">
  <pre class="language-javascript numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require(&quot;stripe&quot;)(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

stripe.charges.list(
  {
    limit: 50,
    created: {lte: 1483228800}
  },
  {stripe_account: CONNECTED_STRIPE_ACCOUNT_ID}
);
</code></pre>
</div>

    </div>
  </div>

<p>The response will look something like this:</p>
<div class="code">
  <pre class="language-javascript numbered" ><code>{
  &quot;object&quot;: &quot;list&quot;,
  &quot;url&quot;: &quot;/v1/charges&quot;,
  &quot;has_more&quot;: true,
  &quot;data&quot;: [
  ]
  ...
}</code></pre>
</div>

<p>All of the charges will be within the <code>data</code> attribute, which you can loop through. You could then use the final charge in that group as the <code>after</code> value in the request to retrieve the next 50 charges. (See the <a href="api.html#list_charges">list all charges</a> documentation.)</p>

<p>Although the API was designed for performance, repeatedly fetching large bodies of data will undoubtedly hurt the responsiveness of your application. We recommended storing fetched data on your side for subsequent analysis and reporting.</p>

<h3 id="getting-real-time-data">Getting real-time data</h3>

<p>In addition to fetching historical data, you can also access data via <a href="connect/authentication.html#webhooks">webhooks</a>. Once you’ve defined a <a href="https://dashboard.stripe.com/account/webhooks">platform webhook URL in your account</a>, Stripe will send event notifications to your webhook URL for every connected account. Look at the event object’s <code>user_id</code> property to see the account on which the event occurred.</p>
<div class="code">
  <pre class="language-javascript numbered" ><code>{
  &quot;id&quot;: &quot;evt_jDInTe78CQgwpq&quot;,
  &quot;livemode&quot;: true,
  &quot;object&quot;: &quot;event&quot;,
  &quot;type&quot;: &quot;customer.created&quot;,
  &quot;user_id&quot;: &quot;acct_0SsxLehtH9gatD&quot;,
  &quot;pending_webhooks&quot;: 2,
  &quot;created&quot;: 1349654313,
  &quot;data&quot;: {...}
}</code></pre>
</div>

<p>The above event shows that a customer was created in the <code>acct_0SsxLehtH9gatD</code> account. Again, we recommend storing these events locally for subsequent analysis and reporting. By watching for events as they occur, your application won’t require repeated and laborious API requests to fetch previous data.</p></section>

<section>
<h2 id="performing-actions-on-behalf-of-stripe-accounts">Performing actions on behalf of Stripe accounts</h2>

<p>This section is for you if you’re looking to extend Stripe’s functionality and perform actions on behalf of users’ accounts. You’ll need a <code>read_write</code> access to Stripe accounts to be able to perform any <code>POST</code> (or <code>DELETE</code>) API requests (e.g. creating customer objects or updating subscriptions).</p>

<p>The authentication works exactly the same way by passing your secret key along with the <code>Stripe-Account</code> header to identify the account on which you’d like to perform actions.</p>

<p>Here is for instance the code to create a new customer on a user’s Stripe account:</p>
  <div class="tabs tabs-code animated" data-platform=server>
    <nav class="nav-languages">
        <a data-language="ruby"
           >Ruby</a>
        <a data-language="python"
           >Python</a>
        <a data-language="php"
           >PHP</a>
        <a data-language="java"
           >Java</a>
        <a data-language="node"
           >Node</a>
    </nav>
    <div class="tabs-content">
      <div class="code">
  <pre class="language-ruby numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

Stripe::Customer.create(
  {
    :description =&gt; &quot;Jenny Rosen&quot;,
    :email =&gt; &quot;jenny@example.com&quot;
  },
  {:stripe_account =&gt; CONNECTED_STRIPE_ACCOUNT_ID}
)
</code></pre>
</div>
<div class="code">
  <pre class="language-python numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

stripe.Customer.create(
  description=&quot;Jenny Rosen&quot;,
  email=&quot;jenny@example.com&quot;,
  stripe_account=CONNECTED_STRIPE_ACCOUNT_ID
)
</code></pre>
</div>
<div class="code">
  <pre class="language-php numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

\Stripe\Customer::create(
  array(
    &quot;description&quot; =&gt; &quot;Jenny Rosen&quot;,
    &quot;email&quot; =&gt; &quot;jenny@example.com&quot;
  ),
  array(&quot;stripe_account&quot; =&gt; CONNECTED_STRIPE_ACCOUNT_ID)
);
</code></pre>
</div>
<div class="code">
  <pre class="language-java numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.apiKey = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;;

RequestOptions requestOptions = RequestOptions.builder().setStripeAccount(CONNECTED_STRIPE_ACCOUNT_ID).build();

Map&lt;String, Object&gt; customerParams = new HashMap&lt;String, Object&gt;();
customerParams.put(&quot;description&quot;, &quot;Jenny Rosen&quot;);
customerParams.put(&quot;email&quot;, &quot;jenny@example.com&quot;);

Customer.create(customerParams, requestOptions);
</code></pre>
</div>
<div class="code">
  <pre class="language-javascript numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require(&quot;stripe&quot;)(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

stripe.customers.create(
  {
    description: &quot;Jenny Rosen&quot;,
    email: &quot;jenny@example.com&quot;
  },
  {stripe_account: CONNECTED_STRIPE_ACCOUNT_ID}
);
</code></pre>
</div>

    </div>
  </div>

<p>Now that you know how to identify a user account in any requests, check out our product guides as well as our <a href="api.html">reference</a> to learn more about the objects and methods that you can use to build your integration.</p></section>

<section>
<h2 id="charging-for-your-application">Charging for your application</h2>

<p>Even if you have requested, appropriately, a <code>read_only</code> connection, it’s still easy to accept payments for your application: your platform’s Stripe account can be used to process its own charges. After your customers connect their Stripe accounts, ask for their <a href="checkout/tutorial.html">payment details</a> and then <a href="subscriptions/quickstart.html">create a subscription</a> for them in your Stripe account. Store the created customer ID with the associated Stripe ID, and you’ll easily be able to see which of your users are paid and active, and which are not.</p>

<p>If you are creating subscriptions, you can also specify an <code>application_fee_percent</code> as a fee for your application, on top of any Stripe fees charged. <a href="connect/payments-fees.html#creating-subscriptions">Read more</a> on how to implement this.</p>

<p>While you’re at it, you can even run your Stripe account’s data through your integration code to parse how your own business is growing or test your functionality against your real account!</p></section>

<section>
<h2 id="disconnecting-accounts">Disconnecting accounts</h2>

<p>At any point in time, a connected user can disconnect their account from your integration. When that occurs, you’ll receive an <code>account.application.deauthorized</code> event notification at your webhook URL. You can use this notification to perform any necessary clean up on your end, such as disabling the user’s account (on your site) and removing their data.</p>

<p>You can also disconnect an account from your integration by making a request to the <a href="connect/reference.html#post-deauthorize">OAuth deauthorization</a> endpoint.</p></section>

<section>
<h2 id="submit-your-integration-to-our-gallery">Submit your integration to our gallery</h2>

<p>The <a href="../works-with.html">Works with Stripe gallery</a> showcases hundreds of applications and services already integrated with Stripe. To be included, we’ll need some basic information about your integration, as well as your logo and a few screenshots.</p>

<p>Ready for prime-time? <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#119;&#111;&#114;&#107;&#115;&#119;&#105;&#116;&#104;&#064;&#115;&#116;&#114;&#105;&#112;&#101;&#046;&#099;&#111;&#109;">Get in touch</a> to be featured in our Works with Stripe gallery.</p></section>


          <footer>
  <h2>Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://support.stripe.com/">Search</a> our site for more information, <a href="https://support.stripe.com/email">send us an email</a>, or <a href="../contact/sales.html">get in touch</a> with our sales team!</p>
</footer>

        </article>
      </div>
    </div>

    <div id="loading-bar"></div>

    <script src="../assets/external/jquery.min-94df374d2ad5d02ae136584dc008fb1c.js"></script>
    <script src="../assets/prism-aa9f4cb7aff3f31b5394455bcbea0d8b.js"></script>
    <script src="../assets/external/dynamics.min-14579f80273a61e6d0f4f45484e20dc7.js"></script>
    <script src="../assets/jquery.cookie-d7482a1bbfda18d981eda4398666acdd.js"></script>
    <script src="../assets/documentation-84c208e01668170139f2f511cfc37644.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="https://js.stripe.com/v2/"></script>

    
    <script src="../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../assets/analytics-e800ab0ba76de2b697ea3f61c673695b.js"></script>
<script src="https://js.stripe.com/v2/m.js"></script>
<script src="../assets/mirador_ping-6bba7d3d9fbb1e991b7f0f8fab43b2b1.js"></script>

    <script type="text/javascript">
    if ('Analytics' in window) {
      Analytics.viewed("docs", {
        docs_version: "2",
      });
    }
    </script>
  </body>

<!-- Mirrored from stripe.com/docs/building-integrations by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:27 GMT -->
</html>
