<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from stripe.com/docs/alipay by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="csrf-token" content="MBGQRqRifM_NiHQTXkacNcXWHeh6O1CBve1E-lRLtBSpi4Q7oqe4igDMUAySTqlO7KiTbyaXkSH8WE7S8Zx-ZQ==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Alipay Guide</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../img/v3/home/social.png">

    <meta property="og:title" content="Alipay Guide">
    <meta property="og:url" content="alipay.html">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="../img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="../img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Alipay Guide">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-ec238f46e7cb9867e3c1b529e2cfa37b.css&quot;}</script>

    

    

    <link rel="stylesheet" href="../assets/v3/default-ef2bff54073622b9e08cf24466b5668f.css">
    <link rel="stylesheet" href="../assets/v3/shared/common-d0fb03fa2d48fcf29010779ca9a12b2c.css">
    <link rel="stylesheet" href="../assets/v3/documentation/base-47c1fd7d3d670e4e08df8f5a67b20dea.css">
    <link rel="stylesheet" href="../assets/v3/shared/prism_light-6d08c6ec0d72453693d775c3b96629c0.css">
    
    
    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar">
        <div class="logo">
          <a class="site" href="../index.html" title="Stripe"></a>
          <a class="extension" href="../docs.html">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="../docs.html">Home</a></h1>
          <h1 class="payments"><a class="toggle-content">Payments</a></h1>
<ul>
    <li>
      <a href="quickstart.html">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="checkout/tutorial.html">Checkout</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="checkout.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="custom-form.html">Stripe.js</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="stripe.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="mobile/ios.html">iOS</a>
    </li>
    <li>
      <a href="mobile/android.html">Android</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="charges.html">Creating Charges</a>
    </li>
    <li>
      <a href="declines.html">Declines &amp; Failed Payments</a>
    </li>
    <li>
      <a href="disputes.html">Disputes</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="disputes/evidence.html">Submitting Evidence</a>
    </li>
    <li>
      <a href="disputes/types.html">Types</a>
    </li>
    <li>
      <a href="disputes/faq.html">FAQ</a>
    </li>
</ul>

    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="orders.html">Orders</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="orders/guide.html">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a href="orders/tax-integration.html">Tax Integrations</a>
    </li>
    <li>
      <a href="orders/shipping-integration.html">Shipping Integrations</a>
    </li>
    <li>
      <a href="sources.html">Getting Started</a>
    </li>
    <li>
      <a href="sources/payment-methods.html">Payment Methods</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="sources/cards.html">Cards</a>
    </li>
    <li>
      <a href="sources/3d-secure.html">3D Secure</a>
    </li>
    <li>
      <a href="sources/bancontact.html">Bancontact</a>
    </li>
    <li>
      <a href="sources/giropay.html">Giropay</a>
    </li>
    <li>
      <a href="sources/ideal.html">iDEAL</a>
    </li>
    <li>
      <a href="sources/sepa-direct-debit.html">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="sources/sofort.html">Sofort</a>
    </li>
</ul>

    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="ach.html">ACH</a>
    </li>
    <li>
      <a href="apple-pay.html">Apple Pay</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="apple-pay/apps.html">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="apple-pay/web.html">Apple Pay on the Web</a>
    </li>
</ul>

    </li>
    <li>
      <a class='selected' href="alipay.html">Alipay</a>
    </li>
    <li>
      <a href="bitcoin.html">Bitcoin</a>
    </li>
    <li class='separator'>
      <a href="testing.html">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content">Subscriptions</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="subscriptions/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="subscriptions/creating.html">Creating Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="subscriptions/discounts.html">Applying Discounts</a>
    </li>
    <li>
      <a href="subscriptions/trials.html">Using Trial Periods</a>
    </li>
    <li>
      <a href="subscriptions/quantities.html">Setting Quantities</a>
    </li>
    <li>
      <a href="subscriptions/taxes.html">Adding Taxes</a>
    </li>
    <li>
      <a href="subscriptions/multiple.html">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a href="subscriptions/lifecycle.html">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="subscriptions/webhooks.html">Using Webhooks</a>
    </li>
    <li>
      <a href="subscriptions/changing.html">Changing Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="subscriptions/upgrading-downgrading.html">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="subscriptions/billing-cycle.html">Billing Cycle</a>
    </li>
    <li>
      <a href="subscriptions/canceling-pausing.html">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="subscriptions/invoices.html">Working with Invoices</a>
      <ul data-collapsable=false>
</ul>

    </li>
    <li>
      <a href="subscriptions/plans.html">Managing Plans</a>
    </li>
    <li>
      <a href="subscriptions/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content">Connect</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="connect.html">Overview</a>
    </li>
    <li>
      <a href="connect/connecting-to-accounts.html">Connecting to Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="connect/authentication.html">Authentication</a>
    </li>
</ul>

    </li>
    <li>
      <a href="connect/standalone-accounts.html">Standalone Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="connect/reference.html">OAuth Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="connect/managed-accounts.html">Managed Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="connect/updating-accounts.html">Updating Accounts</a>
    </li>
    <li>
      <a href="connect/identity-verification.html">Identity Verification</a>
    </li>
    <li>
      <a href="connect/required-verification-information.html">Verification Fields</a>
    </li>
    <li>
      <a href="connect/testing-verification.html">Testing Verification</a>
    </li>
    <li>
      <a href="connect/bank-transfers.html">Bank Transfers</a>
    </li>
    <li>
      <a href="connect/migrating.html">Migrating Recipients</a>
    </li>
    <li>
      <a href="connect/best-practices.html">Best Practices</a>
    </li>
</ul>

    </li>
    <li>
      <a href="connect/payments-fees.html">Payments and Fees</a>
    </li>
    <li>
      <a href="connect/special-case-transfers.html">Special-case Transfers</a>
    </li>
    <li class='separator'>
      <a href="connect/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content">Relay</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="relay.html">Selling in Other Apps</a>
    </li>
    <li>
      <a href="relay/apps-guide.html">Accepting Orders in Your App</a>
      <ul data-collapsable=false>
    <li>
      <a href="relay/apps-error-guide.html">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="radar"><a class="toggle-content">Radar</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="radar.html">Overview</a>
    </li>
    <li>
      <a href="radar/risk-evaluation.html">Risk Evaluation</a>
    </li>
    <li>
      <a href="radar/review.html">Review</a>
      <ul data-collapsable=false>
    <li>
      <a href="radar/review/auth-and-capture.html">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="radar/rules.html">Rules</a>
      <ul data-collapsable=false>
    <li>
      <a href="radar/rules/reference.html">Reference</a>
    </li>
</ul>

    </li>
    <li class='separator'>
      <a href="radar/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="account"><a class="toggle-content">Account</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="dashboard.html">Your Account</a>
    </li>
    <li>
      <a href="checklist.html">Going Live Checklist</a>
    </li>
    <li>
      <a href="transfers.html">Getting Paid</a>
    </li>
    <li>
      <a href="reporting.html">Reporting</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content">Development</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="libraries.html">API Libraries</a>
    </li>
    <li>
      <a href="upgrades.html">API Upgrades</a>
    </li>
    <li>
      <a href="webhooks.html">Webhooks</a>
    </li>
    <li>
      <a href="building-integrations.html">Integrations</a>
    </li>
    <li>
      <a href="recipes.html">Recipes</a>
    </li>
    <li>
      <a href="security.html">Security</a>
    </li>
</ul>


          <h1 class="references"><a href="api.html" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content">
          <header>
  <h1>Alipay Guide</h1>
  <p>Accept payments from hundreds of millions of new customers using Alipay, China's most popular payment method. If you need help after reading this, check out our answers to <a href="https://support.stripe.com/search?q=alipay">common questions</a> or chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.
</p>
</header>

<section>
  <aside class="note">
    <h3>Checkout first steps</h3>
    <p>Alipay is available as an additional payment method when using Checkout.</p>
    <p>If you need to get up and running with this, get started with our <a href="checkout/tutorial.html">integrating Checkout</a> tutorial.</p>
  </aside>

<p>Stripe users in the United States can accept Alipay, a digital wallet service, for USD payments using <a href="checkout.html">Checkout</a>. Stripe handles Alipay payments in the same way as credit card payments—creating charges even uses the same server-side code which means no additional code changes are needed. Stripe’s <a href="../us/pricing.html">fee</a> for Alipay payments is even the same as credit card payments, too.</p>

<p>The entire Alipay payment process is completed on your site, so customers aren’t redirected to <strong>alipay.com</strong>. This provides Alipay users with a seamless payment experience, resulting in a higher conversion rate for sellers.</p>

<p>Alipay processes charges for their users in <a href="http://en.wikipedia.org/wiki/Renminbi">RMB</a>, then handles conversion of this to USD automatically. A Chinese bank account or business entity is not required to accept Alipay payments.</p>

<p>Creating an Alipay charge uses the same process as a credit card charge. First, your customer provides their Alipay payment details in Checkout—Stripe creates a <a href="api.html#tokens">token</a> and sends it to your integration. Next, your server-side code uses this token when creating a charge request via the Stripe API. Alipay payment information can even be saved as a reusable payment method.</p>

<ul>
  <li><a href="#using-alipay-in-checkout">Accepting Alipay payments in Checkout</a></li>
  <li><a href="#creating-a-charge">Creating a charge</a></li>
  <li><a href="#reusable-account-access">Enabling reusable account access</a></li>
</ul></section>

<section>
<h2 id="using-alipay-in-checkout">Using Alipay in Checkout</h2>

<p>During the payment process, SMS verification is used to authenticate the Alipay user. For some payments, Stripe will dynamically request the last five digits of the customer’s <a href="http://en.wikipedia.org/wiki/Resident_Identity_Card_(PRC)#Identity_card_number">national ID number</a> as an additional factor of authentication.</p>

<p>Using your test <a href="https://dashboard.stripe.com/account/apikeys">API keys</a>, you can test Alipay payments in Checkout using any email address you wish. When performing test payments, the SMS verification code required is <strong>123456</strong>  and the last five digits of the customer’s national ID number is <strong>12345</strong>. Click the button below to see Checkout with Alipay in action.</p>
  <script
    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
    data-key="pk_test_6pRNASCoBOKtIshFeQd4XMUh"
    data-amount="2000"
    data-name="Demo Site"
    data-description="2 widgets ($20.00)"
    data-image="/img/documentation/checkout/marketplace.png"
    data-label="Pay with Card or Alipay"
    data-locale="auto"
    data-currency="usd"
    data-alipay="true"
    data-notrack>
  </script>

<h3 id="configuring-checkout">Configuring Checkout</h3>

<p>After integrating Checkout for card payments, only one code change is needed to begin accepting Alipay payments—the addition of <code>data-alipay</code> in your Checkout code, as shown below. This requires one of the following values:</p>

<ul>
  <li><strong>true</strong>: Alipay is shown as a payment option in Checkout to all customers</li>
  <li><strong>auto</strong>: Alipay is shown as a payment option in Checkout only to customers likely to have an Alipay account</li>
</ul>
<div class="code">
  <pre class="language-html numbered" ><code>&lt;form action=&quot;&quot; method=&quot;POST&quot;&gt;
  &lt;script
    src=&quot;https://checkout.stripe.com/checkout.js&quot; class=&quot;stripe-button&quot;
    data-key=pk_test_6pRNASCoBOKtIshFeQd4XMUh
    data-amount=&quot;2000&quot;
    data-name=&quot;Demo Site&quot;
    data-description=&quot;2 widgets ($20.00)&quot;
    data-image=&quot;/128x128.png&quot;
    data-label=&quot;Pay with Card or Alipay&quot;
    data-locale=&quot;auto&quot;
    data-currency=&quot;usd&quot;
    data-alipay=&quot;true&quot;&gt;
  &lt;/script&gt;
&lt;/form&gt;</code></pre>
</div>

<p>The default label of the Checkout button is “Pay with Card”. We recommend making use of the <code>data-label</code> option to promote your acceptance of Alipay more noticeable to customers.</p>

<h3 id="supported-alipay-accounts">Supported Alipay accounts</h3>
  <aside class="note">
    <h3>Currency of Alipay payments</h3>
    <p>All charge requests using Alipay require USD as the specified currency. Any charge requests using an different currency will result in an error.</p>
  </aside>

<p>Because of foreign exchange restrictions on RMB, Alipay users can only use Checkout if their Alipay account is verified. The Alipay user must have proven their identity as a citizen of mainland China. The only other requirement on the customer’s Alipay account is that it has a linked mobile number and that it is capable of funding the payment.</p></section>

<section>
<h2 id="creating-a-charge">Creating a charge</h2>

<p>Alipay charges are created in the same way as card charges, even using the same server-side code. Checkout generates a token representing the payment details, which is then used by your server-side code when making a charge request to the Stripe API.</p>

<p>While Checkout returns a token of type <code>card</code> for card payments, Alipay payment details (referred to as <em>Alipay accounts</em>) result in a token of type <code>alipay_account</code>. Both types of token can be used in exactly the same way, for example, to create a charge.</p>
  <div class="tabs tabs-code animated" data-platform=server>
    <nav class="nav-languages">
        <a data-language="curl"
            class="selected">curl</a>
        <a data-language="ruby"
           >Ruby</a>
        <a data-language="python"
           >Python</a>
        <a data-language="php"
           >PHP</a>
        <a data-language="java"
           >Java</a>
        <a data-language="node"
           >Node</a>
        <a data-language="go"
           >Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code">
  <pre class="language-curl numbered selected" ><code>curl https://api.stripe.com/v1/charges \
   -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \
   -d amount=1000 \
   -d currency=usd \
   -d source=atok_4XNshPRgmDRCVi \
   -d description=&quot;Example Alipay charge&quot;
</code></pre>
</div>
<div class="code">
  <pre class="language-ruby numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

# Get the Alipay token submitted by Checkout
token = params[:stripeToken]

# Create a charge: this will charge the user&#39;s Alipay account
begin
  charge = Stripe::Charge.create(
    :amount =&gt; 1000, # Amount in cents
    :currency =&gt; &quot;usd&quot;,
    :source =&gt; token,
    :description =&gt; &quot;Example Alipay charge&quot;
  )
rescue Stripe::CardError =&gt; e
  # The Alipay account has been declined
end
</code></pre>
</div>
<div class="code">
  <pre class="language-python numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

# Get the Alipay token submitted by Checkout
token = request.POST[&#39;stripeToken&#39;]

# Create a charge: this will charge the user&#39;s Alipay account
try:
  charge = stripe.Charge.create(
      amount=1000, # Amount in cents
      currency=&quot;usd&quot;,
      source=token,
      description=&quot;Example Alipay charge&quot;
  )
except stripe.error.CardError as e:
  # The Alipay account has been declined
  pass
</code></pre>
</div>
<div class="code">
  <pre class="language-php numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

// Get the Alipay token submitted by Checkout
$token = $_POST[&#39;stripeToken&#39;];

// Create a charge: this will charge the user&#39;s Alipay account
try {
  $charge = \Stripe\Charge::create(array(
    &quot;amount&quot; =&gt; 1000, // Amount in cents
    &quot;currency&quot; =&gt; &quot;usd&quot;,
    &quot;source&quot; =&gt; $token,
    &quot;description&quot; =&gt; &quot;Example Alipay charge&quot;
    ));
} catch(\Stripe\Error\Card $e) {
  // The Alipay account has been declined
}
</code></pre>
</div>
<div class="code">
  <pre class="language-java numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.apiKey = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;;

// Get the Alipay token submitted by Checkout
String token = request.getParameter(&quot;stripeToken&quot;);

// Create a charge: this will charge the user&#39;s Alipay account
try {
  Map&lt;String, Object&gt; chargeParams = new HashMap&lt;String, Object&gt;();
  chargeParams.put(&quot;amount&quot;, 1000); // Amount in cents
  chargeParams.put(&quot;currency&quot;, &quot;usd&quot;);
  chargeParams.put(&quot;source&quot;, token);
  chargeParams.put(&quot;description&quot;, &quot;Example Alipay charge&quot;);

  Charge charge = Charge.create(chargeParams);
} catch (CardException e) {
  // The Alipay account has been declined
}
</code></pre>
</div>
<div class="code">
  <pre class="language-javascript numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require(&quot;stripe&quot;)(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

// Get the Alipay token submitted by Checkout
var token = request.body.stripeToken; // Using Express

// Create a charge: this will charge the user&#39;s Alipay account
stripe.charges.create({
  amount: 1000, // Amount in cents
  currency: &quot;usd&quot;,
  source: token,
  description: &quot;Example Alipay charge charge&quot;
}, function(err, charge) {
  if (err &amp;&amp; err.type === &#39;StripeCardError&#39;) {
    // The Alipay account has been declined
  }
});
</code></pre>
</div>
<div class="code">
  <pre class="language-go numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.Key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

// Get the Alipay token submitted by Checkout:
token := r.FormValue(&quot;stripeToken&quot;)

// Create a charge: this will charge the user&#39;s Alipay account
chargeParams := &amp;stripe.ChargeParams{
  Amount: 1000,
  Currency: &quot;usd&quot;,
  Desc: &quot;Example Alipay charge&quot;,
}
chargeParams.SetSource(stripeToken)
ch, err := charge.New(chargeParams)
</code></pre>
</div>

    </div>
  </div>

<p>When creating one-time charges, you must pass the <code>amount</code> and <code>currency</code> parameters. This is referred to as <em>non-reusable account access</em> (the verification SMS also informs the customer of the amount and currency). To save Alipay account information to create future charges, enable <a href="#reusable-account-access">reusable account access</a>.</p>

<h3 id="refunds">Refunds</h3>  <aside class="content note">
  <h3>Stripe fees on refunds</h3>
  <p>Unlike card charges, the Stripe fee is not returned when an Alipay charge is refunded.</p>
  </aside>
<p>Alipay’s refund policy allows for payments to be refunded up to 90 days from their creation date. Should you need to refund a payment after this time, an alternative form of credit has to be provided to the customer.</p>

<p>We recommend you provide a discount to your customer through the use of a discount code system that can be used to change the amount of a future order. Check out our recipe on <a href="recipes/coupons-for-charges.html">creating a coupon system for standalone charges</a> to find out how you could build this.</p>

<p>Partial refunds are only supported if the currency of the payment is USD. If the payment was created in any other currency, partial refunds are not supported—you can only refund the entire payment.</p>

<h3 id="declines-and-disputes">Declines and disputes</h3>

<p>As is the case with card payments, Alipay payments can be declined by either Alipay or Stripe. Should this occur, your integration receives the appropriate error response to act upon.</p>

<p>There is no dispute process that Stripe users see for Alipay payments. If a customer’s Alipay account is used illicitly, Alipay and Stripe will handle the issue internally. In the context of Alipay, payments are only disputed if the customer has a complaint about the provided goods or service.</p>

<h3 id="payment-limits">Payment limits</h3>

<p>Stripe sets both per charge and per Alipay user payment limits to prevent any potential abuse of a compromised Alipay account:</p>

<ul>
  <li>750.00 USD per payment</li>
  <li>2,250.00 USD per customer per month</li>
</ul>

<p>If you need to increase this limit, please <a href="https://support.stripe.com/email">let us know</a>.</p></section>

<section>
<h2 id="reusable-account-access">Reusable account access</h2>

<p>To use an Alipay account for recurring payments, include <code>data-alipay-reusable="true"</code> when loading Checkout. Alipay users are accustomed to only allowing reusable access in certain circumstances so you should only ask for this access where necessary, and make this clear to the user. Checkout will also display a message to your customer that you’ve requested reusable access.</p>

<p>You can check if reusable access is available by making an API request with the received Alipay account token to the <code>/v1/tokens</code> endpoint.</p>
  <div class="tabs tabs-code animated" data-platform=server>
    <nav class="nav-languages">
        <a data-language="curl"
            class="selected">curl</a>
        <a data-language="ruby"
           >Ruby</a>
        <a data-language="python"
           >Python</a>
        <a data-language="php"
           >PHP</a>
        <a data-language="java"
           >Java</a>
        <a data-language="node"
           >Node</a>
        <a data-language="go"
           >Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code">
  <pre class="language-curl numbered selected" ><code>curl https://api.stripe.com/v1/tokens/atok_4XNshPRgmDRCVi \
   -u sk_test_BQokikJOvBiI2HlWgH4olfQ2:
</code></pre>
</div>
<div class="code">
  <pre class="language-ruby numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

Stripe::Token.retrieve(&quot;atok_4XNshPRgmDRCVi&quot;)
</code></pre>
</div>
<div class="code">
  <pre class="language-python numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

stripe.Token.retrieve(&quot;atok_4XNshPRgmDRCVi&quot;)
</code></pre>
</div>
<div class="code">
  <pre class="language-php numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

\Stripe\Token::retrieve(&quot;atok_4XNshPRgmDRCVi&quot;);
</code></pre>
</div>
<div class="code">
  <pre class="language-java numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.apiKey = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;;

Token.retrieve(&quot;atok_4XNshPRgmDRCVi&quot;);
</code></pre>
</div>
<div class="code">
  <pre class="language-javascript numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require(&quot;stripe&quot;)(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

stripe.tokens.retrieve(&quot;atok_4XNshPRgmDRCVi&quot;,
  function(err, token) {
    // asynchronously called
  }
);
</code></pre>
</div>
<div class="code">
  <pre class="language-go numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.Key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

t, err := token.Get(&quot;atok_4XNshPRgmDRCVi&quot;, nil)
</code></pre>
</div>

    </div>
  </div>

<p>If reusable access is available, <code>reusable</code> is set to <code>true</code>. Both <code>payment_amount</code> and <code>payment_currency</code> are also set to <code>null</code>.</p>
<div class="code">
  <pre class="language-javascript numbered" ><code>&quot;alipay_account&quot;: {
  &quot;id&quot;: &quot;aliacc_4VlyMzbhx5cMJ4&quot;,
  &quot;object&quot;: &quot;alipay_account&quot;,
  &quot;livemode&quot;: false,
  &quot;created&quot;: 1406916427,
  &quot;fingerprint&quot;: &quot;VcfP7nsUODDwkd5M&quot;,
  &quot;used&quot;: false,
  &quot;reusable&quot;: true,
  &quot;payment_amount&quot;: null,
  &quot;payment_currency&quot;: null
}</code></pre>
</div>

<p>If you do not have reusable access, <code>reusable</code> is set to <code>false</code>. Both <code>payment_amount</code> and <code>payment_currency</code> then indicate the amount and currency of the payment that you can create.</p>

<p>Alipay account objects have a <code>used</code> attribute that indicate whether it has been used to create a payment.</p>
<div class="code">
  <pre class="language-javascript numbered" ><code>&quot;alipay_account&quot;: {
  &quot;id&quot;: &quot;aliacc_3REbvwet45Rfg3&quot;,
  &quot;object&quot;: &quot;alipay_account&quot;,
  &quot;livemode&quot;: false,
  &quot;created&quot;: 1406916427,
  &quot;fingerprint&quot;: &quot;eHYF4hgbCfgf64Vv&quot;,
  &quot;used&quot;: false,
  &quot;reusable&quot;: false,
  &quot;payment_amount&quot;: 2000,
  &quot;payment_currency&quot;: &quot;USD&quot;
}</code></pre>
</div>

<h3 id="saving-alipay-account-to-a-customer">Saving an Alipay account to a customer</h3>

<p>An Alipay account that has granted you reusable access can be saved to a <a href="api.html#customer_object">Customer</a> object, in the same way as card details. The Alipay account is then available as a payment method for future charges and recurring payments.</p>
  <div class="tabs tabs-code animated" data-platform=server>
    <nav class="nav-languages">
        <a data-language="curl"
            class="selected">curl</a>
        <a data-language="ruby"
           >Ruby</a>
        <a data-language="python"
           >Python</a>
        <a data-language="php"
           >PHP</a>
        <a data-language="java"
           >Java</a>
        <a data-language="node"
           >Node</a>
        <a data-language="go"
           >Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code">
  <pre class="language-curl numbered selected" ><code>curl https://api.stripe.com/v1/customers/cus_7iLOlPKxhQJ75a \
   -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \
   -d source=atok_4XNshPRgmDRCVi
</code></pre>
</div>
<div class="code">
  <pre class="language-ruby numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

# Get the Alipay token submitted by Checkout
token = params[:stripeToken]

# Retrieve a Customer object and save the token to it
cu = Stripe::Customer.retrieve(&quot;cus_7iLOlPKxhQJ75a&quot;)
cu.source = token
cu.save
</code></pre>
</div>
<div class="code">
  <pre class="language-python numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

# Get the Alipay token submitted by Checkout
token = request.POST[&#39;stripeToken&#39;]

# Retrieve a Customer object and save the token to it
cu = stripe.Customer.retrieve(&quot;cus_7iLOlPKxhQJ75a&quot;)
cu.source = token
cu.save()
</code></pre>
</div>
<div class="code">
  <pre class="language-php numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

// Get the Alipay token submitted by Checkout
$token = $_POST[&#39;stripeToken&#39;];

// Retrieve a Customer object and save the token to it
$cu = \Stripe\Customer::retrieve(&quot;cus_7iLOlPKxhQJ75a&quot;);
$cu-&gt;source = $token;
$cu-&gt;save();
</code></pre>
</div>
<div class="code">
  <pre class="language-java numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.apiKey = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;;

// Get the Alipay token submitted by Checkout
String token = request.getParameter(&quot;stripeToken&quot;);

// Retrieve a Customer object and save the token to it
Customer cu = Customer.retrieve(&quot;cus_7iLOlPKxhQJ75a&quot;);
Map&lt;String, Object&gt; updateParams = new HashMap&lt;String, Object&gt;();
updateParams.put(&quot;SOURCE&quot;, token);

cu.update(updateParams);
</code></pre>
</div>
<div class="code">
  <pre class="language-javascript numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require(&quot;stripe&quot;)(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

// Get the Alipay token submitted by Checkout
var token = request.body.stripeToken; // Using Express

// Retrieve a Customer object and save the token to it
stripe.customers.update(&quot;cus_7iLOlPKxhQJ75a&quot;, {
  source: token
}, function(err, customer) {
  // asynchronously called
});
</code></pre>
</div>
<div class="code">
  <pre class="language-go numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.Key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

// Get the Alipay token submitted by Checkout:
token := r.FormValue(&quot;stripeToken&quot;)

// Retrieve a Customer object and save the token to it
customerParams := &amp;stripe.CustomerParams{}
customerParams.SetSource(token);
c, err := customer.Update(&quot;cus_7iLOlPKxhQJ75a&quot;, customerParams);
</code></pre>
</div>

    </div>
  </div>

<h3 id="creating-test-alipay-tokens">Creating test Alipay account tokens</h3>

<p>You can create Alipay account tokens in test mode directly through the API, rather than going through the process of using Checkout.</p>
  <div class="tabs tabs-code animated" data-platform=server>
    <nav class="nav-languages">
        <a data-language="curl"
            class="selected">curl</a>
        <a data-language="ruby"
           >Ruby</a>
        <a data-language="python"
           >Python</a>
        <a data-language="php"
           >PHP</a>
        <a data-language="java"
           >Java</a>
        <a data-language="node"
           >Node</a>
        <a data-language="go"
           >Go</a>
    </nav>
    <div class="tabs-content">
      <div class="code">
  <pre class="language-curl numbered selected" ><code>curl https://api.stripe.com/v1/tokens \
   -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \
   -d email=&quot;maidongxi@example.com&quot; \
   -d alipay_account[reusable]=true
</code></pre>
</div>
<div class="code">
  <pre class="language-ruby numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

Stripe::Token.create(
  :email =&gt; &quot;maidongxi@example.com&quot;,
  :alipay_account =&gt; {
    # Create an Alipay account token with reusable account access
    :reusable =&gt; &quot;true&quot;
  },
)
</code></pre>
</div>
<div class="code">
  <pre class="language-python numbered" ><code># Set your secret key: remember to change this to your live secret key in production
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

stripe.Token.create(
  email=&quot;maidongxi@example.com&quot;,
  alipay_account={
    # Create an Alipay account token with reusable account access
    &quot;reusable&quot;: &#39;true&#39;
  },
)
</code></pre>
</div>
<div class="code">
  <pre class="language-php numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

\Stripe\Token::create(array(
  &quot;email&quot; =&gt; &quot;maidongxi@example.com&quot;,
  &quot;alipay_account&quot; =&gt; array(
    // Create an Alipay account token with reusable account access
    &quot;reusable&quot; =&gt; &quot;true&quot;
  )
));
</code></pre>
</div>
<div class="code">
  <pre class="language-java numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.apiKey = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;;

Map&lt;String, Object&gt; tokenParams = new HashMap&lt;String, Object&gt;();
Map&lt;String, Object&gt; sourceParams = new HashMap&lt;String, Object&gt;();
sourceParams.put(&quot;reusable&quot;, &quot;true&quot;);
tokenParams.put(&quot;email&quot;, &quot;maidongxi@example.com&quot;);
// Create an Alipay account token with reusable account access
tokenParams.put(&quot;alipay_account&quot;, sourceParams);

Token.create(tokenParams);
</code></pre>
</div>
<div class="code">
  <pre class="language-javascript numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require(&quot;stripe&quot;)(&quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;);

stripe.tokens.create({
  email: &#39;maidongxi@example.com&#39;,
  alipay_account: {
    // Create an Alipay account token with reusable account access
    &quot;reusable&quot;: &#39;true&#39;
  }
}, function(err, token) {
  // asynchronously called
});
</code></pre>
</div>
<div class="code">
  <pre class="language-go numbered" ><code>// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.Key = &quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2&quot;

// Support for creating Alipay test tokens in our Go library is forthcoming.
</code></pre>
</div>

    </div>
  </div>

<p>The <code>alipay_account</code> parameter supports the following fields:</p>

<ul>
  <li><code>alipay_username</code>: Optional. Default to the email address on the token.</li>
  <li><code>reusable</code>: Required. Either true or false.</li>
  <li><code>payment_amount</code> and <code>payment_currency</code>: Provide these only if <code>reusable</code> is <code>false</code>.</li>
</ul>
<div class="code">
  <pre class="language-javascript numbered" ><code>&quot;id&quot;: &quot;atok_8BTuerteJtzAht&quot;,
&quot;object&quot;: &quot;token&quot;,
&quot;alipay_account&quot;: {
  &quot;id&quot;: &quot;aliacc_8BTuRDFkT09LRJ&quot;,
  &quot;object&quot;: &quot;alipay_account&quot;,
  &quot;created&quot;: 1459435110,
  &quot;customer&quot;: null,
  &quot;fingerprint&quot;: &quot;KEtHmiDqXq6tbQJl&quot;,
  &quot;livemode&quot;: false,
  &quot;metadata&quot;: {},
  &quot;payment_amount&quot;: null,
  &quot;payment_currency&quot;: null,
  &quot;reusable&quot;: true,
  &quot;used&quot;: false,
  &quot;username&quot;: &quot;maidongxi@example.com&quot;
},
...</code></pre>
</div>

<p>More information about Alipay account tokens is available in our <a href="api.html#alipay_account_object">API reference</a>.</p></section>

<section>
<h2 id="webhook-events">Webhook events</h2>

<p>A successful Alipay payment generates the <code>charge.succeeded</code> event, which is the same as a successful credit card charge.</p>

<p>You can refer to our <a href="webhooks.html">webhooks documentation</a> for more information on receiving webhook notifications.</p></section>


          <footer>
  <h2>Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://support.stripe.com/">Search</a> our site for more information, <a href="https://support.stripe.com/email">send us an email</a>, or <a href="../contact/sales.html">get in touch</a> with our sales team!</p>
</footer>

        </article>
      </div>
    </div>

    <div id="loading-bar"></div>

    <script src="../assets/external/jquery.min-94df374d2ad5d02ae136584dc008fb1c.js"></script>
    <script src="../assets/prism-aa9f4cb7aff3f31b5394455bcbea0d8b.js"></script>
    <script src="../assets/external/dynamics.min-14579f80273a61e6d0f4f45484e20dc7.js"></script>
    <script src="../assets/jquery.cookie-d7482a1bbfda18d981eda4398666acdd.js"></script>
    <script src="../assets/documentation-84c208e01668170139f2f511cfc37644.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="https://js.stripe.com/v2/"></script>

    
    <script src="../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../assets/analytics-e800ab0ba76de2b697ea3f61c673695b.js"></script>
<script src="https://js.stripe.com/v2/m.js"></script>
<script src="../assets/mirador_ping-6bba7d3d9fbb1e991b7f0f8fab43b2b1.js"></script>

    <script type="text/javascript">
    if ('Analytics' in window) {
      Analytics.viewed("docs", {
        docs_version: "2",
      });
    }
    </script>
  </body>

<!-- Mirrored from stripe.com/docs/alipay by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:47 GMT -->
</html>
