<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from stripe.com/docs/radar/rules/reference by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="csrf-token" content="e6fNbZ8vujk_pDjCRG6UDcMg1fwYdJjS1rEDd4ZfScviPdkQmep-fPLgHN2IZqF26l5be0TYWXKXBAlfI4iDug==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Rules Reference</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../../../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../../../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../../../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../../../img/v3/home/social.png">

    <meta property="og:title" content="Rules Reference">
    <meta property="og:url" content="reference.html">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="../../../img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="../../../img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Rules Reference">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-ec238f46e7cb9867e3c1b529e2cfa37b.css&quot;}</script>

    

    

    <link rel="stylesheet" href="../../../assets/v3/default-ef2bff54073622b9e08cf24466b5668f.css">
    <link rel="stylesheet" href="../../../assets/v3/shared/common-d0fb03fa2d48fcf29010779ca9a12b2c.css">
    <link rel="stylesheet" href="../../../assets/v3/documentation/base-47c1fd7d3d670e4e08df8f5a67b20dea.css">
    <link rel="stylesheet" href="../../../assets/v3/shared/prism_light-6d08c6ec0d72453693d775c3b96629c0.css">
    
    
    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar">
        <div class="logo">
          <a class="site" href="../../../index.html" title="Stripe"></a>
          <a class="extension" href="../../../docs.html">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="../../../docs.html">Home</a></h1>
          <h1 class="payments"><a class="toggle-content">Payments</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../quickstart.html">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="../../checkout/tutorial.html">Checkout</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../checkout.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../custom-form.html">Stripe.js</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../stripe.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../mobile/ios.html">iOS</a>
    </li>
    <li>
      <a href="../../mobile/android.html">Android</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="../../charges.html">Creating Charges</a>
    </li>
    <li>
      <a href="../../declines.html">Declines &amp; Failed Payments</a>
    </li>
    <li>
      <a href="../../disputes.html">Disputes</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../disputes/evidence.html">Submitting Evidence</a>
    </li>
    <li>
      <a href="../../disputes/types.html">Types</a>
    </li>
    <li>
      <a href="../../disputes/faq.html">FAQ</a>
    </li>
</ul>

    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="../../orders.html">Orders</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../orders/guide.html">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../orders/tax-integration.html">Tax Integrations</a>
    </li>
    <li>
      <a href="../../orders/shipping-integration.html">Shipping Integrations</a>
    </li>
    <li>
      <a href="../../sources.html">Getting Started</a>
    </li>
    <li>
      <a href="../../sources/payment-methods.html">Payment Methods</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../sources/cards.html">Cards</a>
    </li>
    <li>
      <a href="../../sources/3d-secure.html">3D Secure</a>
    </li>
    <li>
      <a href="../../sources/bancontact.html">Bancontact</a>
    </li>
    <li>
      <a href="../../sources/giropay.html">Giropay</a>
    </li>
    <li>
      <a href="../../sources/ideal.html">iDEAL</a>
    </li>
    <li>
      <a href="../../sources/sepa-direct-debit.html">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="../../sources/sofort.html">Sofort</a>
    </li>
</ul>

    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="../../ach.html">ACH</a>
    </li>
    <li>
      <a href="../../apple-pay.html">Apple Pay</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../apple-pay/apps.html">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="../../apple-pay/web.html">Apple Pay on the Web</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../alipay.html">Alipay</a>
    </li>
    <li>
      <a href="../../bitcoin.html">Bitcoin</a>
    </li>
    <li class='separator'>
      <a href="../../testing.html">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content">Subscriptions</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../subscriptions/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../../subscriptions/creating.html">Creating Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../subscriptions/discounts.html">Applying Discounts</a>
    </li>
    <li>
      <a href="../../subscriptions/trials.html">Using Trial Periods</a>
    </li>
    <li>
      <a href="../../subscriptions/quantities.html">Setting Quantities</a>
    </li>
    <li>
      <a href="../../subscriptions/taxes.html">Adding Taxes</a>
    </li>
    <li>
      <a href="../../subscriptions/multiple.html">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../subscriptions/lifecycle.html">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="../../subscriptions/webhooks.html">Using Webhooks</a>
    </li>
    <li>
      <a href="../../subscriptions/changing.html">Changing Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../subscriptions/upgrading-downgrading.html">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="../../subscriptions/billing-cycle.html">Billing Cycle</a>
    </li>
    <li>
      <a href="../../subscriptions/canceling-pausing.html">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../subscriptions/invoices.html">Working with Invoices</a>
      <ul data-collapsable=false>
</ul>

    </li>
    <li>
      <a href="../../subscriptions/plans.html">Managing Plans</a>
    </li>
    <li>
      <a href="../../subscriptions/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content">Connect</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../connect.html">Overview</a>
    </li>
    <li>
      <a href="../../connect/connecting-to-accounts.html">Connecting to Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../connect/authentication.html">Authentication</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../connect/standalone-accounts.html">Standalone Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../connect/reference.html">OAuth Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../connect/managed-accounts.html">Managed Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../connect/updating-accounts.html">Updating Accounts</a>
    </li>
    <li>
      <a href="../../connect/identity-verification.html">Identity Verification</a>
    </li>
    <li>
      <a href="../../connect/required-verification-information.html">Verification Fields</a>
    </li>
    <li>
      <a href="../../connect/testing-verification.html">Testing Verification</a>
    </li>
    <li>
      <a href="../../connect/bank-transfers.html">Bank Transfers</a>
    </li>
    <li>
      <a href="../../connect/migrating.html">Migrating Recipients</a>
    </li>
    <li>
      <a href="../../connect/best-practices.html">Best Practices</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../connect/payments-fees.html">Payments and Fees</a>
    </li>
    <li>
      <a href="../../connect/special-case-transfers.html">Special-case Transfers</a>
    </li>
    <li class='separator'>
      <a href="../../connect/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content">Relay</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../relay.html">Selling in Other Apps</a>
    </li>
    <li>
      <a href="../../relay/apps-guide.html">Accepting Orders in Your App</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../relay/apps-error-guide.html">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="radar"><a class="toggle-content">Radar</a></h1>
<ul>
    <li>
      <a href="../../radar.html">Overview</a>
    </li>
    <li>
      <a href="../risk-evaluation.html">Risk Evaluation</a>
    </li>
    <li>
      <a href="../review.html">Review</a>
      <ul data-collapsable=false>
    <li>
      <a href="../review/auth-and-capture.html">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../rules.html">Rules</a>
      <ul data-collapsable=false>
    <li>
      <a class='selected' href="reference.html">Reference</a>
    </li>
</ul>

    </li>
    <li class='separator'>
      <a href="../testing.html">Testing</a>
    </li>
</ul>

          <h1 class="account"><a class="toggle-content">Account</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../dashboard.html">Your Account</a>
    </li>
    <li>
      <a href="../../checklist.html">Going Live Checklist</a>
    </li>
    <li>
      <a href="../../transfers.html">Getting Paid</a>
    </li>
    <li>
      <a href="../../reporting.html">Reporting</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content">Development</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../libraries.html">API Libraries</a>
    </li>
    <li>
      <a href="../../upgrades.html">API Upgrades</a>
    </li>
    <li>
      <a href="../../webhooks.html">Webhooks</a>
    </li>
    <li>
      <a href="../../building-integrations.html">Integrations</a>
    </li>
    <li>
      <a href="../../recipes.html">Recipes</a>
    </li>
    <li>
      <a href="../../security.html">Security</a>
    </li>
</ul>


          <h1 class="references"><a href="../../api.html" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content">
          <header>
  <h1>Rules Reference</h1>
  <p>Learn more about how the order in which rules are processed, and how they are structured. If you need help after reading this, <a href="https://support.stripe.com/email">get in touch</a> or chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.
</p>
</header>

<section>
<aside class="note">
  <h3>Using rules with Connect</h3>
  <p>If you are a <a href="../../connect.html">Connect</a> platform, any rules you create only apply to payments created on the platform account. Payments created <a href="../../connect/payments-fees.html#charging-through-the-platform">directly on the Connected account</a> are subject to that account’s rules.</p>
</aside>

<p>Before creating a rule, it’s important to know the order in which rules are processed, and what payment attributes are available for use when specifying criteria to evaluate. Stripe’s machine-learning fraud systems are able to block many fraudulent payments for you, but if you need to create rules using information that’s unique to your business, there are many supported <a href="#supported-attributes">payment attributes</a> you can make use of.</p>
</section>
<h2 id="rule-processing-and-ordering">Rule processing and ordering</h2>

<p>When creating a rule, the action it’s going to take determines the order in which it is processed. Each payment is evaluated against the rules you have created and performed in a specific order:</p>

<ol>
  <li><strong><span class="rules green">Allow</span></strong>: Rules that <em>allow</em> a payment to be processed. If a payment is allowed, it is not evaluated against any block or review rules.</li>
  <li><strong><span class="rules red">Block</span></strong>: Rules that <em>block</em> a payment and reject it. If a payment is rejected, it’s not evaluated against any review rules.</li>
  <li><strong><span class="rules amber">Review</span></strong>: Rules that allow a payment to be processed but are then <em>placed in review</em></li>
</ol>

<p>If a payment should match a rule’s criteria, the respective action is performed and no further rules are evaluated against the payment. If a payment matches an allow rule, it’s processed normally–no block or review rules are subsequently evaluated, even if the payment would also meet their criteria. For instance, an example set of rules might be as follows:</p>

<ul>
  <li><strong><span class="rules green">Allow</span></strong> payments less than <strong>$10</strong></li>
  <li><strong><span class="rules green">Allow</span></strong> payments made within the US and with a risk level of <strong>normal</strong></li>
  <li><strong><span class="rules red">Block</span></strong> payments where the risk level is <strong>high</strong></li>
  <li><strong><span class="rules red">Block</span></strong> payments <strong>greater than $1,000</strong></li>
  <li><strong><span class="rules amber">Review</span></strong> payments made with a card issued <strong>outside the U.S.</strong></li>
</ul>

<p>Using the rules above, all payment less than $10 would be processed, regardless of their risk level or where the card used was issued. This is because the first rule allows the payment, so no further rules are evaluated. Similarly, a $1,500 payment made within the U.S. with a normal risk level would also be allowed, despite the rule to block payments over $1,000. This is because of the second rule in the list, allowing payments made within the US and a normal risk level. Once a particular rule is triggered, no further rules are evaluated.</p></section>

<h2 id="rule-structure">Rule structure</h2>

<p>Rules are constructed using two components: the <em>action</em> it should take and the <em>condition</em> to evaluate:</p>

<p><code>{action} if {condition}</code></p>

<p>In practice, a rule to block all payments over $1,000 would appear as:</p>

<p><code>Block if <span class="rules attribute">:amount_in_usd:</span> &gt; <span class="rules numeric-value">1000.00</span></code></p>

<ul>
  <li>The <em>action</em> is <strong>Block</strong></li>
  <li>The <em>condition</em> is <strong>:amount_in_usd: &gt; 1000.00</strong></li>
</ul>

<h3 id="actions">Actions</h3>

<p>A rule can perform one of three actions with a payment that meets its criteria, which are processed in this specific order.</p>

<h4 id="span-classrules-greenallowspan"><span class="rules green">Allow</span></h4>

<p>This rule action determines when a payment of a certain criteria should always be allowed, regardless of Stripe’s evaluation and any other rules the payment might match. When a payment matches the criteria in an allow rule, it is processed normally by Stripe and has no further rules evaluated against it. Even when Stripe proceeds with a payment it may nonetheless be declined by the issuing bank.</p>

<h4 id="span-classrules-redblockspan"><span class="rules red">Block</span></h4>

<p>This specifies when a payment should always be blocked by Stripe. If a payment matches the criteria in a block rule, the payment is rejected and no further rules are evaluated.</p>

<h4 id="span-classrules-amberreviewspan"><span class="rules amber">Review</span></h4>

<p>There might be certain types of payments you want to allow, but still take a closer look at. With review rules, you can <a href="../review.html">place payments in review</a>. This is especially useful to manage payments that aren’t particularly common, such as those with a larger than usual amount or from a country that you don’t often ship to. These payments are still processed, and the customer charged, but you have an additional opportunity to review the order to make sure there are no signs of fraud.</p>

<h3 id="conditions">Conditions</h3>

<p>If a payment matches a rule’s condition, the corresponding action is taken. A basic condition is, itself, made up of three parts:</p>

<p><code><span class="rules attribute">[attribute]</span> [operator] <span class="rules numeric-value">[value]</span></code></p>

<ul>
  <li><strong>Attribute</strong>: The attribute of a payment (e.g., the <em>amount</em> or <em>type of card</em>)</li>
  <li><strong>Operator</strong>: The arithmetic that compares the attribute to the value (e.g., <em>greater than</em> or <em>not equal to</em>)</li>
  <li><strong>Value</strong>: The criteria you wish to use (e.g., <strong>100.00</strong> or <strong>debit</strong>)</li>
</ul>

<p>Combining both the action and condition together, the structure of a rule is:</p>

<p><code>{action} if {<span class="rules attribute">[attribute]</span> [operator] <span class="rules numeric-value">[value]</span>}</code></p>

<p>There are four types of conditions that exist, depending on the attribute type:</p>

<ul>
  <li><code><span class="rules attribute">[string_attribute]</span> [operator] <span class="rules string-value">[string_value]</span></code></li>
  <li><code><span class="rules attribute">[country_attribute]</span> [operator] <span class="rules string-value">[country_value]</span></code></li>
  <li><code><span class="rules attribute">[numeric_attribute]</span> [operator] <span class="rules numeric-value">[numeric_value]</span></code></li>
  <li><code><span class="rules attribute">[boolean_attribute]</span></code></li>
</ul>

<p>Certain attributes can also be used as a corresponding value within a condition. For instance, you can create a rule to block payments where the country the card was issued does not match against the country the payment was made, using the following attribute and value:</p>

<p><code><span class="rules red">Block</span> if <span class="rules attribute">:card_country:</span> != <span class="rules string-value">:ip_country:</span></code></p>

<h4 id="string-attributes">String attributes</h4>

<p>These contain any combination of characters. String attributes and values most commonly represent a piece of text, such as a card’s brand (e.g., <strong>visa</strong>, <strong>amex</strong>) or risk level (e.g., elevated). These can be used in rules to allow payments only from a particular country, or block payments made with prepaid cards.</p>

<h4 id="country-attributes">Country attributes</h4>

<p>These makes use of <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">two-letter country codes</a> to represent a country, such as <strong>US</strong> for United States or <strong>CA</strong> for Canada. Country attributes operate the same as string attributes, the only difference being that the value must be a country code.</p>

<h4 id="numeric-attributes">Numeric attributes</h4>

<p>As these only contain numbers, they support more operators than string attributes and values. A payment’s <em>amount</em> is one example of a numeric attribute, and a rule can be created to perform an action should the amount be higher, lower, equal, or not equal to the amount you specify.</p>

<h4 id="boolean-attributes">Boolean attributes</h4>

<p>A boolean attribute simply represents whether a particular attribute is true. Unlike string and numeric attributes, there are no operators or values to use. You can use a boolean attribute to block payments that have been made with a disposable email address, or place payments in review that were made with an anonymous IP address.</p>

<h4 id="supported-attributes">Supported attributes</h4>

<p>The following payment attributes are supported for use in rule definitions:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right"><strong>Attribute</strong></th>
      <th style="text-align: center"><strong>Type</strong></th>
      <th><strong>Description</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><strong>card_brand</strong></td>
      <td style="text-align: center"><em>String</em></td>
      <td>The brand of the card being used to make the payment. The supported values are: <strong>amex</strong> (American Express), <strong>visa</strong> (Visa), <strong>mc</strong> (Mastercard), <strong>dscvr</strong> (Discover), and <strong>diners</strong> (Diners Club).</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>card_funding</strong></td>
      <td style="text-align: center"><em>String</em></td>
      <td>The type of card with respect to the underlying financial mechanics. The supported values are: <strong>credit</strong>, <strong>debit</strong>, <strong>prepaid</strong>, <strong>unknown</strong>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>email_domain</strong></td>
      <td style="text-align: center"><em>String</em></td>
      <td>The domain of the email address supplied with the payment (e.g., <strong>example.com</strong>).</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>ip_address</strong></td>
      <td style="text-align: center"><em>String</em></td>
      <td>The IP address from which the payment originates.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>risk_level</strong></td>
      <td style="text-align: center"><em>String</em></td>
      <td>The risk level of a given payment, as determined by Stripe. The supported values are: <strong>normal</strong>, <strong>elevated</strong>, <strong>highest</strong>, <strong>not_assessed</strong>, <strong>unknown</strong>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>card_country</strong></td>
      <td style="text-align: center"><em>Country</em></td>
      <td>The two-letter code corresponding to the country where the card was issued (e.g., <strong>US</strong>).</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>ip_country</strong></td>
      <td style="text-align: center"><em>Country</em></td>
      <td>The two-letter code corresponding to the country-level geolocation of the IP address from which the payment originates (e.g., <strong>GB</strong>).</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>amount_in_xyz</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The amount of the payment, converted to the currency specified by <strong>xyz</strong> (e.g., <strong>amount_in_usd</strong>). You can specify one of 14 <a href="https://support.stripe.com/questions/which-currencies-does-stripe-support">supported currencies</a> and Stripe automatically provides a converted amount to use. For example, if you create a rule to block all payments greater than $1,000, Stripe would block a £900.00 payment as it’s equivalent converted USD value would be $1,200.00. Note that for decimal currencies (such as USD and GBP), rules use the base currency unit rather than sub units (e.g., Dollars, not cents)</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>auths_per_card_number_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a card number was successfully authorized on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>auths_per_card_number_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a card number was successfully authorized on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>auths_per_customer_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a customer was successfully authorized on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>auths_per_customer_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a customer was successfully authorized on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>auths_per_ip_address_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times an IP address was successfully authorized on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>auths_per_ip_address_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times an IP address was successfully authorized on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>blocks_per_card_number_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a card number was blocked by Stripe’s machine learning models on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>blocks_per_card_number_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a card number was blocked by Stripe’s machine learning models on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>blocks_per_customer_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a customer was blocked by Stripe’s machine learning models on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>blocks_per_customer_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a customer was blocked by Stripe’s machine learning models on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>blocks_per_ip_address_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times an IP address was blocked by Stripe’s machine learning models on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>blocks_per_ip_address_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times an IP address was blocked by Stripe’s machine learning models on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>charge_attempts_per_card_number_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a card is charged on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>charge_attempts_per_card_number_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a card is charged on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>charge_attempts_per_customer_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a customer is charged on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>charge_attempts_per_customer_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a customer is charged on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>charge_attempts_per_ip_address_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times an IP address is charged on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>charge_attempts_per_ip_address_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times an IP address is charged on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>declines_per_card_number_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a card number was declined by the bank networks on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>declines_per_card_number_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a card number was declined by the bank networks on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>declines_per_customer_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a customer was declined by the bank networks on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>declines_per_customer_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times a customer was declined by the bank networks on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>declines_per_ip_address_daily</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times an IP address was declined by the bank networks on your account in the past 24 hours.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>declines_per_ip_address_hourly</strong></td>
      <td style="text-align: center"><em>Numeric</em></td>
      <td>The number of times an IP address was declined by the bank networks on your account in the past hour.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>is_3d_secure</strong></td>
      <td style="text-align: center"><em>Boolean</em></td>
      <td>Identifies if the payment follows a successfully completed 3D Secure verification.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>is_anonymous_ip</strong></td>
      <td style="text-align: center"><em>Boolean</em></td>
      <td>Identifies if the IP address from which the payment originates is a known proxy or Tor exit node. Stripe uses a third-party database of anonymous IP addresses to provide this attribute.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>is_disposable_email</strong></td>
      <td style="text-align: center"><em>Boolean</em></td>
      <td>Identifies if the email address supplied with the payment is one used with a known throwaway email address provider. Stripe maintains a list of domains corresponding to throwaway email addresses to provide this attribute.</td>
    </tr>
    <tr>
      <td style="text-align: right"><strong>is_my_login_ip</strong></td>
      <td style="text-align: center"><em>Boolean</em></td>
      <td>Identifies if the IP address from which the payment originates has ever been used to log into your Stripe account. This attribute can be used as a proxy for “is my IP address.”</td>
    </tr>
  </tbody>
</table>

<p>The <strong>email_domain</strong> and <strong>is_disposable_email</strong> attributes make use of an email address found in any of the following fields:</p>

<ul>
  <li>The <code>receipt_email</code> of the payment</li>
  <li>The <code>description</code> of the payment</li>
  <li>The <code>name</code> of the card (if an email address has been provided as the cardholder name)</li>
  <li>The <code>email</code> of the customer that the payment was created on</li>
  <li>The <code>description</code> of the customer or payment</li>
</ul>

<h3 id="operators">Operators</h3>

<p>A condition’s operator denotes the comparison between the payment’s attribute and the value you provide. There are different operators available, depending on the type attribute being used.</p>

<table>
  <thead>
    <tr>
      <th>Operator</th>
      <th>String</th>
      <th>Country</th>
      <th>Numeric</th>
      <th>Description</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>=</strong></td>
      <td>✔︎</td>
      <td>✔︎</td>
      <td>✔︎</td>
      <td>Equal to</td>
      <td><code><span class="rules attribute">:card_country:</span> = <span class="rules string-value">'us'</span></code></td>
    </tr>
    <tr>
      <td><strong>!=</strong></td>
      <td>✔︎</td>
      <td>✔︎</td>
      <td>✔︎</td>
      <td>Not equal to</td>
      <td><code><span class="rules attribute">:card_funding:</span> != <span class="rules string-value">'prepaid'</span></code></td>
    </tr>
    <tr>
      <td><strong>&lt;</strong></td>
      <td> </td>
      <td> </td>
      <td>✔︎</td>
      <td>Less than</td>
      <td><code><span class="rules attribute">:amount_in_gbp:</span> &lt; <span class="rules numeric-value">10.00</span></code></td>
    </tr>
    <tr>
      <td><strong>&gt;</strong></td>
      <td> </td>
      <td> </td>
      <td>✔︎</td>
      <td>Greater than</td>
      <td><code><span class="rules attribute">:amount_in_usd:</span> &gt; <span class="rules numeric-value">500.00</span></code></td>
    </tr>
    <tr>
      <td><strong>&lt;=</strong></td>
      <td> </td>
      <td> </td>
      <td>✔︎</td>
      <td>Less than or equal to</td>
      <td><code><span class="rules attribute">:amount_in_eur:</span> &lt;= <span class="rules numeric-value">100.00</span></code></td>
    </tr>
    <tr>
      <td><strong>&gt;=</strong></td>
      <td> </td>
      <td> </td>
      <td>✔︎</td>
      <td>Greater than or equal to</td>
      <td><code><span class="rules attribute">:amount_in_cad:</span> &gt;= <span class="rules numeric-value">10.00</span></code></td>
    </tr>
    <tr>
      <td><strong>IN</strong></td>
      <td>✔</td>
      <td>✔</td>
      <td>✔︎</td>
      <td>Is in the group</td>
      <td><code><span class="rules attribute">:card_country:</span> IN (<span class="rules string-value">'gb'</span>, <span class="rules string-value">'ie'</span>)</code></td>
    </tr>
  </tbody>
</table><aside class="important"><p>String comparisons using <strong>&nbsp;=&nbsp;</strong> and <strong>&nbsp;!=&nbsp;</strong> are not case-sensitive.</p></aside>

<h3 id="complex-conditions">Complex conditions</h3>

<p>You can build complex conditions by joining together basic conditions using the operators <strong>AND</strong>, <strong>OR</strong>, and <strong>NOT</strong>. You can also use their symbolic equivalents <strong>&&</strong>, <strong>||</strong> and <strong>!</strong> respectively.</p>

<p>Similar to programming languages such as C, Python, and SQL, Stripe supports standard operator <em>precedence</em> (order of operations). For instance, the complex condition:</p>

<p><code>{condition_X} OR NOT {condition_Y} AND {condition_Z}</code></p>

<p>is interpreted as:</p>

<p><code>{condition_X} OR ((NOT {condition_Y}) AND {condition_Z})</code></p>

<p>Sub-conditional grouping within complex conditions is also supported using parentheses. For instance, the prior example can be amended to explicitly change the evaluation order of sub-predicates:</p>

<p><code>({condition_X} OR (NOT {condition_Y})) AND {condition_Z}</code></p>

<p><code>{condition_X} OR NOT ({condition_Y} AND {condition_Z})</code></p>

<p>By using parentheses in different locations, each of these complex conditions lead to different results.</p></section>

<section>
<h3 id="valid-conditions">Valid conditions</h3>

<p>The following conditions are examples of correct use of attributes and a supported operator:</p>

<ul>
  <li><code><span class="rules attribute">:card_brand:</span> = <span class="rules string-value">'amex'</span></code></li>
  <li><code><span class="rules attribute">:card_country:</span> != <span class="rules string-value">'US'</span></code></li>
  <li><code><span class="rules attribute">:amount_in_usd:</span> &gt;= <span class="rules numeric-value">1000.00</span></code></li>
  <li><code><span class="rules attribute">:is_anonymous_ip:</span></code></li>
</ul>

<h3 id="invalid-conditions">Invalid conditions</h3>

<p>When creating a rule, you’re provided with feedback if you attempt to use a condition that is invalid. For reference, the following are examples of invalid conditions, where the value for an attribute or the operator used is not supported:</p>

<ul>
  <li><code><span class="rules attribute">:risk_level:</span> &lt; <span class="rules string-value">'highest'</span></code> (string values can only make use of = or != operators)</li>
  <li><code><span class="rules attribute">:ip_country:</span> = <span class="rules string-value">'Canada'</span></code> (country values must be expressed in two-letter short code)</li>
  <li><code><span class="rules attribute">:amount_in_usd:</span> &gt;= <span class="rules numeric-value">'one thousand dollars'</span></code> (numeric values must be expressed in numbers)</li>
  <li><code><span class="rules attribute">:is_anonymous_ip:</span> = <span class="rules string-value">'true'</span></code> (boolean attributes are not used with operators or values)</li>
</ul></section>

          <footer>
  <h2>Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://support.stripe.com/">Search</a> our site for more information, <a href="https://support.stripe.com/email">send us an email</a>, or <a href="../../../contact/sales.html">get in touch</a> with our sales team!</p>
</footer>

        </article>
      </div>
    </div>

    <div id="loading-bar"></div>

    <script src="../../../assets/external/jquery.min-94df374d2ad5d02ae136584dc008fb1c.js"></script>
    <script src="../../../assets/prism-aa9f4cb7aff3f31b5394455bcbea0d8b.js"></script>
    <script src="../../../assets/external/dynamics.min-14579f80273a61e6d0f4f45484e20dc7.js"></script>
    <script src="../../../assets/jquery.cookie-d7482a1bbfda18d981eda4398666acdd.js"></script>
    <script src="../../../assets/documentation-84c208e01668170139f2f511cfc37644.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="https://js.stripe.com/v2/"></script>

    
    <script src="../../../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../../../assets/analytics-e800ab0ba76de2b697ea3f61c673695b.js"></script>
<script src="https://js.stripe.com/v2/m.js"></script>
<script src="../../../assets/mirador_ping-6bba7d3d9fbb1e991b7f0f8fab43b2b1.js"></script>

    <script type="text/javascript">
    if ('Analytics' in window) {
      Analytics.viewed("docs", {
        docs_version: "2",
      });
    }
    </script>
  </body>

<!-- Mirrored from stripe.com/docs/radar/rules/reference by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:56 GMT -->
</html>
