<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from stripe.com/docs/orders/tax-integration by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="csrf-token" content="R7Qnad6v4D50zWDwRyGUEQlPBvbZm43NCJX_-pwSa0PeLjMU2Goke7mJRO-LKaFqIDGIcYU3TG1JIPXSOcWhMg==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Automated Tax Calculations in the Orders API</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../../img/v3/home/social.png">

    <meta property="og:title" content="Automated Tax Calculations in the Orders API">
    <meta property="og:url" content="tax-integration.html">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="../../img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="../../img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Automated Tax Calculations in the Orders API">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-ec238f46e7cb9867e3c1b529e2cfa37b.css&quot;}</script>

    

    

    <link rel="stylesheet" href="../../assets/v3/default-ef2bff54073622b9e08cf24466b5668f.css">
    <link rel="stylesheet" href="../../assets/v3/shared/common-d0fb03fa2d48fcf29010779ca9a12b2c.css">
    <link rel="stylesheet" href="../../assets/v3/documentation/base-47c1fd7d3d670e4e08df8f5a67b20dea.css">
    <link rel="stylesheet" href="../../assets/v3/shared/prism_light-6d08c6ec0d72453693d775c3b96629c0.css">
    
    
    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar">
        <div class="logo">
          <a class="site" href="../../index.html" title="Stripe"></a>
          <a class="extension" href="../../docs.html">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="../../docs.html">Home</a></h1>
          <h1 class="payments"><a class="toggle-content">Payments</a></h1>
<ul>
    <li>
      <a href="../quickstart.html">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="../checkout/tutorial.html">Checkout</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../checkout.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../custom-form.html">Stripe.js</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../stripe.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../mobile/ios.html">iOS</a>
    </li>
    <li>
      <a href="../mobile/android.html">Android</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="../charges.html">Creating Charges</a>
    </li>
    <li>
      <a href="../declines.html">Declines &amp; Failed Payments</a>
    </li>
    <li>
      <a href="../disputes.html">Disputes</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../disputes/evidence.html">Submitting Evidence</a>
    </li>
    <li>
      <a href="../disputes/types.html">Types</a>
    </li>
    <li>
      <a href="../disputes/faq.html">FAQ</a>
    </li>
</ul>

    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="../orders.html">Orders</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="guide.html">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a class='selected' href="tax-integration.html">Tax Integrations</a>
    </li>
    <li>
      <a href="shipping-integration.html">Shipping Integrations</a>
    </li>
    <li>
      <a href="../sources.html">Getting Started</a>
    </li>
    <li>
      <a href="../sources/payment-methods.html">Payment Methods</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../sources/cards.html">Cards</a>
    </li>
    <li>
      <a href="../sources/3d-secure.html">3D Secure</a>
    </li>
    <li>
      <a href="../sources/bancontact.html">Bancontact</a>
    </li>
    <li>
      <a href="../sources/giropay.html">Giropay</a>
    </li>
    <li>
      <a href="../sources/ideal.html">iDEAL</a>
    </li>
    <li>
      <a href="../sources/sepa-direct-debit.html">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="../sources/sofort.html">Sofort</a>
    </li>
</ul>

    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="../ach.html">ACH</a>
    </li>
    <li>
      <a href="../apple-pay.html">Apple Pay</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../apple-pay/apps.html">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="../apple-pay/web.html">Apple Pay on the Web</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../alipay.html">Alipay</a>
    </li>
    <li>
      <a href="../bitcoin.html">Bitcoin</a>
    </li>
    <li class='separator'>
      <a href="../testing.html">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content">Subscriptions</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../subscriptions/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../subscriptions/creating.html">Creating Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="../subscriptions/discounts.html">Applying Discounts</a>
    </li>
    <li>
      <a href="../subscriptions/trials.html">Using Trial Periods</a>
    </li>
    <li>
      <a href="../subscriptions/quantities.html">Setting Quantities</a>
    </li>
    <li>
      <a href="../subscriptions/taxes.html">Adding Taxes</a>
    </li>
    <li>
      <a href="../subscriptions/multiple.html">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../subscriptions/lifecycle.html">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="../subscriptions/webhooks.html">Using Webhooks</a>
    </li>
    <li>
      <a href="../subscriptions/changing.html">Changing Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="../subscriptions/upgrading-downgrading.html">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="../subscriptions/billing-cycle.html">Billing Cycle</a>
    </li>
    <li>
      <a href="../subscriptions/canceling-pausing.html">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../subscriptions/invoices.html">Working with Invoices</a>
      <ul data-collapsable=false>
</ul>

    </li>
    <li>
      <a href="../subscriptions/plans.html">Managing Plans</a>
    </li>
    <li>
      <a href="../subscriptions/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content">Connect</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../connect.html">Overview</a>
    </li>
    <li>
      <a href="../connect/connecting-to-accounts.html">Connecting to Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../connect/authentication.html">Authentication</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../connect/standalone-accounts.html">Standalone Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../connect/reference.html">OAuth Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../connect/managed-accounts.html">Managed Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../connect/updating-accounts.html">Updating Accounts</a>
    </li>
    <li>
      <a href="../connect/identity-verification.html">Identity Verification</a>
    </li>
    <li>
      <a href="../connect/required-verification-information.html">Verification Fields</a>
    </li>
    <li>
      <a href="../connect/testing-verification.html">Testing Verification</a>
    </li>
    <li>
      <a href="../connect/bank-transfers.html">Bank Transfers</a>
    </li>
    <li>
      <a href="../connect/migrating.html">Migrating Recipients</a>
    </li>
    <li>
      <a href="../connect/best-practices.html">Best Practices</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../connect/payments-fees.html">Payments and Fees</a>
    </li>
    <li>
      <a href="../connect/special-case-transfers.html">Special-case Transfers</a>
    </li>
    <li class='separator'>
      <a href="../connect/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content">Relay</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../relay.html">Selling in Other Apps</a>
    </li>
    <li>
      <a href="../relay/apps-guide.html">Accepting Orders in Your App</a>
      <ul data-collapsable=false>
    <li>
      <a href="../relay/apps-error-guide.html">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="radar"><a class="toggle-content">Radar</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../radar.html">Overview</a>
    </li>
    <li>
      <a href="../radar/risk-evaluation.html">Risk Evaluation</a>
    </li>
    <li>
      <a href="../radar/review.html">Review</a>
      <ul data-collapsable=false>
    <li>
      <a href="../radar/review/auth-and-capture.html">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../radar/rules.html">Rules</a>
      <ul data-collapsable=false>
    <li>
      <a href="../radar/rules/reference.html">Reference</a>
    </li>
</ul>

    </li>
    <li class='separator'>
      <a href="../radar/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="account"><a class="toggle-content">Account</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../dashboard.html">Your Account</a>
    </li>
    <li>
      <a href="../checklist.html">Going Live Checklist</a>
    </li>
    <li>
      <a href="../transfers.html">Getting Paid</a>
    </li>
    <li>
      <a href="../reporting.html">Reporting</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content">Development</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../libraries.html">API Libraries</a>
    </li>
    <li>
      <a href="../upgrades.html">API Upgrades</a>
    </li>
    <li>
      <a href="../webhooks.html">Webhooks</a>
    </li>
    <li>
      <a href="../building-integrations.html">Integrations</a>
    </li>
    <li>
      <a href="../recipes.html">Recipes</a>
    </li>
    <li>
      <a href="../security.html">Security</a>
    </li>
</ul>


          <h1 class="references"><a href="../api.html" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content">
          <header>
  <h1>Automated Tax Calculations</h1>
  <p>Use a tax provider to automatically calculate the taxes due on your Stripe orders. If you need help after reading this, check out our answers to <a href="https://support.stripe.com/search?q=orders">common questions</a> or chat live with other developers in <a href="irc://irc.freenode.net/stripe">#stripe</a> on freenode.
</p>
</header>

<section>
<p>Charging the legally appropriate amount of tax on orders is especially tricky for online sales. The right percentage to charge–if any–depends upon the customer’s country or US state, the types of products being purchased, and the order total. To help businesses dynamically calculate and apply accurate taxes in real-time, Stripe has partnered with <a href="http://www.info.avalara.com/Stripe">Avalara</a>, <a href="https://taxjar.com/">TaxJar</a>, and <a href="https://taxamo.com/">Taxamo</a>.</p>

<p>We’ve integrated these tax providers’ tax calculation product directly into the Stripe <a href="../orders.html">Orders API</a>. The Orders API allows users to represent their inventory and orders within Stripe, rather than on their own site or through a third-party. If you are not yet familiar with the Orders API, we recommend that you first visit the <a href="../orders.html">Orders API Overview</a> documentation before diving into tax calculations.</p>

<p>To enable dynamic tax calculations for your orders, follow our guides to get started with <a href="avalara.html">Avalara</a>, <a href="taxjar.html">TaxJar</a>, or <a href="taxamo.html">Taxamo</a>. You can optionally read on below to learn <a href="#how-it-works">how the integration works</a>. If you sell a range of products with different tax implications, see how to use <a href="#tax-codes">tax codes</a>. If you also sell directly to businesses and need to factor in value-added tax (VAT), Stripe <a href="#vat">supports that, too</a>.</p></section>

<section>
<h2 id="how-it-works">How the integration works</h2>

<p>The Orders API tax provider integrations automatically manage everything necessary to compute and commit tax quotes for your orders. To help explain how the integration functions, read the high-level and technical overviews below. (The latter is intended for developers.)</p></section>

<section>
<h2 id="high-level-overview">High-level overview</h2>

<p>When you create an order using the Orders API, Stripe programmatically sends the details to your preferred tax provider:</p>

<ul>
  <li>The specific versions (as SKUs) of the products being ordered</li>
  <li>Your origination shipping address</li>
  <li>The customer’s destination shipping address</li>
</ul>

<p>Orders API tax providers need all three components to calculate taxes for your orders. It is therefore important that you either pass <a href="../api.html#create_order-shipping">shipping details</a> directly or <a href="../api.html#create_order-customer">attach a customer</a> with a valid shipping address when the order is <em>created</em>. The provider determines the appropriate amount of taxes using the order information provided and returns this information to Stripe, which we add to the order in real-time. Your customers pay the updated total, and you can later view the charged tax amount in your Dashboard and in your tax provider’s reports and dashboard.</p>

<p>The tax <em>estimate</em> service is usually provided free of charge by the tax providers, so <em>creating</em> orders with Stripe does not by itself cost you anything. Once the order is paid for, Stripe commits the estimate with the provider. Tax providers charge based on committed estimates in most cases, but you should check with the provider you are using.</p>

<p>Should an order later be returned or canceled, Stripe automatically voids the transactions with the provider to help you keep your tax reports accurate. The integration works seamlessly both when an order is fully or partially returned.</p></section>

<section>
<h2 id="technical-overview">Technical overview</h2>

<p>Looking at the process from a more technical perspective, once you set up your tax provider integration, you should automatically see <code>tax</code> items in your order’s <code>items</code> array. For example, the following request creates an order shippable to a US address:</p>
<div class="code">
  <nav class="nav-filename icon-terminal">
    Terminal
  </nav>
  <pre class="language-curl numbered" ><code>curl https://api.stripe.com/v1/orders \
   -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \
   -d items[][parent]=tax_provider_test_sku \
   -d currency=usd \
   -d shipping[name]=&quot;Jenny Rosen&quot; \
   -d shipping[address][line1]=&quot;123 Main Street&quot; \
   -d shipping[address][postal_code]=94110 \
   -d shipping[address][city]=&quot;San Francisco&quot; \
   -d shipping[address][state]=CA \
   -d shipping[address][country]=US \
   -d email=&quot;jenny@example.net&quot;
</code></pre>
</div>

<p>When processing the request, Stripe uses the tax provider’s API to obtain tax line items and includes them directly in the response. For this example, the response below includes the 7.5% California sales tax applicable to the order (some fields removed for brevity):</p>
<div class="code">
  <pre class="language-javascript numbered" ><code>{
  &quot;id&quot;: &quot;or_17pkOFDAu10Yox5ReR89xhT1&quot;,
  &quot;object&quot;: &quot;order&quot;,
  &quot;amount&quot;: 7524,
  ...
  &quot;items&quot;: [
    {
      &quot;object&quot;: &quot;order_item&quot;,
      &quot;amount&quot;: 6999,
      &quot;currency&quot;: &quot;usd&quot;,
      &quot;description&quot;: &quot;Slim Jeans&quot;,
      &quot;parent&quot;: &quot;tax_provider_test_sku&quot;,
      &quot;quantity&quot;: 1,
      &quot;type&quot;: &quot;sku&quot;
    },
    {
      &quot;object&quot;: &quot;order_item&quot;,
      &quot;amount&quot;: 525,
      &quot;currency&quot;: &quot;usd&quot;,
      &quot;description&quot;: &quot;CA STATE TAX (PC040100)&quot;,
      &quot;parent&quot;: null,
      &quot;quantity&quot;: null,
      &quot;type&quot;: &quot;tax&quot;
    }
  ],
  ...
  &quot;shipping&quot;: {
    &quot;address&quot;: {
      &quot;city&quot;: &quot;San Francisco&quot;,
      &quot;country&quot;: &quot;US&quot;,
      &quot;line1&quot;: &quot;123 Main Street&quot;,
      &quot;line2&quot;: null,
      &quot;postal_code&quot;: &quot;94110&quot;,
      &quot;state&quot;: &quot;CA&quot;
    },
    &quot;name&quot;: &quot;Jenny Rosen&quot;,
    &quot;phone&quot;: null
  },
  ...
}</code></pre>
</div>
</section>

<section>
<h2 id="tax-codes">Setting up product tax codes</h2>

<p>Some jurisdictions apply different tax policies to different product types, such as food and clothing. With Stripe’s tax provider integration, appropriate taxes can be calculated on your products that have exclusions or varying tax rates.</p>

<p>To start, assign a tax code to your products stored in Stripe by setting the <code>tax_code</code> metadata value on the product objects. The value associated with the metadata field <code>tax_code</code> will be passed directly to the tax provider.</p>

<p>The <code>tax_code</code> metadata property can be set either in the Dashboard or using the API. To use the Dashboard, navigate to a product page, click the <strong>Edit</strong> button under <strong>Metadata</strong> and add a value for <code>tax_code</code>.</p>

<p>To use the API, perform an update product request like the one below:</p>
<div class="code">
  <nav class="nav-filename icon-terminal">
    Terminal
  </nav>
  <pre class="language-curl numbered" ><code>curl https://api.stripe.com/v1/products/pr_6rpcQjKz7PexY2 \
   -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \
   -d metadata[tax_code]=AB230
</code></pre>
</div>
</section>

<section>
<h2 id="vat">Including VAT</h2>

<p>The Orders API also supports VAT for business-to-business transactions. Merely set a VAT ID on the Stripe <code>Customer</code> object and then use that customer for an order. This request adds a VAT ID to an existing customer:</p>
<div class="code">
  <nav class="nav-filename icon-terminal">
    Terminal
  </nav>
  <pre class="language-curl numbered" ><code>curl https://api.stripe.com/v1/customers/cus_RrXpKlxOlCbFJUn8 \
   -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \
   -d business_vat_id=DK123456
</code></pre>
</div>

<p>When that customer is subsequently used for an order, the tax provider will receive the VAT ID and calculate the appropriate tax amount.</p></section>


          <footer>
  <h2>Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://support.stripe.com/">Search</a> our site for more information, <a href="https://support.stripe.com/email">send us an email</a>, or <a href="../../contact/sales.html">get in touch</a> with our sales team!</p>
</footer>

        </article>
      </div>
    </div>

    <div id="loading-bar"></div>

    <script src="../../assets/external/jquery.min-94df374d2ad5d02ae136584dc008fb1c.js"></script>
    <script src="../../assets/prism-aa9f4cb7aff3f31b5394455bcbea0d8b.js"></script>
    <script src="../../assets/external/dynamics.min-14579f80273a61e6d0f4f45484e20dc7.js"></script>
    <script src="../../assets/jquery.cookie-d7482a1bbfda18d981eda4398666acdd.js"></script>
    <script src="../../assets/documentation-84c208e01668170139f2f511cfc37644.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="https://js.stripe.com/v2/"></script>

    
    <script src="../../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../../assets/analytics-e800ab0ba76de2b697ea3f61c673695b.js"></script>
<script src="https://js.stripe.com/v2/m.js"></script>
<script src="../../assets/mirador_ping-6bba7d3d9fbb1e991b7f0f8fab43b2b1.js"></script>

    <script type="text/javascript">
    if ('Analytics' in window) {
      Analytics.viewed("docs", {
        docs_version: "2",
      });
    }
    </script>
  </body>

<!-- Mirrored from stripe.com/docs/orders/tax-integration by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:47:45 GMT -->
</html>
