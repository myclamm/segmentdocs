<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from stripe.com/docs/apple-pay/web/custom by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:49:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="csrf-token" content="NSzPhu2CjsV7UC72Ohg2T-wnuURPSad9oo0R9SzQa2Ksttv760dKgLYUCun2EAM0xVk3wxPlZt3jOBvdiQehEw==">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Customize Apple Pay on the Web</title>

    <meta name="description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../../../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../../../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../../../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../../../img/v3/home/social.png">

    <meta property="og:title" content="Customize Apple Pay on the Web">
    <meta property="og:url" content="custom.html">
    <meta property="og:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="../../../img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="../../../img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Customize Apple Pay on the Web">
    <meta name="twitter:description" content="Stripe is a suite of APIs that powers commerce for businesses of all sizes.">


    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/v3/shared/navigation_ie10-ec238f46e7cb9867e3c1b529e2cfa37b.css&quot;}</script>

    

    

    <link rel="stylesheet" href="../../../assets/v3/default-ef2bff54073622b9e08cf24466b5668f.css">
    <link rel="stylesheet" href="../../../assets/v3/shared/common-d0fb03fa2d48fcf29010779ca9a12b2c.css">
    <link rel="stylesheet" href="../../../assets/v3/documentation/base-47c1fd7d3d670e4e08df8f5a67b20dea.css">
    <link rel="stylesheet" href="../../../assets/v3/shared/prism_light-6d08c6ec0d72453693d775c3b96629c0.css">
    
    
    <meta name="viewport" content="width=1060">
    <meta name="robots" content="noarchive">
  </head>
  <body class="">
    
    <div id="docs">
      <div id="sidebar">
        <div class="logo">
          <a class="site" href="../../../index.html" title="Stripe"></a>
          <a class="extension" href="../../../docs.html">docs</a>
        </div>
        <div class="nav-border"></div>
        <nav>
          <h1 class="home"><a href="../../../docs.html">Home</a></h1>
          <h1 class="payments"><a class="toggle-content">Payments</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../quickstart.html">Quickstart</a>
    </li>
    <li class="category">Collecting payment details
    </li>
    <li>
      <a href="../../checkout/tutorial.html">Checkout</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../checkout.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../custom-form.html">Stripe.js</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../stripe.html">Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../mobile/ios.html">iOS</a>
    </li>
    <li>
      <a href="../../mobile/android.html">Android</a>
    </li>
    <li class="category">Charges
    </li>
    <li>
      <a href="../../charges.html">Creating Charges</a>
    </li>
    <li>
      <a href="../../declines.html">Declines &amp; Failed Payments</a>
    </li>
    <li>
      <a href="../../disputes.html">Disputes</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../disputes/evidence.html">Submitting Evidence</a>
    </li>
    <li>
      <a href="../../disputes/types.html">Types</a>
    </li>
    <li>
      <a href="../../disputes/faq.html">FAQ</a>
    </li>
</ul>

    </li>
    <li class="category">Products &amp; Orders
    </li>
    <li>
      <a href="../../orders.html">Orders</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../orders/guide.html">Guide</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../orders/tax-integration.html">Tax Integrations</a>
    </li>
    <li>
      <a href="../../orders/shipping-integration.html">Shipping Integrations</a>
    </li>
    <li>
      <a href="../../sources.html">Getting Started</a>
    </li>
    <li>
      <a href="../../sources/payment-methods.html">Payment Methods</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../../sources/cards.html">Cards</a>
    </li>
    <li>
      <a href="../../sources/3d-secure.html">3D Secure</a>
    </li>
    <li>
      <a href="../../sources/bancontact.html">Bancontact</a>
    </li>
    <li>
      <a href="../../sources/giropay.html">Giropay</a>
    </li>
    <li>
      <a href="../../sources/ideal.html">iDEAL</a>
    </li>
    <li>
      <a href="../../sources/sepa-direct-debit.html">SEPA Direct Debit</a>
    </li>
    <li>
      <a href="../../sources/sofort.html">Sofort</a>
    </li>
</ul>

    </li>
    <li class="category">Other Payment Methods
    </li>
    <li>
      <a href="../../ach.html">ACH</a>
    </li>
    <li>
      <a href="../../apple-pay.html">Apple Pay</a>
      <ul class='hidden' data-hidden=true>
    <li>
      <a href="../apps.html">Apple Pay in Apps</a>
    </li>
    <li>
      <a href="../web.html">Apple Pay on the Web</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../alipay.html">Alipay</a>
    </li>
    <li>
      <a href="../../bitcoin.html">Bitcoin</a>
    </li>
    <li class='separator'>
      <a href="../../testing.html">Testing</a>
    </li>
</ul>

          <h1 class="subscriptions"><a class="toggle-content">Subscriptions</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../subscriptions/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../../subscriptions/creating.html">Creating Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../subscriptions/discounts.html">Applying Discounts</a>
    </li>
    <li>
      <a href="../../subscriptions/trials.html">Using Trial Periods</a>
    </li>
    <li>
      <a href="../../subscriptions/quantities.html">Setting Quantities</a>
    </li>
    <li>
      <a href="../../subscriptions/taxes.html">Adding Taxes</a>
    </li>
    <li>
      <a href="../../subscriptions/multiple.html">Multiple Subscriptions</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../subscriptions/lifecycle.html">Lifecycle &amp; Events</a>
    </li>
    <li>
      <a href="../../subscriptions/webhooks.html">Using Webhooks</a>
    </li>
    <li>
      <a href="../../subscriptions/changing.html">Changing Subscriptions</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../subscriptions/upgrading-downgrading.html">Upgrading &amp; Downgrading</a>
    </li>
    <li>
      <a href="../../subscriptions/billing-cycle.html">Billing Cycle</a>
    </li>
    <li>
      <a href="../../subscriptions/canceling-pausing.html">Canceling &amp; Pausing</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../subscriptions/invoices.html">Working with Invoices</a>
      <ul data-collapsable=false>
</ul>

    </li>
    <li>
      <a href="../../subscriptions/plans.html">Managing Plans</a>
    </li>
    <li>
      <a href="../../subscriptions/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="connect"><a class="toggle-content">Connect</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../connect.html">Overview</a>
    </li>
    <li>
      <a href="../../connect/connecting-to-accounts.html">Connecting to Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../connect/authentication.html">Authentication</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../connect/standalone-accounts.html">Standalone Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../connect/reference.html">OAuth Reference</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../connect/managed-accounts.html">Managed Accounts</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../connect/updating-accounts.html">Updating Accounts</a>
    </li>
    <li>
      <a href="../../connect/identity-verification.html">Identity Verification</a>
    </li>
    <li>
      <a href="../../connect/required-verification-information.html">Verification Fields</a>
    </li>
    <li>
      <a href="../../connect/testing-verification.html">Testing Verification</a>
    </li>
    <li>
      <a href="../../connect/bank-transfers.html">Bank Transfers</a>
    </li>
    <li>
      <a href="../../connect/migrating.html">Migrating Recipients</a>
    </li>
    <li>
      <a href="../../connect/best-practices.html">Best Practices</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../connect/payments-fees.html">Payments and Fees</a>
    </li>
    <li>
      <a href="../../connect/special-case-transfers.html">Special-case Transfers</a>
    </li>
    <li class='separator'>
      <a href="../../connect/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="relay"><a class="toggle-content">Relay</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../relay.html">Selling in Other Apps</a>
    </li>
    <li>
      <a href="../../relay/apps-guide.html">Accepting Orders in Your App</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../relay/apps-error-guide.html">Error Handling</a>
    </li>
</ul>

    </li>
</ul>

          <h1 class="radar"><a class="toggle-content">Radar</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../radar.html">Overview</a>
    </li>
    <li>
      <a href="../../radar/risk-evaluation.html">Risk Evaluation</a>
    </li>
    <li>
      <a href="../../radar/review.html">Review</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../radar/review/auth-and-capture.html">Uncaptured Payments</a>
    </li>
</ul>

    </li>
    <li>
      <a href="../../radar/rules.html">Rules</a>
      <ul data-collapsable=false>
    <li>
      <a href="../../radar/rules/reference.html">Reference</a>
    </li>
</ul>

    </li>
    <li class='separator'>
      <a href="../../radar/testing.html">Testing</a>
    </li>
</ul>

          <h1 class="account"><a class="toggle-content">Account</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../dashboard.html">Your Account</a>
    </li>
    <li>
      <a href="../../checklist.html">Going Live Checklist</a>
    </li>
    <li>
      <a href="../../transfers.html">Getting Paid</a>
    </li>
    <li>
      <a href="../../reporting.html">Reporting</a>
    </li>
</ul>

          <h1 class="api"><a class="toggle-content">Development</a></h1>
<ul class='hidden' data-hidden=true>
    <li>
      <a href="../../libraries.html">API Libraries</a>
    </li>
    <li>
      <a href="../../upgrades.html">API Upgrades</a>
    </li>
    <li>
      <a href="../../webhooks.html">Webhooks</a>
    </li>
    <li>
      <a href="../../building-integrations.html">Integrations</a>
    </li>
    <li>
      <a href="../../recipes.html">Recipes</a>
    </li>
    <li>
      <a href="../../security.html">Security</a>
    </li>
</ul>


          <h1 class="references"><a href="../../api.html" class="external" target="_blank">API Reference</a></h1>
        </nav>
      </div>
      <div id="content-wrapper" tabindex="0">
        <div class="overlay"></div>
        <header id="main-header">
          <nav>
            <ul class="external">
              <li><a href="https://support.stripe.com/">Support</a></li>

              <li class="button">
                <a data-adroll-segment='submit_two' href="https://dashboard.stripe.com/login">Sign in</a>
              </li>
            </ul>
          </nav>
        </header>
        <article id="content">
          <header>
  <h1>Customize your website's Apple Pay integration</h1>
  <p>
    Once you're done <a href="../web.html">getting started</a> integrating Apple Pay on your website, you can tweak your code to display and request additional information via the Apple Pay dialog. Just three ways you can tweak it include:
  </p>
  <ul>
    <li>
      <a href="#line-items">Specifying custom line items on the payment sheet</a>
    </li>
    <li>
      <a href="#billing-shipping">Collecting your user's billing and shipping address</a>
    </li>
    <li>
      <a href="#shipping-methods">Offering different shipping methods to your user</a>
    </li>
  </ul>
</header>

<section>
  <h2 id="line-items">Specifying custom line items on the payment sheet</h2>
  <p>
    The <code>Stripe.applePay.buildSession</code> function <a href="../web.html#beginning-a-session">introduced</a> in our getting started guide is really just a thin wrapper around Apple's <code>ApplePaySession</code> class. Specifically, it handles the <code>onvalidatemerchant</code> and <code>onpaymentauthorized</code> events for you. You can use the <a href="https://developer.apple.com/reference/applepayjs/paymentrequest">other available keys</a> in your <code>PaymentRequest</code>, and the <a href="https://developer.apple.com/reference/applepayjs/applepaysession#symbols">other available events</a> on the <code>ApplePaySession</code> to collect your users' shipping address and preferred shipping method, and to even offer them different shipping options and prices depending on their location.
  </p>

  <p>
    You can set the <code>lineItems</code> key in the <code>PaymentRequest</code> you pass to <code>buildSession</code>, and the user will be shown a more detailed summary of their payment. Apple recommends that instead of a totally itemized receipt, you group all of the items a user is purchasing into one "subtotal" item, and then add additional items for shipping, tax, discounts, etc as needed.
  </p>

<div class="code">
  <nav class="nav-filename icon-file">
    product.js
  </nav>
  <pre class="language-javascript numbered" ><code>document.getElementById(&#39;apple-pay-button&#39;).addEventListener(&#39;click&#39;, function() {
  var paymentRequest = {
    countryCode: &#39;US&#39;,
    currencyCode: &#39;USD&#39;,
    lineItems: [
      {
        type: &#39;final&#39;,
        label: &#39;Fancy Hat&#39;,
        amount: &#39;15.00&#39;
      },
      {
        type: &#39;final&#39;,
        label: &#39;Shipping&#39;,
        amount: &#39;10.00&#39;
      },
      {
        type: &#39;final&#39;,
        label: &#39;Tax&#39;,
        amount: &#39;0.99&#39;
      },
      {
        type: &#39;final&#39;,
        label: &#39;Discount&#39;,
        amount: &#39;-6.00&#39;
      }
    ],
    total: {
      label: &#39;Stripe.com&#39;,
      amount: &#39;19.99&#39;
    }
  };
  var session = Stripe.applePay.buildSession(paymentRequest,
    function(result, completion) {
    console.log(result.token.id);
    completion(true);
  });
  session.begin();
});</code></pre>
</div>

  <p>The code shown above will render this payment sheet.</p>

  <div class="image">
    <img src="../../../img/documentation/mobile/apple-pay/line-items.png" width="320" height="341" alt="Screenshot of custom line items" data-hires="true" />
  </div>
</section>
<section>
  <h2 id="billing-shipping">Collecting your user's billing and shipping address</h2>
  <p>
    If you specify the <code>requiredBillingContactFields</code> property on your <code>PaymentRequest</code>, the user will be prompted to choose their billing address before payment. Their address fields will then be available on the <code>result.token</code> object in the success callback you pass to <code>buildSession</code>. Similarly, you can specify the <code>requiredShippingContactFields</code> property on your <code>PaymentRequest</code> and it'll be available as the <code>result.shippingContact</code> object in your success callback. The keys that will be present on the <code>shippingContact</code> can be found on <a href="https://developer.apple.com/reference/applepayjs/paymentcontact">Apple's Developer docs</a>.
  </p>

<div class="code">
  <nav class="nav-filename icon-file">
    product.js
  </nav>
  <pre class="language-javascript numbered"  data-highlight-lines="3,4,14,15"><code>document.getElementById(&#39;apple-pay-button&#39;).addEventListener(&#39;click&#39;, function() {
  var paymentRequest = {
    requiredBillingContactFields: [&#39;postalAddress&#39;],
    requiredShippingContactFields: [&#39;phone&#39;],
    countryCode: &#39;US&#39;,
    currencyCode: &#39;USD&#39;,
    total: {
      label: &#39;Stripe.com&#39;,
      amount: &#39;19.99&#39;
    }
  };
  var session = Stripe.applePay.buildSession(paymentRequest,
    function(result, completion) {
    console.log(result.token.card.address_line1); // 12 Main St
    console.log(result.shippingContact.phoneNumber); // 8885551212
    completion(true);
  });
  session.begin();
});</code></pre>
</div>

  <p>The code shown above will render this payment sheet.</p>

  <div class="image">
    <img src="../../../img/documentation/mobile/apple-pay/billing-shipping.png" width="320" height="296" alt="Screenshot of billing and shipping address collection" data-hires="true" />
  </div>
</section>
<section>
  <h2 id="shipping-methods">Offering different shipping methods to your user</h2>
  <p>
    You can also offer your user a variety of shipping methods to choose from by setting the <code>shippingMethods</code> property on your <code>PaymentRequest</code>. You can then change the <code>lineItems</code> property on your session when the user selects one of them. Depending on the type of service your site offers, you can also set the <code>shippingType</code> key on your <code>PaymentRequest</code> to one of <code>shipping</code>, <code>delivery</code>, <code>storePickup</code>, or <code>servicePickup</code> to have Apple Pay style the sheet more appropriately.
  </p>

<div class="code">
  <nav class="nav-filename icon-file">
    product.js
  </nav>
  <pre class="language-javascript numbered" ><code>document.getElementById(&#39;apple-pay-button&#39;).addEventListener(&#39;click&#39;, function() {

  // We&#39;ll write some helper functions to clean things up.
  function buildTotal(selectedShippingMethod) {
    return {
      label: &#39;Stripe.com&#39;,
      amount: (parseFloat(selectedShippingMethod.amount) + 19.99).toFixed(2)
    }
  }

  function buildLineItems(selectedShippingMethod) {
    return [
      {
        type: &#39;final&#39;,
        label: &#39;Fancy Hat&#39;,
        amount: &#39;19.99&#39;
      },
      {
        type: &#39;final&#39;,
        label: &#39;Shipping&#39;,
        amount: selectedShippingMethod.amount
      },
    ]
  }

  var shippingMethods = [
    {
      label: &#39;Ground Shipping&#39;,
      detail: &#39;Arrives 5-7 business days&#39;,
      amount: &#39;5.00&#39;,
      identifier: &#39;ground&#39;
    },
    {
      label: &#39;Express Shipping&#39;,
      detail: &#39;Arrives 2-3 business days&#39;,
      amount: &#39;15.00&#39;,
      identifier: &#39;express&#39;
    }
  ];

  var paymentRequest = {
    shippingMethods: shippingMethods,
    shippingType: &#39;shipping&#39;,
    countryCode: &#39;US&#39;,
    currencyCode: &#39;USD&#39;,
    // By default, the first shipping method will be selected.
    lineItems: buildLineItems(shippingMethods[0]),
    total: buildTotal(shippingMethods[0])
  };

  var session = Stripe.applePay.buildSession(paymentRequest,
    function(result, completion) {
    console.log(result.shippingMethod.label); // &quot;Ground Shipping&quot;
  });

  session.onshippingmethodselected = function(event) {
    // You can do work asynchronously here; just call
    // session.completeShippingMethodSelection when you&#39;re done.
    session.completeShippingMethodSelection(
      ApplePaySession.STATUS_SUCCESS,
      buildTotal(event.shippingMethod),
      buildLineItems(event.shippingMethod)
    )
  }

  session.begin();
});</code></pre>
</div>

  <p>The code shown above will render this payment sheet.</p>

  <div class="image">
    <img src="../../../img/documentation/mobile/apple-pay/shipping-methods%402x.png" width="320" height="363" alt="Shipping methods" data-hires="true" />
  </div>

</section>

<section>
  <h2 id="more-resources">More Resources</h2>
  <ul>
    <li><a href="../../stripe.html#collecting-apple-pay-details">Stripe.js - full Apple Pay reference</a></li>
    <li><a href="https://developer.apple.com/videos/play/wwdc2016/703/">Apple Pay on the Web WWDC Session</a> (<a href="http://asciiwwdc.com/2016/sessions/703">Transcript</a>)</li>
    <li><a href="https://developer.apple.com/reference/applepayjs/applepaysession#symbols">Apple's ApplePaySession reference</a></li>
  </ul>
</section>


          <footer>
  <h2>Questions?</h2>
  <p>We're always happy to help with code or other questions you might have! <a href="https://support.stripe.com/">Search</a> our site for more information, <a href="https://support.stripe.com/email">send us an email</a>, or <a href="../../../contact/sales.html">get in touch</a> with our sales team!</p>
</footer>

        </article>
      </div>
    </div>

    <div id="loading-bar"></div>

    <script src="../../../assets/external/jquery.min-94df374d2ad5d02ae136584dc008fb1c.js"></script>
    <script src="../../../assets/prism-aa9f4cb7aff3f31b5394455bcbea0d8b.js"></script>
    <script src="../../../assets/external/dynamics.min-14579f80273a61e6d0f4f45484e20dc7.js"></script>
    <script src="../../../assets/jquery.cookie-d7482a1bbfda18d981eda4398666acdd.js"></script>
    <script src="../../../assets/documentation-84c208e01668170139f2f511cfc37644.js"></script>
    <script>
      parseKey("sk_test_BQokikJOvBiI2HlWgH4olfQ2", "secret-key", null);
      parseKey("pk_test_6pRNASCoBOKtIshFeQd4XMUh", "publishable-key", null);
    </script>
      <script type="text/javascript" src="https://js.stripe.com/v2/"></script>

    
    <script src="../../../assets/config-aead70c07cdca45cec67e4141bf18edc.js"></script>
    
<script type="application/json" id="analytics_config">{&quot;mixpanel&quot;:{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;},&quot;ga&quot;:{},&quot;trackpage&quot;:true}</script>

<script src="https://js.stripe.com/internal/v2/analytics.min.js"></script>
<script src="../../../assets/analytics-e800ab0ba76de2b697ea3f61c673695b.js"></script>
<script src="https://js.stripe.com/v2/m.js"></script>
<script src="../../../assets/mirador_ping-6bba7d3d9fbb1e991b7f0f8fab43b2b1.js"></script>

    <script type="text/javascript">
    if ('Analytics' in window) {
      Analytics.viewed("docs", {
        docs_version: "2",
      });
    }
    </script>
  </body>

<!-- Mirrored from stripe.com/docs/apple-pay/web/custom by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 23:49:42 GMT -->
</html>
