function changeHash(e){window.location.replace("#"+e),Analytics.track("hashChanged")}function handleHash(e,t,n,r,i){if(!n)return!1;showed=!1,n=encodeURI(n.substring(1));if(e.find("#"+t+"-"+n).length)r(n),showed=!0;else if(n!==t)return!1;return i=i||e,scrollTo(i),showed}function scrollTo(e){if(e.length)return $("html, body").animate({scrollTop:e.offset().top},600),!1}function addGreenhouseSourceToHref(e,t){return e.indexOf("#")==-1?e+="?gh_src="+t:e=e.replace("#","?gh_src="+t+"#"),e}function getGreenhouseSource(){var e=window.location.search.match(/[&?]gh_src=([A-Za-z0-9]*)/);return e?e[1]:null}function debounce(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)},u=n&&!r;clearTimeout(r),r=setTimeout(o,t),u&&e.apply(i,s)}}function flagClassForLocation(e){switch(e){case"Berlin":return"de";case"Dublin":return"ie";case"London":return"gb";case"Melbourne":return"au";case"New Zealand":return"nz";case"The Netherlands":return"nl";case"Tokyo":return"jp";case"San Francisco":case"Portland":return"us"}}$(function(){function r(e){n.find(".selected div").remove(),n.find(".selected").removeClass("selected"),n.find("ul").hide(),$selected=n.find("section#openings-"+e),$selected.find(".switch").addClass("selected").append("<div><div></div></div>"),$list=$selected.find("ul"),$list.show(),n.find("div.container").css("min-height",$list.outerHeight()+"px")}function u(e){return $selected=o.find("section#team-"+e),$selected.length?(o.find(".selected div").remove(),o.find(".selected").removeClass("selected"),o.find("div.team").hide(),$selected.find("a.action").addClass("selected"),$list=$selected.find("div.team"),$list.show(),o.find("div.container").css("min-height",$list.outerHeight()+"px"),!0):!1}var e=getGreenhouseSource();e&&$('a[href^="/jobs"]').each(function(){var t=$(this),n=t.attr("href");t.attr("href",addGreenhouseSourceToHref(n,e))});var t=window.location.hash,n=$("#openings");n.find("h2 .action").click(function(e){e.preventDefault()}).mouseover(function(){var e=$(this).attr("href").substring(1);r(e),changeHash(e)}),n.find(".country-filter select").on("change",function(){var e=this.value,t=n.find(".country-filter .label").text(e),i=n.find(".country-filter .flag").removeClass(),s=flagClassForLocation(e);s?i.addClass("flag").addClass(s):i.addClass("flag hide");if(e==="All locations"){n.find("section, li").removeClass("hide");return}n.find("section, li").addClass("hide"),n.find("li").each(function(t,n){var r=$(n);$.each(r.data("locations"),function(t,n){if(n===e)return r.removeClass("hide"),!1})});var o=n.find("section:has(li:not(.hide))").removeClass("hide");r(o.first().attr("id").replace(/^openings-/,""))}),$("a[href*=#]:not(.action):not([href=#])").click(function(){handleHash(n,"openings",$(this).attr("href"),r)}),n.length&&(handleHash(n,"openings",t,r)||r(n.find("section").first().attr("id").replace(/^openings-/,"")));if($("#grnhse_app").length){var i=Grnhse.Iframe.load($("#grnhse_app").data("id")),s=!0;window.setTimeout(function(){$("iframe").on("load",function(){s?s=!1:(window.scrollTo(0,0),i.htmlElement.height="400px")})},1)}var o=$("#engineering-teams");o.find("h2 a.action").click(function(e){e.preventDefault()}).mouseover(function(){var e=$(this).attr("href").substring(1);u(e),changeHash(e)}),$("a[href*=#]:not(.action):not([href=#])").click(function(){handleHash(o,"team",$(this).attr("href"),u,$(".container"))}),window.setTimeout(function(){handleHash(o,"team",t,u)},200)});