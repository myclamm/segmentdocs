function tryItNow(){function p(){if(t!="finish"){if(t=="card"&&!c)return;$.getJSON("/docs/demos/quickstart",{step:t,query:encodeURIComponent(f)},function(e){e&&e.step&&e.step!=t&&(window.Analytics&&typeof Analytics.action=="function"&&Analytics.action("quickstart_demo",{step:t,object:e.object}),s=e,a&&d())}).always(function(){++o<u&&setTimeout(function(){p()},1e3)})}}function d(r){if(s){v(t,s.object),t=="card"&&c&&(s.object=c),r||b(t,s);var i=t;t=s.step,f=s.query,n++,e.find('.try-now-header [data-step="'+t+'"] [data-description]').each(function(){$(this).text(s.description[$(this).attr("data-description")])});if(t!="finish"){var o=e.find('.tabs-tab[data-step="'+t+'"] code');o.html(s.request),Prism.highlightElement(o.get(0)),e.find(".usage .info").text("Copy and run this curl request in your Terminal."),e.find(".usage").show(),e.find(".tip").hide()}else e.find(".usage").hide(),e.find(".tip").show();setTimeout(function(){m(t)},r?100:2e3),s=null}}function v(t,n){e.find(".success.active").removeClass("active");var r=e.find('.success[data-step="'+t+'"]');n&&n.id?(r.find(".object").text(n.id),r.addClass("active completed")):r.hasClass("completed")&&r.addClass("active")}function m(t,i){var s=e.find('nav [data-step="'+t+'"]').index();if(s>n||s==r)return!1;e.find("nav .active").removeClass("active").addClass("completed"),e.find('nav [data-step="'+t+'"]').addClass("active"),e.find(".try-now-header .active").removeClass("active"),e.find('.try-now-header [data-step="'+t+'"]').addClass("active"),tabs.select(e.find(".tabs").get(0),e.find('.tabs-tab[data-step="'+t+'"]').get(0),i),v(t),r=s}function g(t){setTimeout(function(){var n=t.number,r=[];for(i=0,len=n.length;i<len;i+=4)r.push(n.substring(i,i+4));r.length&&(n=r.join(" ")),y(e.find(".card-form .card-number"),n),y($(e.find(".tabs-tab[data-step=card] .token.string")[0]),t.number,!0)},1500),setTimeout(function(){y(e.find(".card-form .card-exp"),t.exp_month+" / "+(""+t.exp_year).substring(2)),y($(e.find(".tabs-tab[data-step=card] .token.number")[0]),t.exp_month)},2800),setTimeout(function(){y($(e.find(".tabs-tab[data-step=card] .token.number")[1]),t.exp_year)},3100),setTimeout(function(){y(e.find(".card-form .card-cvc"),t.cvc),y($(e.find(".tabs-tab[data-step=card] .token.string")[1]),t.cvc,!0)},3300),setTimeout(function(){h.addClass("glowing")},3500)}function y(e,t,n){var r=0,i=setInterval(function(){var s=String(t).substring(0,r++);n&&(s="'"+s.replace(/\s/g,"")+"'"),$(e).prop("tagName")==="INPUT"?$(e).val(s):$(e).text(s),r>t.length&&clearInterval(i)},60)}function b(e,t){typeof window.sessionStorage!="undefined"&&(sessionStorage.setItem("quickstart_demo_timestamp",(new Date).getTime()),sessionStorage.setItem("quickstart_demo_"+e,JSON.stringify(t)))}function w(){t="card",n=0,c="",e.find(".card-form button").text("Submit").removeAttr("disabled"),e.find('nav li:not([data-step="card"])').removeClass("completed"),e.find(".success.completed").removeClass("completed active");if(typeof window.sessionStorage!="undefined")for(var r=sessionStorage.length-1;r>=0;r--)sessionStorage.key(r).indexOf("quickstart_demo")>-1&&sessionStorage.removeItem(sessionStorage.key(r))}function E(){if(typeof window.sessionStorage!="undefined"){var e=sessionStorage.getItem("quickstart_demo_timestamp");if(!e||e<(new Date).getTime()-36e5)return w(),!1;var n=sessionStorage.getItem("quickstart_demo_"+t);if(n)try{var r=JSON.parse(n);s=r,d(!0),m(t,!1),E(),r.step=="customer"&&p()}catch(i){}}}function S(){a=!1}function x(){a=!0,o>=u&&(o=0,p()),setTimeout(d,100)}var e=$(".try-now"),t="card",n=0,r=0,s,o=0,u=60,a=!0,f="",l={number:"4242424242424242",exp_month:12,exp_year:(new Date).getFullYear()+1,cvc:"123"},c;E(),g(l);var h=e.find(".card-form button");h.removeAttr("disabled"),h.click(function(){return h.attr("disabled","disabled"),Stripe.card.createToken(l,function(e,n){e==200&&(h.text("Success!"),w(),c=n,v(t,c),f=n.id,p())}),!1}),e.find("nav li").click(function(){m($(this).attr("data-step"))}),e.find(".restart").click(function(){return m("card",!0),w(),!1}),window.addEventListener("blur",S),window.addEventListener("focus",x),page.onPageChange(function(){window.removeEventListener("blur",S),window.removeEventListener("focus",x)})};