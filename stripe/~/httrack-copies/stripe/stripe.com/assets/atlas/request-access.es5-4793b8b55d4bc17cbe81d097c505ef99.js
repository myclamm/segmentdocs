(function(){"use strict";function e(e,t){if(!("Analytics"in window))return;t?window.Analytics.action(e,{result:t}):window.Analytics.action(e)}var t=document.getElementById("overlay");t.style.display="none";var n=function(n){t.removeAttribute("style"),t.offsetTop,document.documentElement.classList.add("no-scroll"),t.className="active",a.className="modal-in",document.querySelector("#full-name").focus(),n&&n.preventDefault()},r=function(n){document.documentElement.classList.remove("no-scroll"),t.removeAttribute("class"),a.removeAttribute("class"),setTimeout(function(){t.style.display="none"},800),n&&n.preventDefault()},i=["#main-content header","#end-actions"].map(function(e){return e+" .request-access .main-action"});i.push("[href='#request-access']"),i.forEach(function(e){return document.querySelector(e).addEventListener("click",n)});var s=t.querySelector(".close");s.addEventListener("click",r),window.addEventListener("keydown",function(e){t.classList.contains("active")&&e.keyCode==27&&r()});var o=Array.prototype.slice.call(t.querySelectorAll("#modal label + *"));o.forEach(function(e){var t=e.parentNode;e.value&&e.tagName.toLowerCase()==="input"&&t.classList.add("done"),t.addEventListener("click",function(){e.focus()}),e.addEventListener("focus",function(){t.classList.add("done")}),e.addEventListener("blur",function(){if(e.value)return;t.classList.remove("done")})});var u=document.getElementById("thanks"),a=document.getElementById("modal"),f=a.querySelector("form");a.addEventListener("animationend",function(){a.className="animation-end"}),f.addEventListener("submit",function(t){t.preventDefault();var n=!0;o.forEach(function(e){e.validity.valid?e.parentNode.classList.remove("invalid"):(n=!1,e.parentNode.classList.add("invalid"))});var i=document.querySelector(".field.country");i.classList.contains("done")?i.classList.remove("invalid"):(n=!1,i.classList.add("invalid"));if(!n){a.className="error-shake";return}e("request_access"),$.ajax({url:"/atlas",type:"POST",data:$(f).serialize(),dataType:"json",success:function(){u.classList.add("active"),setTimeout(r,2e3),e("request_access_ajax","success")},error:function(){console.log(arguments),e("request_access_ajax","error")}})}),location.hash=="#request-access"&&setTimeout(n,2200)})();