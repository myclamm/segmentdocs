<!doctype html>
<!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7 documentation"> <![endif]-->
<!--[if IE 7]> <html class="lt-ie9 lt-ie8 documentation"> <![endif]-->
<!--[if IE 8]> <html class="lt-ie9 documentation"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="documentation"> <!--<![endif]-->


<html xmlns="http://www.w3.org/1999/xhtml">
  
<!-- Mirrored from documentation.mailgun.com/api-events.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 14 Jan 2017 00:06:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>API Reference &#8212; Mailgun API  documentation</title>
    
    <link rel="stylesheet" href="_static/adctheme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Mailgun API  documentation" href="index-2.html" />
    <link rel="next" title="Introduction" href="api-intro.html" />
    <link rel="prev" title="Libraries" href="api-libraries.html" />
    <link media="only screen and (max-device-width: 480px)" href="_static/mobile.css" type="text/css" rel="stylesheet" />

    <link rel="icon" type="image/png" href="_static/img/favicon.png" />

    <!-- <link rel="stylesheet" href="_static/docs.css" /> -->
    <link rel="stylesheet" href="https://www.mailgun.com/static/css/main.css" />
    <meta name="viewport" content="width=device-width">
    
    <!-- CUSTOM CSS -->
    <style type="text/css">

    header {
      background-image: none !important;
      position:fixed;
    }

    .header-nav a {
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        color: #49B882;
        display: block;
        float: left;
        font-family: 'Titillium Web', Lato, 'Helvetica Neue', Helvetica, Arial, 'Lucida Grande', sans-serif !important;
        font-weight: 100 !important;
        font-size: 14px;
        line-height: 50px;
        padding: 10px 10px;
        text-decoration: none;
        text-transform: none;
    }
    .header-nav {
        float: left;
    }

    .segment-logo {
      float: left;
      background: url("https://cdn.brandisty.com/img?id=57852bda6b49441340000023&format=png&w=600&h=557");
      background-size: 50px 50px;
      background-repeat: no-repeat;
      display: block;
      margin-right:20px;
      position: relative;
      width: 50px;
      height: 50px;
      margin-top: 10px;
    }
    .documentation .subnav {
      background-image: none;
      background-color: #00386c;
      position:fixed;
      top:70px;
    }
    .documentation .subnav li.active a {
      background-image: none;
      background-color: #49b882;
    }
    body {
      font-family:none;
    }
       .documentation .main.main-with-subnav .sphinxsidebarwrapper {
      top: 80px;
    }
    .documentation .document .section h2 {
    padding-top: 120px;
}

.documentation .document .section h1 {
    padding-top: 120px;
}
    .documentation .document .section .section {
    margin-top: 160px;
}
.documentation .sphinxsidebarwrapper {
    margin: 0;
    padding: 80px 0;
    color:#00386C;
}

.documentation .main.main-with-subnav .sphinxsidebarwrapper {
     top: 45px; 
}
.documentation .subnav.subnav-fixed {
    position: fixed;
    top: 70px;
    width: 100%;
    z-index: 99;
}

    </style>
    <!-- CUSTOM CSS -->

<!-- i2a tracking code-->
<script type="text/javascript"
  src="_static/i2a.js">
</script>

<!-- GA pageLoadVars -->
<script type="text/javascript">
    var pageLoadVars = {
      'visitor_type' : 'Customer',
      'customer_type' : "",
      'coupon_id' : "",
      'signup_state' : 'Inactive',
      'bamGAVPV' : "",
      'customer_action': []
    }
</script>


  </head>
  <body role="document">

<!-- Google Tag Manager -->
<noscript><iframe src="http://www.googletagmanager.com/ns.html?id=GTM-WN2J6"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script type="text/javascript" src="_static/google_tag_manager.js"></script>

<!-- SVG Icons -->
<svg display="none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="517" height="32" viewBox="0 0 517 32">
<defs>
<g id="icon-search">
  <path class="path1" d="M0 14.857q0-2.554 0.991-4.884t2.679-4.018 4.018-2.679 4.884-0.991 4.884 0.991 4.018 2.679 2.679 4.018 0.991 4.884q0 3.929-2.214 7.125l6.125 6.125q0.661 0.661 0.661 1.607 0 0.929-0.679 1.607t-1.607 0.679q-0.964 0-1.607-0.679l-6.125-6.107q-3.196 2.214-7.125 2.214-2.554 0-4.884-0.991t-4.018-2.679-2.679-4.018-0.991-4.884zM4.571 14.857q0 3.304 2.348 5.652t5.652 2.348 5.652-2.348 2.348-5.652-2.348-5.652-5.652-2.348-5.652 2.348-2.348 5.652z"></path>
</g>
<g id="icon-menu">
  <path class="path1" d="M0 26.286v-2.286q0-0.464 0.339-0.804t0.804-0.339h25.143q0.464 0 0.804 0.339t0.339 0.804v2.286q0 0.464-0.339 0.804t-0.804 0.339h-25.143q-0.464 0-0.804-0.339t-0.339-0.804zM0 17.143v-2.286q0-0.464 0.339-0.804t0.804-0.339h25.143q0.464 0 0.804 0.339t0.339 0.804v2.286q0 0.464-0.339 0.804t-0.804 0.339h-25.143q-0.464 0-0.804-0.339t-0.339-0.804zM0 8v-2.286q0-0.464 0.339-0.804t0.804-0.339h25.143q0.464 0 0.804 0.339t0.339 0.804v2.286q0 0.464-0.339 0.804t-0.804 0.339h-25.143q-0.464 0-0.804-0.339t-0.339-0.804z"></path>
</g>
<g id="icon-dropdown">
  <path d="M124.452,10.121 L118.343,4.01 C116.225,2.001 113.753,0.996 110.93,0.996 C108.05,0.996 105.606,2.001 103.596,4.01 L64,43.607 L24.404,4.011 C22.394,2.002 19.95,0.997 17.071,0.997 C14.247,0.997 11.775,2.002 9.657,4.011 L3.628,10.122 C1.564,12.185 0.532,14.657 0.532,17.536 C0.532,20.469 1.565,22.913 3.628,24.868 L56.667,77.907 C58.623,79.971 61.066,81.003 64,81.003 C66.879,81.003 69.35,79.971 71.413,77.907 L124.452,24.868 C126.462,22.858 127.468,20.414 127.468,17.536 C127.468,14.711 126.462,12.24 124.452,10.121 L124.452,10.121 Z" id="Shape" sketch:type="MSShapeGroup"></path>
</g>
</defs></svg>

<header>
  <div class="container">
      <a href="../../../../../segment.com/index.html"><div href="http://www.mailgun.com/" class="segment-logo"></div></a>
      <nav class="header-nav" id="js-header-nav" style="font-family:Aleo-regular">
          <a href="../../../../../twilio/www.twilio.com/docs/index.html" class="pricing-link"><b style="font-weight:100; font-size:20px">Docs</b></a>
          <a href="quickstart.html" class="customers-link"><b style="font-weight:100">Quickstarts</b></a>
          <div class="dropdown">
                    <a href="http://www.mailgun.com/sending-email" class="js-dropdown-toggle"><b >API Reference 
</b></a>
                    <nav class="dropdown-menu">
                        <a href="http://www.mailgun.com/sending-email">Sending email</a>
                        <a href="http://www.mailgun.com/inbound-routing">Inbound routing</a>
                        <a href="http://www.mailgun.com/analytics">Tracking &amp; analytics</a>
                        <a href="http://www.mailgun.com/email-validation">Email validation</a>
                        <a href="http://www.mailgun.com/deliverability">Deliverability</a>
                    </nav>
                </div>
                <div class="dropdown">
                    <a href="api-libraries.html" ><b style="font-weight:100">Libraries 
</b></a>
 <!--                    <nav class="dropdown-menu">
                        <a href="index.html">Docs</a>
                        <a href="http://resources.mailgun.com/index.html">Guides</a>
                        <a href="http://blog.mailgun.com/">Blog</a>
                    </nav> -->
                </div>
                <a href="api-integrations.html" class="managed-link"><b style="font-weight:100">Integration Catalog</b></a>
                <a href="api-cloud-apps.html" class="contact-link"><b style="font-weight:100">Cloud-App Sources Catalog</b></a>
                <a href="api-warehouse.html" class="contact-link"><b style="font-weight:100">Connect Warehouse</b></a>

      </nav>
      <button id="js-show-nav"><svg class="icon icon-menu" viewBox="0 0 30 32"><use xlink:href="#icon-menu"></use></svg></button>
  </div>
</header>

<div id="body">
  <section class="subnav">
    <div class="container">
      <a href="https://github.com/mailgun/documentation" class="edit-docs-link" onclick="mixpanel.track('Clicked Edit Docs Link');">Edit</a>
      <ul id="headerButtons" class="nav nav-pills">
        <li class="lang-label">
          Code sample preference:
        </li>
        <li class="lang">
          <a href="#" id="lang_bash" >curl</a>
        </li>
        <li class="lang">
          <a href="#" id="lang_rb" >Ruby</a>
        </li>
        <li class="lang">
          <a href="#" id="lang_py" >Python</a>
        </li>
        <li class="lang">
          <a href="#" id="lang_php" >PHP</a>
        </li>
        <li class="lang">
          <a href="#" id="lang_java" >Java</a>
        </li>
        <li class="lang">
          <a href="#" id="lang_csharp" >C#</a>
        </li>
        <li class="lang">
          <a href="#" id="lang_go" >Go</a>
        </li>
        <div id="searchbox" style="display: none" class="search-box">
          
          <form>
            <!-- <svg class="icon icon-search" viewBox="0 0 32 32"><use xlink:href="#icon-search"></use></svg>
            <input type="search" id="st-search-input" class="prettysearch search-input" autofocus /> -->
          <!--<form class="search" action="search.html" method="get">-->
            <!--<div class="search-wrapper">
              <span class="search-left"></span>
              <input class="prettysearch" type="text" name="q" size="18"/>
              <span class="search-right">&nbsp;</span>
            </div>
            <input type="submit" value="Search" class="searchbutton" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />-->
          </form>
        </div>
        <script type="text/javascript">$('#searchbox').show(0);</script>

        <!--
        <li id="page_buttons">
          <div class="headerButton"><a href="api-intro.html" title="Introduction" accesskey="N">next</a></div>
          <div class="headerButton"><a href="libraries.html" title="Libraries" accesskey="P">previous</a></div>
        </li>
        -->
      </ul>
    </div>
  </section>

  <section class="main">

  <section class="main">

    <div class="container">


  
  <aside id="sphinxsidebar" class="docs-sidebar" style="color:#00386C">
    <div class="sphinxsidebarwrapper">
      <!-- <ul><li class="toctree-l1"><a href="index.html">Main Page</a></li></ul> -->
              <ul class="current">
<!-- <li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_manual.html">User Manual</a></li> -->
<!-- <li class="toctree-l1"><a class="reference internal" href="libraries.html">Libraries</a></li> -->
<li class="toctree-l1"><a class="reference internal" href="api-events.html">API Reference</a><ul class="current">

<!-- <li class="toctree-l2"><a class="reference internal" href="api-sending.html">Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-domains.html">Domains</a></li> -->
<li class="toctree-l2 current "><a class="current reference internal" href="#introduction"><b>Introduction</b></a><ul>
  <li class="toctree-l3"><a class="reference internal" href="#event-types">Event Types</a></li>
  <li class="toctree-l3"><a class="reference internal" href="#event-structure">Event Structure</a></li>
  <li class="toctree-l3"><a class="reference internal" href="#context">Context</a></li>
  <li class="toctree-l3"><a class="reference internal" href="#commonfields">Common Fields</a></li>
  <li class="toctree-l3"><a class="reference internal" href="#timestamps">Timestamps</a></li>
</ul>

<li class="toctree-l2 current "><a class=" reference internal" href="#events"><b>Events</b></a><ul>
  <li class="toctree-l3"><a class="reference internal" href="#examples">Track</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-range">Identify</a></li>
<li class="toctree-l3"><a class="reference internal" href="#event-polling">Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-options">Screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-field">Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-expression">Alias</a></li>


</ul>


</li>

<li class="toctree-l2"><a class="reference internal" href="#ecommerce"><b>Ecommerce Spec</b></a></li>
<li class="toctree-l2"><a class="reference internal" href="#industryspecs"><b>Industry Specific Specs</b></a></li>

</ul>
</li>

</ul>


  </aside>

  

    <div class="document">
  <div id="st-results-container"></div>
        <div class="documentwrapper">
          <div class="bodywrapper">
            <div class="body">
              

 <div class="section" id="eventss">
<span id="introduction"></span><h1>The Tracking API<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>The Segment Tracking API has six components. First, it outlines the semantic definition of the customer data we capture across all of our libraries and APIs. There are six API calls in the Spec. They each represent a distinct type of semantic information about a customer. Every call shares the same common fields.</p>
<ul>
<li><a href="#examples">Track</a></li>
<li><a href="#examples">Identify</a></li>
<li><a href="#examples">Page</a></li>
<li><a href="#examples">Screen</a></li>
<li><a href="#examples">Group</a></li>
<li><a href="#examples">Alias</a></li>
</ul>
</div>

  <div class="section" id="events">
<span id="events"></span><h1>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h1>
<p>The Segment Tracking API has six components. First, it outlines the semantic definition of the customer data we capture across all of our libraries and APIs. There are six API calls in the Spec. They each represent a distinct type of semantic information about a customer. Every call shares the same common fields.</p>

<ul>
<li><a href="#examples">Track</a></li>
<li><a href="#examples">Identify</a></li>
<li><a href="#examples">Page</a></li>
<li><a href="#examples">Screen</a></li>
<li><a href="#examples">Group</a></li>
<li><a href="#examples">Alias</a></li>
</ul>
<div class="highlight-url"><div class="highlight"><pre><span></span>GET /&lt;domain&gt;/events
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Events API replaces the deprecated Logs API endpoint. You should
use the Events API moving forward.</p>
</div>
<p>A request should define a time range and can specify a set of filters to apply.
In response, a page of events is returned along with URLs that can be used to
retrieve the next and previous result pages. To traverse the entire range, you
should keep requesting the next page URLs returned returned along with result
pages until an empty result page is reached.</p>
<p>Both next and previous page URLs are always returned, even when retrieving one
of them makes no sense. There are two such cases: previous page URL for the first
result page, and next page URL for the last result page; requesting these URLs
always returns an empty result page.</p>
<div class="section" id="examples">
<h2>Track<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Fetches the first page of log records that are older than <code class="docutils literal"><span class="pre">Fri,</span> <span class="pre">3</span> <span class="pre">May</span> <span class="pre">2013</span> <span class="pre">09:00:00</span> <span class="pre">-0000</span></code>
and correspond to delivery to <code class="docutils literal"><span class="pre">joe&#64;example.com</span></code>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -s --user <span class="s1">&#39;api:YOUR_API_KEY&#39;</span> -G <span class="se">\</span>
      https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events <span class="se">\</span>
      --data-urlencode <span class="nv">begin</span><span class="o">=</span><span class="s1">&#39;Fri, 3 May 2013 09:00:00 -0000&#39;</span> <span class="se">\</span>
      --data-urlencode <span class="nv">ascending</span><span class="o">=</span>yes <span class="se">\</span>
      --data-urlencode <span class="nv">limit</span><span class="o">=</span><span class="m">25</span> <span class="se">\</span>
      --data-urlencode <span class="nv">pretty</span><span class="o">=</span>yes <span class="se">\</span>
      --data-urlencode <span class="nv">recipient</span><span class="o">=</span>joe@example.com
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">javax.ws.rs.client.Client</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.ClientBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.WebTarget</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.ws.rs.core.Form</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.glassfish.jersey.client.authentication.HttpAuthenticationFeature</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MGSample</span> <span class="o">{</span>

    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ClientResponse</span> <span class="nf">GetLogs</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ClientBuilder</span><span class="o">.</span><span class="na">newClient</span><span class="o">();</span>
        <span class="n">client</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">HttpAuthenticationFeature</span><span class="o">.</span><span class="na">basic</span><span class="o">(</span>
            <span class="s">&quot;api&quot;</span><span class="o">,</span>
            <span class="s">&quot;YOUR_API_KEY&quot;</span>
        <span class="o">));</span>

        <span class="n">WebTarget</span> <span class="n">mgRoot</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">mgRoot</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/{domain}/events&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;domain&quot;</span><span class="o">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;begin&quot;</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;ascending&quot;</span><span class="o">,</span> <span class="s">&quot;yes&quot;</span><span class="o">);</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;limit&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;pretty&quot;</span><span class="o">,</span> <span class="s">&quot;yes&quot;</span><span class="o">);</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;recipient&quot;</span><span class="o">,</span> <span class="s">&quot;joe@example.com&quot;</span><span class="o">);</span>
            <span class="o">.</span><span class="na">request</span><span class="o">()</span>
            <span class="o">.</span><span class="na">buildGet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">ClientResponse</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1"># Include the Autoloader (see &quot;Libraries&quot; for install instructions)</span>
<span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailgun\Mailgun</span><span class="p">;</span>

<span class="c1"># Instantiate the client.</span>
<span class="nv">$mgClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailgun</span><span class="p">(</span><span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">);</span>
<span class="nv">$domain</span> <span class="o">=</span> <span class="s1">&#39;YOUR_DOMAIN_NAME&#39;</span><span class="p">;</span>
<span class="nv">$queryString</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;begin&#39;</span>        <span class="o">=&gt;</span> <span class="s1">&#39;Fri, 3 May 2013 09:00:00 -0000&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ascending&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span>
    <span class="s1">&#39;limit&#39;</span>        <span class="o">=&gt;</span>  <span class="mi">25</span><span class="p">,</span>
    <span class="s1">&#39;pretty&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span>
    <span class="s1">&#39;subject&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;test&#39;</span>
<span class="p">);</span>

<span class="c1"># Make the call to the client.</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$mgClient</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$domain</span><span class="s2">/events&quot;</span><span class="p">,</span> <span class="nv">$queryString</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-py"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
        <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">),</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;begin&quot;</span>       <span class="p">:</span> <span class="s2">&quot;Fri, 3 May 2013 09:00:00 -0000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ascending&quot;</span>   <span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
                <span class="s2">&quot;limit&quot;</span>       <span class="p">:</span>  <span class="mi">25</span><span class="p">,</span>
                <span class="s2">&quot;pretty&quot;</span>      <span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
                <span class="s2">&quot;recipient&quot;</span> <span class="p">:</span> <span class="s2">&quot;joe@example.com&quot;</span><span class="p">})</span>
</pre></div>
</div>
<div class="highlight-rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span>
  <span class="no">RestClient</span><span class="o">.</span><span class="n">get</span> <span class="s2">&quot;https://api:YOUR_API_KEY&quot;</span><span class="p">\</span>
  <span class="s2">&quot;@api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
   <span class="ss">:params</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="ss">:&#39;begin&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;Fri, 3 May 2013 09:00:00 -0000&#39;</span><span class="p">,</span>
    <span class="ss">:&#39;ascending&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span>
    <span class="ss">:&#39;limit&#39;</span>       <span class="o">=&gt;</span>  <span class="mi">25</span><span class="p">,</span>
    <span class="ss">:&#39;pretty&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span>
    <span class="ss">:&#39;recipient&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;joe@example.com&#39;</span>
   <span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp.Authenticators</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">EventsDateTimeRecipientChunk</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">EventsDateTimeRecipient</span> <span class="p">().</span><span class="n">Content</span><span class="p">.</span><span class="n">ToString</span> <span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">IRestResponse</span> <span class="nf">EventsDateTimeRecipient</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">RestClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span> <span class="p">();</span>
        <span class="n">client</span><span class="p">.</span><span class="n">BaseUrl</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Uri</span> <span class="p">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="p">);</span>
        <span class="n">client</span><span class="p">.</span><span class="n">Authenticator</span> <span class="p">=</span>
            <span class="k">new</span> <span class="nf">HttpBasicAuthenticator</span> <span class="p">(</span><span class="s">&quot;api&quot;</span><span class="p">,</span>
                                        <span class="s">&quot;YOUR_API_KEY&quot;</span><span class="p">);</span>
        <span class="n">RestRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestRequest</span> <span class="p">();</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;domain&quot;</span><span class="p">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">UrlSegment</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Resource</span> <span class="p">=</span> <span class="s">&quot;{domain}/events&quot;</span><span class="p">;</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;begin&quot;</span><span class="p">,</span> <span class="s">&quot;Fri, 3 May 2013 09:00:00 -0000&quot;</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;ascending&quot;</span><span class="p">,</span> <span class="s">&quot;yes&quot;</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;limit&quot;</span><span class="p">,</span> <span class="m">25</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;pretty&quot;</span><span class="p">,</span> <span class="s">&quot;yes&quot;</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;recipient&quot;</span><span class="p">,</span> <span class="s">&quot;joe@example.com&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">client</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-go"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nx">GetLog</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">Event</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">mg</span> <span class="o">:=</span> <span class="nx">mailgun</span><span class="p">.</span><span class="nx">NewMailgun</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
  <span class="nx">ei</span> <span class="o">:=</span> <span class="nx">mg</span><span class="p">.</span><span class="nx">NewEventIterator</span><span class="p">()</span>
  <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">GetFirstPage</span><span class="p">(</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">GetEventsOptions</span><span class="p">{</span>
    <span class="nx">Begin</span><span class="p">:</span>          <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">().</span><span class="nx">Add</span><span class="p">(</span><span class="o">-</span><span class="mi">50</span> <span class="o">*</span> <span class="nx">Time</span><span class="p">.</span><span class="nx">Minute</span><span class="p">),</span>
    <span class="nx">ForceAscending</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">Limit</span><span class="p">:</span>          <span class="mi">1</span><span class="p">,</span>
    <span class="nx">Filter</span><span class="p">:</span>         <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
      <span class="s">&quot;recipient&quot;</span><span class="p">:</span> <span class="s">&quot;joe@example.com&quot;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">Events</span><span class="p">(),</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sample response:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;items&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;czsjqFATSlC3QtAK-C80nw&quot;</span><span class="p">,</span>
      <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1376325780.160809</span><span class="p">,</span>
      <span class="s2">&quot;envelope&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;sender&quot;</span><span class="o">:</span> <span class="s2">&quot;me@samples.mailgun.org&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transport&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;accepted&quot;</span><span class="p">,</span>
      <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
      <span class="s2">&quot;flags&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;is-authenticated&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;is-test-mode&quot;</span><span class="o">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;foo@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130812164300.28108.52546@samples.mailgun.org&quot;</span><span class="p">,</span>
          <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;Excited User &lt;me@samples.mailgun.org&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Hello&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;attachments&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;recipients&quot;</span><span class="o">:</span> <span class="p">[</span>
          <span class="s2">&quot;foo@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;baz@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;bar@example.com&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="mi">69</span>
      <span class="p">},</span>
      <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;baz@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;method&quot;</span><span class="o">:</span> <span class="s2">&quot;http&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;paging&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;next&quot;</span><span class="o">:</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/samples.mailgun.org/events/W3siY...&quot;</span><span class="p">,</span>
    <span class="s2">&quot;previous&quot;</span><span class="o">:</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/samples.mailgun.org/events/Lkawm...&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Fetches the first page of log records that contain different types of failure,
starting from the most recent:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -s --user <span class="s1">&#39;api:YOUR_API_KEY&#39;</span> -G <span class="se">\</span>
    https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events <span class="se">\</span>
    --data-urlencode <span class="nv">event</span><span class="o">=</span><span class="s1">&#39;rejected OR failed&#39;</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">javax.ws.rs.client.Client</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.ClientBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.WebTarget</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.ws.rs.core.Form</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.glassfish.jersey.client.authentication.HttpAuthenticationFeature</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MGSample</span> <span class="o">{</span>

    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ClientResponse</span> <span class="nf">GetLogs</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ClientBuilder</span><span class="o">.</span><span class="na">newClient</span><span class="o">();</span>
        <span class="n">client</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">HttpAuthenticationFeature</span><span class="o">.</span><span class="na">basic</span><span class="o">(</span>
            <span class="s">&quot;api&quot;</span><span class="o">,</span>
            <span class="s">&quot;YOUR_API_KEY&quot;</span>
        <span class="o">));</span>

        <span class="n">WebTarget</span> <span class="n">mgRoot</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">mgRoot</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/{domain}/events&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;domain&quot;</span><span class="o">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;event&quot;</span><span class="o">,</span> <span class="s">&quot;rejected OR failed&quot;</span><span class="o">);</span>
            <span class="o">.</span><span class="na">request</span><span class="o">()</span>
            <span class="o">.</span><span class="na">buildGet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">ClientResponse</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1"># Include the Autoloader (see &quot;Libraries&quot; for install instructions)</span>
<span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailgun\Mailgun</span><span class="p">;</span>

<span class="c1"># Instantiate the client.</span>
<span class="nv">$mgClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailgun</span><span class="p">(</span><span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">);</span>
<span class="nv">$domain</span> <span class="o">=</span> <span class="s1">&#39;YOUR_DOMAIN_NAME&#39;</span><span class="p">;</span>
<span class="nv">$queryString</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;event&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;rejected OR failed&#39;</span><span class="p">);</span>

<span class="c1"># Make the call to the client.</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$mgClient</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$domain</span><span class="s2">/events&quot;</span><span class="p">,</span> <span class="nv">$queryString</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-py"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
        <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">),</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;event&quot;</span> <span class="p">:</span> <span class="s2">&quot;rejected OR failed&quot;</span><span class="p">})</span>
</pre></div>
</div>
<div class="highlight-rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span>
  <span class="no">RestClient</span><span class="o">.</span><span class="n">get</span> <span class="s2">&quot;https://api:YOUR_API_KEY&quot;</span><span class="p">\</span>
  <span class="s2">&quot;@api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
  <span class="ss">:params</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="ss">:&quot;event&quot;</span> <span class="o">=&gt;</span> <span class="s1">&#39;rejected OR failed&#39;</span>
  <span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp.Authenticators</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">EventsFailureChunk</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">EventsFailure</span> <span class="p">().</span><span class="n">Content</span><span class="p">.</span><span class="n">ToString</span> <span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">IRestResponse</span> <span class="nf">EventsFailure</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">RestClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span> <span class="p">();</span>
        <span class="n">client</span><span class="p">.</span><span class="n">BaseUrl</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Uri</span> <span class="p">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="p">);</span>
        <span class="n">client</span><span class="p">.</span><span class="n">Authenticator</span> <span class="p">=</span>
            <span class="k">new</span> <span class="nf">HttpBasicAuthenticator</span> <span class="p">(</span><span class="s">&quot;api&quot;</span><span class="p">,</span>
                                        <span class="s">&quot;YOUR_API_KEY&quot;</span><span class="p">);</span>
        <span class="n">RestRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestRequest</span> <span class="p">();</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;domain&quot;</span><span class="p">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">UrlSegment</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Resource</span> <span class="p">=</span> <span class="s">&quot;{domain}/events&quot;</span><span class="p">;</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;event&quot;</span><span class="p">,</span> <span class="s">&quot;rejected OR failed&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">client</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-go"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nx">GetLog2</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">Event</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">mg</span> <span class="o">:=</span> <span class="nx">mailgun</span><span class="p">.</span><span class="nx">NewMailgun</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
  <span class="nx">ei</span> <span class="o">:=</span> <span class="nx">mg</span><span class="p">.</span><span class="nx">NewEventIterator</span><span class="p">()</span>
  <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">GetFirstPage</span><span class="p">(</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">GetEventsOptions</span><span class="p">{</span>
    <span class="nx">Filter</span><span class="p">:</span>         <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
      <span class="s">&quot;event&quot;</span><span class="p">:</span> <span class="s">&quot;rejected OR failed&quot;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">Events</span><span class="p">(),</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;items&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;severity&quot;</span><span class="o">:</span> <span class="s2">&quot;temporary&quot;</span><span class="p">,</span>
      <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;czsjqFATSlC3QtAK-C80nw&quot;</span><span class="p">,</span>
      <span class="s2">&quot;envelope&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;sender&quot;</span><span class="o">:</span> <span class="s2">&quot;me@samples.mailgun.org&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transport&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;delivery-status&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;code&quot;</span><span class="o">:</span> <span class="mi">498</span><span class="p">,</span>
        <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;No MX for [example.com]&quot;</span><span class="p">,</span>
        <span class="s2">&quot;retry-seconds&quot;</span><span class="o">:</span> <span class="mi">900</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;No MX for [example.com]&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;reason&quot;</span><span class="o">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
      <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
      <span class="s2">&quot;flags&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;is-authenticated&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;is-test-mode&quot;</span><span class="o">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1376435471.10744</span><span class="p">,</span>
      <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;baz@example.com, bar@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130813230036.10303.40433@samples.mailgun.org&quot;</span><span class="p">,</span>
          <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;Excited User &lt;me@samples.mailgun.org&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Hello&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;attachments&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;recipients&quot;</span><span class="o">:</span> <span class="p">[</span>
          <span class="s2">&quot;baz@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;bar@example.com&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="mi">370</span>
      <span class="p">},</span>
      <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;bar@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;failed&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;paging&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;next&quot;</span><span class="o">:</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/samples.mailgun.org/events/W3siY...&quot;</span><span class="p">,</span>
    <span class="s2">&quot;previous&quot;</span><span class="o">:</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/samples.mailgun.org/events/Lkawm...&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Fetches the first page of log records written so far. Traversal is performed
starting from the most recent records to the oldest:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -s --user <span class="s1">&#39;api:YOUR_API_KEY&#39;</span> -G <span class="se">\</span>
    https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">javax.ws.rs.client.Client</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.ClientBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.WebTarget</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.ws.rs.core.Form</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.glassfish.jersey.client.authentication.HttpAuthenticationFeature</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MGSample</span> <span class="o">{</span>

    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ClientResponse</span> <span class="nf">GetLogs</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ClientBuilder</span><span class="o">.</span><span class="na">newClient</span><span class="o">();</span>
        <span class="n">client</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">HttpAuthenticationFeature</span><span class="o">.</span><span class="na">basic</span><span class="o">(</span>
            <span class="s">&quot;api&quot;</span><span class="o">,</span>
            <span class="s">&quot;YOUR_API_KEY&quot;</span>
        <span class="o">));</span>

        <span class="n">WebTarget</span> <span class="n">mgRoot</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;https://api.mailgun.net/v2&quot;</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">mgRoot</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/{domain}/events&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;domain&quot;</span><span class="o">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">request</span><span class="o">()</span>
            <span class="o">.</span><span class="na">buildGet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">ClientResponse</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1"># Include the Autoloader (see &quot;Libraries&quot; for install instructions)</span>
<span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailgun\Mailgun</span><span class="p">;</span>

<span class="c1"># Instantiate the client.</span>
<span class="nv">$mgClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailgun</span><span class="p">(</span><span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">);</span>
<span class="nv">$domain</span> <span class="o">=</span> <span class="s1">&#39;YOUR_DOMAIN_NAME&#39;</span><span class="p">;</span>

<span class="c1"># Make the call to the client.</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$mgClient</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$domain</span><span class="s2">/events&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-py"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
        <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span>
  <span class="no">RestClient</span><span class="o">.</span><span class="n">get</span> <span class="s2">&quot;https://api:YOUR_API_KEY&quot;</span><span class="p">\</span>
  <span class="s2">&quot;@api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp.Authenticators</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">EventsTraversalChunk</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">EventsTraversal</span> <span class="p">().</span><span class="n">Content</span><span class="p">.</span><span class="n">ToString</span> <span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">IRestResponse</span> <span class="nf">EventsTraversal</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">RestClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span> <span class="p">();</span>
        <span class="n">client</span><span class="p">.</span><span class="n">BaseUrl</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Uri</span> <span class="p">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="p">);</span>
        <span class="n">client</span><span class="p">.</span><span class="n">Authenticator</span> <span class="p">=</span>
            <span class="k">new</span> <span class="nf">HttpBasicAuthenticator</span> <span class="p">(</span><span class="s">&quot;api&quot;</span><span class="p">,</span>
                                        <span class="s">&quot;YOUR_API_KEY&quot;</span><span class="p">);</span>
        <span class="n">RestRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestRequest</span> <span class="p">();</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;domain&quot;</span><span class="p">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">UrlSegment</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Resource</span> <span class="p">=</span> <span class="s">&quot;{domain}/events&quot;</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">client</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-go"><div class="highlight"><pre><span></span><span class="c1">// coming soon</span>
</pre></div>
</div>
<p>Fetches the next page of log records, assuming that the URL was returned by the
previous request:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -s --user <span class="s1">&#39;api:YOUR_API_KEY&#39;</span> -G <span class="se">\</span>
    https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events/W3siYSI6IGZhbHNlLC
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">javax.ws.rs.client.Client</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.ClientBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.WebTarget</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.ws.rs.core.Form</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.glassfish.jersey.client.authentication.HttpAuthenticationFeature</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MGSample</span> <span class="o">{</span>

    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ClientResponse</span> <span class="nf">GetLogs</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ClientBuilder</span><span class="o">.</span><span class="na">newClient</span><span class="o">();</span>
        <span class="n">client</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">HttpAuthenticationFeature</span><span class="o">.</span><span class="na">basic</span><span class="o">(</span>
            <span class="s">&quot;api&quot;</span><span class="o">,</span>
            <span class="s">&quot;YOUR_API_KEY&quot;</span>
        <span class="o">));</span>

        <span class="n">WebTarget</span> <span class="n">mgRoot</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;https://api.mailgun.net/v2&quot;</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">mgRoot</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/{domain}/events/{page_id}&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;domain&quot;</span><span class="o">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;page_id&quot;</span><span class="o">,</span> <span class="s">&quot;W3siYSI6IGZhbHNlLC&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">request</span><span class="o">()</span>
            <span class="o">.</span><span class="na">buildGet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">ClientResponse</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1"># Include the Autoloader (see &quot;Libraries&quot; for install instructions)</span>
<span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailgun\Mailgun</span><span class="p">;</span>

<span class="c1"># Instantiate the client.</span>
<span class="nv">$mgClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailgun</span><span class="p">(</span><span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">);</span>
<span class="nv">$domain</span> <span class="o">=</span> <span class="s1">&#39;YOUR_DOMAIN_NAME&#39;</span><span class="p">;</span>
<span class="nv">$nextPage</span> <span class="o">=</span> <span class="s1">&#39;W3siYSI6IGZhbHNlLC&#39;</span><span class="p">;</span>

<span class="c1"># Make the call to the client.</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$mgClient</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$domain</span><span class="s2">/events/</span><span class="si">$nextPage</span><span class="s2">&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-py"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events/W3siYSI6IGZhbHNlLC&quot;</span><span class="p">,</span>
        <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span>
  <span class="no">RestClient</span><span class="o">.</span><span class="n">get</span> <span class="s2">&quot;https://api:YOUR_API_KEY&quot;</span><span class="p">\</span>
  <span class="s2">&quot;@api.mailgun.net/v3/YOUR_DOMAIN_NAME/events/W3siYSI6IGZhbHNlLC&quot;</span><span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp.Authenticators</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">EventsPaginationChunk</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">EventsPagination</span> <span class="p">().</span><span class="n">Content</span><span class="p">.</span><span class="n">ToString</span> <span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">IRestResponse</span> <span class="nf">EventsPagination</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">RestClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span> <span class="p">();</span>
        <span class="n">client</span><span class="p">.</span><span class="n">BaseUrl</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Uri</span> <span class="p">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="p">);</span>
        <span class="n">client</span><span class="p">.</span><span class="n">Authenticator</span> <span class="p">=</span>
            <span class="k">new</span> <span class="nf">HttpBasicAuthenticator</span> <span class="p">(</span><span class="s">&quot;api&quot;</span><span class="p">,</span>
                                        <span class="s">&quot;YOUR_API_KEY&quot;</span><span class="p">);</span>
        <span class="n">RestRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestRequest</span> <span class="p">();</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;domain&quot;</span><span class="p">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">UrlSegment</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Resource</span> <span class="p">=</span> <span class="s">&quot;{domain}/events/W3siYSI6IGZhbHNlLC&quot;</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">client</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-go"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nx">GetLog2</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">Event</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">mg</span> <span class="o">:=</span> <span class="nx">mailgun</span><span class="p">.</span><span class="nx">NewMailgun</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
  <span class="nx">ei</span> <span class="o">:=</span> <span class="nx">mg</span><span class="p">.</span><span class="nx">NewEventIterator</span><span class="p">()</span>
  <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">GetFirstPage</span><span class="p">(</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">GetEventsOptions</span><span class="p">{</span>
    <span class="nx">Filter</span><span class="p">:</span>         <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
      <span class="s">&quot;event&quot;</span><span class="p">:</span> <span class="s">&quot;rejected OR failed&quot;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
  <span class="nx">err</span> <span class="p">=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">GetNext</span><span class="p">()</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
  <span class="p">}</span>
  <span class="nx">events</span> <span class="o">:=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">Events</span><span class="p">()</span>
  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">events</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;No more events&quot;</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">events</span><span class="p">,</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="time-range">
<h2>Identify<a class="headerlink" href="#time-range" title="Permalink to this headline">¶</a></h2>
<p>The request time range should be given by a beginning timestamp and either an
end timestamp or a search direction.</p>
<p>If the range end timestamp is provided then the relation between the beginning
and the end timestamps determines the direction in which events are going to be
traversed. E.g. if the end timestamp is less than the beginning timestamp, then
result pages are returned from newer to older and events on the pages are sorted
in the descending order of their timestamps.</p>
<p>If the end timestamp is not provided then depending on the range direction the
result page traversal behaves differently:</p>
<ul class="simple">
<li>If the range is descending then the end timestamp is determined by the user
tariff plan retention period.</li>
<li>If the range is ascending the it is extended all the time as the time goes on.
So after the most recent events have been retrieved and an empty result page
has been reached, then requesting next page URL returned with the last page
some time later will return events that occurred since then. And this can go
on indefinitely.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Even though it seems that real-time event polling can be
implemented by traversing next URLs of an ascending time range that has no
explicit end timestamp, it is not that simple! Please refer to <a class="reference internal" href="#event-polling">Page</a>
for the proper way to do it.</p>
</div>
<p>If both the end range date and the direction of the search are specified then
they should agree with each other, otherwise the request will return an error.</p>
</div>
<div class="section" id="event-polling">
<h2>Page<a class="headerlink" href="#event-polling" title="Permalink to this headline">¶</a></h2>
<p>In our system events are generated by physical hosts and follow different
routes to the event storage, therefore the order in which they appear in the
storage and become retrievable via the events API does not correspond to the
order in which they occur. A consequences of this is that page of most recent
events returned by the events API may not contain all the events that occurred
by that time. Some of them could still be on their way to the storage engine,
and when they are eventually indexed it would appear as if they got inserted
into an already retrieved page. This system behavior makes straight forward
implementation of event polling miss some events.</p>
<p>To ensure that all your events are retrieved and accounted for please
implement polling the following way:</p>
<ol class="arabic simple">
<li>Make a request to the events API specifying an ascending time range that
begins some time in the past (e.g. half an hour ago);</li>
<li>Retrieve a result page;</li>
<li>Check the timestamp of the last event on the result page. If it is older
then some threshold age (e.g. half an hour) then go to step (4), otherwise
proceed with step (6);</li>
<li>The result page is trustworthy, use events from the page as you please;</li>
<li>Make a request using the next page URL retrieved with the result page,
proceed with step (2);</li>
<li>Discard the result page for it is not trustworthy;</li>
<li>Pause for some time (at least 15 seconds);</li>
<li>Repeat the previous request, and proceed with step (2).</li>
</ol>
</div>
<div class="section" id="query-options">
<h2>Screen<a class="headerlink" href="#query-options" title="Permalink to this headline">¶</a></h2>
<p>URL parameters allow you to manipulate the results of your query:</p>
<div class="ptable container">
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>begin</td>
<td>The beginning of the search time range. It can be specified
as a string (see <a class="reference internal" href="api-intro.html#date-format"><span class="std std-ref">Date Format</span></a>) or linux epoch seconds.
Refer to <a class="reference internal" href="#time-range">Time Range</a> for details.</td>
</tr>
<tr class="row-odd"><td>end</td>
<td>The end of the search time range. It can be specified
as a string (see <a class="reference internal" href="api-intro.html#date-format"><span class="std std-ref">Date Format</span></a>) or linux epoch seconds.
Refer to <a class="reference internal" href="#time-range">Time Range</a> for details.</td>
</tr>
<tr class="row-even"><td>ascending</td>
<td>Defines the direction of the search time range if the range
end time is not specified. Can be either <code class="docutils literal"><span class="pre">yes</span></code> or <code class="docutils literal"><span class="pre">no</span></code>.
Refer to <a class="reference internal" href="#time-range">Time Range</a> for details.</td>
</tr>
<tr class="row-odd"><td>limit</td>
<td>Number of entries to return. (300 max)</td>
</tr>
<tr class="row-even"><td><strong>&lt;field&gt;</strong></td>
<td><strong>&lt;field&gt;</strong> is the name of the <a class="reference internal" href="#filter-field">Filter Field</a>. The value of
the parameter should be a valid <a class="reference internal" href="#filter-expression">Filter Expression</a>. Several
field filters can be specified in one request. If the same
field is mentioned, more then once, then all its filter
expressions are combined with <strong>AND</strong> operator.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="filter-field">
<h2>Group<a class="headerlink" href="#filter-field" title="Permalink to this headline">¶</a></h2>
<p>Log records can be filtered by the following fields:</p>
<div class="ptable container">
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Fields</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>event</td>
<td>An event type. For a complete list of all events written to the log
see the <a class="reference internal" href="#event-types">Event Types</a> table below.</td>
</tr>
<tr class="row-odd"><td>list</td>
<td>The email address of a mailing list the message was originally
sent to.</td>
</tr>
<tr class="row-even"><td>attachment</td>
<td>A name of an attached file.</td>
</tr>
<tr class="row-odd"><td>from</td>
<td>An email address mentioned in the <cite>from</cite> MIME header.</td>
</tr>
<tr class="row-even"><td>message-id</td>
<td>A Mailgun message id returned by the messages API.</td>
</tr>
<tr class="row-odd"><td>subject</td>
<td>A subject line.</td>
</tr>
<tr class="row-even"><td>to</td>
<td>An email address mentioned in the <cite>to</cite> MIME header.</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>Message size. Mostly intended to be used with range filtering
expressions (see below).</td>
</tr>
<tr class="row-even"><td>recipient</td>
<td>An email address of a particular recipient. Even though a message
may be addressed to several recipients, delivery is tracked on
per recipient basis and every event pertains to only one recipient.</td>
</tr>
<tr class="row-odd"><td>tags</td>
<td>User defined tags.</td>
</tr>
<tr class="row-even"><td>severity</td>
<td>Temporary or Permanent. Used to filter events based on severity, if
exists. (Currently failed events only)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="filter-expression">
<h2>Alias<a class="headerlink" href="#filter-expression" title="Permalink to this headline">¶</a></h2>
<p>Possible filtering expressions are listed below:</p>
<div class="ptable container">
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Expression</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>foo bar</td>
<td>Matches field values that contain both term <code class="docutils literal"><span class="pre">foo</span></code> and
term <code class="docutils literal"><span class="pre">bar</span></code>.</td>
</tr>
<tr class="row-odd"><td>foo AND bar</td>
<td>Same as above.</td>
</tr>
<tr class="row-even"><td>foo OR bar</td>
<td>Matches field values that contain either term <code class="docutils literal"><span class="pre">foo</span></code> or
term <code class="docutils literal"><span class="pre">bar</span></code>.</td>
</tr>
<tr class="row-odd"><td>&#8220;foo bar&#8221;</td>
<td>Matches field values that literally contain <code class="docutils literal"><span class="pre">foo</span> <span class="pre">bar</span></code>.</td>
</tr>
<tr class="row-even"><td>NOT foo</td>
<td>Matches field values that do not contain term <code class="docutils literal"><span class="pre">foo</span></code>.</td>
</tr>
<tr class="row-odd"><td>&gt;10000</td>
<td>Matches values that greater then <code class="docutils literal"><span class="pre">10000</span></code>. This filter can
be applied to numeric fields only.</td>
</tr>
<tr class="row-even"><td>&gt;10000 &lt;20000</td>
<td>Matches values that are greater then <code class="docutils literal"><span class="pre">10000</span></code> and less then
<code class="docutils literal"><span class="pre">20000</span></code>. This filter can be applied to numeric fields only.</td>
</tr>
</tbody>
</table>
</div>
<p>Note that more then one expression can be used as a filter value and parenthesis
can be used to specify grouping. E.g.: <code class="docutils literal"><span class="pre">(Hello</span> <span class="pre">AND</span> <span class="pre">NOT</span> <span class="pre">Rachel)</span> <span class="pre">OR</span> <span class="pre">(Farewell</span> <span class="pre">AND</span> <span class="pre">Monica)</span></code>.</p>
</div>
<div class="section" id="event-types">
<h2>Event Types<a class="headerlink" href="#event-types" title="Permalink to this headline">¶</a></h2>
<p>Mailgun tracks all of the events that occur throughout the system. Below are
listed the events that you can retrieve using this API.</p>
<div class="ptable container">
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Event Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>accepted</td>
<td>Mailgun accepted the request to send/forward the email and the message
has been placed in queue.</td>
</tr>
<tr class="row-odd"><td>rejected</td>
<td>Mailgun rejected the request to send/forward the email.</td>
</tr>
<tr class="row-even"><td>delivered</td>
<td>Mailgun sent the email and it was accepted by the recipient
email server.</td>
</tr>
<tr class="row-odd"><td>failed</td>
<td>Mailgun could not deliver the email to the recipient email server.</td>
</tr>
<tr class="row-even"><td>opened</td>
<td>The email recipient opened the email and enabled image
viewing. Open tracking must be enabled in the Mailgun control
panel, and the CNAME record must be pointing to mailgun.org.</td>
</tr>
<tr class="row-odd"><td>clicked</td>
<td>The email recipient clicked on a link in the email.
Click tracking must be enabled in the Mailgun control
panel, and the CNAME record must be pointing to mailgun.org.</td>
</tr>
<tr class="row-even"><td>unsubscribed</td>
<td>The email recipient clicked on the unsubscribe link.
Unsubscribe tracking must be enabled in the Mailgun control
panel.</td>
</tr>
<tr class="row-odd"><td>complained</td>
<td>The email recipient clicked on the spam complaint button within
their email client. Feedback loops enable the notification to
be received by Mailgun.</td>
</tr>
<tr class="row-even"><td>stored</td>
<td>Mailgun has stored an incoming message</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="event-structure">
<h2>Event Structure<a class="headerlink" href="#event-structure" title="Permalink to this headline">¶</a></h2>
<p>Events are represented as loosely structured JSON documents. The exact event
structure depends on the event type. But there are three fields that every
event has. They are as follows:</p>
<div class="ptable container">
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>event</td>
<td>The type of the event. Events of a particular type have an
identical structure, though some fields may be optional.
For the list of event types please refer to <a class="reference internal" href="#event-types">Event Types</a>.</td>
</tr>
<tr class="row-odd"><td>timestamp</td>
<td>The time when the event was generated in the system provided
as Unix epoch seconds.</td>
</tr>
<tr class="row-even"><td>id</td>
<td>Event id. It is guaranteed to be unique within a day. It can
be used to distinguish events that have already been
retrieved when requests with overlapping time ranges are made.</td>
</tr>
</tbody>
</table>
</div>
<p>Events can change their structure as new features are added to Mailgun, but we
only add new fields and never modify or remove existing one.</p>
<p>Below you can find sample events of various types:</p>
<p><strong>Accepted:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;accepted&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;ncV2XwymRUKbPek_MIM-Gw&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1377211256.096436</span><span class="p">,</span>
  <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;envelope&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;sender&quot;</span><span class="o">:</span> <span class="s2">&quot;sender@example.com&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
  <span class="s2">&quot;flags&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;is-authenticated&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;is-test-mode&quot;</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="s2">&quot;routes&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;priority&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;expression&quot;</span><span class="o">:</span> <span class="s2">&quot;match_recipient(\&quot;.*@samples.mailgun.org\&quot;)&quot;</span><span class="p">,</span>
      <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Sample route&quot;</span><span class="p">,</span>
      <span class="s2">&quot;actions&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;stop()&quot;</span><span class="p">,</span>
        <span class="s2">&quot;forward(\&quot;http://host.com/messages\&quot;)&quot;</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;77AF5C3CA1416D93FC47AF8AD42A60AD@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe &lt;sender@example.com&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Test Subject&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;attachments&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;recipients&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="s2">&quot;recipient@example.com&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="mi">6021</span>
  <span class="p">},</span>
  <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;recipient@example.com&quot;</span><span class="p">,</span>
  <span class="s2">&quot;method&quot;</span><span class="o">:</span> <span class="s2">&quot;smtp&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Delivered:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;delivered&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;W3X4JOhFT-OZidZGKKr9iA&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1377208314.173742</span><span class="p">,</span>
  <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;envelope&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;transport&quot;</span><span class="o">:</span> <span class="s2">&quot;smtp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sender&quot;</span><span class="o">:</span> <span class="s2">&quot;postmaster@samples.mailgun.org&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sending-ip&quot;</span><span class="o">:</span> <span class="s2">&quot;184.173.153.199&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;delivery-status&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="kc">null</span>
  <span class="p">},</span>
  <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
  <span class="s2">&quot;flags&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;is-authenticated&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;is-test-mode&quot;</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;recipient@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130822215151.29325.59996@samples.mailgun.org&quot;</span><span class="p">,</span>
      <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;sender@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Sample Message&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;attachments&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;recipients&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="s2">&quot;recipient@example.com&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="mi">31143</span>
  <span class="p">},</span>
  <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;recipient@example.com&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Failed:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;pVqXGJWhTzysS9GpwF2hlQ&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1377198389.769129</span><span class="p">,</span>
  <span class="s2">&quot;severity&quot;</span><span class="o">:</span> <span class="s2">&quot;permanent&quot;</span><span class="p">,</span>
  <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;envelope&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;transport&quot;</span><span class="o">:</span> <span class="s2">&quot;smtp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sender&quot;</span><span class="o">:</span> <span class="s2">&quot;postmaster@samples.mailgun.org&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sending-ip&quot;</span><span class="o">:</span> <span class="s2">&quot;184.173.153.199&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;delivery-status&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Relay Not Permitted&quot;</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="o">:</span> <span class="mi">550</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="kc">null</span>
  <span class="p">},</span>
  <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;reason&quot;</span><span class="o">:</span> <span class="s2">&quot;bounce&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
  <span class="s2">&quot;flags&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;is-authenticated&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;is-test-mode&quot;</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;recipient@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130822185902.31528.73196@samples.mailgun.org&quot;</span><span class="p">,</span>
      <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe &lt;sender@example.com&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Test Subject&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;attachments&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;recipients&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="s2">&quot;recipient@example.com&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="mi">557</span>
  <span class="p">},</span>
  <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;recipient@example.com&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Opened:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;opened&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;-laxIqj9QWubsjY_3pTq_g&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1377047343.042277</span><span class="p">,</span>
  <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;recipient@example.com&quot;</span><span class="p">,</span>
  <span class="s2">&quot;geolocation&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;US&quot;</span><span class="p">,</span>
    <span class="s2">&quot;region&quot;</span><span class="o">:</span> <span class="s2">&quot;Texas&quot;</span><span class="p">,</span>
    <span class="s2">&quot;city&quot;</span><span class="o">:</span> <span class="s2">&quot;Austin&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
  <span class="s2">&quot;ip&quot;</span><span class="o">:</span> <span class="s2">&quot;111.111.111.111&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client-info&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;client-type&quot;</span><span class="o">:</span> <span class="s2">&quot;mobile browser&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client-os&quot;</span><span class="o">:</span> <span class="s2">&quot;iOS&quot;</span><span class="p">,</span>
    <span class="s2">&quot;device-type&quot;</span><span class="o">:</span> <span class="s2">&quot;mobile&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client-name&quot;</span><span class="o">:</span> <span class="s2">&quot;Mobile Safari&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user-agent&quot;</span><span class="o">:</span> <span class="s2">&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 6_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10B143&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130821005614.19826.35976@samples.mailgun.org&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Clicked:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;clicked&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;G5zMz2ysS6OxZ2C8xb2Tqg&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1377075564.094891</span><span class="p">,</span>
  <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;recipient@example.com&quot;</span><span class="p">,</span>
  <span class="s2">&quot;geolocation&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;US&quot;</span><span class="p">,</span>
    <span class="s2">&quot;region&quot;</span><span class="o">:</span> <span class="s2">&quot;TX&quot;</span><span class="p">,</span>
    <span class="s2">&quot;city&quot;</span><span class="o">:</span> <span class="s2">&quot;Austin&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;url&quot;</span><span class="o">:</span> <span class="s2">&quot;http://google.com&quot;</span><span class="p">,</span>
  <span class="s2">&quot;ip&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
  <span class="s2">&quot;client-info&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;client-type&quot;</span><span class="o">:</span> <span class="s2">&quot;browser&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client-os&quot;</span><span class="o">:</span> <span class="s2">&quot;Linux&quot;</span><span class="p">,</span>
    <span class="s2">&quot;device-type&quot;</span><span class="o">:</span> <span class="s2">&quot;desktop&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client-name&quot;</span><span class="o">:</span> <span class="s2">&quot;Chromium&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user-agent&quot;</span><span class="o">:</span> <span class="s2">&quot;Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/28.0.1500.71 Chrome/28.0.1500.71 Safari/537.36&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130821085807.30688.67706@samples.mailgun.org&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Unsubscribed:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;unsubscribed&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;W3X4JOhFT-OZidZGKKr9iA&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1377213791.421473</span><span class="p">,</span>
  <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;recipient@example.com&quot;</span><span class="p">,</span>
  <span class="s2">&quot;geolocation&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;US&quot;</span><span class="p">,</span>
    <span class="s2">&quot;region&quot;</span><span class="o">:</span> <span class="s2">&quot;TX&quot;</span><span class="p">,</span>
    <span class="s2">&quot;city&quot;</span><span class="o">:</span> <span class="s2">&quot;San Antonio&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
  <span class="s2">&quot;ip&quot;</span><span class="o">:</span> <span class="s2">&quot;50.51.14.451&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client-info&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;client-type&quot;</span><span class="o">:</span> <span class="s2">&quot;browser&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client-os&quot;</span><span class="o">:</span> <span class="s2">&quot;OS X&quot;</span><span class="p">,</span>
    <span class="s2">&quot;device-type&quot;</span><span class="o">:</span> <span class="s2">&quot;desktop&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client-name&quot;</span><span class="o">:</span> <span class="s2">&quot;Chrome&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user-agent&quot;</span><span class="o">:</span> <span class="s2">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.95 Safari/537.36&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130822232216.13966.79700@samples.mailgun.org&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Complained:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;complained&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;ncV2XwymRUKbPek_MIM-Gw&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1377214260.049634</span><span class="p">,</span>
  <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;foo@example.com&quot;</span><span class="p">,</span>
  <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
  <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
  <span class="s2">&quot;flags&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;is-test-mode&quot;</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;foo@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130718032413.263EE2E0926@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe &lt;sender@example.com&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;This is the subject.&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;attachments&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="mi">18937</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Stored:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;event&quot;</span><span class="o">:</span><span class="s2">&quot;stored&quot;</span><span class="p">,</span>
   <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;czsjqFATSlC3QtAK-C80nw&quot;</span><span class="p">,</span>
   <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span><span class="mf">1378335036.859382</span><span class="p">,</span>
   <span class="s2">&quot;storage&quot;</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">&quot;url&quot;</span><span class="o">:</span><span class="s2">&quot;https://api.mailgun.net/v3/domains/ninomail.com/messages/WyI3MDhjODgwZTZlIiwgIjF6&quot;</span><span class="p">,</span>
      <span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;WyI3MDhjODgwZTZlIiwgIjF6&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span><span class="p">[],</span>
   <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span><span class="p">{},</span>
   <span class="s2">&quot;flags&quot;</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">&quot;is-test-mode&quot;</span><span class="o">:</span><span class="kc">false</span>
   <span class="p">},</span>
   <span class="s2">&quot;tags&quot;</span><span class="o">:</span><span class="p">[],</span>
   <span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">&quot;headers&quot;</span><span class="o">:</span><span class="p">{</span>
         <span class="s2">&quot;to&quot;</span><span class="o">:</span><span class="s2">&quot;satshabad &lt;satshabad@mailgun.com&gt;&quot;</span><span class="p">,</span>
         <span class="s2">&quot;message-id&quot;</span><span class="o">:</span><span class="s2">&quot;CAC8xyJxAO7Y0sr=3r-rJ4C6ULZs3cSVPPqYEXLHtarKOKaOCKw@mail.gmail.com&quot;</span><span class="p">,</span>
         <span class="s2">&quot;from&quot;</span><span class="o">:</span><span class="s2">&quot;Someone &lt;someone@example.com&gt;&quot;</span><span class="p">,</span>
         <span class="s2">&quot;subject&quot;</span><span class="o">:</span><span class="s2">&quot;Re: A TEST&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;attachments&quot;</span><span class="o">:</span><span class="p">[],</span>
      <span class="s2">&quot;recipients&quot;</span><span class="o">:</span><span class="p">[</span>
         <span class="s2">&quot;satshabad@mailgun.com&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;size&quot;</span><span class="o">:</span><span class="mi">2566</span>
   <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>


<!-- TRACK DOCS START HERE-->
<div class="section" id="examples">
<h2>Track<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Fetches the first page of log records that are older than <code class="docutils literal"><span class="pre">Fri,</span> <span class="pre">3</span> <span class="pre">May</span> <span class="pre">2013</span> <span class="pre">09:00:00</span> <span class="pre">-0000</span></code>
and correspond to delivery to <code class="docutils literal"><span class="pre">joe&#64;example.com</span></code>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -s --user <span class="s1">&#39;api:YOUR_API_KEY&#39;</span> -G <span class="se">\</span>
      https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events <span class="se">\</span>
      --data-urlencode <span class="nv">begin</span><span class="o">=</span><span class="s1">&#39;Fri, 3 May 2013 09:00:00 -0000&#39;</span> <span class="se">\</span>
      --data-urlencode <span class="nv">ascending</span><span class="o">=</span>yes <span class="se">\</span>
      --data-urlencode <span class="nv">limit</span><span class="o">=</span><span class="m">25</span> <span class="se">\</span>
      --data-urlencode <span class="nv">pretty</span><span class="o">=</span>yes <span class="se">\</span>
      --data-urlencode <span class="nv">recipient</span><span class="o">=</span>joe@example.com
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">javax.ws.rs.client.Client</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.ClientBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.WebTarget</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.ws.rs.core.Form</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.glassfish.jersey.client.authentication.HttpAuthenticationFeature</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MGSample</span> <span class="o">{</span>

    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ClientResponse</span> <span class="nf">GetLogs</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ClientBuilder</span><span class="o">.</span><span class="na">newClient</span><span class="o">();</span>
        <span class="n">client</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">HttpAuthenticationFeature</span><span class="o">.</span><span class="na">basic</span><span class="o">(</span>
            <span class="s">&quot;api&quot;</span><span class="o">,</span>
            <span class="s">&quot;YOUR_API_KEY&quot;</span>
        <span class="o">));</span>

        <span class="n">WebTarget</span> <span class="n">mgRoot</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">mgRoot</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/{domain}/events&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;domain&quot;</span><span class="o">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;begin&quot;</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;ascending&quot;</span><span class="o">,</span> <span class="s">&quot;yes&quot;</span><span class="o">);</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;limit&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;pretty&quot;</span><span class="o">,</span> <span class="s">&quot;yes&quot;</span><span class="o">);</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;recipient&quot;</span><span class="o">,</span> <span class="s">&quot;joe@example.com&quot;</span><span class="o">);</span>
            <span class="o">.</span><span class="na">request</span><span class="o">()</span>
            <span class="o">.</span><span class="na">buildGet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">ClientResponse</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1"># Include the Autoloader (see &quot;Libraries&quot; for install instructions)</span>
<span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailgun\Mailgun</span><span class="p">;</span>

<span class="c1"># Instantiate the client.</span>
<span class="nv">$mgClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailgun</span><span class="p">(</span><span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">);</span>
<span class="nv">$domain</span> <span class="o">=</span> <span class="s1">&#39;YOUR_DOMAIN_NAME&#39;</span><span class="p">;</span>
<span class="nv">$queryString</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;begin&#39;</span>        <span class="o">=&gt;</span> <span class="s1">&#39;Fri, 3 May 2013 09:00:00 -0000&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ascending&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span>
    <span class="s1">&#39;limit&#39;</span>        <span class="o">=&gt;</span>  <span class="mi">25</span><span class="p">,</span>
    <span class="s1">&#39;pretty&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span>
    <span class="s1">&#39;subject&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;test&#39;</span>
<span class="p">);</span>

<span class="c1"># Make the call to the client.</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$mgClient</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$domain</span><span class="s2">/events&quot;</span><span class="p">,</span> <span class="nv">$queryString</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-py"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
        <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">),</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;begin&quot;</span>       <span class="p">:</span> <span class="s2">&quot;Fri, 3 May 2013 09:00:00 -0000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ascending&quot;</span>   <span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
                <span class="s2">&quot;limit&quot;</span>       <span class="p">:</span>  <span class="mi">25</span><span class="p">,</span>
                <span class="s2">&quot;pretty&quot;</span>      <span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
                <span class="s2">&quot;recipient&quot;</span> <span class="p">:</span> <span class="s2">&quot;joe@example.com&quot;</span><span class="p">})</span>
</pre></div>
</div>
<div class="highlight-rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span>
  <span class="no">RestClient</span><span class="o">.</span><span class="n">get</span> <span class="s2">&quot;https://api:YOUR_API_KEY&quot;</span><span class="p">\</span>
  <span class="s2">&quot;@api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
   <span class="ss">:params</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="ss">:&#39;begin&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;Fri, 3 May 2013 09:00:00 -0000&#39;</span><span class="p">,</span>
    <span class="ss">:&#39;ascending&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span>
    <span class="ss">:&#39;limit&#39;</span>       <span class="o">=&gt;</span>  <span class="mi">25</span><span class="p">,</span>
    <span class="ss">:&#39;pretty&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span>
    <span class="ss">:&#39;recipient&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;joe@example.com&#39;</span>
   <span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp.Authenticators</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">EventsDateTimeRecipientChunk</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">EventsDateTimeRecipient</span> <span class="p">().</span><span class="n">Content</span><span class="p">.</span><span class="n">ToString</span> <span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">IRestResponse</span> <span class="nf">EventsDateTimeRecipient</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">RestClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span> <span class="p">();</span>
        <span class="n">client</span><span class="p">.</span><span class="n">BaseUrl</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Uri</span> <span class="p">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="p">);</span>
        <span class="n">client</span><span class="p">.</span><span class="n">Authenticator</span> <span class="p">=</span>
            <span class="k">new</span> <span class="nf">HttpBasicAuthenticator</span> <span class="p">(</span><span class="s">&quot;api&quot;</span><span class="p">,</span>
                                        <span class="s">&quot;YOUR_API_KEY&quot;</span><span class="p">);</span>
        <span class="n">RestRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestRequest</span> <span class="p">();</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;domain&quot;</span><span class="p">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">UrlSegment</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Resource</span> <span class="p">=</span> <span class="s">&quot;{domain}/events&quot;</span><span class="p">;</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;begin&quot;</span><span class="p">,</span> <span class="s">&quot;Fri, 3 May 2013 09:00:00 -0000&quot;</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;ascending&quot;</span><span class="p">,</span> <span class="s">&quot;yes&quot;</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;limit&quot;</span><span class="p">,</span> <span class="m">25</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;pretty&quot;</span><span class="p">,</span> <span class="s">&quot;yes&quot;</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;recipient&quot;</span><span class="p">,</span> <span class="s">&quot;joe@example.com&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">client</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-go"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nx">GetLog</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">Event</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">mg</span> <span class="o">:=</span> <span class="nx">mailgun</span><span class="p">.</span><span class="nx">NewMailgun</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
  <span class="nx">ei</span> <span class="o">:=</span> <span class="nx">mg</span><span class="p">.</span><span class="nx">NewEventIterator</span><span class="p">()</span>
  <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">GetFirstPage</span><span class="p">(</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">GetEventsOptions</span><span class="p">{</span>
    <span class="nx">Begin</span><span class="p">:</span>          <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">().</span><span class="nx">Add</span><span class="p">(</span><span class="o">-</span><span class="mi">50</span> <span class="o">*</span> <span class="nx">Time</span><span class="p">.</span><span class="nx">Minute</span><span class="p">),</span>
    <span class="nx">ForceAscending</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">Limit</span><span class="p">:</span>          <span class="mi">1</span><span class="p">,</span>
    <span class="nx">Filter</span><span class="p">:</span>         <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
      <span class="s">&quot;recipient&quot;</span><span class="p">:</span> <span class="s">&quot;joe@example.com&quot;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">Events</span><span class="p">(),</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sample response:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;items&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;czsjqFATSlC3QtAK-C80nw&quot;</span><span class="p">,</span>
      <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1376325780.160809</span><span class="p">,</span>
      <span class="s2">&quot;envelope&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;sender&quot;</span><span class="o">:</span> <span class="s2">&quot;me@samples.mailgun.org&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transport&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;accepted&quot;</span><span class="p">,</span>
      <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
      <span class="s2">&quot;flags&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;is-authenticated&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;is-test-mode&quot;</span><span class="o">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;foo@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130812164300.28108.52546@samples.mailgun.org&quot;</span><span class="p">,</span>
          <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;Excited User &lt;me@samples.mailgun.org&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Hello&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;attachments&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;recipients&quot;</span><span class="o">:</span> <span class="p">[</span>
          <span class="s2">&quot;foo@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;baz@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;bar@example.com&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="mi">69</span>
      <span class="p">},</span>
      <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;baz@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;method&quot;</span><span class="o">:</span> <span class="s2">&quot;http&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;paging&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;next&quot;</span><span class="o">:</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/samples.mailgun.org/events/W3siY...&quot;</span><span class="p">,</span>
    <span class="s2">&quot;previous&quot;</span><span class="o">:</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/samples.mailgun.org/events/Lkawm...&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Fetches the first page of log records that contain different types of failure,
starting from the most recent:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -s --user <span class="s1">&#39;api:YOUR_API_KEY&#39;</span> -G <span class="se">\</span>
    https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events <span class="se">\</span>
    --data-urlencode <span class="nv">event</span><span class="o">=</span><span class="s1">&#39;rejected OR failed&#39;</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">javax.ws.rs.client.Client</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.ClientBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.WebTarget</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.ws.rs.core.Form</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.glassfish.jersey.client.authentication.HttpAuthenticationFeature</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MGSample</span> <span class="o">{</span>

    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ClientResponse</span> <span class="nf">GetLogs</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ClientBuilder</span><span class="o">.</span><span class="na">newClient</span><span class="o">();</span>
        <span class="n">client</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">HttpAuthenticationFeature</span><span class="o">.</span><span class="na">basic</span><span class="o">(</span>
            <span class="s">&quot;api&quot;</span><span class="o">,</span>
            <span class="s">&quot;YOUR_API_KEY&quot;</span>
        <span class="o">));</span>

        <span class="n">WebTarget</span> <span class="n">mgRoot</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">mgRoot</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/{domain}/events&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;domain&quot;</span><span class="o">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">&quot;event&quot;</span><span class="o">,</span> <span class="s">&quot;rejected OR failed&quot;</span><span class="o">);</span>
            <span class="o">.</span><span class="na">request</span><span class="o">()</span>
            <span class="o">.</span><span class="na">buildGet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">ClientResponse</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1"># Include the Autoloader (see &quot;Libraries&quot; for install instructions)</span>
<span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailgun\Mailgun</span><span class="p">;</span>

<span class="c1"># Instantiate the client.</span>
<span class="nv">$mgClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailgun</span><span class="p">(</span><span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">);</span>
<span class="nv">$domain</span> <span class="o">=</span> <span class="s1">&#39;YOUR_DOMAIN_NAME&#39;</span><span class="p">;</span>
<span class="nv">$queryString</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;event&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;rejected OR failed&#39;</span><span class="p">);</span>

<span class="c1"># Make the call to the client.</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$mgClient</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$domain</span><span class="s2">/events&quot;</span><span class="p">,</span> <span class="nv">$queryString</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-py"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
        <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">),</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;event&quot;</span> <span class="p">:</span> <span class="s2">&quot;rejected OR failed&quot;</span><span class="p">})</span>
</pre></div>
</div>
<div class="highlight-rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span>
  <span class="no">RestClient</span><span class="o">.</span><span class="n">get</span> <span class="s2">&quot;https://api:YOUR_API_KEY&quot;</span><span class="p">\</span>
  <span class="s2">&quot;@api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
  <span class="ss">:params</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="ss">:&quot;event&quot;</span> <span class="o">=&gt;</span> <span class="s1">&#39;rejected OR failed&#39;</span>
  <span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp.Authenticators</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">EventsFailureChunk</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">EventsFailure</span> <span class="p">().</span><span class="n">Content</span><span class="p">.</span><span class="n">ToString</span> <span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">IRestResponse</span> <span class="nf">EventsFailure</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">RestClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span> <span class="p">();</span>
        <span class="n">client</span><span class="p">.</span><span class="n">BaseUrl</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Uri</span> <span class="p">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="p">);</span>
        <span class="n">client</span><span class="p">.</span><span class="n">Authenticator</span> <span class="p">=</span>
            <span class="k">new</span> <span class="nf">HttpBasicAuthenticator</span> <span class="p">(</span><span class="s">&quot;api&quot;</span><span class="p">,</span>
                                        <span class="s">&quot;YOUR_API_KEY&quot;</span><span class="p">);</span>
        <span class="n">RestRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestRequest</span> <span class="p">();</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;domain&quot;</span><span class="p">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">UrlSegment</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Resource</span> <span class="p">=</span> <span class="s">&quot;{domain}/events&quot;</span><span class="p">;</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;event&quot;</span><span class="p">,</span> <span class="s">&quot;rejected OR failed&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">client</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-go"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nx">GetLog2</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">Event</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">mg</span> <span class="o">:=</span> <span class="nx">mailgun</span><span class="p">.</span><span class="nx">NewMailgun</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
  <span class="nx">ei</span> <span class="o">:=</span> <span class="nx">mg</span><span class="p">.</span><span class="nx">NewEventIterator</span><span class="p">()</span>
  <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">GetFirstPage</span><span class="p">(</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">GetEventsOptions</span><span class="p">{</span>
    <span class="nx">Filter</span><span class="p">:</span>         <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
      <span class="s">&quot;event&quot;</span><span class="p">:</span> <span class="s">&quot;rejected OR failed&quot;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">Events</span><span class="p">(),</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;items&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;severity&quot;</span><span class="o">:</span> <span class="s2">&quot;temporary&quot;</span><span class="p">,</span>
      <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;czsjqFATSlC3QtAK-C80nw&quot;</span><span class="p">,</span>
      <span class="s2">&quot;envelope&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;sender&quot;</span><span class="o">:</span> <span class="s2">&quot;me@samples.mailgun.org&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transport&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;delivery-status&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;code&quot;</span><span class="o">:</span> <span class="mi">498</span><span class="p">,</span>
        <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;No MX for [example.com]&quot;</span><span class="p">,</span>
        <span class="s2">&quot;retry-seconds&quot;</span><span class="o">:</span> <span class="mi">900</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;No MX for [example.com]&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;campaigns&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;reason&quot;</span><span class="o">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
      <span class="s2">&quot;user-variables&quot;</span><span class="o">:</span> <span class="p">{},</span>
      <span class="s2">&quot;flags&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;is-authenticated&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;is-test-mode&quot;</span><span class="o">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mf">1376435471.10744</span><span class="p">,</span>
      <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;headers&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;baz@example.com, bar@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;message-id&quot;</span><span class="o">:</span> <span class="s2">&quot;20130813230036.10303.40433@samples.mailgun.org&quot;</span><span class="p">,</span>
          <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;Excited User &lt;me@samples.mailgun.org&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Hello&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;attachments&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;recipients&quot;</span><span class="o">:</span> <span class="p">[</span>
          <span class="s2">&quot;baz@example.com&quot;</span><span class="p">,</span>
          <span class="s2">&quot;bar@example.com&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="mi">370</span>
      <span class="p">},</span>
      <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="s2">&quot;bar@example.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;failed&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;paging&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;next&quot;</span><span class="o">:</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/samples.mailgun.org/events/W3siY...&quot;</span><span class="p">,</span>
    <span class="s2">&quot;previous&quot;</span><span class="o">:</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/samples.mailgun.org/events/Lkawm...&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Fetches the first page of log records written so far. Traversal is performed
starting from the most recent records to the oldest:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -s --user <span class="s1">&#39;api:YOUR_API_KEY&#39;</span> -G <span class="se">\</span>
    https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">javax.ws.rs.client.Client</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.ClientBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.WebTarget</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.ws.rs.core.Form</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.glassfish.jersey.client.authentication.HttpAuthenticationFeature</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MGSample</span> <span class="o">{</span>

    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ClientResponse</span> <span class="nf">GetLogs</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ClientBuilder</span><span class="o">.</span><span class="na">newClient</span><span class="o">();</span>
        <span class="n">client</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">HttpAuthenticationFeature</span><span class="o">.</span><span class="na">basic</span><span class="o">(</span>
            <span class="s">&quot;api&quot;</span><span class="o">,</span>
            <span class="s">&quot;YOUR_API_KEY&quot;</span>
        <span class="o">));</span>

        <span class="n">WebTarget</span> <span class="n">mgRoot</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;https://api.mailgun.net/v2&quot;</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">mgRoot</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/{domain}/events&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;domain&quot;</span><span class="o">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">request</span><span class="o">()</span>
            <span class="o">.</span><span class="na">buildGet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">ClientResponse</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1"># Include the Autoloader (see &quot;Libraries&quot; for install instructions)</span>
<span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailgun\Mailgun</span><span class="p">;</span>

<span class="c1"># Instantiate the client.</span>
<span class="nv">$mgClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailgun</span><span class="p">(</span><span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">);</span>
<span class="nv">$domain</span> <span class="o">=</span> <span class="s1">&#39;YOUR_DOMAIN_NAME&#39;</span><span class="p">;</span>

<span class="c1"># Make the call to the client.</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$mgClient</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$domain</span><span class="s2">/events&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-py"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">,</span>
        <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span>
  <span class="no">RestClient</span><span class="o">.</span><span class="n">get</span> <span class="s2">&quot;https://api:YOUR_API_KEY&quot;</span><span class="p">\</span>
  <span class="s2">&quot;@api.mailgun.net/v3/YOUR_DOMAIN_NAME/events&quot;</span><span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp.Authenticators</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">EventsTraversalChunk</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">EventsTraversal</span> <span class="p">().</span><span class="n">Content</span><span class="p">.</span><span class="n">ToString</span> <span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">IRestResponse</span> <span class="nf">EventsTraversal</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">RestClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span> <span class="p">();</span>
        <span class="n">client</span><span class="p">.</span><span class="n">BaseUrl</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Uri</span> <span class="p">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="p">);</span>
        <span class="n">client</span><span class="p">.</span><span class="n">Authenticator</span> <span class="p">=</span>
            <span class="k">new</span> <span class="nf">HttpBasicAuthenticator</span> <span class="p">(</span><span class="s">&quot;api&quot;</span><span class="p">,</span>
                                        <span class="s">&quot;YOUR_API_KEY&quot;</span><span class="p">);</span>
        <span class="n">RestRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestRequest</span> <span class="p">();</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;domain&quot;</span><span class="p">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">UrlSegment</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Resource</span> <span class="p">=</span> <span class="s">&quot;{domain}/events&quot;</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">client</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-go"><div class="highlight"><pre><span></span><span class="c1">// coming soon</span>
</pre></div>
</div>
<p>Fetches the next page of log records, assuming that the URL was returned by the
previous request:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -s --user <span class="s1">&#39;api:YOUR_API_KEY&#39;</span> -G <span class="se">\</span>
    https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events/W3siYSI6IGZhbHNlLC
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">javax.ws.rs.client.Client</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.ClientBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.client.WebTarget</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.ws.rs.core.Form</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.glassfish.jersey.client.authentication.HttpAuthenticationFeature</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MGSample</span> <span class="o">{</span>

    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ClientResponse</span> <span class="nf">GetLogs</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ClientBuilder</span><span class="o">.</span><span class="na">newClient</span><span class="o">();</span>
        <span class="n">client</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">HttpAuthenticationFeature</span><span class="o">.</span><span class="na">basic</span><span class="o">(</span>
            <span class="s">&quot;api&quot;</span><span class="o">,</span>
            <span class="s">&quot;YOUR_API_KEY&quot;</span>
        <span class="o">));</span>

        <span class="n">WebTarget</span> <span class="n">mgRoot</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;https://api.mailgun.net/v2&quot;</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">mgRoot</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/{domain}/events/{page_id}&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;domain&quot;</span><span class="o">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">resolveTemplate</span><span class="o">(</span><span class="s">&quot;page_id&quot;</span><span class="o">,</span> <span class="s">&quot;W3siYSI6IGZhbHNlLC&quot;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">request</span><span class="o">()</span>
            <span class="o">.</span><span class="na">buildGet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">ClientResponse</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1"># Include the Autoloader (see &quot;Libraries&quot; for install instructions)</span>
<span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailgun\Mailgun</span><span class="p">;</span>

<span class="c1"># Instantiate the client.</span>
<span class="nv">$mgClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailgun</span><span class="p">(</span><span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">);</span>
<span class="nv">$domain</span> <span class="o">=</span> <span class="s1">&#39;YOUR_DOMAIN_NAME&#39;</span><span class="p">;</span>
<span class="nv">$nextPage</span> <span class="o">=</span> <span class="s1">&#39;W3siYSI6IGZhbHNlLC&#39;</span><span class="p">;</span>

<span class="c1"># Make the call to the client.</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$mgClient</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$domain</span><span class="s2">/events/</span><span class="si">$nextPage</span><span class="s2">&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-py"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events/W3siYSI6IGZhbHNlLC&quot;</span><span class="p">,</span>
        <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_logs</span>
  <span class="no">RestClient</span><span class="o">.</span><span class="n">get</span> <span class="s2">&quot;https://api:YOUR_API_KEY&quot;</span><span class="p">\</span>
  <span class="s2">&quot;@api.mailgun.net/v3/YOUR_DOMAIN_NAME/events/W3siYSI6IGZhbHNlLC&quot;</span><span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RestSharp.Authenticators</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">EventsPaginationChunk</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">EventsPagination</span> <span class="p">().</span><span class="n">Content</span><span class="p">.</span><span class="n">ToString</span> <span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">IRestResponse</span> <span class="nf">EventsPagination</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">RestClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span> <span class="p">();</span>
        <span class="n">client</span><span class="p">.</span><span class="n">BaseUrl</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Uri</span> <span class="p">(</span><span class="s">&quot;https://api.mailgun.net/v3&quot;</span><span class="p">);</span>
        <span class="n">client</span><span class="p">.</span><span class="n">Authenticator</span> <span class="p">=</span>
            <span class="k">new</span> <span class="nf">HttpBasicAuthenticator</span> <span class="p">(</span><span class="s">&quot;api&quot;</span><span class="p">,</span>
                                        <span class="s">&quot;YOUR_API_KEY&quot;</span><span class="p">);</span>
        <span class="n">RestRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestRequest</span> <span class="p">();</span>
        <span class="n">request</span><span class="p">.</span><span class="n">AddParameter</span> <span class="p">(</span><span class="s">&quot;domain&quot;</span><span class="p">,</span> <span class="s">&quot;YOUR_DOMAIN_NAME&quot;</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">UrlSegment</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Resource</span> <span class="p">=</span> <span class="s">&quot;{domain}/events/W3siYSI6IGZhbHNlLC&quot;</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">client</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-go"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nx">GetLog2</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">Event</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">mg</span> <span class="o">:=</span> <span class="nx">mailgun</span><span class="p">.</span><span class="nx">NewMailgun</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">apiKey</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
  <span class="nx">ei</span> <span class="o">:=</span> <span class="nx">mg</span><span class="p">.</span><span class="nx">NewEventIterator</span><span class="p">()</span>
  <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">GetFirstPage</span><span class="p">(</span><span class="nx">mailgun</span><span class="p">.</span><span class="nx">GetEventsOptions</span><span class="p">{</span>
    <span class="nx">Filter</span><span class="p">:</span>         <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
      <span class="s">&quot;event&quot;</span><span class="p">:</span> <span class="s">&quot;rejected OR failed&quot;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
  <span class="nx">err</span> <span class="p">=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">GetNext</span><span class="p">()</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
  <span class="p">}</span>
  <span class="nx">events</span> <span class="o">:=</span> <span class="nx">ei</span><span class="p">.</span><span class="nx">Events</span><span class="p">()</span>
  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">events</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;No more events&quot;</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">events</span><span class="p">,</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


            </div>
          </div>
    </div>
      <div class="clearer"></div>
    </div>

    </div> <!-- /content -->
  </section> <!-- /container -->
</div> <!-- /body --> 

    <script type="text/javascript" charset="utf-8" src="_static/toc.js"></script>
    <script type="text/javascript" charset="utf-8" src="_static/jquery.debounce.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="_static/jquery.cookie.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="_static/jquery.viewport.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="_static/samples.js"></script>
    <script type="text/javascript" charset="utf-8" src="_static/scroll_hash.js"></script>
    <script type="text/javascript" charset="utf-8" src="_static/underscore-min.js"></script>
    <script type="text/javascript">
        window.underscore = _.noConflict();
    </script>


<script type="text/javascript">
  var Swiftype = window.Swiftype || {};
  (function() {
    Swiftype.key = 'dpKXg3Qg6P5paq8LDpDu';
    Swiftype.inputElement = '#st-search-input';
    Swiftype.resultContainingElement = '#st-results-container';
    Swiftype.attachElement = '#st-search-input';
    Swiftype.renderStyle = "overlay";


    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.async = true;
    script.src = "http://swiftype.com/embed.js";
    var entry = document.getElementsByTagName('script')[0];
    entry.parentNode.insertBefore(script, entry);
  }());
</script>

<!-- Ace editor for editable code -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/ace/1.1.01/ace.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
  (function() {
    var timer;
    function waitForSwiftype() {
      if (Swiftype.Util && Swiftype.Util.pingSearchResultClick) {
        clearInterval(timer);
        Swiftype.Util.pingSearchResultClick = function(docId, query, destinationUrl, theWindow) {
          var url = Swiftype.root_url + "/api/v1/public/analytics/pc?engine_key=" + Swiftype.key + "&doc_id=" + docId + "&q=" + query;
          var queryAnchor = query.replace(/\s+/g, '-').toLowerCase();
          Swiftype.Util.pingUrl(url, destinationUrl + '?highlight=' + query + '#' + queryAnchor, theWindow);
        };
      }
    }
    timer = setInterval(waitForSwiftype, 500);
  })();

   // $('input[type=\"search\"]').wrap('<span style=\"position:relative;\"></span>').after('<i id="clear-search" class="icon-remove-sign" style=\"position:absolute; right:5px;line-height:26px;\"></i><i class="icon-search" style=\"position:absolute; left:5px;line-height:26px;\"></i>');
   // $('#clear-search').click(function(){
   //  $(this).parent().find('input').val('');
   //  $(this).parent().find('input').focus();
   // });
   // $("input").focusout(function() {this.value = "";});

    // Responsive navigation show/hide main nav
	$("#js-show-nav").click(function(){
		$("#js-header-nav").slideToggle();
	});




  // highlight nav on load
  $(document).ready(function(){
      $('.docs-sidebar li').removeClass('active');
      $('.docs-sidebar ul.current li.current a.current').parent().addClass('active');
  });




  // Make sample code snippets editable in the browser
  $('.highlight pre').click(function(){
    ace_activate(this);
  });

  // Ace editor activation
  function ace_activate(container) {
    var editor = ace.edit(container);
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/sh");
    editor.setShowPrintMargin(false);
    editor.renderer.setShowGutter(false);
    editor.setHighlightActiveLine(false);
    editor.getSession().setUseWrapMode(true);
    editor.setBehavioursEnabled(false);
    $(container).height(editor.getSession().getScreenLength() * 20);
  }

</script>

<!-- User information insertion code-->
<script type="text/javascript">
  var cp_hostname = "";
</script>
  
<script type="text/javascript"
  src="_static/insert-api-key.js">
</script>
  </body>

<!-- Mirrored from documentation.mailgun.com/api-events.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 14 Jan 2017 00:06:53 GMT -->
</html>